"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[3065],{63065:(S,b,i)=>{i.r(b),i.d(b,{BancosModule:()=>V});var d=i(74202),p=i(82817),t=i(5e3),v=i(52774),_=i(96310),u=i(20207),B=i(47745),a=i(74297),c=i(98952),l=i(59783),s=i(69808),T=i(40845),E=i(4119);function x(n,r){if(1&n&&t._UZ(0,"p-sortIcon",10),2&n){const e=t.oxw().$implicit;t.Q6J("field",e.field)}}function C(n,r){if(1&n&&(t.TgZ(0,"th",8),t._uU(1),t.YNc(2,x,1,1,"p-sortIcon",9),t.qZA()),2&n){const e=r.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",e.header," "),t.xp6(1),t.Q6J("ngIf",!e.isActions)}}function I(n,r){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,C,3,3,"th",7),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function F(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.Oqu(e.nombre)}}function Y(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"span",17),t._uU(2,"Nombre"),t.qZA(),t.YNc(3,F,2,1,"span",13),t.BQk()),2&n){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",o[e.field])}}function U(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[e.field]," ")}}function N(n,r){1&n&&(t.ynx(0),t.YNc(1,Y,4,1,"ng-container",15),t.YNc(2,U,2,1,"ng-container",16),t.BQk()),2&n&&(t.xp6(1),t.Q6J("ngSwitchCase","nombre"))}function J(n,r){if(1&n&&(t.ynx(0,18),t.TgZ(1,"span",17),t._uU(2,"Acciones"),t.qZA(),t._UZ(3,"button",19),t.BQk()),2&n){const e=t.oxw(2).$implicit,o=t.oxw();t.xp6(3),t.Q6J("routerLink",o.linkUpdate(e.id))}}function L(n,r){if(1&n&&(t.TgZ(0,"td",12),t.YNc(1,N,3,1,"ng-container",13),t.YNc(2,J,4,1,"ng-container",14),t.qZA()),2&n){const e=r.$implicit;t.Q6J("ngSwitch",e.field),t.xp6(1),t.Q6J("ngIf",!e.isActions),t.xp6(1),t.Q6J("ngIf",e.isActions)}}function $(n,r){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,L,3,3,"td",11),t.qZA()),2&n){const e=r.columns;t.xp6(1),t.Q6J("ngForOf",e)}}function M(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().new()}),t.qZA(),t.qZA()}}let P=(()=>{class n{constructor(e,o,m,g,f,y){this.route=e,this.router=o,this.bankService=m,this.companyService=g,this.loginService=f,this.breadcrumbService=y,this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,p.kn)(this.route)),this.cols=[{field:"nombre",header:"Nombre"},{header:"Acciones",isActions:!0}],this.loading=!0,this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(e=>{this.empresa=e})})}new(){this.router.navigateByUrl("/bancos/nuevo")}loadLazy(e){const o=this.idEmpresa;this.loading=!0;const g=["pageNumber="+e.first/this.perPage,`perPage=${e.rows}`];e.sortOrder&&g.push(`sortOrder=${e.sortOrder}`),e.sortField&&g.push(`sortField=${e.sortField}`),this.bankService.findAllPage(o,g.join("&")).subscribe(f=>{this.totalRecords=f.totalElements,this.banks=f.content,this.loading=!1})}loadIdEmpresa(){return new Promise(e=>{this.idEmpresa=this.loginService.getUser().empresa.id,e(void 0)})}linkUpdate(e){return`/bancos/editar/${e}`}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(v.y),t.Y36(_.J),t.Y36(u.r),t.Y36(B.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bancos"]],decls:8,vars:8,consts:[[1,"grid"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"p-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"p-table",2,3),t.NdJ("onLazyLoad",function(g){return o.loadLazy(g)}),t.YNc(5,I,2,1,"ng-template",4),t.YNc(6,$,2,1,"ng-template",5),t.YNc(7,M,2,0,"ng-template",6),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("columns",o.cols)("value",o.banks)("lazy",!0)("paginator",!0)("rows",o.perPage)("totalRecords",o.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[a.Z,c.iA,l.jx,s.sg,c.lQ,s.O5,c.fz,s.RF,s.n9,s.ED,T.Hq,E.u,d.rH],encapsulation:2}),n})();var h=i(93075),Q=i(6969),O=i(87969),D=i(31424),z=i(43724);function k(n,r){1&n&&t._UZ(0,"p-message",13)}function R(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirmDelete()}),t.qZA()}}let Z=(()=>{class n{constructor(e,o,m,g,f,y,q,K,G,W,X){this.route=e,this.router=o,this.bankService=m,this.companyService=g,this.officeService=f,this.profileService=y,this.messageService=q,this.loginService=K,this.confirmationService=G,this.fb=W,this.breadcrumbService=X}ngOnInit(){this.breadcrumbService.setItems((0,p.kn)(this.route)),this.builderForm(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(e=>{this.empresa=e,this.loadModel()})})}builderForm(){this.modelForm=this.fb.group({nombre:["",[h.kI.required]]})}submitForm(){let e,o;this.formToModel(),this.isEdit?(e=this.bankService.update(this.idEmpresa,this.model),o="Banco actualizado correctamente."):(e=this.bankService.save(this.idEmpresa,this.model),o="Banco registrado correctamente."),e.subscribe(m=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:o}),this.router.navigateByUrl(this.linkVolver)})}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.value.nombre,this.model.empresa={id:this.idEmpresa}}modelToForm(e){this.modelForm.patchValue({nombre:e.nombre})}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.route.snapshot.data.title}get nombre(){return this.modelForm.get("nombre")}loadModel(){this.isEdit=this.route.snapshot.data.isEdit,this.isEdit&&this.route.params.subscribe(e=>{this.bankService.findById(this.idEmpresa,e.id).subscribe(m=>{m&&(this.model=m,this.modelToForm(m))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.bankService.deleteById(this.idEmpresa,this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadIdEmpresa(){return new Promise(e=>{this.idEmpresa=this.loginService.getUser().empresa.id,e(void 0)})}get linkVolver(){return"/bancos"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(v.y),t.Y36(_.J),t.Y36(Q.l),t.Y36(O.H),t.Y36(l.ez),t.Y36(u.r),t.Y36(l.YP),t.Y36(h.qu),t.Y36(B.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-banco"]],decls:15,vars:6,consts:[[1,"grid"],[1,"col-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"grid","form-group"],[1,"col-12","md:col-2"],["for","nombre",1,"label-form"],[1,"col-12","md:col-4"],["formControlName","nombre","id","nombre","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre",4,"ngIf"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["severity","error","text","Ingrese nombre"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"p-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"label",5),t._uU(7,"Nombre (*)"),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"input",7),t.YNc(10,k,1,0,"p-message",8),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"button",10),t.YNc(13,R,1,0,"button",11),t._UZ(14,"button",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.modelForm),t.xp6(7),t.Q6J("ngIf",o.nombre.touched&&(null==o.nombre.errors?null:o.nombre.errors.required)),t.xp6(2),t.Q6J("disabled",!o.modelForm.valid)("label",o.textButtonAction),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(1),t.Q6J("routerLink",o.linkVolver))},directives:[a.Z,h._Y,h.JL,h.sg,h.Fj,h.JJ,h.u,D.o,s.O5,z.q,T.Hq,d.rH],encapsulation:2}),n})();var A=i(54578);const w=[{path:"",component:P,canActivate:[A.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Bancos"}]}},{path:"editar/:id",component:Z,data:{isEdit:!0,title:"Editar banco",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar banco"}]},canActivate:[A.P]},{path:"nuevo",component:Z,data:{isEdit:!1,title:"Nuevo banco",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nuevo banco"}]},canActivate:[A.P]}];let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(w)],d.Bz]}),n})();var H=i(20958);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[j,H.m]]}),n})()},87969:(S,b,i)=>{i.d(b,{H:()=>_});var d=i(92340),p=i(36644),t=i(5e3),v=i(40520);let _=(()=>{class u{constructor(a){this.http=a,this.baseUrl=d.N.endpointApi}findAllPage(a,c,l){const s=(0,p.S)(a,l);return this.http.get(`${s}/profiles?${c}`)}findAll(a,c){const l=(0,p.S)(a,c);return this.http.get(`${l}/profiles/all`)}findById(a,c,l){const s=(0,p.S)(a,l);return this.http.get(`${s}/profiles/${c}`)}save(a,c,l){const s=(0,p.S)(a,l);return this.http.post(`${s}/profiles`,c)}update(a,c,l){const s=(0,p.S)(a,l);return this.http.put(`${s}/profiles`,c)}deleteById(a,c,l){const s=(0,p.S)(a,l);return this.http.delete(`${s}/profiles/${c}`)}findAllModulesAccess(a){return this.http.get(`${this.baseUrl}/modules-access?${a}`)}}return u.\u0275fac=function(a){return new(a||u)(t.LFG(v.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);