"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[190],{10190:(F,p,i)=>{i.r(p),i.d(p,{UnidadesModule:()=>I});var r=i(74202),g=i(82817),e=i(5e3),f=i(85450),C=i(20207),h=i(85932),U=i(47745),v=i(74297),_=i(12145),u=i(93075),A=i(40845),c=i(98952),T=i(59783),m=i(69808),S=i(4119);function Z(n,d){if(1&n&&e._UZ(0,"p-sortIcon",12),2&n){const t=e.oxw().$implicit;e.Q6J("field",t.field)}}function b(n,d){if(1&n&&(e.TgZ(0,"th",10),e._uU(1),e.YNc(2,Z,1,1,"p-sortIcon",11),e.qZA()),2&n){const t=d.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",!t.isActions)}}function y(n,d){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,b,3,3,"th",9),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function x(n,d){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Oqu(o[t.field])}}function J(n,d){if(1&n){const t=e.EpF();e.ynx(0,16),e.TgZ(1,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw().removeUnitCode(s)}),e.qZA(),e.BQk()}}function M(n,d){if(1&n&&(e.TgZ(0,"td"),e.YNc(1,x,2,1,"ng-container",14),e.YNc(2,J,2,0,"ng-container",15),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function Q(n,d){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,M,3,2,"td",13),e.qZA()),2&n){const t=d.columns;e.xp6(1),e.Q6J("ngForOf",t)}}const B=[{path:"",component:(()=>{class n{constructor(t,o,s,a,l){this.unitCodeService=t,this.loginService=o,this.store=s,this.route=a,this.breadcrumbService=l,this.unitCodes=[]}ngOnInit(){this.breadcrumbService.setItems((0,g.kn)(this.route)),this.cols=[{field:"codigo",header:"C\xf3digo"},{field:"descripcion",header:"Descripci\xf3n"},{header:"Acciones",isActions:!0}],this.loading=!0,this.findUnitCodes()}filterUnitCode(t){this.unitCodeService.findAll([`filtro=${t.query}`,"porEmpresa=false"].join("&")).subscribe(a=>{a.forEach(l=>{l.showText=`${l.codigo} - ${l.descripcion}`}),this.filteredUnitCodes=a})}findUnitCodes(){this.unitCodeService.findAll(["porEmpresa=true"].join("&")).subscribe(o=>{this.unitCodes=o,this.loading=!1})}onSelect(t){this.unitCodeSelected=t}addUnitCode(){this.unitCodeSelected&&0===this.unitCodes.filter(t=>t.id===this.unitCodeSelected.id).length?this.unitCodeService.addUnitCode(this.idEmpresa,this.unitCodeSelected).subscribe(()=>{this.findUnitCodes()}):this.unitCodeSelected=null}removeUnitCode(t){this.unitCodeService.removeUnitCode(this.idEmpresa,t).subscribe(()=>{this.findUnitCodes()})}get validationButtonAdd(){return this.unitCodeSelected&&0===this.unitCodes.filter(t=>t.id===this.unitCodeSelected.id).length}validateDelete(t){"Backspace"===t.key&&this.unitCodeSelected&&(this.unitCodeSelected=null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.t),e.Y36(C.r),e.Y36(h.yh),e.Y36(r.gz),e.Y36(U.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-unidades"]],decls:12,vars:8,consts:[[1,"grid"],[1,"col-12"],[2,"margin-right","0.3rem"],["field","showText","placeholder","Buscar unidad de medida",3,"ngModel","suggestions","size","minLength","onKeyUp","ngModelChange","onSelect","completeMethod"],["pButton","","type","button","label","Agregar unidad de medida",3,"disabled","click"],["dataKey","id",3,"columns","value","autoLayout"],["dt",""],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[4,"ngFor","ngForOf"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"span",2),e.TgZ(4,"p-autoComplete",3),e.NdJ("onKeyUp",function(a){return o.validateDelete(a)})("ngModelChange",function(a){return o.unitCodeSelected=a})("onSelect",function(a){return o.onSelect(a)})("completeMethod",function(a){return o.filterUnitCode(a)}),e.qZA(),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return o.addUnitCode()}),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"Mis unidades de medida Sunat"),e.qZA(),e.TgZ(8,"p-table",5,6),e.YNc(10,y,2,1,"ng-template",7),e.YNc(11,Q,2,1,"ng-template",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngModel",o.unitCodeSelected)("suggestions",o.filteredUnitCodes)("size",30)("minLength",1),e.xp6(1),e.Q6J("disabled",!o.validationButtonAdd),e.xp6(3),e.Q6J("columns",o.cols)("value",o.unitCodes)("autoLayout",!0))},directives:[v.Z,_.Qc,u.JJ,u.On,A.Hq,c.iA,T.jx,m.sg,c.lQ,m.O5,c.fz,S.u],encapsulation:2}),n})(),data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Unidades"}]}}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.Bz.forChild(B)],r.Bz]}),n})();var $=i(20958);let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Y,$.m]]}),n})()}}]);