"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[4712],{34712:(W,d,a)=>{a.r(d),a.d(d,{ResumenDiarioModule:()=>O});var l=a(74202),g=a(82817),e=a(5e3),_=a(1203),f=a(20207),c=a(69808),h=a(24876),T=a(22313),m=a(59783),y=a(2314),D=a(24394),v=a(47745),R=a(74297),C=a(75652),p=a(93075),Z=a(98952),x=a(40845),A=a(4119),S=a(92676);const b=["dt"];function M(n,o){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function F(n,o){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,M,2,1,"th",13),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().refreshTable()}),e.qZA(),e.qZA()}}function w(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,i[t.field],"yyyy-MM-dd hh:mm a")," ")}}function J(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"estadoSummary"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,i[t.field])," ")}}function L(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[t.field]," ")}}function N(n,o){1&n&&(e.ynx(0),e.YNc(1,w,3,4,"ng-container",20),e.YNc(2,J,3,3,"ng-container",20),e.YNc(3,L,2,1,"ng-container",21),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngSwitchCase","fechaGeneracionResumen"),e.xp6(1),e.Q6J("ngSwitchCase","estado"))}function Q(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3).$implicit;return e.oxw().getStatus(r.ticketSunat)}),e.qZA()}}function $(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3).$implicit;return e.oxw().downloadFileStorage(r.cdrActivo)}),e.qZA()}}function z(n,o){if(1&n){const t=e.EpF();e.ynx(0,22),e.TgZ(1,"span",23),e._uU(2,"Acciones"),e.qZA(),e.YNc(3,Q,1,0,"button",24),e.TgZ(4,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw().downloadFileStorage(r.xmlActivo)}),e.qZA(),e.YNc(5,$,1,0,"button",26),e.BQk()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.Q6J("ngIf","98"===t.estado||"99"===t.estado),e.xp6(2),e.Q6J("ngIf","0"===t.estado)}}function k(n,o){if(1&n&&(e.TgZ(0,"td",17),e.YNc(1,N,4,2,"ng-container",18),e.YNc(2,z,6,2,"ng-container",19),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function B(n,o){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,k,3,3,"td",16),e.qZA()),2&n){const t=o.columns;e.xp6(1),e.Q6J("ngForOf",t)}}const u=function(){return{width:"100%"}},E=[{path:"ver-resumenes-diarios",component:(()=>{class n{constructor(t,i,r,s,j,P,U,G,q,X,K,V){this.route=t,this.router=i,this.ticketService=r,this.loginService=s,this.datePipe=j,this.storageService=P,this.sanitizer=U,this.messageService=G,this.tdPipe=q,this.confirmationService=X,this.ls=K,this.breadcrumbService=V,this.dataList=[],this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,g.kn)(this.route)),this.cols=[{field:"identificador",header:"Id"},{field:"fechaEmision",header:"Fecha"},{field:"estado",header:"Estado"},{field:"fechaGeneracionResumen",header:"Fecha generaci\xf3n"},{field:"ticketSunat",header:"Ticket sunat"},{field:"acciones",header:"Acciones",isActions:!0,width:"160px"}]}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}loadLazy(t){this.lastLazyLoadEvent=t;const r=["pageNumber="+t.first/this.perPage,`perPage=${t.rows}`];this.filtroDesde&&r.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy")}`),this.filtroHasta&&r.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy")}`),t.sortOrder&&r.push(`sortOrder=${t.sortOrder}`),t.sortField&&r.push(`sortField=${t.sortField}`),this.ticketService.findAllSearchSummary(r.join("&")).subscribe(s=>{this.totalRecords=s.totalElements,this.dataList=s.content,this.loading=!1})}getStatus(t){this.ticketService.getStatusSummary(t).subscribe(i=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:i.mensaje}),this.refreshTable()})}downloadFileStorage(t){this.storageService.downloadFile(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(_.w),e.Y36(f.r),e.Y36(c.uU),e.Y36(h.V),e.Y36(T.H7),e.Y36(m.ez),e.Y36(y.B),e.Y36(m.YP),e.Y36(D.E),e.Y36(v.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-resumen-diario"]],viewQuery:function(t,i){if(1&t&&e.Gf(b,7),2&t){let r;e.iGM(r=e.CRH())&&(i.tabla=r.first)}},decls:19,vars:18,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-12","md:col-3"],[1,"label-form"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","summary"],["pTemplate","body"],[4,"ngFor","ngForOf"],[2,"text-align","left"],["type","button","pButton","","label","Actualizar",3,"click"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"text-align","center"],[1,"p-column-title"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Consulta estado en Sunat","pButton","","icon","pi pi-check",3,"click",4,"ngIf"],["pTooltip","XML","pButton","","icon","fa fa-code",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","CDR","pButton","","icon","pi pi-check","class","p-button-success",3,"click",4,"ngIf"],["pTooltip","Consulta estado en Sunat","pButton","","icon","pi pi-check",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","CDR","pButton","","icon","pi pi-check",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"label",4),e._uU(6,"Desde"),e.qZA(),e.TgZ(7,"p-calendar",5),e.NdJ("onSelect",function(){return i.resetAndRefreshTable()})("ngModelChange",function(s){return i.filtroDesde=s}),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"label",4),e._uU(10,"Hasta"),e.qZA(),e.TgZ(11,"p-calendar",6),e.NdJ("onSelect",function(){return i.resetAndRefreshTable()})("ngModelChange",function(s){return i.filtroHasta=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"div",7),e.TgZ(14,"p-table",8,9),e.NdJ("onLazyLoad",function(s){return i.loadLazy(s)}),e.YNc(16,F,2,1,"ng-template",10),e.YNc(17,Y,2,0,"ng-template",11),e.YNc(18,B,2,1,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Akn(e.DdM(16,u)),e.Q6J("ngModel",i.filtroDesde)("locale",i.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(17,u)),e.Q6J("ngModel",i.filtroHasta)("locale",i.ls.calendarEs),e.xp6(3),e.Q6J("columns",i.cols)("value",i.dataList)("lazy",!0)("paginator",!0)("rows",i.perPage)("totalRecords",i.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[R.Z,C.f,p.JJ,p.On,Z.iA,m.jx,c.sg,x.Hq,c.RF,c.O5,c.n9,c.ED,A.u],pipes:[c.uU,S._],styles:[""]}),n})(),data:{breadcrumb:[{label:"Operaciones"},{label:"Facturaci\xf3n electr\xf3nica"},{label:"Resumen diario"}]}}];let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(E)],l.Bz]}),n})();var I=a(20958);let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[I.m,H]]}),n})()}}]);