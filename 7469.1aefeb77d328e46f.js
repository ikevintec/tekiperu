"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[7469],{17469:(K,f,o)=>{o.r(f),o.d(f,{MarcasModule:()=>H});var l=o(74202),_=o(82817),e=o(5e3),b=o(40038),v=o(96310),M=o(20207),T=o(47745),Z=o(74297),s=o(93075),A=o(31424),p=o(98952),d=o(59783),m=o(69808),y=o(40845),C=o(4119);const S=["dt"];function J(n,i){if(1&n&&e._UZ(0,"p-sortIcon",13),2&n){const t=e.oxw().$implicit;e.Q6J("field",t.field)}}function F(n,i){if(1&n&&(e.TgZ(0,"th",11),e._uU(1),e.YNc(2,J,1,1,"p-sortIcon",12),e.qZA()),2&n){const t=i.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",!t.isActions)}}function I(n,i){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,F,3,3,"th",10),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Y(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3).$implicit,r=e.oxw().$implicit;e.xp6(1),e.Oqu(r[t.field].nombre)}}function E(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Y,2,1,"span",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,r=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",r[t.field])}}function N(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.nombre)}}function Q(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span",20),e._uU(2,"Nombre"),e.qZA(),e.YNc(3,N,2,1,"span",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,r=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",r[t.field])}}function B(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2).$implicit,r=e.oxw().$implicit;e.xp6(1),e.hij(" ",r[t.field]," ")}}function w(n,i){1&n&&(e.ynx(0),e.YNc(1,E,2,1,"ng-container",18),e.YNc(2,Q,4,1,"ng-container",18),e.YNc(3,B,2,1,"ng-container",19),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngSwitchCase","puntoVenta"),e.xp6(1),e.Q6J("ngSwitchCase","nombre"))}function L(n,i){if(1&n&&(e.ynx(0,21),e.TgZ(1,"span",20),e._uU(2,"Acciones"),e.qZA(),e._UZ(3,"button",22),e.BQk()),2&n){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(3),e.Q6J("routerLink",r.linkUpdate(t.id))}}function U(n,i){if(1&n&&(e.TgZ(0,"td",15),e.YNc(1,w,4,2,"ng-container",16),e.YNc(2,L,4,1,"ng-container",17),e.qZA()),2&n){const t=i.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function $(n,i){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,U,3,3,"td",14),e.qZA()),2&n){const t=i.columns;e.xp6(1),e.Q6J("ngForOf",t)}}function q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().new()}),e.qZA(),e.qZA()}}let z=(()=>{class n{constructor(t,r,a,c,g,h){this.route=t,this.router=r,this.brandService=a,this.companyService=c,this.loginService=g,this.breadcrumbService=h,this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,_.kn)(this.route)),this.cols=[{field:"nombre",header:"Nombre"},{header:"Acciones",isActions:!0}],this.loading=!0,this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(t=>{this.empresa=t})})}new(){this.router.navigateByUrl("/marcas/nuevo")}loadLazy(t){this.loading=!0;const a=["pageNumber="+t.first/this.perPage,`perPage=${t.rows}`];this.nombre&&a.push(`nombre=${this.nombre}`),t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),this.brandService.findAll(a.join("&")).subscribe(c=>{this.totalRecords=c.totalElements,this.brands=c.content,this.loading=!1})}resetAndRefreshTable(){this.tabla.reset()}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}linkUpdate(t){return`/marcas/editar/${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(b.c),e.Y36(v.J),e.Y36(M.r),e.Y36(T.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-marcas"]],viewQuery:function(t,r){if(1&t&&e.Gf(S,7),2&t){let a;e.iGM(a=e.CRH())&&(r.tabla=a.first)}},decls:12,vars:9,consts:[[1,"grid"],[1,"col-6"],[1,"label-form"],["type","text","pInputText","","placeholder","Buscar por nombre",1,"derecha",2,"width","100%",3,"ngModel","ngModelChange","input"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"label",2),e._uU(4,"Buscar"),e.qZA(),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(c){return r.nombre=c})("input",function(){return r.resetAndRefreshTable()}),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"p-table",5,6),e.NdJ("onLazyLoad",function(c){return r.loadLazy(c)}),e.YNc(9,I,2,1,"ng-template",7),e.YNc(10,$,2,1,"ng-template",8),e.YNc(11,q,2,0,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngModel",r.nombre),e.xp6(2),e.Q6J("columns",r.cols)("value",r.brands)("lazy",!0)("paginator",!0)("rows",r.perPage)("totalRecords",r.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[Z.Z,s.Fj,A.o,s.JJ,s.On,p.iA,d.jx,m.sg,p.lQ,m.O5,p.fz,m.RF,m.n9,m.ED,y.Hq,C.u,l.rH],encapsulation:2}),n})();var u=o(54578),O=o(43724);function D(n,i){1&n&&e._UZ(0,"p-message",13)}function R(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmDelete()}),e.qZA()}}let x=(()=>{class n{constructor(t,r,a,c,g,h,V,G,X){this.route=t,this.router=r,this.brandService=a,this.companyService=c,this.messageService=g,this.loginService=h,this.confirmationService=V,this.fb=G,this.breadcrumbService=X}ngOnInit(){this.breadcrumbService.setItems((0,_.kn)(this.route)),this.builderForm(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(t=>{this.empresa=t,this.loadModel()})})}builderForm(){this.modelForm=this.fb.group({nombre:["",[s.kI.required]]})}submitForm(){let t,r;this.formToModel(),this.isEdit?(t=this.brandService.update(this.idEmpresa,this.model),r="Marca actualizado correctamente."):(t=this.brandService.save(this.idEmpresa,this.model),r="Marca registrado correctamente."),t.subscribe(a=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:r}),this.router.navigateByUrl(this.linkVolver)})}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.value.nombre,this.model.empresa={id:this.idEmpresa}}modelToForm(t){this.modelForm.patchValue({nombre:t.nombre})}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.route.snapshot.data.title}get nombre(){return this.modelForm.get("nombre")}loadModel(){this.isEdit=this.route.snapshot.data.isEdit,this.isEdit&&this.route.params.subscribe(t=>{this.brandService.findById(this.idEmpresa,t.id).subscribe(a=>{a&&(this.model=a,this.modelToForm(a))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.brandService.deleteById(this.idEmpresa,this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}get linkVolver(){return"/marcas"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(b.c),e.Y36(v.J),e.Y36(d.ez),e.Y36(M.r),e.Y36(d.YP),e.Y36(s.qu),e.Y36(T.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-marca"]],decls:15,vars:6,consts:[[1,"grid"],[1,"col-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"grid","form-group"],[1,"col-12","md:col-2"],["for","nombre",1,"label-form"],[1,"col-12","md:col-4"],["formControlName","nombre","id","nombre","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre",4,"ngIf"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["severity","error","text","Ingrese nombre"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return r.submitForm()}),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"Nombre (*)"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"input",7),e.YNc(10,D,1,0,"p-message",8),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"button",10),e.YNc(13,R,1,0,"button",11),e._UZ(14,"button",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",r.modelForm),e.xp6(7),e.Q6J("ngIf",r.nombre.touched&&(null==r.nombre.errors?null:r.nombre.errors.required)),e.xp6(2),e.Q6J("disabled",!r.modelForm.valid)("label",r.textButtonAction),e.xp6(1),e.Q6J("ngIf",r.isEdit),e.xp6(1),e.Q6J("routerLink",r.linkVolver))},directives:[Z.Z,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,A.o,m.O5,O.q,y.Hq,l.rH],encapsulation:2}),n})();const j=[{path:"",component:z,canActivate:[u.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Marcas"}]}},{path:"editar/:id",component:x,data:{isEdit:!0,title:"Editar marca",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar marca"}]},canActivate:[u.P]},{path:"nuevo",component:x,data:{isEdit:!1,title:"Nueva marca",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nueva marca"}]},canActivate:[u.P]}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(j)],l.Bz]}),n})();var P=o(20958);let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[k,P.m]]}),n})()}}]);