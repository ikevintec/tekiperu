"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[7831],{7831:(G,d,o)=>{o.r(d),o.d(d,{CategoriasModule:()=>j});var s=o(74202),u=o(82817),t=o(5e3),_=o(47728),f=o(96310),C=o(20207),h=o(47745),b=o(74297),x=o(67658),g=o(98952),v=o(59783),l=o(69808),y=o(40845),A=o(4119);const Z=["dt"];function T(e,i){if(1&e&&t._UZ(0,"p-sortIcon",11),2&e){const a=t.oxw().$implicit;t.Q6J("field",a.field)}}function P(e,i){if(1&e&&(t.TgZ(0,"th",9),t._uU(1),t.YNc(2,T,1,1,"p-sortIcon",10),t.qZA()),2&e){const a=i.$implicit;t.Q6J("pSortableColumn",a.field),t.xp6(1),t.hij(" ",a.header," "),t.xp6(1),t.Q6J("ngIf",!a.isActions)}}function w(e,i){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,P,3,3,"th",8),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a)}}function Q(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=t.oxw(4).$implicit;t.xp6(1),t.Oqu(a.id)}}function $(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"ID"),t.qZA(),t.YNc(3,Q,2,1,"span",14),t.BQk()),2&e){const a=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",n[a.field])}}function N(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=t.oxw(4).$implicit;t.xp6(1),t.Oqu(a.nombre)}}function J(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"Nombre"),t.qZA(),t.YNc(3,N,2,1,"span",14),t.BQk()),2&e){const a=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",n[a.field])}}function I(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=t.oxw(3).$implicit,n=t.oxw().$implicit;t.xp6(1),t.Oqu(n[a.field].nombre)}}function S(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"Zona Producci\xf3n"),t.qZA(),t.YNc(3,I,2,1,"span",14),t.BQk()),2&e){const a=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",n[a.field])}}function Y(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[a.field]," ")}}function B(e,i){1&e&&(t.ynx(0),t.YNc(1,$,4,1,"ng-container",16),t.YNc(2,J,4,1,"ng-container",16),t.YNc(3,S,4,1,"ng-container",16),t.YNc(4,Y,2,1,"ng-container",17),t.BQk()),2&e&&(t.xp6(1),t.Q6J("ngSwitchCase","id"),t.xp6(1),t.Q6J("ngSwitchCase","nombre"),t.xp6(1),t.Q6J("ngSwitchCase","areaProduccion"))}function L(e,i){if(1&e&&(t.ynx(0,19),t.TgZ(1,"span",18),t._uU(2,"Acciones"),t.qZA(),t.TgZ(3,"div",20),t._UZ(4,"button",21),t._UZ(5,"button",22),t.qZA(),t.BQk()),2&e){const a=t.oxw(2).$implicit,n=t.oxw();t.xp6(4),t.Q6J("routerLink","/categorias/"+a.id),t.xp6(1),t.Q6J("routerLink",n.linkUpdate(a.id))}}function D(e,i){if(1&e&&(t.TgZ(0,"td",13),t.YNc(1,B,5,3,"ng-container",14),t.YNc(2,L,6,2,"ng-container",15),t.qZA()),2&e){const a=i.$implicit;t.Q6J("ngSwitch",a.field),t.xp6(1),t.Q6J("ngIf",!a.isActions),t.xp6(1),t.Q6J("ngIf",a.isActions)}}function U(e,i){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,D,3,3,"td",12),t.qZA()),2&e){const a=i.columns;t.xp6(1),t.Q6J("ngForOf",a)}}function F(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).linkVolver()}),t.qZA()}}function k(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",23),t.TgZ(1,"button",24),t.NdJ("click",function(){return t.CHM(a),t.oxw().new()}),t.qZA(),t.YNc(2,F,1,0,"button",25),t.qZA()}if(2&e){const a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.canGoBack)}}const E=function(){return{icon:"fa fa-home",url:"#/categorias/0"}};let z=(()=>{class e{constructor(a,n,r,c,H,q){this.route=a,this.router=n,this.categoryService=r,this.companyService=c,this.loginService=H,this.breadcrumbService=q,this.perPage=10,this.linksCategorias=[]}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.cols=[{field:"nombre",header:"Nombre"},{field:"areaProduccion",header:"Zona de producci\xf3n"},{header:"Acciones",isActions:!0}],this.loading=!0,this.loadData(),this.route.params.subscribe(a=>{this.idCategoriaPadre=a.idCategoria?a.idCategoria:0,this.loadData(),this.tabla._filter()})}loadData(){this.loadIdEmpresaAndIdCategoriaPadre().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(a=>{this.empresa=a}),0!=this.idCategoriaPadre&&this.categoryService.findById(this.idCategoriaPadre).subscribe(a=>{this.categoriaPadre=a,this.linksCategorias=[],this.readCategoria(a)})})}new(){this.router.navigateByUrl(`/categorias/${this.idCategoriaPadre}/nuevo`)}loadLazy(a){this.loading=!0;const r=[`idCategoria=${this.idCategoriaPadre}`,"pageNumber="+a.first/this.perPage,`perPage=${a.rows}`,"paginacion=true"];a.sortOrder&&r.push(`sortOrder=${a.sortOrder}`),a.sortField&&r.push(`sortField=${a.sortField}`),this.categoryService.findAllPage(r.join("&")).subscribe(c=>{this.totalRecords=c.totalElements,this.categories=c.content,console.log("categoria",this.categories),this.loading=!1})}loadIdEmpresaAndIdCategoriaPadre(){return new Promise(a=>{this.idEmpresa=this.loginService.getUser().empresa.id,this.idCategoriaPadre=this.route.snapshot.params.idCategoria?this.route.snapshot.params.idCategoria:0,a(void 0)})}linkUpdate(a){return`/categorias/${this.idCategoriaPadre}/editar/${a}`}get canGoBack(){return"0"!=this.idCategoriaPadre}linkVolver(){this.router.navigateByUrl(`/categorias/${this.categoriaPadre.categoriaPadre?this.categoriaPadre.categoriaPadre.id:0}`)}readCategoria(a){a.categoriaPadre&&this.readCategoria(a.categoriaPadre),this.linksCategorias.push({id:a.id,label:a.nombre,url:`#/categorias/${a.id}`})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(s.gz),t.Y36(s.F0),t.Y36(_.H),t.Y36(f.J),t.Y36(C.r),t.Y36(h.p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-categorias"]],viewQuery:function(a,n){if(1&a&&t.Gf(Z,7),2&a){let r;t.iGM(r=t.CRH())&&(n.tabla=r.first)}},decls:9,vars:11,consts:[[1,"grid"],[1,"col-12"],[3,"model","home"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],[1,"space-buttons"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Subcategor\xedas",1,"p-button-primary",2,"margin-left","0.2rem","margin-right","0.2rem",3,"routerLink"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",2,"margin-left","0.2rem","margin-right","0.2rem",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"],["style","margin-right: 0.2rem;","style","margin-right: 0.4rem","pButton","","type","button","label","Volver","class","p-button-secondary",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"p-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t._UZ(3,"p-breadcrumb",2),t.TgZ(4,"p-table",3,4),t.NdJ("onLazyLoad",function(c){return n.loadLazy(c)}),t.YNc(6,w,2,1,"ng-template",5),t.YNc(7,U,2,1,"ng-template",6),t.YNc(8,k,3,1,"ng-template",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(3),t.Q6J("model",n.linksCategorias)("home",t.DdM(10,E)),t.xp6(1),t.Q6J("columns",n.cols)("value",n.categories)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[b.Z,x.a,g.iA,v.jx,l.sg,g.lQ,l.O5,g.fz,l.RF,l.n9,l.ED,y.Hq,A.u,s.rH],encapsulation:2}),e})();var m=o(68446),p=o(54578);const O=[{path:":idCategoria",component:z,canActivate:[p.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Categor\xedas"}]}},{path:":idCategoria/editar/:id",component:m._,data:{isEdit:!0,title:"Editar categor\xeda",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar categor\xeda"}]},canActivate:[p.P]},{path:":idCategoria/nuevo",component:m._,data:{isEdit:!1,title:"Nueva categor\xeda",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nueva categor\xeda"}]},canActivate:[p.P]}];let M=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.Bz.forChild(O)],s.Bz]}),e})();var R=o(20958);let j=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[M,R.m]]}),e})()}}]);