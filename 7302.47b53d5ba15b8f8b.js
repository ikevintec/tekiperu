"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[7302],{22650:(K,g,i)=>{i.d(g,{B:()=>v});var f=i(70655),t=i(5e3),I=i(82817),u=i(8929),c=i(85932),b=i(81575),e=i(7625),T=i(74202),A=i(30361),Z=i(47745),E=i(20207),C=i(74297),x=i(98952),y=i(59783),h=i(69808),M=i(40845),U=i(4119);const D=["dt"];function L(n,r){if(1&n&&t._UZ(0,"p-sortIcon",10),2&n){const o=t.oxw().$implicit;t.Q6J("field",o.field)}}function O(n,r){if(1&n&&(t.TgZ(0,"th",8),t._uU(1),t.YNc(2,L,1,1,"p-sortIcon",9),t.qZA()),2&n){const o=r.$implicit;t.Q6J("pSortableColumn",o.field),t.xp6(1),t.hij(" ",o.header," "),t.xp6(1),t.Q6J("ngIf",!o.isActions)}}function B(n,r){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,O,3,3,"th",7),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Q6J("ngForOf",o)}}function F(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(3).$implicit,l=t.oxw().$implicit;t.xp6(1),t.Oqu(l[o.field].nombre)}}function N(n,r){if(1&n&&(t.ynx(0),t.YNc(1,F,2,1,"span",13),t.BQk()),2&n){const o=t.oxw(2).$implicit,l=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",l[o.field])}}function P(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(4).$implicit;t.xp6(1),t.Oqu(o.nombre)}}function Q(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"span",16),t._uU(2,"Nombre"),t.qZA(),t.YNc(3,P,2,1,"span",13),t.BQk()),2&n){const o=t.oxw(2).$implicit,l=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",l[o.field])}}function S(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(4).$implicit;t.xp6(1),t.Oqu(o.ip)}}function $(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"span",16),t._uU(2,"Ip Qz"),t.qZA(),t.YNc(3,S,2,1,"span",13),t.BQk()),2&n){const o=t.oxw(2).$implicit,l=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",l[o.field])}}function J(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(4).$implicit;t.xp6(1),t.Oqu(o.anchoPapel)}}function a(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"span",16),t._uU(2,"Ancho de papel"),t.qZA(),t.YNc(3,J,2,1,"span",13),t.BQk()),2&n){const o=t.oxw(2).$implicit,l=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",l[o.field])}}function m(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(4).$implicit;t.xp6(1),t.Oqu(o["puntoVenta.nombre"])}}function p(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"span",16),t._uU(2,"Punto venta"),t.qZA(),t.YNc(3,m,2,1,"span",13),t.BQk()),2&n){const o=t.oxw(2).$implicit,l=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",l[o.field])}}function s(n,r){1&n&&(t.ynx(0),t.YNc(1,N,2,1,"ng-container",15),t.YNc(2,Q,4,1,"ng-container",15),t.YNc(3,$,4,1,"ng-container",15),t.YNc(4,a,4,1,"ng-container",15),t.YNc(5,p,4,1,"ng-container",15),t.BQk()),2&n&&(t.xp6(1),t.Q6J("ngSwitchCase","puntoVenta"),t.xp6(1),t.Q6J("ngSwitchCase","nombre"),t.xp6(1),t.Q6J("ngSwitchCase","ip"),t.xp6(1),t.Q6J("ngSwitchCase","anchoPapel"),t.xp6(1),t.Q6J("ngSwitchCase","puntoVenta"))}function _(n,r){if(1&n&&t._UZ(0,"button",20),2&n){const o=t.oxw(3).$implicit,l=t.oxw();t.Q6J("routerLink",l.linkUpdate(o.id))}}function Y(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(o);const d=t.oxw(3).$implicit;return t.oxw().select(d)}),t.qZA()}}function w(n,r){if(1&n&&(t.ynx(0,17),t.TgZ(1,"span",16),t._uU(2,"Acciones"),t.qZA(),t.YNc(3,_,1,1,"button",18),t.YNc(4,Y,1,0,"button",19),t.BQk()),2&n){const o=t.oxw(3);t.xp6(3),t.Q6J("ngIf",!o.isModal),t.xp6(1),t.Q6J("ngIf",o.isModal)}}function R(n,r){if(1&n&&(t.TgZ(0,"td",12),t.YNc(1,s,6,5,"ng-container",13),t.YNc(2,w,5,2,"ng-container",14),t.qZA()),2&n){const o=r.$implicit;t.Q6J("ngSwitch",o.field),t.xp6(1),t.Q6J("ngIf",!o.isActions),t.xp6(1),t.Q6J("ngIf",o.isActions)}}function V(n,r){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,R,3,3,"td",11),t.qZA()),2&n){const o=r.columns;t.xp6(1),t.Q6J("ngForOf",o)}}function z(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"div",23),t.TgZ(1,"button",24),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).newPrinter()}),t.qZA(),t.qZA()}}function k(n,r){if(1&n&&t.YNc(0,z,2,0,"div",22),2&n){const o=t.oxw();t.Q6J("ngIf",!o.isModal)}}class v{constructor(r,o,l,d,W){this.route=r,this.router=o,this.printerService=l,this.breadcrumbService=d,this.loginService=W,this.perPage=10,this.unsubscribe$=new u.xQ,this.selectPrinter=new t.vpe}ngOnInit(){this.isModal||this.breadcrumbService.setItems((0,I.kn)(this.route)),this.puntoVenta$.pipe((0,e.R)(this.unsubscribe$)).subscribe(r=>{this.filtroPuntoVenta=r,this.tabla.clear()}),this.cols=[{field:"nombre",header:"Nombre"},{field:"ip",header:"IP Qz"},{field:"anchoPapel",header:"Ancho de papel"},{field:"puntoVenta",header:"Punto de venta"},{header:"Acciones",isActions:!0}]}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}newPrinter(){this.router.navigateByUrl("/impresoras/nuevo")}linkUpdate(r){return`/impresoras/editar/${r}`}loadLazy(r){this.loading=!0,this.lastLazyLoadEvent=r;const l=["pageNumber="+r.first/this.perPage,`perPage=${r.rows}`,"paginacion=true"];r.sortOrder&&l.push(`sortOrder=${r.sortOrder}`),r.sortField&&l.push(`sortField=${r.sortField}`),this.filtroPuntoVenta&&l.push(`idPuntoVenta=${this.filtroPuntoVenta.id}`),this.printerService.findAllPageP(l.join("&")).subscribe(d=>{this.totalRecords=d.totalElements,this.printers=d.content,this.loading=!1})}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}select(r){this.selectPrinter.emit(r)}}v.\u0275fac=function(r){return new(r||v)(t.Y36(T.gz),t.Y36(T.F0),t.Y36(A.v),t.Y36(Z.p),t.Y36(E.r))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-impresoras"]],viewQuery:function(r,o){if(1&r&&t.Gf(D,7),2&r){let l;t.iGM(l=t.CRH())&&(o.tabla=l.first)}},inputs:{isModal:"isModal"},outputs:{selectPrinter:"selectPrinter"},decls:8,vars:8,consts:[[1,"grid"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["class","space-buttons","style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[1,"p-column-title"],[1,"space-buttons",2,"text-align","center"],["style","margin-right: 0.2rem; margin-left: 0.2rem;","pButton","","type","button","icon","pi pi-pencil","class","p-button-success","pTooltip","Actualizar, Eliminar",3,"routerLink",4,"ngIf"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",2,"margin-right","0.2rem","margin-left","0.2rem",3,"routerLink"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar",3,"click"],["style","text-align:left",4,"ngIf"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"p-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"p-table",2,3),t.NdJ("onLazyLoad",function(d){return o.loadLazy(d)}),t.YNc(5,B,2,1,"ng-template",4),t.YNc(6,V,2,1,"ng-template",5),t.YNc(7,k,1,1,"ng-template",6),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(3),t.Q6J("columns",o.cols)("value",o.printers)("lazy",!0)("paginator",!0)("rows",o.perPage)("totalRecords",o.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[C.Z,x.iA,y.jx,h.sg,x.lQ,h.O5,x.fz,h.RF,h.n9,M.Hq,U.u,T.rH],styles:[""]}),(0,f.gn)([(0,c.Ph)(b.Z.getOffice)],v.prototype,"puntoVenta$",void 0)},38716:(K,g,i)=>{i.r(g),i.d(g,{ImpresorasModule:()=>J});var f=i(69808),t=i(74202),I=i(22650),u=i(54578),c=i(93075),b=i(82817),e=i(5e3),T=i(20207),A=i(59783),Z=i(30361),E=i(47745),C=i(74297),x=i(31424),y=i(43724),h=i(14036),M=i(10930),U=i(40845);function D(a,m){1&a&&e._UZ(0,"p-message",17)}function L(a,m){1&a&&e._UZ(0,"p-message",18)}function O(a,m){1&a&&e._UZ(0,"p-message",19)}function B(a,m){1&a&&e._UZ(0,"p-message",20)}function F(a,m){if(1&a){const p=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(p),e.oxw().confirmDelete()}),e.qZA()}}const N=function(){return{width:"100%"}};let P=(()=>{class a{constructor(p,s,_,Y,w,R,V,z){this.route=p,this.router=s,this.fb=_,this.loginService=Y,this.messageService=w,this.printerService=R,this.confirmationService=V,this.breadcrumbService=z,this.puntosVenta=[]}ngOnInit(){this.breadcrumbService.setItems((0,b.kn)(this.route)),this.builderForm(),this.loadModel(),this.puntosVenta=this.loginService.getPuntosVentaUsuario().map(p=>({label:p.nombre,value:p.id}))}builderForm(){this.modelForm=this.fb.group({nombre:[void 0,[c.kI.required]],ip:[void 0,[c.kI.required]],anchoPapel:[void 0,[c.kI.required]],idPuntoVenta:[void 0,[c.kI.required]],imprimirLogoTicket:[!1,[]]}),this.isEdit&&this.modelForm.get("idPuntoVenta").disable()}get linkVolver(){return"/impresoras"}get isEdit(){return this.route.snapshot.data.isEdit}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.getRawValue().nombre,this.model.ip=this.modelForm.getRawValue().ip,this.model.anchoPapel=this.modelForm.getRawValue().anchoPapel,this.model.puntoVenta={id:this.modelForm.getRawValue().idPuntoVenta},this.model.imprimirLogoTicket=this.modelForm.getRawValue().imprimirLogoTicket}modelToForm(p){this.modelForm.patchValue({nombre:p.nombre,ip:p.ip,anchoPapel:p.anchoPapel,idPuntoVenta:p.puntoVenta.id,imprimirLogoTicket:p.imprimirLogoTicket})}guardar(){let p,s;this.formToModel(),this.isEdit?(p=this.printerService.update(this.model),s="Impresora actualizado correctamente."):(p=this.printerService.save(this.model),s="Impresora registrado correctamente."),p.subscribe(_=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:s}),this.router.navigateByUrl(this.linkVolver)})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.printerService.deleteById(this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadModel(){this.isEdit&&this.route.params.subscribe(p=>{this.printerService.findById(p.id).subscribe(_=>{_&&(this.model=_,this.modelToForm(_))})})}}return a.\u0275fac=function(p){return new(p||a)(e.Y36(t.gz),e.Y36(t.F0),e.Y36(c.qu),e.Y36(T.r),e.Y36(A.ez),e.Y36(Z.v),e.Y36(A.YP),e.Y36(E.p))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-impresora"]],decls:32,vars:13,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-6","md:col-4",2,"padding",".2em"],[1,"label-form"],["placeholder","Nombre de impresora","formControlName","nombre","pInputText","",2,"width","100%"],["severity","error","text","Ingrese nombre",4,"ngIf"],["placeholder","Direcci\xf3n IP QZ","formControlName","ip","pInputText","",2,"width","100%"],["severity","error","text","Ingrese ip",4,"ngIf"],["placeholder","Ancho de papel","formControlName","anchoPapel","type","number","pInputText","",2,"width","100%"],["severity","error","text","Ingrese ancho de papel",4,"ngIf"],["placeholder","Seleccione punto de venta","formControlName","idPuntoVenta",3,"options"],["severity","error","text","Seleccione punto venta",4,"ngIf"],["formControlName","imprimirLogoTicket"],[1,"col-12",2,"text-align","center"],["pButton","","type","button",2,"margin-right","0.4rem",3,"disabled","label","click"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["severity","error","text","Ingrese nombre"],["severity","error","text","Ingrese ip"],["severity","error","text","Ingrese ancho de papel"],["severity","error","text","Seleccione punto venta"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"]],template:function(p,s){1&p&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"label",3),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",4),e.YNc(7,D,1,0,"p-message",5),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"label",3),e._uU(10,"Ip Qz"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,L,1,0,"p-message",7),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"label",3),e._uU(15,"Ancho de papel (mm.)"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,O,1,0,"p-message",9),e.qZA(),e.TgZ(18,"div",2),e.TgZ(19,"label",3),e._uU(20,"Punto de venta"),e.qZA(),e._UZ(21,"p-dropdown",10),e.YNc(22,B,1,0,"p-message",11),e.qZA(),e.TgZ(23,"div",2),e.TgZ(24,"label",3),e._uU(25,"Imprimir logo en ticket (ESC POS)?"),e.qZA(),e.TgZ(26,"div"),e._UZ(27,"p-inputSwitch",12),e.qZA(),e.qZA(),e.TgZ(28,"div",13),e.TgZ(29,"button",14),e.NdJ("click",function(){return s.guardar()}),e.qZA(),e.YNc(30,F,1,0,"button",15),e._UZ(31,"button",16),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&p&&(e.xp6(1),e.Q6J("formGroup",s.modelForm),e.xp6(6),e.Q6J("ngIf",s.modelForm.get("nombre").touched&&(null==s.modelForm.get("nombre").errors?null:s.modelForm.get("nombre").errors.required)),e.xp6(5),e.Q6J("ngIf",s.modelForm.get("ip").touched&&(null==s.modelForm.get("ip").errors?null:s.modelForm.get("ip").errors.required)),e.xp6(5),e.Q6J("ngIf",s.modelForm.get("anchoPapel").touched&&(null==s.modelForm.get("anchoPapel").errors?null:s.modelForm.get("anchoPapel").errors.required)),e.xp6(4),e.Akn(e.DdM(12,N)),e.Q6J("options",s.puntosVenta),e.xp6(1),e.Q6J("ngIf",s.modelForm.get("idPuntoVenta").touched&&(null==s.modelForm.get("idPuntoVenta").errors?null:s.modelForm.get("idPuntoVenta").errors.required)),e.xp6(7),e.Q6J("disabled",!s.modelForm.valid)("label",s.textButtonAction),e.xp6(1),e.Q6J("ngIf",s.isEdit),e.xp6(1),e.Q6J("routerLink",s.linkVolver))},directives:[C.Z,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,x.o,f.O5,y.q,c.wV,h.Lt,M.Ql,U.Hq,t.rH],styles:[""]}),a})();const Q=[{path:"",component:I.B,data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Impresoras"}]},canActivate:[u.P]},{path:"nuevo",component:P,data:{modeRoot:!1,isEdit:!1,title:"Nueva impresora",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nueva impresora"}]},canActivate:[u.P]},{path:"editar/:id",component:P,data:{isEdit:!0,title:"Editar impresora",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar impresora"}]},canActivate:[u.P]}];let S=(()=>{class a{}return a.\u0275fac=function(p){return new(p||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[t.Bz.forChild(Q)],t.Bz]}),a})();var $=i(20958);let J=(()=>{class a{}return a.\u0275fac=function(p){return new(p||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[f.ez,S,$.m]]}),a})()},30361:(K,g,i)=>{i.d(g,{v:()=>u});var f=i(92340),t=i(5e3),I=i(40520);let u=(()=>{class c{constructor(e){this.http=e,this.baseUrl=f.N.endpointApi}save(e){return this.http.post(`${this.baseUrl}/printer`,e)}update(e){return this.http.put(`${this.baseUrl}/printer`,e)}findAllPageP(e){return this.findAllP(e)}findAllP(e){return this.http.get(`${this.baseUrl}/printers?${e}`)}findById(e){return this.http.get(`${this.baseUrl}/printer/${e}`)}deleteById(e){return this.http.delete(`${this.baseUrl}/printer/${e}`)}}return c.\u0275fac=function(e){return new(e||c)(t.LFG(I.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);