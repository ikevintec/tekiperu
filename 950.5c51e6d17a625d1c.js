"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[950,9678],{42783:(j,P,n)=>{n.d(P,{K:()=>$});var o=n(5e3),t=n(59783),E=n(20207),I=n(49115),r=n(93075),y=n(69808),b=n(14036),e=n(43724),x=n(31424);const O=["direccionRef"];function M(f,D){1&f&&o._UZ(0,"p-message",31)}function L(f,D){1&f&&o._UZ(0,"p-message",32)}function N(f,D){1&f&&o._UZ(0,"p-message",33)}function V(f,D){1&f&&o._UZ(0,"p-message",34)}function q(f,D){1&f&&o._UZ(0,"p-message",35)}function B(f,D){1&f&&o._UZ(0,"p-message",36)}const S=function(){return{width:"100%"}};function Q(f,D){if(1&f){const c=o.EpF();o.TgZ(0,"form",1),o.TgZ(1,"div",2),o.TgZ(2,"div",3),o.TgZ(3,"div",4),o.TgZ(4,"div",5),o.TgZ(5,"label",6),o._uU(6,"Departamento (*)"),o.qZA(),o.TgZ(7,"p-dropdown",7),o.NdJ("onChange",function(){return o.CHM(c),o.oxw().changeDepartamento()}),o.qZA(),o.YNc(8,M,1,0,"p-message",8),o.qZA(),o.TgZ(9,"div",5),o.TgZ(10,"label",9),o._uU(11,"Provincia (*)"),o.qZA(),o.TgZ(12,"p-dropdown",10),o.NdJ("onChange",function(){return o.CHM(c),o.oxw().changeProvincia()}),o.qZA(),o.YNc(13,L,1,0,"p-message",11),o.qZA(),o.TgZ(14,"div",5),o.TgZ(15,"label",12),o._uU(16,"Distrito (*)"),o.qZA(),o.TgZ(17,"p-dropdown",13),o.NdJ("onChange",function(){return o.CHM(c),o.oxw().changeDistrito()}),o.qZA(),o.YNc(18,N,1,0,"p-message",14),o.qZA(),o.TgZ(19,"div",15),o.TgZ(20,"label",16),o._uU(21,"Direcci\xf3n (*)"),o.qZA(),o._UZ(22,"input",17,18),o.YNc(24,V,1,0,"p-message",19),o.qZA(),o.TgZ(25,"div",20),o.TgZ(26,"label",21),o._uU(27,"N\xfamero (*)"),o.qZA(),o._UZ(28,"input",22),o.YNc(29,q,1,0,"p-message",23),o.qZA(),o.TgZ(30,"div",20),o.TgZ(31,"label",24),o._uU(32,"Num. dpto."),o.qZA(),o._UZ(33,"input",25),o.qZA(),o.TgZ(34,"div",15),o.TgZ(35,"label",26),o._uU(36,"Referencia"),o.qZA(),o._UZ(37,"input",27),o.qZA(),o.TgZ(38,"div",15),o.TgZ(39,"label",28),o._uU(40,"Tipo (*)"),o.qZA(),o._UZ(41,"p-dropdown",29),o.YNc(42,B,1,0,"p-message",30),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&f){const c=o.oxw();o.Q6J("formGroup",c.modelForm),o.xp6(7),o.Akn(o.DdM(19,S)),o.Q6J("options",c.departamentos),o.xp6(1),o.Q6J("ngIf",c.modelForm.get("departamento").touched&&(null==c.modelForm.get("departamento").errors?null:c.modelForm.get("departamento").errors.required)),o.xp6(4),o.Akn(o.DdM(20,S)),o.Q6J("options",c.provincias),o.xp6(1),o.Q6J("ngIf",c.modelForm.get("provincia").touched&&(null==c.modelForm.get("provincia").errors?null:c.modelForm.get("provincia").errors.required)),o.xp6(4),o.Akn(o.DdM(21,S)),o.Q6J("options",c.distritos),o.xp6(1),o.Q6J("ngIf",c.modelForm.get("distrito").touched&&(null==c.modelForm.get("distrito").errors?null:c.modelForm.get("distrito").errors.required)),o.xp6(6),o.Q6J("ngIf",c.modelForm.get("direccion").touched&&(null==c.modelForm.get("direccion").errors?null:c.modelForm.get("direccion").errors.required)),o.xp6(5),o.Q6J("ngIf",c.modelForm.get("numero").touched&&(null==c.modelForm.get("numero").errors?null:c.modelForm.get("numero").errors.required)),o.xp6(12),o.Akn(o.DdM(22,S)),o.Q6J("options",c.tiposDireccion),o.xp6(1),o.Q6J("ngIf",c.modelForm.get("tipoDireccion").touched&&(null==c.modelForm.get("tipoDireccion").errors?null:c.modelForm.get("tipoDireccion").errors.required))}}let $=(()=>{class f{constructor(c,u,m,C,p){this.messageService=c,this.loginService=u,this.confirmationService=m,this.cityService=C,this.fb=p,this.departamentos=[],this.provincias=[],this.distritos=[]}ngOnInit(){this.tiposDireccion=[{label:"Casa",value:"CASA"},{label:"Oficina",value:"OFICINA"},{label:"Otro",value:"OTRO"}],this.loadDepartamentos()}onSelectDirection(c){const u=c.address_components,m=u.find(g=>g.types.find(v=>"street_number"===v)),C=u.find(g=>g.types.find(v=>"route"===v)),p=u.find(g=>g.types.find(v=>"locality"===v)),A=u.find(g=>g.types.find(v=>"administrative_area_level_2"===v)),F=u.find(g=>g.types.find(v=>"administrative_area_level_1"===v));if(this.modelForm.patchValue(Object.assign(Object.assign(Object.assign({},m&&{numero:m.long_name}),C&&{direccion:C.long_name}),{latitud:c.geometry.location.lat(),longitud:c.geometry.location.lng()})),F){const g=this.departamentos.find(v=>v.nombreGoogleMaps.includes(F.long_name));if(g&&(this.provincias=g.items),this.modelForm.patchValue(Object.assign(Object.assign({},g&&{departamento:g}),g&&{codigoDepartamento:g.codigo})),A){const v=this.provincias.find(U=>U.nombreGoogleMaps.includes(A.long_name));if(v&&(this.distritos=v.items),this.modelForm.patchValue(Object.assign(Object.assign({},v&&{provincia:v}),v&&{codigoProvincia:v.codigo})),p){const U=this.distritos.find(d=>d.nombreGoogleMaps.includes(p.long_name));this.modelForm.patchValue(Object.assign(Object.assign({},U&&{distrito:U}),U&&{codigoDistrito:U.codigo}))}}}setTimeout(()=>this.direccionRef.nativeElement.focus())}changeDepartamento(){const c=this.modelForm.get("departamento").value;this.modelForm.patchValue({codigoDepartamento:c.codigo,provincia:void 0,distrito:void 0}),this.provincias=[],this.distritos=[],this.provincias=c.items}changeProvincia(){const c=this.modelForm.get("provincia").value;this.modelForm.patchValue({codigoProvincia:c.codigo,distrito:void 0}),this.distritos=[],this.distritos=c.items}changeDistrito(){const c=this.modelForm.get("distrito").value;this.modelForm.patchValue({codigoDistrito:c.codigo})}get titleButtonAction(){return"Registrar direcci\xf3n"}loadDepartamentos(){setTimeout(()=>{this.cityService.findAllUbigeo([].join("&")).subscribe(u=>{this.departamentos=u,this.modelToForm()})})}modelToForm(){if(this.modelForm.value.latitud&&this.modelForm.value.longitud&&(this.initialMarker=new google.maps.LatLng(Number(this.modelForm.value.latitud),Number(this.modelForm.value.longitud))),this.modelForm.value.codigoDepartamento){const c=this.departamentos.find(u=>u.codigo===this.modelForm.value.codigoDepartamento);if(c&&(this.provincias=c.items),this.modelForm.patchValue(Object.assign({},c&&{departamento:c})),this.modelForm.value.codigoProvincia){const u=this.provincias.find(m=>m.codigo===this.modelForm.value.codigoProvincia);if(u&&(this.distritos=u.items),this.modelForm.patchValue(Object.assign({},u&&{provincia:u})),this.modelForm.value.codigoDistrito){const m=this.distritos.find(C=>C.codigo===this.modelForm.value.codigoDistrito);this.modelForm.patchValue(Object.assign({},m&&{distrito:m}))}}}}}return f.\u0275fac=function(c){return new(c||f)(o.Y36(t.ez),o.Y36(E.r),o.Y36(t.YP),o.Y36(I.Z),o.Y36(r.qu))},f.\u0275cmp=o.Xpm({type:f,selectors:[["app-direccion"]],viewQuery:function(c,u){if(1&c&&o.Gf(O,5),2&c){let m;o.iGM(m=o.CRH())&&(u.direccionRef=m.first)}},inputs:{modelForm:"modelForm"},decls:1,vars:1,consts:[["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-4"],["for","departamento",1,"label-form"],["appendTo","body","filter","true","id","departamento","dataKey","codigo","formControlName","departamento","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione departamento",4,"ngIf"],["for","provincia",1,"label-form"],["appendTo","body","filter","true","id","provincia","dataKey","codigo","formControlName","provincia","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione provincia",4,"ngIf"],["for","distrito",1,"label-form"],["appendTo","body","filter","true","id","distrito","dataKey","codigo","formControlName","distrito","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione distrito",4,"ngIf"],[1,"col-6"],["for","direccion",1,"label-form"],["formControlName","direccion","id","direccion","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["direccionRef",""],["severity","error","text","Ingrese direcci\xf3n",4,"ngIf"],[1,"col-3"],["for","numero",1,"label-form"],["formControlName","numero","id","numero","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero",4,"ngIf"],["for","numeroDepartamento",1,"label-form"],["formControlName","numeroDepartamento","id","numeroDepartamento","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["for","referencia",1,"label-form"],["formControlName","referencia","id","referencia","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["for","tipoDireccion",1,"label-form"],["appendTo","body","id","tipoDireccion","formControlName","tipoDireccion","placeholder","Seleccione...",3,"options"],["severity","error","text","Seleccione tipo direcci\xf3n",4,"ngIf"],["severity","error","text","Seleccione departamento"],["severity","error","text","Seleccione provincia"],["severity","error","text","Seleccione distrito"],["severity","error","text","Ingrese direcci\xf3n"],["severity","error","text","Ingrese n\xfamero"],["severity","error","text","Seleccione tipo direcci\xf3n"]],template:function(c,u){1&c&&o.YNc(0,Q,43,23,"form",0),2&c&&o.Q6J("ngIf",u.modelForm)},directives:[y.O5,r._Y,r.JL,r.sg,b.Lt,r.JJ,r.u,e.q,r.Fj,x.o],styles:[""]}),f})()},40019:(j,P,n)=>{n.d(P,{f:()=>r});var o=n(69808),t=n(20958),E=n(45330),I=n(5e3);let r=(()=>{class y{}return y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=I.oAB({type:y}),y.\u0275inj=I.cJS({providers:[E.xA],imports:[[o.ez,t.m]]}),y})()},49678:(j,P,n)=>{n.r(P),n.d(P,{CiudadesModule:()=>u});var o=n(69808),t=n(74202),E=n(54578),I=n(82817),r=n(5e3),y=n(49115),b=n(59783),e=n(2385),x=n(47745),O=n(74297),M=n(12145),L=n(93075),N=n(40845),V=n(98952),q=n(4119);function B(m,C){if(1&m&&r._uU(0),2&m){const p=C.$implicit;r.AsE(" ",p.codigoCiudad," - ",p.ciudad," ")}}function S(m,C){1&m&&(r.TgZ(0,"tr"),r.TgZ(1,"th"),r._uU(2,"Ubigeo"),r.qZA(),r.TgZ(3,"th"),r._uU(4,"Ciudad"),r.qZA(),r.TgZ(5,"th"),r._uU(6,"Acciones"),r.qZA(),r.qZA())}function Q(m,C){if(1&m){const p=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td",9),r.TgZ(6,"button",10),r.NdJ("click",function(){const g=r.CHM(p).$implicit;return r.oxw().deleteCity(g)}),r.qZA(),r.qZA(),r.qZA()}if(2&m){const p=C.$implicit;r.xp6(2),r.Oqu(p.codigoCiudad),r.xp6(2),r.Oqu(p.ciudad)}}const f=[{path:"",component:(()=>{class m{constructor(p,A,F,g,v,U){this.route=p,this.router=A,this.cityService=F,this.messageService=g,this.consultaDocumentosService=v,this.breadcrumbService=U,this.filteredCities=[]}ngOnInit(){this.breadcrumbService.setItems((0,I.kn)(this.route)),this.loadCities()}loadCities(){setTimeout(()=>this.cityService.findAll().subscribe(p=>this.ciudades=p))}filterCitiesByNombre(p){this.consultaDocumentosService.findCity(p.query).subscribe(F=>{this.filteredCities=F})}get validationButtonAdd(){return this.ciudadSeleccionada&&0===this.ciudades.filter(p=>p.codigoCiudad===this.ciudadSeleccionada.codigoCiudad).length}saveCity(){this.ciudadSeleccionada&&"object"==typeof this.ciudadSeleccionada&&this.cityService.save(this.ciudadSeleccionada).subscribe(()=>{this.loadCities(),this.ciudadSeleccionada=void 0})}deleteCity(p){this.cityService.delete(p.id).subscribe(()=>this.loadCities())}}return m.\u0275fac=function(p){return new(p||m)(r.Y36(t.gz),r.Y36(t.F0),r.Y36(y.Z),r.Y36(b.ez),r.Y36(e.W),r.Y36(x.p))},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-ciudades"]],decls:12,vars:6,consts:[[1,"grid"],[1,"col-12"],[2,"margin-right","0.3rem"],["field","descripcion","placeholder","Buscar ciudad",3,"ngModel","suggestions","size","minLength","ngModelChange","completeMethod"],["pTemplate","item"],["pButton","","type","button","label","Agregar ciudad",3,"disabled","click"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger","lrm-1",3,"click"]],template:function(p,A){1&p&&(r.TgZ(0,"p-card"),r.TgZ(1,"div",0),r.TgZ(2,"div",1),r.TgZ(3,"span",2),r.TgZ(4,"p-autoComplete",3),r.NdJ("ngModelChange",function(g){return A.ciudadSeleccionada=g})("completeMethod",function(g){return A.filterCitiesByNombre(g)}),r.YNc(5,B,1,2,"ng-template",4),r.qZA(),r.qZA(),r.TgZ(6,"button",5),r.NdJ("click",function(){return A.saveCity()}),r.qZA(),r.TgZ(7,"h3"),r._uU(8,"Ciudades de cobertura"),r.qZA(),r.TgZ(9,"p-table",6),r.YNc(10,S,7,0,"ng-template",7),r.YNc(11,Q,7,2,"ng-template",8),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&p&&(r.xp6(4),r.Q6J("ngModel",A.ciudadSeleccionada)("suggestions",A.filteredCities)("size",30)("minLength",1),r.xp6(2),r.Q6J("disabled",!A.validationButtonAdd),r.xp6(3),r.Q6J("value",A.ciudades))},directives:[O.Z,M.Qc,L.JJ,L.On,b.jx,N.Hq,V.iA,q.u],styles:[""]}),m})(),canActivate:[E.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Ciudades"}]}}];let D=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[t.Bz.forChild(f)],t.Bz]}),m})();var c=n(20958);let u=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[o.ez,c.m,D]]}),m})()},57935:(j,P,n)=>{n.d(P,{H:()=>y});var o=n(20958),t=n(91520),E=n(49678),I=n(40019),r=n(5e3);let y=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=r.oAB({type:b}),b.\u0275inj=r.cJS({imports:[[o.m,t.HorariosModule,E.CiudadesModule,I.f]]}),b})()},59936:(j,P,n)=>{n.d(P,{Z:()=>K});var o=n(70655),t=n(93075),E=n(82817),I=n(85932),r=n(81575),y=n(7625),b=n(8929),e=n(5e3),x=n(74202),O=n(49115),M=n(59783),L=n(2385),N=n(45330),V=n(74297),q=n(98952),B=n(40845),S=n(4119);function Q(s,a){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Ubigeo"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Ciudad"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Acciones"),e.qZA(),e.qZA())}function $(s,a){if(1&s){const i=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",5),e.TgZ(6,"button",6),e.NdJ("click",function(){const Y=e.CHM(i).$implicit;return e.oxw().selectCity(Y)}),e.qZA(),e.qZA(),e.qZA()}if(2&s){const i=a.$implicit;e.xp6(2),e.Oqu(i.codigoCiudad),e.xp6(2),e.Oqu(i.ciudad)}}let f=(()=>{class s{constructor(i,_,T,Y,H,z,G){this.route=i,this.router=_,this.cityService=T,this.messageService=Y,this.consultaDocumentosService=H,this.ref=z,this.config=G}ngOnInit(){this.loadCities()}loadCities(){setTimeout(()=>this.cityService.findAll().subscribe(i=>this.ciudades=i))}selectCity(i){this.ref.close(i)}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(x.gz),e.Y36(x.F0),e.Y36(O.Z),e.Y36(M.ez),e.Y36(L.W),e.Y36(N.E7),e.Y36(N.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-ciudades"]],decls:8,vars:1,consts:[[1,"grid"],[1,"col-12"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar ciudad",1,"lrm-1",3,"click"]],template:function(i,_){1&i&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"h3"),e._uU(4,"Ciudades"),e.qZA(),e.TgZ(5,"p-table",2),e.YNc(6,Q,7,0,"ng-template",3),e.YNc(7,$,7,2,"ng-template",4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.Q6J("value",_.ciudades))},directives:[V.Z,q.iA,M.jx,B.Hq,S.u],styles:[""]}),s})();var D=n(43453);let c=(()=>{class s{constructor(i){this.ref=i}ngOnInit(){}selectOpeningHour(i){this.ref.close(i)}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(N.E7))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-modal-horarios"]],decls:1,vars:1,consts:[[3,"isModal","selectHorario"]],template:function(i,_){1&i&&(e.TgZ(0,"app-horarios",0),e.NdJ("selectHorario",function(Y){return _.selectOpeningHour(Y)}),e.qZA()),2&i&&e.Q6J("isModal",!0)},directives:[D.W],styles:[""]}),s})();var u=n(47745),m=n(6969),C=n(96310),p=n(33379),A=n(20207),F=n(69808),g=n(33725),v=n(31424),U=n(43724),d=n(93008),Z=n(20657),l=n(88205),h=n(15315),R=n(42783);function J(s,a){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.hij("(",i.empresa.razonSocial,")")}}function w(s,a){1&s&&e._UZ(0,"p-message",35)}function W(s,a){1&s&&e._UZ(0,"p-message",36)}function X(s,a){1&s&&e._UZ(0,"p-message",37)}function k(s,a){1&s&&e._UZ(0,"p-message",38)}function ee(s,a){if(1&s&&(e.TgZ(0,"div",39),e.TgZ(1,"p-card"),e._UZ(2,"app-horario-view",40),e.qZA(),e.qZA()),2&s){const i=e.oxw();e.xp6(2),e.Q6J("horario",i.horario.value)}}function te(s,a){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Ciudad"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Costo de env\xedo"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Acciones"),e.qZA(),e.qZA())}function oe(s,a){1&s&&e._UZ(0,"input",49)}function ie(s,a){if(1&s&&(e._uU(0),e._UZ(1,"i",50)),2&s){const i=e.oxw(2).$implicit;e.hij(" ",i.get("costoEnvio").value," ")}}function ne(s,a){1&s&&e._UZ(0,"p-message",51)}function re(s,a){if(1&s){const i=e.EpF();e.TgZ(0,"tr",42),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e.TgZ(4,"p-cellEditor"),e.YNc(5,oe,1,0,"ng-template",44),e.YNc(6,ie,2,1,"ng-template",45),e.qZA(),e.YNc(7,ne,1,0,"p-message",46),e.qZA(),e.TgZ(8,"td",47),e.TgZ(9,"button",48),e.NdJ("click",function(){e.CHM(i);const T=e.oxw().rowIndex;return e.oxw().deleteCiudadAtencionForm(T)}),e.qZA(),e.qZA(),e.qZA()}if(2&s){const i=e.oxw(),T=i.$implicit;e.Q6J("formGroupName",i.rowIndex),e.xp6(2),e.hij(" ",null==T.get("ciudad").value?null:T.get("ciudad").value.nombreDistrito,""),e.xp6(5),e.Q6J("ngIf",T.get("costoEnvio").touched&&(null==T.get("costoEnvio").errors?null:T.get("costoEnvio").errors.required))}}function ae(s,a){1&s&&e.YNc(0,re,10,3,"tr",41),2&s&&e.Q6J("ngIf",!a.$implicit.value.eliminado)}function se(s,a){1&s&&e._UZ(0,"p-message",60)}function ce(s,a){if(1&s&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&s){const i=a.$implicit;e.xp6(1),e.AsE("",i.name," - ",i.size," bytes ")}}function de(s,a){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,ce,2,2,"li",61),e.qZA()),2&s){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.uploadedFiles)}}function le(s,a){if(1&s&&e.YNc(0,de,2,1,"ul",0),2&s){const i=e.oxw(2);e.Q6J("ngIf",i.uploadedFiles.length)}}function me(s,a){if(1&s&&e._UZ(0,"img",62),2&s){const i=e.oxw(2);e.Q6J("src",i.modelForm.get("urlLogo").value,e.LSH)}}function pe(s,a){if(1&s){const i=e.EpF();e.TgZ(0,"p-tabPanel",52),e.TgZ(1,"div",2),e.TgZ(2,"div",53),e.TgZ(3,"label",24),e._uU(4,"Nombre comercial (*)"),e.qZA(),e._UZ(5,"input",54),e.YNc(6,se,1,0,"p-message",55),e.qZA(),e.TgZ(7,"div",53),e.TgZ(8,"label",24),e._uU(9,"URL logo (*)"),e.qZA(),e._UZ(10,"input",56),e.TgZ(11,"p-fileUpload",57),e.NdJ("uploadHandler",function(T){return e.CHM(i),e.oxw().onFileUpload(T)}),e.YNc(12,le,1,1,"ng-template",58),e.qZA(),e.TgZ(13,"div"),e.YNc(14,me,1,1,"img",59),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const i=e.oxw();e.xp6(6),e.Q6J("ngIf",i.nombreComercial.touched&&(null==i.nombreComercial.errors?null:i.nombreComercial.errors.required)),e.xp6(5),e.Q6J("customUpload",!0)("multiple",!1),e.xp6(3),e.Q6J("ngIf",i.modelForm.get("urlLogo").value)}}function ue(s,a){if(1&s){const i=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){return e.CHM(i),e.oxw().confirmDelete()}),e.qZA()}}function ge(s,a){if(1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-direccion",64),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("modelForm",i.modelForm)}}const _e=function(){return{width:"800px"}};class K{constructor(a,i,_,T,Y,H,z,G,fe,he,ve,Ze){this.route=a,this.breadcrumbService=i,this.router=_,this.officeService=T,this.companyService=Y,this.messageService=H,this.confirmationService=z,this.userService=G,this.cityService=fe,this.fb=he,this.loginService=ve,this.dialogService=Ze,this.unsubscribe$=new b.xQ,this.uploadedFiles=[],this.configCompany={},this.dialogAddress=!1}ngOnInit(){this.breadcrumbService.setItems((0,E.kn)(this.route)),this.configCompany$.pipe((0,y.R)(this.unsubscribe$)).subscribe(a=>{this.configCompany=a,this.builderForm(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(i=>{this.empresa=i,this.loadModel()})})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}builderForm(){this.modelForm=this.fb.group({nombre:["",[t.kI.required]],codigo:["",[t.kI.required]],nombreComercial:["",[]],urlLogo:["",[]],telefono:["",[]],horario:[void 0,[]],tipoDireccion:["CASA",[]],direccionCompleta:["",[]],direccion:["",[]],numero:["",[]],numeroDepartamento:["",[]],referencia:["",[]],departamento:[void 0,[]],codigoDepartamento:[void 0,[]],provincia:[void 0,[]],codigoProvincia:[void 0,[]],distrito:[void 0,[]],codigoDistrito:[void 0,[]],latitud:["",[]],longitud:["",[]],ciudadesAtencion:this.fb.array([])}),this.configCompany.nombreComercialPorPuntoVenta&&(this.modelForm.get("nombreComercial").setValidators([t.kI.required]),this.modelForm.get("urlLogo").setValidators([t.kI.required]))}submitForm(){let a,i;this.formToModel(),this.isEdit?(a=this.officeService.update(this.idEmpresa,this.model.id,this.model,this.modeRoot),i="Punto de venta actualizado correctamente."):(a=this.officeService.save(this.idEmpresa,this.model,this.modeRoot),i="Punto de venta registrado correctamente."),a.subscribe(_=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:i}),this.router.navigateByUrl(this.linkVolver)})}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.value.nombre,this.model.codigo=this.modelForm.value.codigo,this.model.direccion=this.modelForm.value.direccion,this.model.nombreComercial=this.modelForm.value.nombreComercial,this.model.urlLogo=this.modelForm.value.urlLogo,this.model.telefono=this.modelForm.value.telefono,this.model.empresa={id:this.idEmpresa},this.model.horario=this.modelForm.value.horario,this.model.tipoDireccion=this.modelForm.value.tipoDireccion,this.model.direccionCompleta=this.modelForm.value.direccionCompleta,this.model.direccion=this.modelForm.value.direccion,this.model.numero=this.modelForm.value.numero,this.model.numeroDepartamento=this.modelForm.value.numeroDepartamento,this.model.referencia=this.modelForm.value.referencia,this.model.codigoDepartamento=this.modelForm.value.codigoDepartamento,this.model.codigoProvincia=this.modelForm.value.codigoProvincia,this.model.codigoDistrito=this.modelForm.value.codigoDistrito,this.model.latitud=this.modelForm.value.latitud,this.model.longitud=this.modelForm.value.longitud,this.model.ciudadesAtencion=this.modelForm.value.ciudadesAtencion}modelToForm(a){this.modelForm.patchValue({nombre:a.nombre,codigo:a.codigo,nombreComercial:a.nombreComercial?a.nombreComercial:null,telefono:a.telefono,urlLogo:a.urlLogo?a.urlLogo:null,horario:a.horario,tipoDireccion:a.tipoDireccion,direccionCompleta:a.direccionCompleta,direccion:a.direccion,numero:a.numero,numeroDepartamento:a.numeroDepartamento,referencia:a.referencia,codigoDepartamento:a.codigoDepartamento,codigoProvincia:a.codigoProvincia,codigoDistrito:a.codigoDistrito,latitud:a.latitud,longitud:a.longitud}),a.ciudadesAtencion.forEach(i=>this.addCiudadAtencionForm(i))}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.route.snapshot.data.title}get nombre(){return this.modelForm.get("nombre")}get codigo(){return this.modelForm.get("codigo")}get direccion(){return this.modelForm.get("direccion")}get telefono(){return this.modelForm.get("telefono")}get nombreComercial(){return this.modelForm.get("nombreComercial")}get urlLogo(){return this.modelForm.get("urlLogo")}get horario(){return this.modelForm.get("horario")}onFileUpload(a){const i=new FormData,_=a.files[0];i.append("file",_,_.name),this.userService.uploadImage(this.idEmpresa,i).subscribe(T=>{this.modelForm.patchValue({urlLogo:T.url}),this.messageService.add({severity:"success",summary:"Archivo subido",detail:""})})}loadModel(){this.isEdit=this.route.snapshot.data.isEdit,this.isEdit&&this.route.params.subscribe(a=>{this.officeService.findById(this.idEmpresa,a.id,this.modeRoot).subscribe(_=>{_&&(this.model=_,_.direccionCompleta||(_.direccionCompleta=_.direccion),this.modelToForm(_))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.officeService.deleteById(this.idEmpresa,this.model.id,this.modeRoot).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}get modeRoot(){return this.route.snapshot.data.modeRoot}loadIdEmpresa(){return new Promise(a=>{this.modeRoot?this.route.params.subscribe(i=>{this.idEmpresa=i.idEmpresa,a(void 0)}):(this.idEmpresa=this.loginService.getUser().empresa.id,a(void 0))})}get linkVolver(){return this.modeRoot?`/empresas/${this.idEmpresa}/puntos-venta`:"/puntos-venta"}openModalAddHorario(){this.dialogService.open(c,{header:"Selecciona un horario o crea uno nuevo",width:"80%"}).onClose.subscribe(i=>{i&&this.modelForm.patchValue({horario:i})})}openModalEditAddress(){this.dialogAddress=!0}get modelFormCiudadesAtencion(){return this.modelForm.get("ciudadesAtencion")}addCiudadAtencionForm(a){this.modelFormCiudadesAtencion.controls.find(i=>i.get("ciudad").value.id===a.ciudad.id)?this.messageService.add({severity:"warn",summary:"Mensaje",detail:`La ciudad ${a.ciudad.nombreDistrito} ya est\xe1 agregada.`}):this.modelFormCiudadesAtencion.push(this.createCiudadAtencionForm(a))}deleteCiudadAtencionForm(a){this.modelFormCiudadesAtencion.at(a)&&this.modelFormCiudadesAtencion.at(a).value.id?this.modelFormCiudadesAtencion.at(a).patchValue({eliminado:!0}):this.modelFormCiudadesAtencion.removeAt(a)}createCiudadAtencionForm(a){return this.fb.group({id:[a.id,[]],ciudad:[a.ciudad,[t.kI.required]],costoEnvio:[void 0!==a.costoEnvio?a.costoEnvio:0,[t.kI.required]],eliminado:[!1,[]]})}openModalAddCiudad(){this.dialogService.open(f,{data:{dialog:!0},header:"Selecciona una ciudad",width:"80%"}).onClose.subscribe(i=>{i&&this.addCiudadAtencionForm({ciudad:i})})}}K.\u0275fac=function(a){return new(a||K)(e.Y36(x.gz),e.Y36(u.p),e.Y36(x.F0),e.Y36(m.l),e.Y36(C.J),e.Y36(M.ez),e.Y36(M.YP),e.Y36(p.i),e.Y36(O.Z),e.Y36(t.qu),e.Y36(A.r),e.Y36(N.xA))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-punto-venta"]],decls:59,vars:22,consts:[[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12"],["header","Datos Principales"],[1,"grid","form-group"],[1,"col-12","md:col-2"],["for","nombre"],[1,"col-12","md:col-4"],["formControlName","nombre","id","nombre","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre",4,"ngIf"],["formControlName","codigo","id","codigo","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese c\xf3digo",4,"ngIf"],["for","direccion"],[1,"p-inputgroup"],["formControlName","direccionCompleta","id","direccion","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["severity","error","text","Ingrese direcci\xf3n",4,"ngIf"],["formControlName","telefono","id","telefono","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese tel\xe9fono",4,"ngIf"],["header","Horario"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar horario",3,"click"],["class","col-6 md:col-4",4,"ngIf"],["header","Ciudades de cobertura"],[1,"label-form"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar ciudad",3,"click"],["formArrayName","ciudadesAtencion",3,"value","rows","responsive"],["pTemplate","header"],["pTemplate","body"],["header","Datos para comprobante de pago",4,"ngIf"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["appendTo","body","header","Direcci\xf3n",3,"visible","modal","responsive","visibleChange"],["severity","error","text","Ingrese nombre"],["severity","error","text","Ingrese c\xf3digo"],["severity","error","text","Ingrese direcci\xf3n"],["severity","error","text","Ingrese tel\xe9fono"],[1,"col-6","md:col-4"],[3,"horario"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],["severity","error","text","Ingrese costo",4,"ngIf"],[2,"text-align","center"],["pTooltip","Eliminar","pButton","","type","button","icon","pi pi-trash",1,"p-button-danger","lrm-1",3,"click"],["type","text","pInputText","","formControlName","costoEnvio","pKeyFilter","num"],[1,"pi","pi-pencil",2,"font-size","1.5em","float","right"],["severity","error","text","Ingrese costo"],["header","Datos para comprobante de pago"],[1,"col-6"],["formControlName","nombreComercial","id","nombreComercial","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre comercial",4,"ngIf"],["onClick","this.select();","formControlName","urlLogo","id","urlLogo","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["accept","image/*","chooseLabel","Selecciona una imagen","uploadLabel","Subir imagen","cancelLabel","Cancelar","name","file","maxFileSize","1000000",3,"customUpload","multiple","uploadHandler"],["pTemplate","content"],["style","width: 100%;",3,"src",4,"ngIf"],["severity","error","text","Ingrese nombre comercial"],[4,"ngFor","ngForOf"],[2,"width","100%",3,"src"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"],[3,"modelForm"]],template:function(a,i){1&a&&(e.TgZ(0,"p-card"),e.TgZ(1,"h3"),e.YNc(2,J,2,1,"span",0),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return i.submitForm()}),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"p-tabView"),e.TgZ(7,"p-tabPanel",4),e.TgZ(8,"div",2),e.TgZ(9,"div",3),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e.TgZ(12,"label",7),e._uU(13,"Nombre (*)"),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"input",9),e.YNc(16,w,1,0,"p-message",10),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"label",7),e._uU(19,"C\xf3digo (*)"),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e._UZ(21,"input",11),e.YNc(22,W,1,0,"p-message",12),e.qZA(),e.TgZ(23,"div",6),e.TgZ(24,"label",13),e._uU(25,"Direcci\xf3n (*)"),e.qZA(),e.qZA(),e.TgZ(26,"div",8),e.TgZ(27,"div",14),e._UZ(28,"input",15),e.TgZ(29,"button",16),e.NdJ("click",function(){return i.openModalEditAddress()}),e.qZA(),e.qZA(),e.YNc(30,X,1,0,"p-message",17),e.qZA(),e.TgZ(31,"div",6),e.TgZ(32,"label",7),e._uU(33,"Telefono"),e.qZA(),e.qZA(),e.TgZ(34,"div",8),e._UZ(35,"input",18),e.YNc(36,k,1,0,"p-message",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"p-tabPanel",20),e.TgZ(38,"div",2),e.TgZ(39,"div",3),e.TgZ(40,"button",21),e.NdJ("click",function(){return i.openModalAddHorario()}),e.qZA(),e.qZA(),e.YNc(41,ee,3,1,"div",22),e.qZA(),e.qZA(),e.TgZ(42,"p-tabPanel",23),e.TgZ(43,"label",24),e._uU(44,"Cobertura de ciudades"),e.qZA(),e.TgZ(45,"div",2),e.TgZ(46,"div",3),e.TgZ(47,"button",25),e.NdJ("click",function(){return i.openModalAddCiudad()}),e.qZA(),e.qZA(),e.TgZ(48,"div",3),e.TgZ(49,"p-table",26),e.YNc(50,te,7,0,"ng-template",27),e.YNc(51,ae,1,1,"ng-template",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(52,pe,15,4,"p-tabPanel",29),e.qZA(),e.qZA(),e.TgZ(53,"div",30),e._UZ(54,"button",31),e.YNc(55,ue,1,0,"button",32),e._UZ(56,"button",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"p-dialog",34),e.NdJ("visibleChange",function(T){return i.dialogAddress=T}),e.YNc(58,ge,2,1,"div",0),e.qZA()),2&a&&(e.xp6(2),e.Q6J("ngIf",i.empresa&&i.modeRoot),e.xp6(1),e.Q6J("formGroup",i.modelForm),e.xp6(13),e.Q6J("ngIf",i.nombre.touched&&(null==i.nombre.errors?null:i.nombre.errors.required)),e.xp6(6),e.Q6J("ngIf",i.codigo.touched&&(null==i.codigo.errors?null:i.codigo.errors.required)),e.xp6(8),e.Q6J("ngIf",i.direccion.touched&&(null==i.direccion.errors?null:i.direccion.errors.required)),e.xp6(6),e.Q6J("ngIf",i.telefono.touched&&(null==i.telefono.errors?null:i.telefono.errors.required)),e.xp6(5),e.Q6J("ngIf",i.horario.value),e.xp6(8),e.Q6J("value",i.modelFormCiudadesAtencion.controls)("rows",10)("responsive",!0),e.xp6(3),e.Q6J("ngIf",i.configCompany.nombreComercialPorPuntoVenta),e.xp6(2),e.Q6J("disabled",!i.modelForm.valid)("label",i.textButtonAction),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(1),e.Q6J("routerLink",i.linkVolver),e.xp6(1),e.Akn(e.DdM(21,_e)),e.Q6J("visible",i.dialogAddress)("modal",!0)("responsive",!0),e.xp6(1),e.Q6J("ngIf",i.modelForm))},directives:[V.Z,F.O5,t._Y,t.JL,t.sg,g.xf,g.x4,t.Fj,t.JJ,t.u,v.o,U.q,B.Hq,S.u,d.$,q.iA,t.CE,M.jx,t.x0,q.Wq,q.YL,Z.Fr,l.p,F.sg,x.rH,h.V,R.K],encapsulation:2}),(0,o.gn)([(0,I.Ph)(r.Z.getConfig)],K.prototype,"configCompany$",void 0)},32245:(j,P,n)=>{n.d(P,{Q:()=>U});var o=n(82817),t=n(5e3),E=n(74202),I=n(6969),r=n(96310),y=n(20207),b=n(47745),e=n(74297),x=n(69808),O=n(98952),M=n(59783),L=n(40845),N=n(4119);function V(d,Z){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const l=t.oxw();t.xp6(1),t.hij("(",l.empresa.razonSocial,")")}}function q(d,Z){if(1&d&&t._UZ(0,"p-sortIcon",12),2&d){const l=t.oxw().$implicit;t.Q6J("field",l.field)}}function B(d,Z){if(1&d&&(t.TgZ(0,"th",10),t._uU(1),t.YNc(2,q,1,1,"p-sortIcon",11),t.qZA()),2&d){const l=Z.$implicit;t.Q6J("pSortableColumn",l.field),t.xp6(1),t.hij(" ",l.header," "),t.xp6(1),t.Q6J("ngIf",!l.isActions)}}function S(d,Z){if(1&d&&(t.TgZ(0,"tr"),t.YNc(1,B,3,3,"th",9),t.qZA()),2&d){const l=Z.$implicit;t.xp6(1),t.Q6J("ngForOf",l)}}function Q(d,Z){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const l=t.oxw(4).$implicit;t.xp6(1),t.Oqu(l.nombre)}}function $(d,Z){if(1&d&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"Nombre"),t.qZA(),t.YNc(3,Q,2,1,"span",1),t.BQk()),2&d){const l=t.oxw(2).$implicit,h=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",h[l.field])}}function f(d,Z){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const l=t.oxw(4).$implicit;t.xp6(1),t.Oqu(l.nombreCorto)}}function D(d,Z){if(1&d&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"Nombre Corto"),t.qZA(),t.YNc(3,f,2,1,"span",1),t.BQk()),2&d){const l=t.oxw(2).$implicit,h=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",h[l.field])}}function c(d,Z){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const l=t.oxw(4).$implicit;t.xp6(1),t.Oqu(l.direccionCompleta)}}function u(d,Z){if(1&d&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2,"Direccion"),t.qZA(),t.YNc(3,c,2,1,"span",1),t.BQk()),2&d){const l=t.oxw(2).$implicit,h=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",h[l.field])}}function m(d,Z){if(1&d&&(t.ynx(0),t._uU(1),t.BQk()),2&d){const l=t.oxw(2).$implicit,h=t.oxw().$implicit;t.xp6(1),t.hij(" ",h[l.field]," ")}}function C(d,Z){1&d&&(t.ynx(0),t.YNc(1,$,4,1,"ng-container",16),t.YNc(2,D,4,1,"ng-container",16),t.YNc(3,u,4,1,"ng-container",16),t.YNc(4,m,2,1,"ng-container",17),t.BQk()),2&d&&(t.xp6(1),t.Q6J("ngSwitchCase","nombre"),t.xp6(1),t.Q6J("ngSwitchCase","nombreCorto"),t.xp6(1),t.Q6J("ngSwitchCase","direccion"))}function p(d,Z){if(1&d&&(t.ynx(0,19),t.TgZ(1,"span",18),t._uU(2,"Acciones"),t.qZA(),t._UZ(3,"button",20),t.BQk()),2&d){const l=t.oxw(2).$implicit,h=t.oxw();t.xp6(3),t.Q6J("routerLink",h.linkUpdate(l.id))}}function A(d,Z){if(1&d&&(t.TgZ(0,"td",14),t.YNc(1,C,5,3,"ng-container",1),t.YNc(2,p,4,1,"ng-container",15),t.qZA()),2&d){const l=Z.$implicit;t.Q6J("ngSwitch",l.field),t.xp6(1),t.Q6J("ngIf",!l.isActions),t.xp6(1),t.Q6J("ngIf",l.isActions)}}function F(d,Z){if(1&d&&(t.TgZ(0,"tr"),t.YNc(1,A,3,3,"td",13),t.qZA()),2&d){const l=Z.columns;t.xp6(1),t.Q6J("ngForOf",l)}}function g(d,Z){1&d&&t._UZ(0,"button",24)}function v(d,Z){if(1&d){const l=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"button",22),t.NdJ("click",function(){return t.CHM(l),t.oxw().new()}),t.qZA(),t.YNc(2,g,1,0,"button",23),t.qZA()}if(2&d){const l=t.oxw();t.xp6(2),t.Q6J("ngIf",l.modeRoot)}}let U=(()=>{class d{constructor(l,h,R,J,w,W){this.route=l,this.router=h,this.officeService=R,this.companyService=J,this.loginService=w,this.breadcrumbService=W,this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,o.kn)(this.route)),this.cols=[{field:"nombre",header:"Nombre"},{field:"codigo",header:"C\xf3digo"},{field:"direccion",header:"Direcci\xf3n"},{header:"Acciones",isActions:!0}],this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(l=>{this.empresa=l})})}new(){this.router.navigateByUrl(this.modeRoot?`/empresas/${this.idEmpresa}/puntos-venta/nuevo`:"/puntos-venta/nuevo")}loadLazy(l){const h=this.idEmpresa,J=["paginacion=true","pageNumber="+l.first/this.perPage,`perPage=${l.rows}`];l.sortOrder&&J.push(`sortOrder=${l.sortOrder}`),l.sortField&&J.push(`sortField=${l.sortField}`),this.officeService.findAllByPage(h,J.join("&"),this.modeRoot).subscribe(w=>{this.totalRecords=w.totalElements,this.offices=w.content})}get modeRoot(){return this.route.snapshot.data.modeRoot}loadIdEmpresa(){return new Promise(l=>{this.modeRoot?this.route.params.subscribe(h=>{this.idEmpresa=h.idEmpresa,l(void 0)}):(this.idEmpresa=this.loginService.getUser().empresa.id,l(void 0))})}linkUpdate(l){return this.modeRoot?`/empresas/${this.idEmpresa}/puntos-venta/editar/${l}`:`/puntos-venta/editar/${l}`}}return d.\u0275fac=function(l){return new(l||d)(t.Y36(E.gz),t.Y36(E.F0),t.Y36(I.l),t.Y36(r.J),t.Y36(y.r),t.Y36(b.p))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-puntos-venta"]],decls:10,vars:9,consts:[[1,"p-panel-title"],[4,"ngIf"],[1,"grid"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"],["routerLink","/empresas","style","margin-right: 0.4rem","pButton","","type","button","label","Volver","class","p-button-secondary",4,"ngIf"],["routerLink","/empresas","pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem"]],template:function(l,h){1&l&&(t.TgZ(0,"p-card"),t.TgZ(1,"h3",0),t.YNc(2,V,2,1,"span",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"p-table",4,5),t.NdJ("onLazyLoad",function(J){return h.loadLazy(J)}),t.YNc(7,S,2,1,"ng-template",6),t.YNc(8,F,2,1,"ng-template",7),t.YNc(9,v,3,1,"ng-template",8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l&&(t.xp6(2),t.Q6J("ngIf",h.empresa&&h.modeRoot),t.xp6(3),t.Q6J("columns",h.cols)("value",h.offices)("lazy",!0)("paginator",!0)("rows",h.perPage)("totalRecords",h.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[e.Z,x.O5,O.iA,M.jx,x.sg,O.lQ,O.fz,x.RF,x.n9,x.ED,L.Hq,N.u,E.rH],encapsulation:2}),d})()}}]);