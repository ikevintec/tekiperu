"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[5931],{85931:(k,m,i)=>{i.r(m),i.d(m,{MonedasModule:()=>O});var l=i(74202),u=i(82817),n=i(5e3),h=i(21602),f=i(20207),C=i(85932),M=i(47745),g=i(59783),x=i(24394),v=i(74297),b=i(14036),p=i(93075),T=i(40845),_=i(98952),s=i(69808),y=i(20657),A=i(31424),Z=i(61208),S=i(4119);function w(t,a){if(1&t&&n._UZ(0,"p-sortIcon",12),2&t){const e=n.oxw().$implicit;n.Q6J("field",e.field)}}function J(t,a){if(1&t&&(n.TgZ(0,"th",10),n._uU(1),n.YNc(2,w,1,1,"p-sortIcon",11),n.qZA()),2&t){const e=a.$implicit;n.Q6J("pSortableColumn",e.field),n.xp6(1),n.hij(" ",e.header," "),n.xp6(1),n.Q6J("ngIf",!e.isActions)}}function N(t,a){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,J,3,3,"th",9),n.qZA()),2&t){const e=a.$implicit;n.xp6(1),n.Q6J("ngForOf",e)}}function Q(t,a){if(1&t){const e=n.EpF();n.ynx(0),n.TgZ(1,"input",20),n.NdJ("blur",function(){n.CHM(e);const c=n.oxw(3).$implicit;return n.oxw().changeTipoCambio(c)})("ngModelChange",function(c){n.CHM(e);const r=n.oxw(2).$implicit;return n.oxw().$implicit[r.field]=c}),n.qZA(),n.BQk()}if(2&t){const e=n.oxw(2).$implicit,o=n.oxw().$implicit;n.xp6(1),n.Q6J("disabled",o.monedaNacional)("ngModel",o[e.field])}}function D(t,a){if(1&t){const e=n.EpF();n.ynx(0,21),n.TgZ(1,"p-checkbox",22),n.NdJ("onChange",function(){n.CHM(e);const c=n.oxw(3).$implicit;return n.oxw().changeMonedaNacional(c)})("ngModelChange",function(c){n.CHM(e);const r=n.oxw(2).$implicit;return n.oxw().$implicit[r.field]=c}),n.qZA(),n.BQk()}if(2&t){const e=n.oxw(2).$implicit,o=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",o[e.field])}}function $(t,a){if(1&t){const e=n.EpF();n.ynx(0,21),n.TgZ(1,"p-checkbox",22),n.NdJ("onChange",function(){n.CHM(e);const c=n.oxw(3).$implicit;return n.oxw().changeMonedaPorDefecto(c)})("ngModelChange",function(c){n.CHM(e);const r=n.oxw(2).$implicit;return n.oxw().$implicit[r.field]=c}),n.qZA(),n.BQk()}if(2&t){const e=n.oxw(2).$implicit,o=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",o[e.field])}}function Y(t,a){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw(2).$implicit,o=n.oxw().$implicit;n.xp6(1),n.hij(" ",o[e.field]," ")}}function F(t,a){1&t&&(n.ynx(0),n.YNc(1,Q,2,2,"ng-container",17),n.YNc(2,D,2,1,"ng-container",18),n.YNc(3,$,2,1,"ng-container",18),n.YNc(4,Y,2,1,"ng-container",19),n.BQk()),2&t&&(n.xp6(1),n.Q6J("ngSwitchCase","tipoCambio"),n.xp6(1),n.Q6J("ngSwitchCase","monedaNacional"),n.xp6(1),n.Q6J("ngSwitchCase","monedaPorDefecto"))}function B(t,a){if(1&t){const e=n.EpF();n.ynx(0,23),n.TgZ(1,"button",24),n.NdJ("click",function(){n.CHM(e);const c=n.oxw(2).$implicit;return n.oxw().removeCurrency(c)}),n.qZA(),n.BQk()}}function I(t,a){if(1&t&&(n.TgZ(0,"td",14),n.YNc(1,F,5,3,"ng-container",15),n.YNc(2,B,2,0,"ng-container",16),n.qZA()),2&t){const e=a.$implicit;n.Q6J("ngSwitch",e.field),n.xp6(1),n.Q6J("ngIf",!e.isActions),n.xp6(1),n.Q6J("ngIf",e.isActions)}}function L(t,a){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,I,3,3,"td",13),n.qZA()),2&t){const e=a.columns;n.xp6(1),n.Q6J("ngForOf",e)}}const H=[{path:"",component:(()=>{class t{constructor(e,o,c,r,d,P,z){this.currencyService=e,this.loginService=o,this.store=c,this.route=r,this.breadcrumbService=d,this.messageService=P,this.ls=z,this.currencies=[]}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.cols=[{field:"codigoMoneda",header:"Moneda"},{field:"tipoCambio",header:"Tipo de cambio"},{field:"monedaNacional",header:"Moneda nacional"},{field:"monedaPorDefecto",header:"Moneda por defecto"},{header:"Acciones",isActions:!0}],this.findCurrencies()}findCurrencies(){this.currencyService.findAll().subscribe(e=>{this.currencies=e})}removeCurrency(e){this.currencyService.deleteById(e.id).subscribe(()=>{this.findCurrencies()})}get validationButtonAdd(){return this.currencySelected&&0===this.currencies.filter(e=>e.codigoMoneda===this.currencySelected).length}addCurrency(){this.currencyService.save({codigoMoneda:this.currencySelected}).subscribe(o=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Moneda agregada correctamente"}),this.findCurrencies()})}changeTipoCambio(e){this.currencyService.updateTipoCambio(e.id,{tipoCambio:e.tipoCambio}).subscribe(o=>this.findCurrencies(),o=>this.findCurrencies())}changeMonedaNacional(e){this.currencyService.updateMonedaNacional(e.id,{monedaNacional:e.monedaNacional}).subscribe(o=>this.findCurrencies(),o=>this.findCurrencies())}changeMonedaPorDefecto(e){this.currencyService.updateMonedaPorDefecto(e.id,{monedaPorDefecto:e.monedaPorDefecto}).subscribe(o=>this.findCurrencies(),o=>this.findCurrencies())}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(h.i),n.Y36(f.r),n.Y36(C.yh),n.Y36(l.gz),n.Y36(M.p),n.Y36(g.ez),n.Y36(x.E))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-monedas"]],decls:12,vars:6,consts:[[1,"grid"],[1,"col-12"],[2,"margin-right","0.3rem"],["placeholder","Seleccione moneda",3,"ngModel","options","ngModelChange"],["pButton","","type","button","label","Agregar moneda",3,"disabled","click"],["dataKey","id",3,"columns","value","autoLayout"],["dt",""],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],["class","center",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["pKeyFilter","num","placeholder","Tipo de cambio","type","text","pInputText","",2,"width","100%",3,"disabled","ngModel","blur","ngModelChange"],[1,"center"],["binary","true",3,"ngModel","onChange","ngModelChange"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger",3,"click"]],template:function(e,o){1&e&&(n.TgZ(0,"p-card"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"span",2),n.TgZ(4,"p-dropdown",3),n.NdJ("ngModelChange",function(r){return o.currencySelected=r}),n.qZA(),n.qZA(),n.TgZ(5,"button",4),n.NdJ("click",function(){return o.addCurrency()}),n.qZA(),n.TgZ(6,"h3"),n._uU(7,"Mis monedas"),n.qZA(),n.TgZ(8,"p-table",5,6),n.YNc(10,N,2,1,"ng-template",7),n.YNc(11,L,2,1,"ng-template",8),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("ngModel",o.currencySelected)("options",o.ls.monedas),n.xp6(1),n.Q6J("disabled",!o.validationButtonAdd),n.xp6(3),n.Q6J("columns",o.cols)("value",o.currencies)("autoLayout",!0))},directives:[v.Z,b.Lt,p.JJ,p.On,T.Hq,_.iA,g.jx,s.sg,_.lQ,s.O5,_.fz,s.RF,s.n9,p.Fj,y.Fr,A.o,Z.XZ,s.ED,S.u],styles:[""]}),t})(),data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Monedas"}]}}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[l.Bz.forChild(H)],l.Bz]}),t})();var E=i(20958);let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[j,E.m]]}),t})()}}]);