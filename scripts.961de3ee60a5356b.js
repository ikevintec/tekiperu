var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,n=0,r=_self.Prism={manual:_self.Prism&&_self.Prism.manual,disableWorkerMessageHandler:_self.Prism&&_self.Prism.disableWorkerMessageHandler,util:{encode:function(a){return a instanceof i?new i(a.type,r.util.encode(a.content),a.alias):"Array"===r.util.type(a)?a.map(r.util.encode):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++n}),a.__id},clone:function(a){switch(r.util.type(a)){case"Object":var l={};for(var p in a)a.hasOwnProperty(p)&&(l[p]=r.util.clone(a[p]));return l;case"Array":return a.map(function(d){return r.util.clone(d)})}return a}},languages:{extend:function(a,o){var l=r.util.clone(r.languages[a]);for(var p in o)l[p]=o[p];return l},insertBefore:function(a,o,l,p){var d=(p=p||r.languages)[a];if(2==arguments.length){for(var v in l=arguments[1])l.hasOwnProperty(v)&&(d[v]=l[v]);return d}var g={};for(var f in d)if(d.hasOwnProperty(f)){if(f==o)for(var v in l)l.hasOwnProperty(v)&&(g[v]=l[v]);g[f]=d[f]}return r.languages.DFS(r.languages,function(u,m){m===p[a]&&u!=a&&(this[u]=g)}),p[a]=g},DFS:function(a,o,l,p){for(var d in p=p||{},a)a.hasOwnProperty(d)&&(o.call(a,d,a[d],l||d),"Object"!==r.util.type(a[d])||p[r.util.objId(a[d])]?"Array"===r.util.type(a[d])&&!p[r.util.objId(a[d])]&&(p[r.util.objId(a[d])]=!0,r.languages.DFS(a[d],o,d,p)):(p[r.util.objId(a[d])]=!0,r.languages.DFS(a[d],o,null,p)))}},plugins:{},highlightAll:function(a,o){r.highlightAllUnder(document,a,o)},highlightAllUnder:function(a,o,l){var p={callback:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",p);for(var g,d=p.elements||a.querySelectorAll(p.selector),v=0;g=d[v++];)r.highlightElement(g,!0===o,p.callback)},highlightElement:function(a,o,l){for(var p,d,v=a;v&&!e.test(v.className);)v=v.parentNode;v&&(p=(v.className.match(e)||[,""])[1].toLowerCase(),d=r.languages[p]),a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+p,a.parentNode&&/pre/i.test((v=a.parentNode).nodeName)&&(v.className=v.className.replace(e,"").replace(/\s+/g," ")+" language-"+p);var f={element:a,language:p,grammar:d,code:a.textContent};if(r.hooks.run("before-sanity-check",f),!f.code||!f.grammar)return f.code&&(r.hooks.run("before-highlight",f),f.element.textContent=f.code,r.hooks.run("after-highlight",f)),void r.hooks.run("complete",f);if(r.hooks.run("before-highlight",f),o&&_self.Worker){var u=new Worker(r.filename);u.onmessage=function(m){f.highlightedCode=m.data,r.hooks.run("before-insert",f),f.element.innerHTML=f.highlightedCode,l&&l.call(f.element),r.hooks.run("after-highlight",f),r.hooks.run("complete",f)},u.postMessage(JSON.stringify({language:f.language,code:f.code,immediateClose:!0}))}else f.highlightedCode=r.highlight(f.code,f.grammar,f.language),r.hooks.run("before-insert",f),f.element.innerHTML=f.highlightedCode,l&&l.call(a),r.hooks.run("after-highlight",f),r.hooks.run("complete",f)},highlight:function(a,o,l){var p=r.tokenize(a,o);return i.stringify(r.util.encode(p),l)},matchGrammar:function(a,o,l,p,d,v,g){var f=r.Token;for(var u in l)if(l.hasOwnProperty(u)&&l[u]){if(u==g)return;var m=l[u];m="Array"===r.util.type(m)?m:[m];for(var h=0;h<m.length;++h){var y=m[h],b=y.inside,c=!!y.lookbehind,E=!!y.greedy,S=0,x=y.alias;if(E&&!y.pattern.global){var A=y.pattern.toString().match(/[imuy]*$/)[0];y.pattern=RegExp(y.pattern.source,A+"g")}y=y.pattern||y;for(var O=p,F=d;O<o.length;F+=o[O].length,++O){var w=o[O];if(o.length>a.length)return;if(!(w instanceof f)){y.lastIndex=0;var P=1;if(!(_=y.exec(w))&&E&&O!=o.length-1){if(y.lastIndex=F,!(_=y.exec(a)))break;for(var I=_.index+(c?_[1].length:0),j=_.index+_[0].length,T=O,D=F,H=o.length;T<H&&(D<j||!o[T].type&&!o[T-1].greedy);++T)I>=(D+=o[T].length)&&(++O,F=D);if(o[O]instanceof f||o[T-1].greedy)continue;P=T-O,w=a.slice(F,D),_.index-=F}if(!_){if(v)break;continue}c&&(S=_[1].length),j=(I=_.index+S)+(_=_[0].slice(S)).length;var _,R=w.slice(0,I),L=w.slice(j),N=[O,P];R&&(++O,F+=R.length,N.push(R));var k=new f(u,b?r.tokenize(_,b):_,x,_,E);if(N.push(k),L&&N.push(L),Array.prototype.splice.apply(o,N),1!=P&&r.matchGrammar(a,o,l,O,F,!0,u),v)break}}}}},tokenize:function(a,o,l){var p=[a],d=o.rest;if(d){for(var v in d)o[v]=d[v];delete o.rest}return r.matchGrammar(a,p,o,0,0,!1),p},hooks:{all:{},add:function(a,o){var l=r.hooks.all;l[a]=l[a]||[],l[a].push(o)},run:function(a,o){var l=r.hooks.all[a];if(l&&l.length)for(var d,p=0;d=l[p++];)d(o)}}},i=r.Token=function(a,o,l,p,d){this.type=a,this.content=o,this.alias=l,this.length=0|(p||"").length,this.greedy=!!d};if(i.stringify=function(a,o,l){if("string"==typeof a)return a;if("Array"===r.util.type(a))return a.map(function(g){return i.stringify(g,o,a)}).join("");var p={type:a.type,content:i.stringify(a.content,o,l),tag:"span",classes:["token",a.type],attributes:{},language:o,parent:l};if(a.alias){var d="Array"===r.util.type(a.alias)?a.alias:[a.alias];Array.prototype.push.apply(p.classes,d)}r.hooks.run("wrap",p);var v=Object.keys(p.attributes).map(function(g){return g+'="'+(p.attributes[g]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+(v?" "+v:"")+">"+p.content+"</"+p.tag+">"},!_self.document)return _self.addEventListener&&(r.disableWorkerMessageHandler||_self.addEventListener("message",function(a){var o=JSON.parse(a.data),l=o.language,d=o.immediateClose;_self.postMessage(r.highlight(o.code,r.languages[l],l)),d&&_self.close()},!1)),_self.Prism;var s=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return s&&(r.filename=s.src,!r.manual&&!s.hasAttribute("data-manual")&&("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(r.highlightAll):window.setTimeout(r.highlightAll,16):document.addEventListener("DOMContentLoaded",r.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css",greedy:!0}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\d*\.?\d+(?:[Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript",greedy:!0}}),Prism.languages.js=Prism.languages.javascript,"undefined"==typeof self||!self.Prism||!self.document||!document.querySelector||(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(n){for(var i,r=n.getAttribute("data-src"),s=n,a=/\blang(?:uage)?-(?!\*)(\w+)\b/i;s&&!a.test(s.className);)s=s.parentNode;if(s&&(i=(n.className.match(a)||[,""])[1]),!i){var o=(r.match(/\.(\w+)$/)||[,""])[1];i=e[o]||o}var l=document.createElement("code");l.className="language-"+i,n.textContent="",l.textContent="Loading\u2026",n.appendChild(l);var p=new XMLHttpRequest;p.open("GET",r,!0),p.onreadystatechange=function(){4==p.readyState&&(p.status<400&&p.responseText?(l.textContent=p.responseText,Prism.highlightElement(l)):l.textContent=p.status>=400?"\u2716 Error "+p.status+" while fetching file: "+p.statusText:"\u2716 Error: File does not exist or is empty")},p.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight)),Prism.languages.typescript=Prism.languages.extend("javascript",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|symbol|namespace|abstract|require|type)\b/}),Prism.languages.ts=Prism.languages.typescript;var CryptoJS=CryptoJS||function(e,n){var r={},i=r.lib={},s=i.Base=function(){function u(){}return{extend:function(m){u.prototype=this;var h=new u;return m&&h.mixIn(m),h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var h in m)m.hasOwnProperty(h)&&(this[h]=m[h]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=s.extend({init:function(u,m){u=this.words=u||[],this.sigBytes=null!=m?m:4*u.length},toString:function(u){return(u||l).stringify(this)},concat:function(u){var m=this.words,h=u.words,y=this.sigBytes,b=u.sigBytes;if(this.clamp(),y%4)for(var c=0;c<b;c++)m[y+c>>>2]|=(h[c>>>2]>>>24-c%4*8&255)<<24-(y+c)%4*8;else for(c=0;c<b;c+=4)m[y+c>>>2]=h[c>>>2];return this.sigBytes+=b,this},clamp:function(){var u=this.words,m=this.sigBytes;u[m>>>2]&=4294967295<<32-m%4*8,u.length=e.ceil(m/4)},clone:function(){var u=s.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var m=[],h=0;h<u;h+=4)m.push(4294967296*e.random()|0);return new a.init(m,u)}}),o=r.enc={},l=o.Hex={stringify:function(u){for(var m=u.words,h=u.sigBytes,y=[],b=0;b<h;b++){var c=m[b>>>2]>>>24-b%4*8&255;y.push((c>>>4).toString(16)),y.push((15&c).toString(16))}return y.join("")},parse:function(u){for(var m=u.length,h=[],y=0;y<m;y+=2)h[y>>>3]|=parseInt(u.substr(y,2),16)<<24-y%8*4;return new a.init(h,m/2)}},p=o.Latin1={stringify:function(u){for(var m=u.words,h=u.sigBytes,y=[],b=0;b<h;b++)y.push(String.fromCharCode(m[b>>>2]>>>24-b%4*8&255));return y.join("")},parse:function(u){for(var m=u.length,h=[],y=0;y<m;y++)h[y>>>2]|=(255&u.charCodeAt(y))<<24-y%4*8;return new a.init(h,m)}},d=o.Utf8={stringify:function(u){try{return decodeURIComponent(escape(p.stringify(u)))}catch(m){throw new Error("Malformed UTF-8 data")}},parse:function(u){return p.parse(unescape(encodeURIComponent(u)))}},v=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(u){"string"==typeof u&&(u=d.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var m=this._data,h=m.words,y=m.sigBytes,b=this.blockSize,E=y/(4*b),S=(E=u?e.ceil(E):e.max((0|E)-this._minBufferSize,0))*b,x=e.min(4*S,y);if(S){for(var A=0;A<S;A+=b)this._doProcessBlock(h,A);var O=h.splice(0,S);m.sigBytes-=x}return new a.init(O,x)},clone:function(){var u=s.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0}),f=(i.Hasher=v.extend({cfg:s.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){return u&&this._append(u),this._doFinalize()},blockSize:16,_createHelper:function(u){return function(m,h){return new u.init(h).finalize(m)}},_createHmacHelper:function(u){return function(m,h){return new f.HMAC.init(u,h).finalize(m)}}}),r.algo={});return r}(Math);(function(e){var s,n=(s=CryptoJS).lib,r=n.Base,i=n.WordArray;(s=s.x64={}).Word=r.extend({init:function(a,o){this.high=a,this.low=o}}),s.WordArray=r.extend({init:function(a,o){a=this.words=a||[],this.sigBytes=null!=o?o:8*a.length},toX32:function(){for(var a=this.words,o=a.length,l=[],p=0;p<o;p++){var d=a[p];l.push(d.high),l.push(d.low)}return i.create(l,this.sigBytes)},clone:function(){for(var a=r.clone.call(this),o=a.words=this.words.slice(0),l=o.length,p=0;p<l;p++)o[p]=o[p].clone();return a}})})(),CryptoJS.lib.Cipher||function(e){var n=(u=CryptoJS).lib,r=n.Base,i=n.WordArray,s=n.BufferedBlockAlgorithm,a=u.enc.Base64,o=u.algo.EvpKDF,l=n.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(h,y){return this.create(this._ENC_XFORM_MODE,h,y)},createDecryptor:function(h,y){return this.create(this._DEC_XFORM_MODE,h,y)},init:function(h,y,b){this.cfg=this.cfg.extend(b),this._xformMode=h,this._key=y,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(h){return this._append(h),this._process()},finalize:function(h){return h&&this._append(h),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(h){return{encrypt:function(y,b,c){return("string"==typeof b?m:f).encrypt(h,y,b,c)},decrypt:function(y,b,c){return("string"==typeof b?m:f).decrypt(h,y,b,c)}}}});n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var g=u.mode={},p=function(h,y,b){var c=this._iv;c?this._iv=void 0:c=this._prevBlock;for(var E=0;E<b;E++)h[y+E]^=c[E]},d=(n.BlockCipherMode=r.extend({createEncryptor:function(h,y){return this.Encryptor.create(h,y)},createDecryptor:function(h,y){return this.Decryptor.create(h,y)},init:function(h,y){this._cipher=h,this._iv=y}})).extend();d.Encryptor=d.extend({processBlock:function(h,y){var b=this._cipher,c=b.blockSize;p.call(this,h,y,c),b.encryptBlock(h,y),this._prevBlock=h.slice(y,y+c)}}),d.Decryptor=d.extend({processBlock:function(h,y){var b=this._cipher,c=b.blockSize,E=h.slice(y,y+c);b.decryptBlock(h,y),p.call(this,h,y,c),this._prevBlock=E}}),g=g.CBC=d,d=(u.pad={}).Pkcs7={pad:function(h,y){for(var b,c=(b=(b=4*y)-h.sigBytes%b)<<24|b<<16|b<<8|b,E=[],S=0;S<b;S+=4)E.push(c);b=i.create(E,b),h.concat(b)},unpad:function(h){h.sigBytes-=255&h.words[h.sigBytes-1>>>2]}},n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:g,padding:d}),reset:function(){l.reset.call(this);var h=(y=this.cfg).iv,y=y.mode;if(this._xformMode==this._ENC_XFORM_MODE)var b=y.createEncryptor;else b=y.createDecryptor,this._minBufferSize=1;this._mode=b.call(y,this,h&&h.words)},_doProcessBlock:function(h,y){this._mode.processBlock(h,y)},_doFinalize:function(){var h=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){h.pad(this._data,this.blockSize);var y=this._process(!0)}else y=this._process(!0),h.unpad(y);return y},blockSize:4});var v=n.CipherParams=r.extend({init:function(h){this.mixIn(h)},toString:function(h){return(h||this.formatter).stringify(this)}}),f=(g=(u.format={}).OpenSSL={stringify:function(h){var y=h.ciphertext;return((h=h.salt)?i.create([1398893684,1701076831]).concat(h).concat(y):y).toString(a)},parse:function(h){var y=(h=a.parse(h)).words;if(1398893684==y[0]&&1701076831==y[1]){var b=i.create(y.slice(2,4));y.splice(0,4),h.sigBytes-=16}return v.create({ciphertext:h,salt:b})}},n.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(h,y,b,c){c=this.cfg.extend(c);var E=h.createEncryptor(b,c);return y=E.finalize(y),v.create({ciphertext:y,key:b,iv:(E=E.cfg).iv,algorithm:h,mode:E.mode,padding:E.padding,blockSize:h.blockSize,formatter:c.format})},decrypt:function(h,y,b,c){return c=this.cfg.extend(c),y=this._parse(y,c.format),h.createDecryptor(b,c).finalize(y.ciphertext)},_parse:function(h,y){return"string"==typeof h?y.parse(h,this):h}})),u=(u.kdf={}).OpenSSL={execute:function(h,y,b,c){return c||(c=i.random(8)),h=o.create({keySize:y+b}).compute(h,c),b=i.create(h.words.slice(y),4*b),h.sigBytes=4*y,v.create({key:h,iv:b,salt:c})}},m=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:u}),encrypt:function(h,y,b,c){return b=(c=this.cfg.extend(c)).kdf.execute(b,h.keySize,h.ivSize),c.iv=b.iv,(h=f.encrypt.call(this,h,y,b.key,c)).mixIn(b),h},decrypt:function(h,y,b,c){return c=this.cfg.extend(c),y=this._parse(y,c.format),b=c.kdf.execute(b,h.keySize,h.ivSize,y.salt),c.iv=b.iv,f.decrypt.call(this,h,y,b.key,c)}})}(),function(){for(var e=CryptoJS,n=e.lib.BlockCipher,A=e.algo,r=[],i=[],s=[],a=[],o=[],l=[],p=[],d=[],v=[],g=[],f=[],u=0;256>u;u++)f[u]=128>u?u<<1:u<<1^283;var m=0,h=0;for(u=0;256>u;u++){var y;r[m]=y=(y=h^h<<1^h<<2^h<<3^h<<4)>>>8^255&y^99,i[y]=m;var b=f[m],c=f[b],E=f[c],S=257*f[y]^16843008*y;s[m]=S<<24|S>>>8,a[m]=S<<16|S>>>16,o[m]=S<<8|S>>>24,l[m]=S,p[y]=(S=16843009*E^65537*c^257*b^16843008*m)<<24|S>>>8,d[y]=S<<16|S>>>16,v[y]=S<<8|S>>>24,g[y]=S,m?(m=b^f[f[f[E^b]]],h^=f[f[h]]):m=h=1}var x=[0,1,2,4,8,16,32,64,128,27,54];A=A.AES=n.extend({_doReset:function(){for(var O=(w=this._key).words,F=w.sigBytes/4,w=4*((this._nRounds=F+6)+1),P=this._keySchedule=[],T=0;T<w;T++)if(T<F)P[T]=O[T];else{var D=P[T-1];T%F?6<F&&T%F==4&&(D=r[D>>>24]<<24|r[D>>>16&255]<<16|r[D>>>8&255]<<8|r[255&D]):(D=r[(D=D<<8|D>>>24)>>>24]<<24|r[D>>>16&255]<<16|r[D>>>8&255]<<8|r[255&D],D^=x[T/F|0]<<24),P[T]=P[T-F]^D}for(O=this._invKeySchedule=[],F=0;F<w;F++)T=w-F,D=F%4?P[T]:P[T-4],O[F]=4>F||4>=T?D:p[r[D>>>24]]^d[r[D>>>16&255]]^v[r[D>>>8&255]]^g[r[255&D]]},encryptBlock:function(O,F){this._doCryptBlock(O,F,this._keySchedule,s,a,o,l,r)},decryptBlock:function(O,F){var w=O[F+1];O[F+1]=O[F+3],O[F+3]=w,this._doCryptBlock(O,F,this._invKeySchedule,p,d,v,g,i),w=O[F+1],O[F+1]=O[F+3],O[F+3]=w},_doCryptBlock:function(O,F,w,P,T,D,H,I){for(var _=this._nRounds,q=O[F]^w[0],V=O[F+1]^w[1],C=O[F+2]^w[2],B=O[F+3]^w[3],j=4,R=1;R<_;R++){var L=P[q>>>24]^T[V>>>16&255]^D[C>>>8&255]^H[255&B]^w[j++],N=P[V>>>24]^T[C>>>16&255]^D[B>>>8&255]^H[255&q]^w[j++],k=P[C>>>24]^T[B>>>16&255]^D[q>>>8&255]^H[255&V]^w[j++];B=P[B>>>24]^T[q>>>16&255]^D[V>>>8&255]^H[255&C]^w[j++],q=L,V=N,C=k}L=(I[q>>>24]<<24|I[V>>>16&255]<<16|I[C>>>8&255]<<8|I[255&B])^w[j++],N=(I[V>>>24]<<24|I[C>>>16&255]<<16|I[B>>>8&255]<<8|I[255&q])^w[j++],k=(I[C>>>24]<<24|I[B>>>16&255]<<16|I[q>>>8&255]<<8|I[255&V])^w[j++],B=(I[B>>>24]<<24|I[q>>>16&255]<<16|I[V>>>8&255]<<8|I[255&C])^w[j++],O[F]=L,O[F+1]=N,O[F+2]=k,O[F+3]=B},keySize:8}),e.AES=n._createHelper(A)}(),function(){function e(f,u){var m=(this._lBlock>>>f^this._rBlock)&u;this._rBlock^=m,this._lBlock^=m<<f}function n(f,u){var m=(this._rBlock>>>f^this._lBlock)&u;this._lBlock^=m,this._rBlock^=m<<f}var s,r=CryptoJS,i=(s=r.lib).WordArray,a=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],v=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=a.DES=(s=s.BlockCipher).extend({_doReset:function(){for(var f=this._key.words,u=[],m=0;56>m;m++){var h=o[m]-1;u[m]=f[h>>>5]>>>31-h%32&1}for(f=this._subKeys=[],h=0;16>h;h++){var y=f[h]=[],b=p[h];for(m=0;24>m;m++)y[m/6|0]|=u[(l[m]-1+b)%28]<<31-m%6,y[4+(m/6|0)]|=u[28+(l[m+24]-1+b)%28]<<31-m%6;for(y[0]=y[0]<<1|y[0]>>>31,m=1;7>m;m++)y[m]>>>=4*(m-1)+3;y[7]=y[7]<<5|y[7]>>>27}for(u=this._invSubKeys=[],m=0;16>m;m++)u[m]=f[15-m]},encryptBlock:function(f,u){this._doCryptBlock(f,u,this._subKeys)},decryptBlock:function(f,u){this._doCryptBlock(f,u,this._invSubKeys)},_doCryptBlock:function(f,u,m){this._lBlock=f[u],this._rBlock=f[u+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var h=0;16>h;h++){for(var y=m[h],b=this._lBlock,c=this._rBlock,E=0,S=0;8>S;S++)E|=d[S][((c^y[S])&v[S])>>>0];this._lBlock=c,this._rBlock=b^E}m=this._lBlock,this._lBlock=this._rBlock,this._rBlock=m,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),f[u]=this._lBlock,f[u+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=s._createHelper(g),a=a.TripleDES=s.extend({_doReset:function(){var f=this._key.words;this._des1=g.createEncryptor(i.create(f.slice(0,2))),this._des2=g.createEncryptor(i.create(f.slice(2,4))),this._des3=g.createEncryptor(i.create(f.slice(4,6)))},encryptBlock:function(f,u){this._des1.encryptBlock(f,u),this._des2.decryptBlock(f,u),this._des3.encryptBlock(f,u)},decryptBlock:function(f,u){this._des3.decryptBlock(f,u),this._des2.encryptBlock(f,u),this._des1.decryptBlock(f,u)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=s._createHelper(a)}(),function(){var n=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(r){var i=r.words,s=r.sigBytes,a=this._map;r.clamp(),r=[];for(var o=0;o<s;o+=3)for(var l=(i[o>>>2]>>>24-o%4*8&255)<<16|(i[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|i[o+2>>>2]>>>24-(o+2)%4*8&255,p=0;4>p&&o+.75*p<s;p++)r.push(a.charAt(l>>>6*(3-p)&63));if(i=a.charAt(64))for(;r.length%4;)r.push(i);return r.join("")},parse:function(r){var i=r.length,s=this._map;(a=s.charAt(64))&&-1!=(a=r.indexOf(a))&&(i=a);for(var a=[],o=0,l=0;l<i;l++)if(l%4){var p=s.indexOf(r.charAt(l-1))<<l%4*2,d=s.indexOf(r.charAt(l))>>>6-l%4*2;a[o>>>2]|=(p|d)<<24-o%4*8,o++}return n.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function n(g,f,u,m,h,y,b){return((g=g+(f&u|~f&m)+h+b)<<y|g>>>32-y)+f}function r(g,f,u,m,h,y,b){return((g=g+(f&m|u&~m)+h+b)<<y|g>>>32-y)+f}function i(g,f,u,m,h,y,b){return((g=g+(f^u^m)+h+b)<<y|g>>>32-y)+f}function s(g,f,u,m,h,y,b){return((g=g+(u^(f|~m))+h+b)<<y|g>>>32-y)+f}for(var a=CryptoJS,o=(p=a.lib).WordArray,l=p.Hasher,p=a.algo,d=[],v=0;64>v;v++)d[v]=4294967296*e.abs(e.sin(v+1))|0;p=p.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,f){for(var u=0;16>u;u++)g[m=f+u]=16711935&((h=g[m])<<8|h>>>24)|4278255360&(h<<24|h>>>8);var m,h=g[f+1],y=g[f+2],b=g[f+3],c=g[f+4],E=g[f+5],S=g[f+6],x=g[f+7],A=g[f+8],O=g[f+9],F=g[f+10],w=g[f+11],P=g[f+12],T=g[f+13],D=g[f+14],H=g[f+15],I=n(I=(u=this._hash.words)[0],R=u[1],j=u[2],_=u[3],m=g[f+0],7,d[0]),_=n(_,I,R,j,h,12,d[1]),j=n(j,_,I,R,y,17,d[2]),R=n(R,j,_,I,b,22,d[3]);I=n(I,R,j,_,c,7,d[4]),_=n(_,I,R,j,E,12,d[5]),j=n(j,_,I,R,S,17,d[6]),R=n(R,j,_,I,x,22,d[7]),I=n(I,R,j,_,A,7,d[8]),_=n(_,I,R,j,O,12,d[9]),j=n(j,_,I,R,F,17,d[10]),R=n(R,j,_,I,w,22,d[11]),I=n(I,R,j,_,P,7,d[12]),_=n(_,I,R,j,T,12,d[13]),j=n(j,_,I,R,D,17,d[14]),I=r(I,R=n(R,j,_,I,H,22,d[15]),j,_,h,5,d[16]),_=r(_,I,R,j,S,9,d[17]),j=r(j,_,I,R,w,14,d[18]),R=r(R,j,_,I,m,20,d[19]),I=r(I,R,j,_,E,5,d[20]),_=r(_,I,R,j,F,9,d[21]),j=r(j,_,I,R,H,14,d[22]),R=r(R,j,_,I,c,20,d[23]),I=r(I,R,j,_,O,5,d[24]),_=r(_,I,R,j,D,9,d[25]),j=r(j,_,I,R,b,14,d[26]),R=r(R,j,_,I,A,20,d[27]),I=r(I,R,j,_,T,5,d[28]),_=r(_,I,R,j,y,9,d[29]),j=r(j,_,I,R,x,14,d[30]),I=i(I,R=r(R,j,_,I,P,20,d[31]),j,_,E,4,d[32]),_=i(_,I,R,j,A,11,d[33]),j=i(j,_,I,R,w,16,d[34]),R=i(R,j,_,I,D,23,d[35]),I=i(I,R,j,_,h,4,d[36]),_=i(_,I,R,j,c,11,d[37]),j=i(j,_,I,R,x,16,d[38]),R=i(R,j,_,I,F,23,d[39]),I=i(I,R,j,_,T,4,d[40]),_=i(_,I,R,j,m,11,d[41]),j=i(j,_,I,R,b,16,d[42]),R=i(R,j,_,I,S,23,d[43]),I=i(I,R,j,_,O,4,d[44]),_=i(_,I,R,j,P,11,d[45]),j=i(j,_,I,R,H,16,d[46]),I=s(I,R=i(R,j,_,I,y,23,d[47]),j,_,m,6,d[48]),_=s(_,I,R,j,x,10,d[49]),j=s(j,_,I,R,D,15,d[50]),R=s(R,j,_,I,E,21,d[51]),I=s(I,R,j,_,P,6,d[52]),_=s(_,I,R,j,b,10,d[53]),j=s(j,_,I,R,F,15,d[54]),R=s(R,j,_,I,h,21,d[55]),I=s(I,R,j,_,A,6,d[56]),_=s(_,I,R,j,H,10,d[57]),j=s(j,_,I,R,S,15,d[58]),R=s(R,j,_,I,T,21,d[59]),I=s(I,R,j,_,c,6,d[60]),_=s(_,I,R,j,w,10,d[61]),j=s(j,_,I,R,y,15,d[62]),R=s(R,j,_,I,O,21,d[63]),u[0]=u[0]+I|0,u[1]=u[1]+R|0,u[2]=u[2]+j|0,u[3]=u[3]+_|0},_doFinalize:function(){var g=this._data,f=g.words,u=8*this._nDataBytes,m=8*g.sigBytes;f[m>>>5]|=128<<24-m%32;var h=e.floor(u/4294967296);for(f[15+(m+64>>>9<<4)]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f[14+(m+64>>>9<<4)]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),g.sigBytes=4*(f.length+1),this._process(),f=(g=this._hash).words,u=0;4>u;u++)f[u]=16711935&((m=f[u])<<8|m>>>24)|4278255360&(m<<24|m>>>8);return g},clone:function(){var g=l.clone.call(this);return g._hash=this._hash.clone(),g}}),a.MD5=l._createHelper(p),a.HmacMD5=l._createHmacHelper(p)}(Math),function(){var e=CryptoJS,n=(s=e.lib).WordArray,r=s.Hasher,i=[],s=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,o){for(var l=this._hash.words,p=l[0],d=l[1],v=l[2],g=l[3],f=l[4],u=0;80>u;u++){if(16>u)i[u]=0|a[o+u];else{var m=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=m<<1|m>>>31}m=(p<<5|p>>>27)+f+i[u],m=20>u?m+(1518500249+(d&v|~d&g)):40>u?m+(1859775393+(d^v^g)):60>u?m+((d&v|d&g|v&g)-1894007588):m+((d^v^g)-899497514),f=g,g=v,v=d<<30|d>>>2,d=p,p=m}l[0]=l[0]+p|0,l[1]=l[1]+d|0,l[2]=l[2]+v|0,l[3]=l[3]+g|0,l[4]=l[4]+f|0},_doFinalize:function(){var a=this._data,o=a.words,l=8*this._nDataBytes,p=8*a.sigBytes;return o[p>>>5]|=128<<24-p%32,o[14+(p+64>>>9<<4)]=Math.floor(l/4294967296),o[15+(p+64>>>9<<4)]=l,a.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var a=r.clone.call(this);return a._hash=this._hash.clone(),a}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),function(e){for(var n=CryptoJS,r=(u=n.lib).WordArray,i=u.Hasher,u=n.algo,s=[],a=[],o=function(h){return 4294967296*(h-(0|h))|0},l=2,p=0;64>p;){var d;e:{for(var v=e.sqrt(d=l),g=2;g<=v;g++)if(!(d%g)){d=!1;break e}d=!0}d&&(8>p&&(s[p]=o(e.pow(l,.5))),a[p]=o(e.pow(l,1/3)),p++),l++}var f=[];u=u.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(m,h){for(var y=this._hash.words,b=y[0],c=y[1],E=y[2],S=y[3],x=y[4],A=y[5],O=y[6],F=y[7],w=0;64>w;w++){if(16>w)f[w]=0|m[h+w];else{var P=f[w-15],T=f[w-2];f[w]=((P<<25|P>>>7)^(P<<14|P>>>18)^P>>>3)+f[w-7]+((T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10)+f[w-16]}P=F+((x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25))+(x&A^~x&O)+a[w]+f[w],T=((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+(b&c^b&E^c&E),F=O,O=A,A=x,x=S+P|0,S=E,E=c,c=b,b=P+T|0}y[0]=y[0]+b|0,y[1]=y[1]+c|0,y[2]=y[2]+E|0,y[3]=y[3]+S|0,y[4]=y[4]+x|0,y[5]=y[5]+A|0,y[6]=y[6]+O|0,y[7]=y[7]+F|0},_doFinalize:function(){var m=this._data,h=m.words,y=8*this._nDataBytes,b=8*m.sigBytes;return h[b>>>5]|=128<<24-b%32,h[14+(b+64>>>9<<4)]=e.floor(y/4294967296),h[15+(b+64>>>9<<4)]=y,m.sigBytes=4*h.length,this._process(),this._hash},clone:function(){var m=i.clone.call(this);return m._hash=this._hash.clone(),m}}),n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),function(){var e=CryptoJS,n=e.lib.WordArray,r=(i=e.algo).SHA256,i=i.SHA224=r.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var s=r._doFinalize.call(this);return s.sigBytes-=4,s}});e.SHA224=r._createHelper(i),e.HmacSHA224=r._createHmacHelper(i)}(),function(){function e(){return i.create.apply(i,arguments)}for(var n=CryptoJS,r=n.lib.Hasher,i=(a=n.x64).Word,s=a.WordArray,a=n.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],l=[],p=0;80>p;p++)l[p]=e();a=a.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(d,v){for(var c,g=(c=this._hash.words)[0],f=c[1],u=c[2],m=c[3],h=c[4],y=c[5],b=c[6],E=g.high,S=g.low,x=f.high,A=f.low,O=u.high,F=u.low,w=m.high,P=m.low,T=h.high,D=h.low,H=y.high,I=y.low,_=b.high,j=b.low,R=(c=c[7]).high,L=c.low,N=E,k=S,B=x,q=A,V=O,C=F,M=w,K=P,U=T,W=D,Y=H,ee=I,te=_,ne=j,oe=R,le=L,ue=0;80>ue;ue++){var he=l[ue];if(16>ue)var G=he.high=0|d[v+2*ue],Q=he.low=0|d[v+2*ue+1];else{G=((Q=(G=l[ue-15]).high)>>>1|(Z=G.low)<<31)^(Q>>>8|Z<<24)^Q>>>7;var Z=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^(Z>>>7|Q<<25),re=((Q=(re=l[ue-2]).high)>>>19|(se=re.low)<<13)^(Q<<3|se>>>29)^Q>>>6,se=(se>>>19|Q<<13)^(se<<3|Q>>>29)^(se>>>6|Q<<26);he.high=G=(G=(G=G+($=(Q=l[ue-7]).high)+((Q=Z+Q.low)>>>0<Z>>>0?1:0))+re+((Q+=se)>>>0<se>>>0?1:0))+(fe=(X=l[ue-16]).high)+((Q+=X=X.low)>>>0<X>>>0?1:0),he.low=Q}var $=U&Y^~U&te,X=W&ee^~W&ne,J=(he=N&B^N&V^B&V,k&q^k&C^q&C),ie=(se=o[ue]).high,ae=se.low,fe=oe+((U>>>14|W<<18)^(U>>>18|W<<14)^(U<<23|W>>>9))+((se=le+((W>>>14|U<<18)^(W>>>18|U<<14)^(W<<23|U>>>9)))>>>0<le>>>0?1:0);oe=te,le=ne,te=Y,ne=ee,Y=U,ee=W,U=M+(fe=(fe=(fe=fe+$+((se+=X)>>>0<X>>>0?1:0))+ie+((se+=ae)>>>0<ae>>>0?1:0))+G+((se+=Q)>>>0<Q>>>0?1:0))+((W=K+se|0)>>>0<K>>>0?1:0)|0,M=V,K=C,V=B,C=q,B=N,q=k,N=fe+(he=(Z=(N>>>28|k<<4)^(N<<30|k>>>2)^(N<<25|k>>>7))+he+((Q=(re=(k>>>28|N<<4)^(k<<30|N>>>2)^(k<<25|N>>>7))+J)>>>0<re>>>0?1:0))+((k=se+Q|0)>>>0<se>>>0?1:0)|0}S=g.low=S+k,g.high=E+N+(S>>>0<k>>>0?1:0),A=f.low=A+q,f.high=x+B+(A>>>0<q>>>0?1:0),F=u.low=F+C,u.high=O+V+(F>>>0<C>>>0?1:0),P=m.low=P+K,m.high=w+M+(P>>>0<K>>>0?1:0),D=h.low=D+W,h.high=T+U+(D>>>0<W>>>0?1:0),I=y.low=I+ee,y.high=H+Y+(I>>>0<ee>>>0?1:0),j=b.low=j+ne,b.high=_+te+(j>>>0<ne>>>0?1:0),L=c.low=L+le,c.high=R+oe+(L>>>0<le>>>0?1:0)},_doFinalize:function(){var d=this._data,v=d.words,g=8*this._nDataBytes,f=8*d.sigBytes;return v[f>>>5]|=128<<24-f%32,v[30+(f+128>>>10<<5)]=Math.floor(g/4294967296),v[31+(f+128>>>10<<5)]=g,d.sigBytes=4*v.length,this._process(),this._hash.toX32()},clone:function(){var d=r.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:32}),n.SHA512=r._createHelper(a),n.HmacSHA512=r._createHmacHelper(a)}(),function(){var e=CryptoJS,n=(s=e.x64).Word,r=s.WordArray,i=(s=e.algo).SHA512,s=s.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var a=i._doFinalize.call(this);return a.sigBytes-=16,a}});e.SHA384=i._createHelper(s),e.HmacSHA384=i._createHmacHelper(s)}(),function(){var e=CryptoJS,n=(d=e.lib).WordArray,r=d.Hasher,d=e.algo,i=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),a=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=n.create([0,1518500249,1859775393,2400959708,2840853838]),p=n.create([1352829926,1548603684,1836072691,2053994217,0]);d=d.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,g){for(var f=0;16>f;f++)v[u=g+f]=16711935&((m=v[u])<<8|m>>>24)|4278255360&(m<<24|m>>>8);var u,S,x,A,O,F,w,P,T,D,H,I,m=l.words,h=p.words,y=i.words,b=s.words,c=a.words,E=o.words;for(w=S=(u=this._hash.words)[0],P=x=u[1],T=A=u[2],D=O=u[3],H=F=u[4],f=0;80>f;f+=1)I=S+v[g+y[f]]|0,I=16>f?I+((x^A^O)+m[0]):32>f?I+((x&A|~x&O)+m[1]):48>f?I+(((x|~A)^O)+m[2]):64>f?I+((x&O|A&~O)+m[3]):I+((x^(A|~O))+m[4]),I=(I=(I|=0)<<c[f]|I>>>32-c[f])+F|0,S=F,F=O,O=A<<10|A>>>22,A=x,x=I,I=w+v[g+b[f]]|0,I=16>f?I+((P^(T|~D))+h[0]):32>f?I+((P&D|T&~D)+h[1]):48>f?I+(((P|~T)^D)+h[2]):64>f?I+((P&T|~P&D)+h[3]):I+((P^T^D)+h[4]),I=(I=(I|=0)<<E[f]|I>>>32-E[f])+H|0,w=H,H=D,D=T<<10|T>>>22,T=P,P=I;I=u[1]+A+D|0,u[1]=u[2]+O+H|0,u[2]=u[3]+F+w|0,u[3]=u[4]+S+P|0,u[4]=u[0]+x+T|0,u[0]=I},_doFinalize:function(){var v=this._data,g=v.words,f=8*this._nDataBytes,u=8*v.sigBytes;for(g[u>>>5]|=128<<24-u%32,g[14+(u+64>>>9<<4)]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),v.sigBytes=4*(g.length+1),this._process(),g=(v=this._hash).words,f=0;5>f;f++)g[f]=16711935&((u=g[f])<<8|u>>>24)|4278255360&(u<<24|u>>>8);return v},clone:function(){var v=r.clone.call(this);return v._hash=this._hash.clone(),v}}),e.RIPEMD160=r._createHelper(d),e.HmacRIPEMD160=r._createHmacHelper(d)}(Math),function(){var n=CryptoJS.enc.Utf8;CryptoJS.algo.HMAC=CryptoJS.lib.Base.extend({init:function(r,i){r=this._hasher=new r.init,"string"==typeof i&&(i=n.parse(i));var s=r.blockSize,a=4*s;i.sigBytes>a&&(i=r.finalize(i)),i.clamp();for(var o=this._oKey=i.clone(),l=this._iKey=i.clone(),p=o.words,d=l.words,v=0;v<s;v++)p[v]^=1549556828,d[v]^=909522486;o.sigBytes=l.sigBytes=a,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var i=this._hasher;return r=i.finalize(r),i.reset(),i.finalize(this._oKey.clone().concat(r))}})}(),function(){var i,e=CryptoJS,n=(i=e.lib).Base,r=i.WordArray,s=(i=e.algo).HMAC,a=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i.SHA1,iterations:1}),init:function(o){this.cfg=this.cfg.extend(o)},compute:function(o,l){for(var p=s.create((m=this.cfg).hasher,o),d=r.create(),v=r.create([1]),g=d.words,f=v.words,u=m.keySize,m=m.iterations;g.length<u;){var h=p.update(l).finalize(v);p.reset();for(var y=h.words,b=y.length,c=h,E=1;E<m;E++){c=p.finalize(c),p.reset();for(var S=c.words,x=0;x<b;x++)y[x]^=S[x]}d.concat(h),f[0]++}return d.sigBytes=4*u,d}});e.PBKDF2=function(o,l,p){return a.create(p).compute(o,l)}}();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=";function hex2b64(e){var n,r,i="";for(n=0;n+3<=e.length;n+=3)r=parseInt(e.substring(n,n+3),16),i+=b64map.charAt(r>>6)+b64map.charAt(63&r);if(n+1==e.length?(r=parseInt(e.substring(n,n+1),16),i+=b64map.charAt(r<<2)):n+2==e.length&&(r=parseInt(e.substring(n,n+2),16),i+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4)),b64pad)for(;(3&i.length)>0;)i+=b64pad;return i}function b64tohex(e){var r,s,a,n="",i=0;for(r=0;r<e.length&&e.charAt(r)!=b64pad;++r)!((a=b64map.indexOf(e.charAt(r)))<0)&&(0==i?(n+=int2char(a>>2),s=3&a,i=1):1==i?(n+=int2char(s<<2|a>>4),s=15&a,i=2):2==i?(n+=int2char(s),n+=int2char(a>>2),s=3&a,i=3):(n+=int2char(s<<2|a>>4),n+=int2char(15&a),i=0));return 1==i&&(n+=int2char(s<<2)),n}function b64toBA(e){var r,n=b64tohex(e),i=new Array;for(r=0;2*r<n.length;++r)i[r]=parseInt(n.substring(2*r,2*r+2),16);return i}var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(e,n,r){null!=e&&("number"==typeof e?this.fromNumber(e,n,r):this.fromString(e,null==n&&"string"!=typeof e?256:n))}function nbi(){return new BigInteger(null)}function am1(e,n,r,i,s,a){for(;--a>=0;){var o=n*this[e++]+r[i]+s;s=Math.floor(o/67108864),r[i++]=67108863&o}return s}function am2(e,n,r,i,s,a){for(var o=32767&n,l=n>>15;--a>=0;){var p=32767&this[e],d=this[e++]>>15,v=l*p+d*o;s=((p=o*p+((32767&v)<<15)+r[i]+(1073741823&s))>>>30)+(v>>>15)+l*d+(s>>>30),r[i++]=1073741823&p}return s}function am3(e,n,r,i,s,a){for(var o=16383&n,l=n>>14;--a>=0;){var p=16383&this[e],d=this[e++]>>14,v=l*p+d*o;s=((p=o*p+((16383&v)<<14)+r[i]+s)>>28)+(v>>14)+l*d,r[i++]=268435455&p}return s}j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var rr,vv,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,n){var r=BI_RC[e.charCodeAt(n)];return null==r?-1:r}function bnpCopyTo(e){for(var n=this.t-1;n>=0;--n)e[n]=this[n];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var n=nbi();return n.fromInt(e),n}function bnpFromString(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,a=0;--i>=0;){var o=8==r?255&e[i]:intAt(e,i);o<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==a?this[this.t++]=o:a+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),s&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var n;if(16==e)n=4;else if(8==e)n=3;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return this.toRadix(e);n=2}var i,r=(1<<n)-1,s=!1,a="",o=this.t,l=this.DB-o*this.DB%n;if(o-- >0)for(l<this.DB&&(i=this[o]>>l)>0&&(s=!0,a=int2char(i));o>=0;)l<n?(i=(this[o]&(1<<l)-1)<<n-l,i|=this[--o]>>(l+=this.DB-n)):(i=this[o]>>(l-=n)&r,l<=0&&(l+=this.DB,--o)),i>0&&(s=!0),s&&(a+=int2char(i));return s?a:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var n=this.s-e.s;if(0!=n)return n;var r=this.t;if(0!=(n=r-e.t))return this.s<0?-n:n;for(;--r>=0;)if(0!=(n=this[r]-e[r]))return n;return 0}function nbits(e){var r,n=1;return 0!=(r=e>>>16)&&(e=r,n+=16),0!=(r=e>>8)&&(e=r,n+=8),0!=(r=e>>4)&&(e=r,n+=4),0!=(r=e>>2)&&(e=r,n+=2),0!=(r=e>>1)&&(e=r,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,n){var r;for(r=this.t-1;r>=0;--r)n[r+e]=this[r];for(r=e-1;r>=0;--r)n[r]=0;n.t=this.t+e,n.s=this.s}function bnpDRShiftTo(e,n){for(var r=e;r<this.t;++r)n[r-e]=this[r];n.t=Math.max(this.t-e,0),n.s=this.s}function bnpLShiftTo(e,n){var l,r=e%this.DB,i=this.DB-r,s=(1<<i)-1,a=Math.floor(e/this.DB),o=this.s<<r&this.DM;for(l=this.t-1;l>=0;--l)n[l+a+1]=this[l]>>i|o,o=(this[l]&s)<<r;for(l=a-1;l>=0;--l)n[l]=0;n[a]=o,n.t=this.t+a+1,n.s=this.s,n.clamp()}function bnpRShiftTo(e,n){n.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)n.t=0;else{var i=e%this.DB,s=this.DB-i,a=(1<<i)-1;n[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)n[o-r-1]|=(this[o]&a)<<s,n[o-r]=this[o]>>i;i>0&&(n[this.t-r-1]|=(this.s&a)<<s),n.t=this.t-r,n.clamp()}}function bnpSubTo(e,n){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]-e[r],n[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],n[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],n[r++]=i&this.DM,i>>=this.DB;i-=e.s}n.s=i<0?-1:0,i<-1?n[r++]=this.DV+i:i>0&&(n[r++]=i),n.t=r,n.clamp()}function bnpMultiplyTo(e,n){var r=this.abs(),i=e.abs(),s=r.t;for(n.t=s+i.t;--s>=0;)n[s]=0;for(s=0;s<i.t;++s)n[s+r.t]=r.am(0,i[s],n,s,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(n,n)}function bnpSquareTo(e){for(var n=this.abs(),r=e.t=2*n.t;--r>=0;)e[r]=0;for(r=0;r<n.t-1;++r){var i=n.am(r,n[r],e,2*r,0,1);(e[r+n.t]+=n.am(r+1,2*n[r],e,2*r+1,i,n.t-r-1))>=n.DV&&(e[r+n.t]-=n.DV,e[r+n.t+1]=1)}e.t>0&&(e[e.t-1]+=n.am(r,n[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,n,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var a=nbi(),o=this.s,l=e.s,p=this.DB-nbits(i[i.t-1]);p>0?(i.lShiftTo(p,a),s.lShiftTo(p,r)):(i.copyTo(a),s.copyTo(r));var d=a.t,v=a[d-1];if(0!=v){var g=v*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),f=this.FV/g,u=(1<<this.F1)/g,m=1<<this.F2,h=r.t,y=h-d,b=null==n?nbi():n;for(a.dlShiftTo(y,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),BigInteger.ONE.dlShiftTo(d,b),b.subTo(a,a);a.t<d;)a[a.t++]=0;for(;--y>=0;){var c=r[--h]==v?this.DM:Math.floor(r[h]*f+(r[h-1]+m)*u);if((r[h]+=a.am(0,c,r,y,0,d))<c)for(a.dlShiftTo(y,b),r.subTo(b,r);r[h]<--c;)r.subTo(b,r)}null!=n&&(r.drShiftTo(d,n),o!=l&&BigInteger.ZERO.subTo(n,n)),r.t=d,r.clamp(),p>0&&r.rShiftTo(p,r),o<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(e){var n=nbi();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(BigInteger.ZERO)>0&&e.subTo(n,n),n}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,n,r){e.multiplyTo(n,r),this.reduce(r)}function cSqrTo(e,n){e.squareTo(n),this.reduce(n)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var n=3&e;return(n=(n=(n=(n=n*(2-(15&e)*n)&15)*(2-(255&e)*n)&255)*(2-((65535&e)*n&65535))&65535)*(2-e*n%this.DV)%this.DV)>0?this.DV-n:-n}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var n=nbi();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(BigInteger.ZERO)>0&&this.m.subTo(n,n),n}function montRevert(e){var n=nbi();return e.copyTo(n),this.reduce(n),n}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var n=0;n<this.m.t;++n){var r=32767&e[n],i=r*this.mpl+((r*this.mph+(e[n]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=n+this.m.t]+=this.m.am(0,i,e,n,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,n){e.squareTo(n),this.reduce(n)}function montMulTo(e,n,r){e.multiplyTo(n,r),this.reduce(r)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(e,n){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),i=nbi(),s=n.convert(this),a=nbits(e)-1;for(s.copyTo(r);--a>=0;)if(n.sqrTo(r,i),(e&1<<a)>0)n.mulTo(i,s,r);else{var o=r;r=i,i=o}return n.revert(r)}function bnModPowInt(e,n){var r;return r=e<256||n.isEven()?new Classic(n):new Montgomery(n),this.exp(e,r)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var n=this.chunkSize(e),r=Math.pow(e,n),i=nbv(r),s=nbi(),a=nbi(),o="";for(this.divRemTo(i,s,a);s.signum()>0;)o=(r+a.intValue()).toString(e).substr(1)+o,s.divRemTo(i,s,a);return a.intValue().toString(e)+o}function bnpFromRadix(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),s=!1,a=0,o=0,l=0;l<e.length;++l){var p=intAt(e,l);p<0?"-"==e.charAt(l)&&0==this.signum()&&(s=!0):(o=n*o+p,++a>=r&&(this.dMultiply(i),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(o,0)),s&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,n,r){if("number"==typeof n)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var i=new Array,s=7&e;i.length=1+(e>>3),n.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}}function bnToByteArray(){var e=this.t,n=new Array;n[0]=this.s;var i,r=this.DB-e*this.DB%8,s=0;if(e-- >0)for(r<this.DB&&(i=this[e]>>r)!=(this.s&this.DM)>>r&&(n[s++]=i|this.s<<this.DB-r);e>=0;)r<8?(i=(this[e]&(1<<r)-1)<<8-r,i|=this[--e]>>(r+=this.DB-8)):(i=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(n[s++]=i);return n}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo(e,n,r){var i,s,a=Math.min(e.t,this.t);for(i=0;i<a;++i)r[i]=n(this[i],e[i]);if(e.t<this.t){for(s=e.s&this.DM,i=a;i<this.t;++i)r[i]=n(this[i],s);r.t=this.t}else{for(s=this.s&this.DM,i=a;i<e.t;++i)r[i]=n(s,e[i]);r.t=e.t}r.s=n(this.s,e.s),r.clamp()}function op_and(e,n){return e&n}function bnAnd(e){var n=nbi();return this.bitwiseTo(e,op_and,n),n}function op_or(e,n){return e|n}function bnOr(e){var n=nbi();return this.bitwiseTo(e,op_or,n),n}function op_xor(e,n){return e^n}function bnXor(e){var n=nbi();return this.bitwiseTo(e,op_xor,n),n}function op_andnot(e,n){return e&~n}function bnAndNot(e){var n=nbi();return this.bitwiseTo(e,op_andnot,n),n}function bnNot(){for(var e=nbi(),n=0;n<this.t;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var n=nbi();return e<0?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function bnShiftRight(e){var n=nbi();return e<0?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function lbit(e){if(0==e)return-1;var n=0;return 0==(65535&e)&&(e>>=16,n+=16),0==(255&e)&&(e>>=8,n+=8),0==(15&e)&&(e>>=4,n+=4),0==(3&e)&&(e>>=2,n+=2),0==(1&e)&&++n,n}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var n=0;0!=e;)e&=e-1,++n;return n}function bnBitCount(){for(var e=0,n=this.s&this.DM,r=0;r<this.t;++r)e+=cbit(this[r]^n);return e}function bnTestBit(e){var n=Math.floor(e/this.DB);return n>=this.t?0!=this.s:0!=(this[n]&1<<e%this.DB)}function bnpChangeBit(e,n){var r=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(r,n,r),r}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,n){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]+e[r],n[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],n[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],n[r++]=i&this.DM,i>>=this.DB;i+=e.s}n.s=i<0?-1:0,i>0?n[r++]=i:i<-1&&(n[r++]=this.DV+i),n.t=r,n.clamp()}function bnAdd(e){var n=nbi();return this.addTo(e,n),n}function bnSubtract(e){var n=nbi();return this.subTo(e,n),n}function bnMultiply(e){var n=nbi();return this.multiplyTo(e,n),n}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var n=nbi();return this.divRemTo(e,n,null),n}function bnRemainder(e){var n=nbi();return this.divRemTo(e,null,n),n}function bnDivideAndRemainder(e){var n=nbi(),r=nbi();return this.divRemTo(e,n,r),new Array(n,r)}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,n){if(0!=e){for(;this.t<=n;)this[this.t++]=0;for(this[n]+=e;this[n]>=this.DV;)this[n]-=this.DV,++n>=this.t&&(this[this.t++]=0),++this[n]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,n,r){e.multiplyTo(n,r)}function nSqrTo(e,n){e.squareTo(n)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,n,r){var s,i=Math.min(this.t+e.t,n);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(s=r.t-this.t;i<s;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(s=Math.min(e.t,n);i<s;++i)this.am(0,e[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(e,n,r){--n;var i=r.t=this.t+e.t-n;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(n-this.t,0);i<e.t;++i)r[this.t+i-n]=this.am(n-i,e[i],r,0,0,this.t+i-n);r.clamp(),r.drShiftTo(1,r)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var n=nbi();return e.copyTo(n),this.reduce(n),n}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo(e,n){e.squareTo(n),this.reduce(n)}function barrettMulTo(e,n,r){e.multiplyTo(n,r),this.reduce(r)}function bnModPow(e,n){var i,a,r=e.bitLength(),s=nbv(1);if(r<=0)return s;i=r<18?1:r<48?3:r<144?4:r<768?5:6,a=r<8?new Classic(n):n.isEven()?new Barrett(n):new Montgomery(n);var o=new Array,l=3,p=i-1,d=(1<<i)-1;if(o[1]=a.convert(this),i>1){var v=nbi();for(a.sqrTo(o[1],v);l<=d;)o[l]=nbi(),a.mulTo(v,o[l-2],o[l]),l+=2}var f,h,g=e.t-1,u=!0,m=nbi();for(r=nbits(e[g])-1;g>=0;){for(r>=p?f=e[g]>>r-p&d:(f=(e[g]&(1<<r+1)-1)<<p-r,g>0&&(f|=e[g-1]>>this.DB+r-p)),l=i;0==(1&f);)f>>=1,--l;if((r-=l)<0&&(r+=this.DB,--g),u)o[f].copyTo(s),u=!1;else{for(;l>1;)a.sqrTo(s,m),a.sqrTo(m,s),l-=2;l>0?a.sqrTo(s,m):(h=s,s=m,m=h),a.mulTo(m,o[f],s)}for(;g>=0&&0==(e[g]&1<<r);)a.sqrTo(s,m),h=s,s=m,m=h,--r<0&&(r=this.DB-1,--g)}return a.revert(s)}function bnGCD(e){var n=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(n.compareTo(r)<0){var i=n;n=r,r=i}var s=n.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return n;for(s<a&&(a=s),a>0&&(n.rShiftTo(a,n),r.rShiftTo(a,r));n.signum()>0;)(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),n.compareTo(r)>=0?(n.subTo(r,n),n.rShiftTo(1,n)):(r.subTo(n,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function bnpModInt(e){if(e<=0)return 0;var n=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==n)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(n*r+this[i])%e;return r}function bnModInverse(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return BigInteger.ZERO;for(var r=e.clone(),i=this.clone(),s=nbv(1),a=nbv(0),o=nbv(0),l=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?((!o.isEven()||!l.isEven())&&(o.addTo(this,o),l.subTo(e,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);r.compareTo(i)>=0?(r.subTo(i,r),n&&s.subTo(o,s),a.subTo(l,a)):(i.subTo(r,i),n&&o.subTo(s,o),l.subTo(a,l))}return 0!=i.compareTo(BigInteger.ONE)?BigInteger.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(e){var n,r=this.abs();if(1==r.t&&r[0]<=lowprimes[lowprimes.length-1]){for(n=0;n<lowprimes.length;++n)if(r[0]==lowprimes[n])return!0;return!1}if(r.isEven())return!1;for(n=1;n<lowprimes.length;){for(var i=lowprimes[n],s=n+1;s<lowprimes.length&&i<lplim;)i*=lowprimes[s++];for(i=r.modInt(i);n<s;)if(i%lowprimes[n++]==0)return!1}return r.millerRabin(e)}function bnpMillerRabin(e){var n=this.subtract(BigInteger.ONE),r=n.getLowestSetBit();if(r<=0)return!1;var i=n.shiftRight(r);(e=e+1>>1)>lowprimes.length&&(e=lowprimes.length);for(var s=nbi(),a=0;a<e;++a){s.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=s.modPow(i,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(n)){for(var l=1;l++<r&&0!=o.compareTo(n);)if(0==(o=o.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(n))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var n,r,i;for(n=0;n<256;++n)this.S[n]=n;for(r=0,n=0;n<256;++n)i=this.S[n],this.S[n]=this.S[r=r+this.S[n]+e[n%e.length]&255],this.S[r]=i;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_state,rng_pool,rng_pptr,rng_psize=256;function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t;if(rng_pool=new Array,rng_pptr=0,void 0!==window&&(void 0!==window.crypto||void 0!==window.msCrypto)){var crypto=window.crypto||window.msCrypto;if(crypto.getRandomValues){var ua=new Uint8Array(32);for(crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var n;for(n=0;n<e.length;++n)e[n]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,n){return new BigInteger(e,n)}function linebrk(e,n){for(var r="",i=0;i+n<e.length;)r+=e.substring(i,i+n)+"\n",i+=n;return r+e.substring(i,e.length)}function byte2Hex(e){return e<16?"0"+e.toString(16):e.toString(16)}function pkcs1pad2(e,n){if(n<e.length+11)throw"Message too long for RSA";for(var r=new Array,i=e.length-1;i>=0&&n>0;){var s=e.charCodeAt(i--);s<128?r[--n]=s:s>127&&s<2048?(r[--n]=63&s|128,r[--n]=s>>6|192):(r[--n]=63&s|128,r[--n]=s>>6&63|128,r[--n]=s>>12|224)}r[--n]=0;for(var a=new SecureRandom,o=new Array;n>2;){for(o[0]=0;0==o[0];)a.nextBytes(o);r[--n]=o[0]}return r[--n]=2,r[--n]=0,new BigInteger(r)}function oaep_mgf1_arr(e,n,r){for(var i="",s=0;i.length<n;)i+=r(String.fromCharCode.apply(String,e.concat([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s]))),s+=1;return i}function oaep_pad(e,n,r,i){var s=KJUR.crypto.MessageDigest,a=KJUR.crypto.Util,o=null;if(r||(r="sha1"),"string"==typeof r&&(o=s.getCanonicalAlgName(r),i=s.getHashLength(o),r=function(h){return hextorstr(a.hashHex(rstrtohex(h),o))}),e.length+2*i+2>n)throw"Message too long for RSA";var p,l="";for(p=0;p<n-e.length-2*i-2;p+=1)l+="\0";var d=r("")+l+"\x01"+e,v=new Array(i);(new SecureRandom).nextBytes(v);var g=oaep_mgf1_arr(v,d.length,r),f=[];for(p=0;p<d.length;p+=1)f[p]=d.charCodeAt(p)^g.charCodeAt(p);var u=oaep_mgf1_arr(f,v.length,r),m=[0];for(p=0;p<v.length;p+=1)m[p+1]=v[p]^u.charCodeAt(p);return new BigInteger(m.concat(f))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,n){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=n;else{if(!(null!=e&&null!=n&&e.length>0&&n.length>0))throw"Invalid RSA public key";this.n=parseBigInt(e,16),this.e=parseInt(n,16)}}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var n=pkcs1pad2(e,this.n.bitLength()+7>>3);if(null==n)return null;var r=this.doPublic(n);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i}function RSAEncryptOAEP(e,n,r){var i=oaep_pad(e,this.n.bitLength()+7>>3,n,r);if(null==i)return null;var s=this.doPublic(i);if(null==s)return null;var a=s.toString(16);return 0==(1&a.length)?a:"0"+a}function pkcs1unpad2(e,n){for(var r=e.toByteArray(),i=0;i<r.length&&0==r[i];)++i;if(r.length-i!=n-1||2!=r[i])return null;for(++i;0!=r[i];)if(++i>=r.length)return null;for(var s="";++i<r.length;){var a=255&r[i];a<128?s+=String.fromCharCode(a):a>191&&a<224?(s+=String.fromCharCode((31&a)<<6|63&r[i+1]),++i):(s+=String.fromCharCode((15&a)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return s}function oaep_mgf1_str(e,n,r){for(var i="",s=0;i.length<n;)i+=r(e+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])),s+=1;return i}function oaep_unpad(e,n,r,i){var s=KJUR.crypto.MessageDigest,a=KJUR.crypto.Util,o=null;for(r||(r="sha1"),"string"==typeof r&&(o=s.getCanonicalAlgName(r),i=s.getHashLength(o),r=function(y){return hextorstr(a.hashHex(rstrtohex(y),o))}),e=e.toByteArray(),g=0;g<e.length;g+=1)e[g]&=255;for(;e.length<n;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*i+2)throw"Cipher too short";var g,l=e.substr(1,i),p=e.substr(i+1),d=oaep_mgf1_str(p,i,r),v=[];for(g=0;g<l.length;g+=1)v[g]=l.charCodeAt(g)^d.charCodeAt(g);var f=oaep_mgf1_str(String.fromCharCode.apply(String,v),e.length-i,r),u=[];for(g=0;g<p.length;g+=1)u[g]=p.charCodeAt(g)^f.charCodeAt(g);if((u=String.fromCharCode.apply(String,u)).substr(0,i)!==r(""))throw"Hash mismatch";var m=(u=u.substr(i)).indexOf("\x01");if((-1!=m?u.substr(0,m).lastIndexOf("\0"):-1)+1!=m)throw"Malformed data";return u.substr(m+1)}function RSASetPrivate(e,n,r){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=n,this.d=r;else{if(!(null!=e&&null!=n&&e.length>0&&n.length>0))throw"Invalid RSA private key";this.n=parseBigInt(e,16),this.e=parseInt(n,16),this.d=parseBigInt(r,16)}}function RSASetPrivateEx(e,n,r,i,s,a,o,l){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==n)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==n.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=n&&e.length>0&&n.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=parseBigInt(e,16),this.e=parseInt(n,16),this.d=parseBigInt(r,16),this.p=parseBigInt(i,16),this.q=parseBigInt(s,16),this.dmp1=parseBigInt(a,16),this.dmq1=parseBigInt(o,16),this.coeff=parseBigInt(l,16)}function RSAGenerate(e,n){var r=new SecureRandom,i=e>>1;this.e=parseInt(n,16);for(var s=new BigInteger(n,16);;){for(;this.p=new BigInteger(e-i,1,r),0!=this.p.subtract(BigInteger.ONE).gcd(s).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(i,1,r),0!=this.q.subtract(BigInteger.ONE).gcd(s).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var o=this.p.subtract(BigInteger.ONE),l=this.q.subtract(BigInteger.ONE),p=o.multiply(l);if(0==p.gcd(s).compareTo(BigInteger.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=s.modInverse(p),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function RSADoPrivate(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var n=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);n.compareTo(r)<0;)n=n.add(this.p);return n.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}function RSADecrypt(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=parseBigInt(e,16),r=this.doPrivate(n);return null==r?null:pkcs1unpad2(r,this.n.bitLength()+7>>3)}function RSADecryptOAEP(e,n,r){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var i=parseBigInt(e,16),s=this.doPrivate(i);return null==s?null:oaep_unpad(s,this.n.bitLength()+7>>3,n,r)}function ECFieldElementFp(e,n){this.x=n,this.q=e}function feFpEquals(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(e){return new ECFieldElementFp(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function feFpSubtract(e){return new ECFieldElementFp(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function feFpMultiply(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function ECPointFp(e,n,r,i){this.curve=e,this.x=n,this.y=r,this.z=null==i?BigInteger.ONE:i,this.zinv=null}function pointFpGetX(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO))}function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(r))return BigInteger.ZERO.equals(n)?this.twice():this.curve.getInfinity();var i=new BigInteger("3"),s=this.x.toBigInteger(),a=this.y.toBigInteger(),p=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),d=p.multiply(r),v=s.multiply(p),g=n.square().multiply(this.z),f=g.subtract(v.shiftLeft(1)).multiply(e.z).subtract(d).multiply(r).mod(this.curve.q),u=v.multiply(i).multiply(n).subtract(a.multiply(d)).subtract(g.multiply(n)).multiply(e.z).add(n.multiply(d)).mod(this.curve.q),m=d.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(f),this.curve.fromBigInteger(u),m)}function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new BigInteger("3"),n=this.x.toBigInteger(),r=this.y.toBigInteger(),i=r.multiply(this.z),s=i.multiply(r).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=n.square().multiply(e);BigInteger.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a)));var l=(o=o.mod(this.curve.q)).square().subtract(n.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(i).mod(this.curve.q),p=o.multiply(e).multiply(n).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(o.square().multiply(o)).mod(this.curve.q),d=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(p),d)}function pointFpMultiply(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var d,n=e,r=n.multiply(new BigInteger("3")),i=this.negate(),s=this,a=this.curve.q.subtract(e),o=a.multiply(new BigInteger("3")),l=new ECPointFp(this.curve,this.x,this.y),p=l.negate();for(d=r.bitLength()-2;d>0;--d){s=s.twice();var v=r.testBit(d);v!=n.testBit(d)&&(s=s.add(v?this:i))}for(d=o.bitLength()-2;d>0;--d){l=l.twice();var f=o.testBit(d);f!=a.testBit(d)&&(l=l.add(f?l:p))}return s}function pointFpMultiplyTwo(e,n,r){var i;i=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var s=this.curve.getInfinity(),a=this.add(n);i>=0;)s=s.twice(),e.testBit(i)?s=r.testBit(i)?s.add(a):s.add(this):r.testBit(i)&&(s=s.add(n)),--i;return s}function ECCurveFp(e,n,r){this.q=e,this.a=this.fromBigInteger(n),this.b=this.fromBigInteger(r),this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(e){return new ECFieldElementFp(this.q,e)}function curveFpDecodePointHex(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var n=(e.length-2)/2,r=e.substr(2,n),i=e.substr(n+2,n);return new ECPointFp(this,this.fromBigInteger(new BigInteger(r,16)),this.fromBigInteger(new BigInteger(i,16)))}}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA",RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP,ECFieldElementFp.prototype.equals=feFpEquals,ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger,ECFieldElementFp.prototype.negate=feFpNegate,ECFieldElementFp.prototype.add=feFpAdd,ECFieldElementFp.prototype.subtract=feFpSubtract,ECFieldElementFp.prototype.multiply=feFpMultiply,ECFieldElementFp.prototype.square=feFpSquare,ECFieldElementFp.prototype.divide=feFpDivide,ECPointFp.prototype.getX=pointFpGetX,ECPointFp.prototype.getY=pointFpGetY,ECPointFp.prototype.equals=pointFpEquals,ECPointFp.prototype.isInfinity=pointFpIsInfinity,ECPointFp.prototype.negate=pointFpNegate,ECPointFp.prototype.add=pointFpAdd,ECPointFp.prototype.twice=pointFpTwice,ECPointFp.prototype.multiply=pointFpMultiply,ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo,ECCurveFp.prototype.getQ=curveFpGetQ,ECCurveFp.prototype.getA=curveFpGetA,ECCurveFp.prototype.getB=curveFpGetB,ECCurveFp.prototype.equals=curveFpEquals,ECCurveFp.prototype.getInfinity=curveFpGetInfinity,ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger,ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex,ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(e){var n=function(a,o){var l=a.toByteArrayUnsigned();if(o<l.length)l=l.slice(l.length-o);else for(;o>l.length;)l.unshift(0);return l},r=this.getX().toBigInteger(),i=this.getY().toBigInteger(),s=n(r,32);return e?i.isEven()?s.unshift(2):s.unshift(3):(s.unshift(4),s=s.concat(n(i,32))),s},ECPointFp.decodeFrom=function(e,n){var i=n.length-1,s=n.slice(1,1+i/2),a=n.slice(1+i/2,1+i);s.unshift(0),a.unshift(0);var o=new BigInteger(s),l=new BigInteger(a);return new ECPointFp(e,e.fromBigInteger(o),e.fromBigInteger(l))},ECPointFp.decodeFromHex=function(e,n){n.substr(0,2);var i=n.length-2,s=n.substr(2,i/2),a=n.substr(2+i/2,i/2),o=new BigInteger(s,16),l=new BigInteger(a,16);return new ECPointFp(e,e.fromBigInteger(o),e.fromBigInteger(l))},ECPointFp.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var n=e.x.subtract(this.x),i=e.y.subtract(this.y).divide(n),s=i.square().subtract(this.x).subtract(e.x),a=i.multiply(this.x.subtract(s)).subtract(this.y);return new ECPointFp(this.curve,s,a)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(BigInteger.valueOf(2)),n=this.curve.fromBigInteger(BigInteger.valueOf(3)),r=this.x.square().multiply(n).add(this.curve.a).divide(this.y.multiply(e)),i=r.square().subtract(this.x.multiply(e)),s=r.multiply(this.x.subtract(i)).subtract(this.y);return new ECPointFp(this.curve,i,s)},ECPointFp.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var a,n=e,r=n.multiply(new BigInteger("3")),i=this.negate(),s=this;for(a=r.bitLength()-2;a>0;--a){s=s.twice();var o=r.testBit(a);o!=n.testBit(a)&&(s=s.add2D(o?this:i))}return s},ECPointFp.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),i=this.curve.getB().toBigInteger(),s=this.curve.getQ(),a=n.multiply(n).mod(s),o=e.multiply(e).multiply(e).add(r.multiply(e)).add(i).mod(s);return a.equals(o)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var n=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(n.compareTo(BigInteger.ONE)<0||n.compareTo(e.subtract(BigInteger.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(BigInteger.ONE)<0||r.compareTo(e.subtract(BigInteger.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var jsonParse=function(){var i=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),s=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),a={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function o(g,f,u){return f?a[f]:String.fromCharCode(parseInt(u,16))}var l=new String(""),v=Object.hasOwnProperty;return function(g,f){var m,u=g.match(i),h=u[0],y=!1;"{"===h?m={}:"["===h?m=[]:(m=[],y=!0);for(var b,c=[m],E=1-y,S=u.length;E<S;++E){var x;switch((h=u[E]).charCodeAt(0)){default:(x=c[0])[b||x.length]=+h,b=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(s,o)),x=c[0],!b){if(!(x instanceof Array)){b=h||l;break}b=x.length}x[b]=h,b=void 0;break;case 91:c.unshift((x=c[0])[b||x.length]=[]),b=void 0;break;case 93:case 125:c.shift();break;case 102:(x=c[0])[b||x.length]=!1,b=void 0;break;case 110:(x=c[0])[b||x.length]=null,b=void 0;break;case 116:(x=c[0])[b||x.length]=!0,b=void 0;break;case 123:c.unshift((x=c[0])[b||x.length]={}),b=void 0}}if(y){if(1!==c.length)throw new Error;m=m[0]}else if(c.length)throw new Error;if(f){var A=function(O,F){var w=O[F];if(w&&"object"==typeof w){var P=null;for(var T in w)if(v.call(w,T)&&w!==O){var D=A(w,T);void 0!==D?w[T]=D:(P||(P=[]),P.push(T))}if(P)for(var H=P.length;--H>=0;)delete w[P[H]]}return f.call(O,F,w)};m=A({"":m},"")}return m}}();(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var n=e.toString(16);return n.length%2==1&&(n="0"+n),n},this.bigIntToMinTwosComplementsHex=function(e){var n=e.toString(16);if("-"!=n.substr(0,1))n.length%2==1?n="0"+n:n.match(/^[0-7]/)||(n="00"+n);else{var i=n.substr(1).length;i%2==1?i+=1:n.match(/^[0-7]/)||(i+=2);for(var s="",a=0;a<i;a++)s+="f";n=new BigInteger(s,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return n},this.getPEMStringFromHex=function(e,n){return hextopem(e,n)},this.newObject=function(e){var r=KJUR.asn1,i=r.ASN1Object,s=r.DERBoolean,a=r.DERInteger,o=r.DERBitString,l=r.DEROctetString,p=r.DERNull,d=r.DERObjectIdentifier,v=r.DEREnumerated,g=r.DERUTF8String,f=r.DERNumericString,u=r.DERPrintableString,m=r.DERTeletexString,h=r.DERIA5String,y=r.DERUTCTime,b=r.DERGeneralizedTime,c=r.DERVisibleString,E=r.DERBMPString,S=r.DERSequence,x=r.DERSet,A=r.DERTaggedObject,O=r.ASN1Util.newObject;if(e instanceof r.ASN1Object)return e;var F=Object.keys(e);if(1!=F.length)throw new Error("key of param shall be only one.");var w=F[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+w+":"))throw new Error("undefined key: "+w);if("bool"==w)return new s(e[w]);if("int"==w)return new a(e[w]);if("bitstr"==w)return new o(e[w]);if("octstr"==w)return new l(e[w]);if("null"==w)return new p(e[w]);if("oid"==w)return new d(e[w]);if("enum"==w)return new v(e[w]);if("utf8str"==w)return new g(e[w]);if("numstr"==w)return new f(e[w]);if("prnstr"==w)return new u(e[w]);if("telstr"==w)return new m(e[w]);if("ia5str"==w)return new h(e[w]);if("utctime"==w)return new y(e[w]);if("gentime"==w)return new b(e[w]);if("visstr"==w)return new c(e[w]);if("bmpstr"==w)return new E(e[w]);if("asn1"==w)return new i(e[w]);if("seq"==w){for(var P=e[w],T=[],D=0;D<P.length;D++){var H=O(P[D]);T.push(H)}return new S({array:T})}if("set"==w){for(P=e[w],T=[],D=0;D<P.length;D++)H=O(P[D]),T.push(H);return new x({array:T})}if("tag"==w){var I=e[w];if("[object Array]"===Object.prototype.toString.call(I)&&3==I.length){var _=O(I[2]);return new A({tag:I[0],explicit:I[1],obj:_})}return new A(I)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var s="",n=parseInt(e.substr(0,2),16),a=(s=Math.floor(n/40)+"."+n%40,""),o=2;o<e.length;o+=2){var p=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);a+=p.substr(1,7),"0"==p.substr(0,1)&&(s=s+"."+new BigInteger(a,2).toString(10),a="")}return s},KJUR.asn1.ASN1Util.oidIntToHex=function(e){var n=function(l){var p=l.toString(16);return 1==p.length&&(p="0"+p),p},r=function(l){var p="",v=new BigInteger(l,10).toString(2),g=7-v.length%7;7==g&&(g=0);for(var f="",u=0;u<g;u++)f+="0";for(v=f+v,u=0;u<v.length-1;u+=7){var m=v.substr(u,7);u!=v.length-7&&(m="1"+m),p+=n(parseInt(m,2))}return p};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",s=e.split("."),a=40*parseInt(s[0])+parseInt(s[1]);i+=n(a),s.splice(0,2);for(var o=0;o<s.length;o++)i+=r(s[o]);return i},KJUR.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var o=this.hV.length/2,l=o.toString(16);if(l.length%2==1&&(l="0"+l),o<128)return l;var p=l.length/2;if(p>15)throw"ASN.1 length too long to represent by 8x: n = "+o.toString(16);return(128+p).toString(16)+l},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(o){this.params=o},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(i){this.hTLV=null,this.isModified=!0,this.s=i,this.hV=utf8tohex(this.s).toLowerCase()},this.setStringHex=function(i){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},extendClass(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(i){var s=i.getTime()+6e4*i.getTimezoneOffset();return new Date(s)},this.formatDate=function(i,s,a){var o=this.zeroPadding,l=this.localDateToUTC(i),p=String(l.getFullYear());"utc"==s&&(p=p.substr(2,2));var m=p+o(String(l.getMonth()+1),2)+o(String(l.getDate()),2)+o(String(l.getHours()),2)+o(String(l.getMinutes()),2)+o(String(l.getSeconds()),2);if(!0===a){var h=l.getMilliseconds();if(0!=h){var y=o(String(h),3);m=m+"."+(y=y.replace(/[0]+$/,""))}}return m+"Z"},this.zeroPadding=function(i,s){return i.length>=s?i:new Array(s-i.length+1).join("0")+i},this.setByParam=function(i){this.hV=null,this.hTLV=null,this.params=i},this.getString=function(){},this.setString=function(i){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=i},this.setByDate=function(i){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=i},this.setByDateValue=function(i,s,a,o,l,p){var d=new Date(Date.UTC(i,s-1,a,o,l,p,0));this.setByDate(d)},this.getFreshValueHex=function(){return this.hV}},extendClass(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array=r},this.appendASN1Object=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array.push(r)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},extendClass(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(e){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},extendClass(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},extendClass(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex="00"+n.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,i){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var s="0"+r;this.hTLV=null,this.isModified=!0,this.hV=s+i},this.setByBinaryString=function(r){var i=8-(r=r.replace(/0+$/,"")).length%8;8==i&&(i=0);for(var s=0;s<=i;s++)r+="0";var a="";for(s=0;s<r.length-1;s+=8){var o=r.substr(s,8),l=parseInt(o,2).toString(16);1==l.length&&(l="0"+l),a+=l}this.hTLV=null,this.isModified=!0,this.hV="0"+i+a},this.setByBooleanArray=function(r){for(var i="",s=0;s<r.length;s++)i+=1==r[s]?"1":"0";this.setByBinaryString(i)},this.newFalseArray=function(r){for(var i=new Array(r),s=0;s<r;s++)i[s]=!1;return i},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},extendClass(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex=n.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},extendClass(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},extendClass(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueOidString=function(n){var r=oidtohex(n);if(null==r)throw new Error("malformed oid string: "+n);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(n){var r=KJUR.asn1.x509.OID.name2oid(n);if(""===r)throw new Error("DERObjectIdentifier oidName undefined: "+n);this.setValueOidString(r)},this.setValueNameOrOid=function(n){n.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(n):this.setValueName(n)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(n){"string"==typeof n?this.setValueNameOrOid(n):void 0!==n.oid?this.setValueNameOrOid(n.oid):void 0!==n.name?this.setValueNameOrOid(n.name):void 0!==n.hex&&this.setValueHex(n.hex)},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},extendClass(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},extendClass(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},extendClass(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},extendClass(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},extendClass(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},extendClass(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERVisibleString=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},extendClass(KJUR.asn1.DERVisibleString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERBMPString=function(e){KJUR.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},extendClass(KJUR.asn1.DERBMPString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var n=this.params;if(null==this.params&&(n={date:new Date}),"string"==typeof n){if(!n.match(/^[0-9]{12}Z$/)&&!n.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+n);this.hV=stohex(n)}else if(null!=n.str)this.hV=stohex(n.str);else if(null==n.date&&1==n.millis){var r=new Date;this.hV=stohex(this.formatDate(r,"utc",!0))}else null!=n.date&&n.date instanceof Date?this.hV=stohex(this.formatDate(n.date,"utc",!0===n.millis)):n instanceof Date&&(this.hV=stohex(this.formatDate(n,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var n=this.params;if(null==this.params&&(n={date:new Date}),"string"==typeof n){if(!n.match(/^[0-9]{14}Z$/)&&!n.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+n);this.hV=stohex(n)}else if(null!=n.str)this.hV=stohex(n.str);else if(null==n.date&&1==n.millis){var r=new Date;this.hV=stohex(this.formatDate(r,"gen",!0))}else null!=n.date&&n.date instanceof Date?this.hV=stohex(this.formatDate(n.date,"gen",!0===n.millis)):n instanceof Date&&(this.hV=stohex(this.formatDate(n,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var n="",r=0;r<this.asn1Array.length;r++)n+=this.asn1Array[r].getEncodedHex();return this.hV=n,this.hV}},extendClass(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var n=new Array,r=0;r<this.asn1Array.length;r++)n.push(this.asn1Array[r].getEncodedHex());return 1==this.sortFlag&&n.sort(),this.hV=n.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},extendClass(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);var n=KJUR.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(r,i,s){this.hT=i,this.isExplicit=r,this.asn1Object=s,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=s.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,i),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(r){null!=r.tag&&(this.hT=r.tag),null!=r.explicit&&(this.isExplicit=r.explicit),null!=r.tage&&(this.hT=r.tage,this.isExplicit=!0),null!=r.tagi&&(this.hT=r.tagi,this.isExplicit=!1),null!=r.obj&&(r.obj instanceof n.ASN1Object?(this.asn1Object=r.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==typeof r.obj&&(this.asn1Object=n.ASN1Util.newObject(r.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var KJUR,utf8tob64u,b64utoutf8,ASN1HEX=new function(){};function Base64x(){}function stoBA(e){for(var n=new Array,r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function BAtos(e){for(var n="",r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}function BAtohex(e){for(var n="",r=0;r<e.length;r++){var i=e[r].toString(16);1==i.length&&(i="0"+i),n+=i}return n}function stohex(e){return BAtohex(stoBA(e))}function stob64(e){return hex2b64(stohex(e))}function stob64u(e){return b64tob64u(hex2b64(stohex(e)))}function b64utos(e){return BAtos(b64toBA(b64utob64(e)))}function b64tob64u(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function b64utob64(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function hextob64u(e){return e.length%2==1&&(e="0"+e),b64tob64u(hex2b64(e))}function b64utohex(e){return b64tohex(b64utob64(e))}function utf8tob64(e){return hex2b64(uricmptohex(encodeURIComponentAll(e)))}function b64toutf8(e){return decodeURIComponent(hextouricmp(b64tohex(e)))}function utf8tohex(e){return uricmptohex(encodeURIComponentAll(e))}function hextoutf8(e){return decodeURIComponent(hextouricmp(e))}function hextorstr(e){for(var n="",r=0;r<e.length-1;r+=2)n+=String.fromCharCode(parseInt(e.substr(r,2),16));return n}function rstrtohex(e){for(var n="",r=0;r<e.length;r++)n+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return n}function hextob64(e){return hex2b64(e)}function hextob64nl(e){var r=hextob64(e).replace(/(.{64})/g,"$1\r\n");return r.replace(/\r\n$/,"")}function b64nltohex(e){return b64tohex(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function hextopem(e,n){return"-----BEGIN "+n+"-----\r\n"+hextob64nl(e)+"\r\n-----END "+n+"-----\r\n"}function pemtohex(e,n){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+n;return b64nltohex(e=void 0!==n?(e=e.replace(new RegExp("^[^]*-----BEGIN "+n+"-----"),"")).replace(new RegExp("-----END "+n+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function hextoArrayBuffer(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var n=new ArrayBuffer(e.length/2),r=new DataView(n),i=0;i<e.length/2;i++)r.setUint8(i,parseInt(e.substr(2*i,2),16));return n}function ArrayBuffertohex(e){for(var n="",r=new DataView(e),i=0;i<e.byteLength;i++)n+=("00"+r.getUint8(i).toString(16)).slice(-2);return n}function zulutomsec(e){var n,r,i,s,a,o,l,d,v,g,f;if(f=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return d=f[1],n=parseInt(d),2===d.length&&(50<=n&&n<100?n=1900+n:0<=n&&n<50&&(n=2e3+n)),r=parseInt(f[2])-1,i=parseInt(f[3]),s=parseInt(f[4]),a=parseInt(f[5]),o=parseInt(f[6]),l=0,""!==(v=f[7])&&(g=(v.substr(1)+"00").substr(0,3),l=parseInt(g)),Date.UTC(n,r,i,s,a,o,l);throw"unsupported zulu format: "+e}function zulutosec(e){return~~(zulutomsec(e)/1e3)}function zulutodate(e){return new Date(zulutomsec(e))}function datetozulu(e,n,r){var i,s=e.getUTCFullYear();if(n){if(s<1950||2049<s)throw"not proper year for UTCTime: "+s;i=(""+s).slice(-2)}else i=("000"+s).slice(-4);if(i+=("0"+(e.getUTCMonth()+1)).slice(-2),i+=("0"+e.getUTCDate()).slice(-2),i+=("0"+e.getUTCHours()).slice(-2),i+=("0"+e.getUTCMinutes()).slice(-2),i+=("0"+e.getUTCSeconds()).slice(-2),r){var a=e.getUTCMilliseconds();0!==a&&(i+="."+(a=(a=("00"+a).slice(-3)).replace(/0+$/g,"")))}return i+"Z"}function uricmptohex(e){return e.replace(/%/g,"")}function hextouricmp(e){return e.replace(/(..)/g,"%$1")}function ipv6tohex(e){var n="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw n;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw n;var i=":".repeat(7-r+2),s=(e=e.replace("::",i)).split(":");if(8!=s.length)throw n;for(var a=0;a<8;a++)s[a]=("0000"+s[a]).slice(-4);return s.join("")}function hextoipv6(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var n=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)n[r]=n[r].replace(/^0+/,""),""==n[r]&&(n[r]="0");var i=(e=":"+n.join(":")+":").match(/:(0:){2,}/g);if(null===i)return e.slice(1,-1);var s="";for(r=0;r<i.length;r++)i[r].length>s.length&&(s=i[r]);return(e=e.replace(s,"::")).slice(1,-1)}function hextoip(e){var n="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw n;if(8!=e.length)return 32==e.length?hextoipv6(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(i){throw n}}function iptohex(e){var n="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return ipv6tohex(e);throw n}var r=e.split(".");if(4!==r.length)throw n;var i="";try{for(var s=0;s<4;s++)i+=("0"+parseInt(r[s]).toString(16)).slice(-2);return i}catch(o){throw n}}function ucs2hextoutf8(e){return e.match(/.{4}/g).map(function n(s){var a=parseInt(s.substr(0,2),16),o=parseInt(s.substr(2),16);if(0==a&o<128)return String.fromCharCode(o);if(a<8){var p=128|63&o;return hextoutf8((192|(7&a)<<3|(192&o)>>6).toString(16)+p.toString(16))}p=128|(15&a)<<2|(192&o)>>6;var d=128|63&o;return hextoutf8((224|(240&a)>>4).toString(16)+p.toString(16)+d.toString(16))}).join("")}function encodeURIComponentAll(e){for(var n=encodeURIComponent(e),r="",i=0;i<n.length;i++)"%"==n[i]?(r+=n.substr(i,3),i+=2):r=r+"%"+stohex(n[i]);return r}function newline_toUnix(e){return e.replace(/\r\n/gm,"\n")}function newline_toDos(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")}function ishex(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function hextoposhex(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function intarystrtohex(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(r,i,s){var a=parseInt(r);if(a<0||255<a)throw"integer not in range 0-255";return("00"+a.toString(16)).slice(-2)}).join("")}catch(r){throw"malformed integer array string: "+r}}ASN1HEX.getLblen=function(e,n){if("8"!=e.substr(n+2,1))return 1;var r=parseInt(e.substr(n+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},ASN1HEX.getL=function(e,n){var r=ASN1HEX.getLblen(e,n);return r<1?"":e.substr(n+2,2*r)},ASN1HEX.getVblen=function(e,n){var r;return""==(r=ASN1HEX.getL(e,n))?-1:("8"===r.substr(0,1)?new BigInteger(r.substr(2),16):new BigInteger(r,16)).intValue()},ASN1HEX.getVidx=function(e,n){var r=ASN1HEX.getLblen(e,n);return r<0?r:n+2*(r+1)},ASN1HEX.getV=function(e,n){var r=ASN1HEX.getVidx(e,n),i=ASN1HEX.getVblen(e,n);return e.substr(r,2*i)},ASN1HEX.getTLV=function(e,n){return e.substr(n,2)+ASN1HEX.getL(e,n)+ASN1HEX.getV(e,n)},ASN1HEX.getTLVblen=function(e,n){return 2+2*ASN1HEX.getLblen(e,n)+2*ASN1HEX.getVblen(e,n)},ASN1HEX.getNextSiblingIdx=function(e,n){return ASN1HEX.getVidx(e,n)+2*ASN1HEX.getVblen(e,n)},ASN1HEX.getChildIdx=function(e,n){var s,a,o,r=ASN1HEX,i=[];s=r.getVidx(e,n),a=2*r.getVblen(e,n),"03"==e.substr(n,2)&&(s+=2,a-=2),o=0;for(var l=s;o<=a;){var p=r.getTLVblen(e,l);if((o+=p)<=a&&i.push(l),l+=p,o>=a)break}return i},ASN1HEX.getNthChildIdx=function(e,n,r){return ASN1HEX.getChildIdx(e,n)[r]},ASN1HEX.getIdxbyList=function(e,n,r,i){var a,o,s=ASN1HEX;return 0==r.length?void 0!==i&&e.substr(n,2)!==i?-1:n:(a=r.shift())>=(o=s.getChildIdx(e,n)).length?-1:s.getIdxbyList(e,o[a],r,i)},ASN1HEX.getIdxbyListEx=function(e,n,r,i){var a,o,s=ASN1HEX;if(0==r.length)return void 0!==i&&e.substr(n,2)!==i?-1:n;a=r.shift(),o=s.getChildIdx(e,n);for(var l=0,p=0;p<o.length;p++){var d=e.substr(o[p],2);if("number"==typeof a&&!s.isContextTag(d)&&l==a||"string"==typeof a&&s.isContextTag(d,a))return s.getIdxbyListEx(e,o[p],r,i);s.isContextTag(d)||l++}return-1},ASN1HEX.getTLVbyList=function(e,n,r,i){var s=ASN1HEX,a=s.getIdxbyList(e,n,r,i);return-1==a||a>=e.length?null:s.getTLV(e,a)},ASN1HEX.getTLVbyListEx=function(e,n,r,i){var s=ASN1HEX,a=s.getIdxbyListEx(e,n,r,i);return-1==a?null:s.getTLV(e,a)},ASN1HEX.getVbyList=function(e,n,r,i,s){var o,l,a=ASN1HEX;return-1==(o=a.getIdxbyList(e,n,r,i))||o>=e.length?null:(l=a.getV(e,o),!0===s&&(l=l.substr(2)),l)},ASN1HEX.getVbyListEx=function(e,n,r,i,s){var o,p,a=ASN1HEX;return-1==(o=a.getIdxbyListEx(e,n,r,i))?null:(p=a.getV(e,o),"03"==e.substr(o,2)&&!1!==s&&(p=p.substr(2)),p)},ASN1HEX.getInt=function(e,n,r){null==r&&(r=-1);try{var i=e.substr(n,2);if("02"!=i&&"03"!=i)return r;var s=ASN1HEX.getV(e,n);return"02"==i?parseInt(s,16):bitstrtoint(s)}catch(a){return r}},ASN1HEX.getOID=function(e,n,r){null==r&&(r=null);try{return"06"!=e.substr(n,2)?r:hextooid(ASN1HEX.getV(e,n))}catch(s){return r}},ASN1HEX.getOIDName=function(e,n,r){null==r&&(r=null);try{var i=ASN1HEX.getOID(e,n,r);if(i==r)return r;var s=KJUR.asn1.x509.OID.oid2name(i);return""==s?i:s}catch(a){return r}},ASN1HEX.getString=function(e,n,r){null==r&&(r=null);try{return hextorstr(ASN1HEX.getV(e,n))}catch(s){return r}},ASN1HEX.hextooidstr=function(e){var n=function(g,f){return g.length>=f?g:new Array(f-g.length+1).join("0")+g},r=[],i=e.substr(0,2),s=parseInt(i,16);r[0]=new String(Math.floor(s/40)),r[1]=new String(s%40);for(var a=e.substr(2),o=[],l=0;l<a.length/2;l++)o.push(parseInt(a.substr(2*l,2),16));var p=[],d="";for(l=0;l<o.length;l++)128&o[l]?d+=n((127&o[l]).toString(2),7):(d+=n((127&o[l]).toString(2),7),p.push(new String(parseInt(d,2))),d="");var v=r.join(".");return p.length>0&&(v=v+"."+p.join(".")),v},ASN1HEX.dump=function(e,n,r,i){var s=ASN1HEX,a=s.getV,o=s.dump,l=s.getChildIdx,p=e;e instanceof KJUR.asn1.ASN1Object&&(p=e.getEncodedHex());var d=function(O,F){return O.length<=2*F?O:O.substr(0,F)+"..(total "+O.length/2+"bytes).."+O.substr(O.length-F,F)};void 0===n&&(n={ommit_long_octet:32}),void 0===r&&(r=0),void 0===i&&(i="");var x,v=n.ommit_long_octet;if("01"==(x=p.substr(r,2)))return"00"==(g=a(p,r))?i+"BOOLEAN FALSE\n":i+"BOOLEAN TRUE\n";if("02"==x)return i+"INTEGER "+d(g=a(p,r),v)+"\n";if("03"==x){var g=a(p,r);return s.isASN1HEX(g.substr(2))?(f=i+"BITSTRING, encapsulates\n")+o(g.substr(2),n,0,i+"  "):i+"BITSTRING "+d(g,v)+"\n"}if("04"==x)return g=a(p,r),s.isASN1HEX(g)?(f=i+"OCTETSTRING, encapsulates\n")+o(g,n,0,i+"  "):i+"OCTETSTRING "+d(g,v)+"\n";if("05"==x)return i+"NULL\n";if("06"==x){var u=a(p,r),m=KJUR.asn1.ASN1Util.oidHexToInt(u),h=KJUR.asn1.x509.OID.oid2name(m),y=m.replace(/\./g," ");return""!=h?i+"ObjectIdentifier "+h+" ("+y+")\n":i+"ObjectIdentifier ("+y+")\n"}if("0a"==x)return i+"ENUMERATED "+parseInt(a(p,r))+"\n";if("0c"==x)return i+"UTF8String '"+hextoutf8(a(p,r))+"'\n";if("13"==x)return i+"PrintableString '"+hextoutf8(a(p,r))+"'\n";if("14"==x)return i+"TeletexString '"+hextoutf8(a(p,r))+"'\n";if("16"==x)return i+"IA5String '"+hextoutf8(a(p,r))+"'\n";if("17"==x)return i+"UTCTime "+hextoutf8(a(p,r))+"\n";if("18"==x)return i+"GeneralizedTime "+hextoutf8(a(p,r))+"\n";if("1a"==x)return i+"VisualString '"+hextoutf8(a(p,r))+"'\n";if("1e"==x)return i+"BMPString '"+ucs2hextoutf8(a(p,r))+"'\n";if("30"==x){if("3000"==p.substr(r,4))return i+"SEQUENCE {}\n";f=i+"SEQUENCE\n";var c=n;if((2==(b=l(p,r)).length||3==b.length)&&"06"==p.substr(b[0],2)&&"04"==p.substr(b[b.length-1],2)){h=s.oidname(a(p,b[0]));var E=JSON.parse(JSON.stringify(n));E.x509ExtName=h,c=E}for(var S=0;S<b.length;S++)f+=o(p,c,b[S],i+"  ");return f}if("31"==x){f=i+"SET\n";var b=l(p,r);for(S=0;S<b.length;S++)f+=o(p,n,b[S],i+"  ");return f}if(0!=(128&(x=parseInt(x,16)))){var f,A=31&x;if(0!=(32&x)){for(f=i+"["+A+"]\n",b=l(p,r),S=0;S<b.length;S++)f+=o(p,n,b[S],i+"  ");return f}return g=a(p,r),ASN1HEX.isASN1HEX(g)?(f=i+"["+A+"]\n")+o(g,n,0,i+"  "):(("68747470"==g.substr(0,8)||"subjectAltName"===n.x509ExtName&&2==A)&&(g=hextoutf8(g)),i+"["+A+"] "+g+"\n")}return i+"UNKNOWN("+x+") "+a(p,r)+"\n"},ASN1HEX.isContextTag=function(e,n){var r,i;e=e.toLowerCase();try{r=parseInt(e,16)}catch(a){return-1}if(void 0===n)return 128==(192&r);try{return!(null==n.match(/^\[[0-9]+\]$/)||(i=parseInt(n.substr(1,n.length-1),10),i>31))&&128==(192&r)&&(31&r)==i}catch(a){return!1}},ASN1HEX.isASN1HEX=function(e){var n=ASN1HEX;if(e.length%2==1)return!1;var r=n.getVblen(e,0),i=e.substr(0,2),s=n.getL(e,0);return e.length-i.length-s.length==2*r},ASN1HEX.checkStrictDER=function(e,n,r,i,s){var a=ASN1HEX;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!KJUR.lang.String.isHex(e))throw new Error("not hex string");r=e.length,s=(i=e.length/2)<128?1:Math.ceil(i.toString(16))+1}if(a.getL(e,n).length>2*s)throw new Error("L of TLV too long: idx="+n);var l=a.getVblen(e,n);if(l>i)throw new Error("value of L too long than hex: idx="+n);var p=a.getTLV(e,n),d=p.length-2-a.getL(e,n).length;if(d!==2*l)throw new Error("V string length and L's value not the same:"+d+"/"+2*l);if(0===n&&e.length!=p.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+p.length);var v=e.substr(n,2);if("02"===v){var g=a.getVidx(e,n);if("00"==e.substr(g,2)&&e.charCodeAt(g+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(v,16)){for(var f=a.getVblen(e,n),u=0,m=a.getChildIdx(e,n),h=0;h<m.length;h++)u+=a.getTLV(e,m[h]).length,a.checkStrictDER(e,m[h],r,i,s);if(2*f!=u)throw new Error("sum of children's TLV length and L unmatch: "+2*f+"!="+u)}},ASN1HEX.oidname=function(e){var n=KJUR.asn1;KJUR.lang.String.isHex(e)&&(e=n.ASN1Util.oidHexToInt(e));var r=n.x509.OID.oid2name(e);return""===r&&(r=e),r},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),(void 0===KJUR.asn1.x509||!KJUR.asn1.x509)&&(KJUR.asn1.x509={}),KJUR.asn1.x509.Certificate=function(e){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);var r=KJUR.asn1,i=r.DERBitString,s=r.DERSequence,a=r.x509,o=a.TBSCertificate,l=a.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(p){this.params=p},this.sign=function(){var p=this.params,d=p.sigalg;null!=p.sigalg.name&&(d=p.sigalg.name);var v=p.tbsobj.getEncodedHex(),g=new KJUR.crypto.Signature({alg:d});g.init(p.cakey),g.updateHex(v),p.sighex=g.sign()},this.getPEM=function(){return hextopem(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var p=this.params;if((null==p.tbsobj||null==p.tbsobj)&&(p.tbsobj=new o(p)),null==p.sighex&&null!=p.cakey&&this.sign(),null==p.sighex)throw new Error("sighex or cakey parameter not defined");var d=[];return d.push(p.tbsobj),d.push(new l({name:p.sigalg})),d.push(new i({hex:"00"+p.sighex})),new s({array:d}).getEncodedHex()},null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertificate=function(e){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this);var r=KJUR.asn1,i=r.x509,s=r.DERTaggedObject,a=r.DERInteger,o=r.DERSequence,l=i.AlgorithmIdentifier,p=i.Time,d=i.X500Name,v=i.Extensions,g=i.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(f){this.params=f},this.getEncodedHex=function(){var f=[],u=this.params;if(null!=u.version||1!=u.version){var m=2;null!=u.version&&(m=u.version-1);var h=new s({obj:new a({int:m})});f.push(h)}return f.push(new a(u.serial)),f.push(new l({name:u.sigalg})),f.push(new d(u.issuer)),f.push(new o({array:[new p(u.notbefore),new p(u.notafter)]})),f.push(new d(u.subject)),f.push(new g(KEYUTIL.getKey(u.sbjpubkey))),void 0!==u.ext&&u.ext.length>0&&f.push(new s({tag:"a3",obj:new v(u.ext)})),new KJUR.asn1.DERSequence({array:f}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extensions=function(e){KJUR.asn1.x509.Extensions.superclass.constructor.call(this);var r=KJUR.asn1,i=r.DERSequence,s=r.x509;this.aParam=[],this.setByParam=function(a){this.aParam=a},this.getEncodedHex=function(){for(var a=[],o=0;o<this.aParam.length;o++){var l=this.aParam[o],p=l.extname,d=null;if(null!=l.extn)d=new s.PrivateExtension(l);else if("subjectKeyIdentifier"==p)d=new s.SubjectKeyIdentifier(l);else if("keyUsage"==p)d=new s.KeyUsage(l);else if("subjectAltName"==p)d=new s.SubjectAltName(l);else if("issuerAltName"==p)d=new s.IssuerAltName(l);else if("basicConstraints"==p)d=new s.BasicConstraints(l);else if("cRLDistributionPoints"==p)d=new s.CRLDistributionPoints(l);else if("certificatePolicies"==p)d=new s.CertificatePolicies(l);else if("authorityKeyIdentifier"==p)d=new s.AuthorityKeyIdentifier(l);else if("extKeyUsage"==p)d=new s.ExtKeyUsage(l);else if("authorityInfoAccess"==p)d=new s.AuthorityInfoAccess(l);else if("cRLNumber"==p)d=new s.CRLNumber(l);else if("cRLReason"==p)d=new s.CRLReason(l);else if("ocspNonce"==p)d=new s.OCSPNonce(l);else if("ocspNoCheck"==p)d=new s.OCSPNoCheck(l);else if("adobeTimeStamp"==p)d=new s.AdobeTimeStamp(l);else{if("subjectDirectoryAttributes"!=p)throw new Error("extension not supported:"+JSON.stringify(l));d=new s.SubjectDirectoryAttributes(l)}null!=d&&a.push(d)}return new i({array:a}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.Extensions,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension=function(e){KJUR.asn1.x509.Extension.superclass.constructor.call(this);var i=KJUR.asn1,s=i.DERObjectIdentifier,a=i.DEROctetString,l=i.DERBoolean,p=i.DERSequence;this.getEncodedHex=function(){var d=new s({oid:this.oid}),v=new a({hex:this.getExtnValueHex()}),g=new Array;return g.push(d),this.critical&&g.push(new l),g.push(v),new p({array:g}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},extendClass(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object),KJUR.asn1.x509.KeyUsage=function(e){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var n=X509.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new KJUR.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var r=e.names,i="000000000",s=0;s<r.length;s++)for(var a=0;a<n.length;a++)r[s]===n[a]&&(i=i.substring(0,a)+"1"+i.substring(a+1,i.length));this.asn1ExtnValue=new KJUR.asn1.DERBitString({bin:i})}},extendClass(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.BasicConstraints=function(e){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var n=KJUR.asn1,r=n.DERBoolean,i=n.DERInteger,s=n.DERSequence;this.getExtnValueHex=function(){var l=new Array;this.cA&&l.push(new r),this.pathLen>-1&&l.push(new i({int:this.pathLen}));var p=new s({array:l});return this.asn1ExtnValue=p,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},extendClass(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLDistributionPoints=function(e){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var r=KJUR.asn1,i=r.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(s){for(var a=[],o=0;o<s.length;o++)if(s[o]instanceof KJUR.asn1.ASN1Object)a.push(s[o]);else{var l=new i.DistributionPoint(s[o]);a.push(l)}this.asn1ExtnValue=new r.DERSequence({array:a})},this.setByOneURI=function(s){var a=new i.DistributionPoint({fulluri:s});this.setByDPArray([a])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},extendClass(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.DistributionPoint=function(e){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);var i=KJUR.asn1,s=i.x509.DistributionPointName;this.getEncodedHex=function(){var a=new i.DERSequence;if(null!=this.asn1DP){var o=new i.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});a.appendASN1Object(o)}return this.hTLV=a.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.dpobj?this.asn1DP=e.dpobj:void 0!==e.dpname?this.asn1DP=new s(e.dpname):void 0!==e.fulluri&&(this.asn1DP=new s({full:[{uri:e.fulluri}]})))},extendClass(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPointName=function(e){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);var o=KJUR.asn1,l=o.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new l({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e)if(o.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else{if(void 0===e.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new o.x509.GeneralNames(e.full)}},extendClass(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CertificatePolicies=function(e){KJUR.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var r=KJUR.asn1,s=r.DERSequence,a=r.x509.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var o=[],l=0;l<this.params.array.length;l++)o.push(new a(this.params.array[l]));var p=new s({array:o});return this.asn1ExtnValue=p,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.CertificatePolicies,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PolicyInformation=function(e){KJUR.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var n=KJUR.asn1,r=n.DERSequence,i=n.DERObjectIdentifier,s=n.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var a=[new i(this.params.policyoid)];if(void 0!==this.params.array){for(var o=[],l=0;l<this.params.array.length;l++)o.push(new s(this.params.array[l]));o.length>0&&a.push(new r({array:o}))}return new r({array:a}).getEncodedHex()},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.PolicyInformation,KJUR.asn1.ASN1Object),KJUR.asn1.x509.PolicyQualifierInfo=function(e){KJUR.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var n=KJUR.asn1,r=n.DERSequence,i=n.DERIA5String,s=n.DERObjectIdentifier,a=n.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return void 0!==this.params.cps?new r({array:[new s({oid:"1.3.6.1.5.5.7.2.1"}),new i({str:this.params.cps})]}).getEncodedHex():null!=this.params.unotice?new r({array:[new s({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]}).getEncodedHex():void 0},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.PolicyQualifierInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.UserNotice=function(e){KJUR.asn1.x509.UserNotice.superclass.constructor.call(this,e);var n=KJUR.asn1.DERSequence,i=KJUR.asn1.x509.DisplayText,s=KJUR.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var a=[];return void 0!==this.params.noticeref&&a.push(new s(this.params.noticeref)),void 0!==this.params.exptext&&a.push(new i(this.params.exptext)),new n({array:a}).getEncodedHex()},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.UserNotice,KJUR.asn1.ASN1Object),KJUR.asn1.x509.NoticeReference=function(e){KJUR.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var n=KJUR.asn1.DERSequence,r=KJUR.asn1.DERInteger,i=KJUR.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var s=[];if(void 0!==this.params.org&&s.push(new i(this.params.org)),void 0!==this.params.noticenum){for(var a=[],o=this.params.noticenum,l=0;l<o.length;l++)a.push(new r(o[l]));s.push(new n({array:a}))}if(0==s.length)throw new Error("parameter is empty");return new n({array:s}).getEncodedHex()},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.NoticeReference,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DisplayText=function(e){KJUR.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},extendClass(KJUR.asn1.x509.DisplayText,KJUR.asn1.DERAbstractString),KJUR.asn1.x509.ExtKeyUsage=function(e){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var r=KJUR.asn1;this.setPurposeArray=function(i){this.asn1ExtnValue=new r.DERSequence;for(var s=0;s<i.length;s++){var a=new r.DERObjectIdentifier(i[s]);this.asn1ExtnValue.appendASN1Object(a)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},extendClass(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityKeyIdentifier=function(e){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var r=KJUR.asn1,i=r.DERTaggedObject,s=r.x509.GeneralNames;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var o=new Array;this.asn1KID&&o.push(new i({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&o.push(new i({explicit:!1,tag:"a1",obj:new s([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&o.push(new i({explicit:!1,tag:"82",obj:this.asn1CertSN}));var l=new r.DERSequence({array:o});return this.asn1ExtnValue=l,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(o){if(void 0!==o.str||void 0!==o.hex)this.asn1KID=new KJUR.asn1.DEROctetString(o);else if("object"==typeof o&&KJUR.crypto.Util.isKey(o)||"string"==typeof o&&-1!=o.indexOf("BEGIN ")){var l=o;"string"==typeof o&&(l=KEYUTIL.getKey(o));var p=KEYUTIL.getKeyID(l);this.asn1KID=new KJUR.asn1.DEROctetString({hex:p})}},this.setCertIssuerByParam=function(o){void 0!==o.str||void 0!==o.ldapstr||void 0!==o.hex||void 0!==o.certsubject||void 0!==o.certissuer?this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(o):"string"==typeof o&&-1!=o.indexOf("BEGIN ")&&-1!=o.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new KJUR.asn1.x509.X500Name({certissuer:o}))},this.setCertSNByParam=function(o){if(void 0!==o.str||void 0!==o.bigint||void 0!==o.hex)this.asn1CertSN=new KJUR.asn1.DERInteger(o);else if("string"==typeof o&&-1!=o.indexOf("BEGIN ")&&o.indexOf("CERTIFICATE")){var l=new X509;l.readCertPEM(o);var p=l.getSerialNumberHex();this.asn1CertSN=new KJUR.asn1.DERInteger({hex:p})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},extendClass(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectKeyIdentifier=function(e){KJUR.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var i=KJUR.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(s){if(void 0!==s.str||void 0!==s.hex)this.asn1KID=new i(s);else if("object"==typeof s&&KJUR.crypto.Util.isKey(s)||"string"==typeof s&&-1!=s.indexOf("BEGIN")){var a=s;"string"==typeof s&&(a=KEYUTIL.getKey(s));var o=KEYUTIL.getKeyID(a);this.asn1KID=new KJUR.asn1.DEROctetString({hex:o})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},extendClass(KJUR.asn1.x509.SubjectKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityInfoAccess=function(e){KJUR.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(n){for(var r=new Array,s=KJUR.asn1,a=s.DERSequence,o=s.DERObjectIdentifier,l=s.x509.GeneralName,p=0;p<n.length;p++){var d,v=n[p];if(void 0!==v.ocsp)d=new a({array:[new o({oid:"1.3.6.1.5.5.7.48.1"}),new l({uri:v.ocsp})]});else{if(void 0===v.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(v));d=new a({array:[new o({oid:"1.3.6.1.5.5.7.48.2"}),new l({uri:v.caissuer})]})}r.push(d)}this.asn1ExtnValue=new a({array:r})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},extendClass(KJUR.asn1.x509.AuthorityInfoAccess,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectAltName=function(e){KJUR.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(n){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(n)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},extendClass(KJUR.asn1.x509.SubjectAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.IssuerAltName=function(e){KJUR.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(n){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(n)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},extendClass(KJUR.asn1.x509.IssuerAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectDirectoryAttributes=function(e){KJUR.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var n=KJUR.asn1,r=n.DERSequence,i=n.ASN1Util.newObject,s=n.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var a=[],o=0;o<this.params.array.length;o++){var l=this.params.array[o],p={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==l.attr)p.seq[0].oid=s(l.attr),p.seq[1].set[0]={gentime:l.str};else if("placeOfBirth"==l.attr)p.seq[0].oid=s(l.attr),p.seq[1].set[0]={utf8str:l.str};else if("gender"==l.attr)p.seq[0].oid=s(l.attr),p.seq[1].set[0]={prnstr:l.str};else if("countryOfCitizenship"==l.attr)p.seq[0].oid=s(l.attr),p.seq[1].set[0]={prnstr:l.str};else{if("countryOfResidence"!=l.attr)throw new Error("unsupported attribute: "+l.attr);p.seq[0].oid=s(l.attr),p.seq[1].set[0]={prnstr:l.str}}a.push(new i(p))}var d=new r({array:a});return this.asn1ExtnValue=d,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.x509.SubjectDirectoryAttributes,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PrivateExtension=function(e){KJUR.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var r=KJUR.lang.String.isHex,i=KJUR.asn1,s=i.x509.OID.name2oid,a=i.ASN1Util.newObject;this.params=null,this.setByParam=function(o){this.oid=s(o.extname),this.params=o},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var o=this.params.extn;if("string"==typeof o&&r(o))return o;if("object"==typeof o)try{return a(o).getEncodedHex()}catch(l){}throw new Error("unsupported extn value")},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.PrivateExtension,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRL=function(e){KJUR.asn1.x509.CRL.superclass.constructor.call(this);var r=KJUR.asn1,i=r.DERSequence,s=r.DERBitString,a=r.x509,o=a.AlgorithmIdentifier,l=a.TBSCertList;this.params=void 0,this.setByParam=function(p){this.params=p},this.sign=function(){var p=new l(this.params).getEncodedHex(),d=new KJUR.crypto.Signature({alg:this.params.sigalg});d.init(this.params.cakey),d.updateHex(p);var v=d.sign();this.params.sighex=v},this.getPEM=function(){return hextopem(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var p=this.params;if(null==p.tbsobj&&(p.tbsobj=new l(p)),null==p.sighex&&null!=p.cakey&&this.sign(),null==p.sighex)throw new Error("sighex or cakey parameter not defined");var d=[];return d.push(p.tbsobj),d.push(new o({name:p.sigalg})),d.push(new s({hex:"00"+p.sighex})),new i({array:d}).getEncodedHex()},null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertList=function(e){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);var r=KJUR.asn1,i=r.DERInteger,s=r.DERSequence,a=r.DERTaggedObject,l=r.x509,p=l.AlgorithmIdentifier,d=l.Time,v=l.Extensions,g=l.X500Name;this.params=null,this.setByParam=function(f){this.params=f},this.getRevCertSequence=function(){for(var f=[],u=this.params.revcert,m=0;m<u.length;m++){var h=[new i(u[m].sn),new d(u[m].date)];null!=u[m].ext&&h.push(new v(u[m].ext)),f.push(new s({array:h}))}return new s({array:f})},this.getEncodedHex=function(){var f=[],u=this.params;if(null!=u.version){var h=new i({int:u.version-1});f.push(h)}if(f.push(new p({name:u.sigalg})),f.push(new g(u.issuer)),f.push(new d(u.thisupdate)),null!=u.nextupdate&&f.push(new d(u.nextupdate)),null!=u.revcert&&f.push(this.getRevCertSequence()),null!=u.ext){var y=new v(u.ext);f.push(new a({tag:"a0",explicit:!0,obj:y}))}return new s({array:f}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLEntry=function(e){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);var s=KJUR.asn1;this.setCertSerial=function(a){this.sn=new s.DERInteger(a)},this.setRevocationDate=function(a){this.time=new s.x509.Time(a)},this.getEncodedHex=function(){var a=new s.DERSequence({array:[this.sn,this.time]});return this.TLV=a.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},extendClass(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLNumber=function(e){KJUR.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.CRLNumber,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLReason=function(e){KJUR.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.CRLReason,KJUR.asn1.x509.Extension),KJUR.asn1.x509.OCSPNonce=function(e){KJUR.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.OCSPNonce,KJUR.asn1.x509.Extension),KJUR.asn1.x509.OCSPNoCheck=function(e){KJUR.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=e&&(this.params=e)},extendClass(KJUR.asn1.x509.OCSPNoCheck,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AdobeTimeStamp=function(e){KJUR.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var r=KJUR.asn1,i=r.DERInteger,s=r.DERBoolean,a=r.DERSequence,o=r.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var l=this.params,p=[new i(1)];return p.push(new o({uri:l.uri})),null!=l.reqauth&&p.push(new s(l.reqauth)),this.asn1ExtnValue=new a({array:p}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.AdobeTimeStamp,KJUR.asn1.x509.Extension),KJUR.asn1.x509.X500Name=function(e){KJUR.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var r=KJUR.asn1,i=r.x509,s=i.RDN;this.setByString=function(o,l){void 0!==l&&(this.sRule=l);var p=o.split("/");p.shift();for(var d=[],v=0;v<p.length;v++)if(p[v].match(/^[^=]+=.+$/))d.push(p[v]);else{var g=d.length-1;d[g]=d[g]+"/"+p[v]}for(v=0;v<d.length;v++)this.asn1Array.push(new s({str:d[v],rule:this.sRule}))},this.setByLdapString=function(o,l){void 0!==l&&(this.sRule=l);var p=i.X500Name.ldapToCompat(o);this.setByString(p,l)},this.setByObject=function(o,l){for(var p in void 0!==l&&(this.sRule=l),o)if(o.hasOwnProperty(p)){var d=new s({str:p+"="+o[p],rule:this.sRule});this.asn1Array?this.asn1Array.push(d):this.asn1Array=[d]}},this.setByParam=function(o){if(void 0!==o.rule&&(this.sRule=o.rule),void 0!==o.array)this.paramArray=o.array;else if(void 0!==o.str)this.setByString(o.str);else if(void 0!==o.ldapstr)this.setByLdapString(o.ldapstr);else if(void 0!==o.hex)this.hTLV=o.hex;else if(void 0!==o.certissuer)(l=new X509).readCertPEM(o.certissuer),this.hTLV=l.getIssuerHex();else if(void 0!==o.certsubject){var l;(l=new X509).readCertPEM(o.certsubject),this.hTLV=l.getSubjectHex()}else"object"==typeof o&&void 0===o.certsubject&&void 0===o.certissuer&&this.setByObject(o)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var o=0;o<this.paramArray.length;o++){var l={array:this.paramArray[o]};"utf8"!=this.sRule&&(l.rule=this.sRule);var p=new s(l);this.asn1Array.push(p)}var d=new r.DERSequence({array:this.asn1Array});return this.hTLV=d.getEncodedHex(),this.hTLV},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var r=(e=e.substr(1)).split("/");return r.reverse(),(r=r.map(function(i){return i.replace(/,/,"\\,")})).join(",")},KJUR.asn1.x509.X500Name.onelineToLDAP=function(e){return KJUR.asn1.x509.X500Name.compatToLDAP(e)},KJUR.asn1.x509.X500Name.ldapToCompat=function(e){for(var n=e.split(","),r=!1,i=[],s=0;n.length>0;s++){var a=n.shift();if(!0===r){var l=(i.pop()+","+a).replace(/\\,/g,",");i.push(l),r=!1}else i.push(a);"\\"===a.substr(-1,1)&&(r=!0)}return(i=i.map(function(p){return p.replace("/","\\/")})).reverse(),"/"+i.join("/")},KJUR.asn1.x509.X500Name.ldapToOneline=function(e){return KJUR.asn1.x509.X500Name.ldapToCompat(e)},KJUR.asn1.x509.RDN=function(e){KJUR.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var n=KJUR.asn1.x509.AttributeTypeAndValue;this.setByParam=function(r){void 0!==r.rule&&(this.sRule=r.rule),void 0!==r.str&&this.addByMultiValuedString(r.str),void 0!==r.array&&(this.paramArray=r.array)},this.addByString=function(r){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:r,rule:this.sRule}))},this.addByMultiValuedString=function(r){for(var i=KJUR.asn1.x509.RDN.parseString(r),s=0;s<i.length;s++)this.addByString(i[s])},this.getEncodedHex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var r=0;r<this.paramArray.length;r++){var i=this.paramArray[r];void 0!==i.rule&&"utf8"!=this.sRule&&(i.rule=this.sRule);var s=new n(i);this.asn1Array.push(s)}var a=new KJUR.asn1.DERSet({array:this.asn1Array});return this.TLV=a.getEncodedHex(),this.TLV},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object),KJUR.asn1.x509.RDN.parseString=function(e){for(var n=e.split(/\+/),r=!1,i=[],s=0;n.length>0;s++){var a=n.shift();if(!0===r){var l=(i.pop()+"+"+a).replace(/\\\+/g,"+");i.push(l),r=!1}else i.push(a);"\\"===a.substr(-1,1)&&(r=!0)}var p=!1,d=[];for(s=0;i.length>0;s++){if(a=i.shift(),!0===p){var v=d.pop();a.match(/"$/)?(l=(v+"+"+a).replace(/^([^=]+)="(.*)"$/,"$1=$2"),d.push(l),p=!1):d.push(v+"+"+a)}else d.push(a);a.match(/^[^=]+="/)&&(p=!0)}return d},KJUR.asn1.x509.AttributeTypeAndValue=function(e){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var r=KJUR.asn1,i=r.DERSequence,s=r.DERUTF8String,a=r.DERPrintableString,o=r.DERTeletexString,l=r.DERIA5String,p=r.DERVisibleString,d=r.DERBMPString,v=KJUR.lang.String.isMail,g=KJUR.lang.String.isPrintable;this.setByParam=function(f){if(void 0!==f.rule&&(this.sRule=f.rule),void 0!==f.ds&&(this.dsType=f.ds),void 0===f.value&&void 0!==f.str){var m=f.str.match(/^([^=]+)=(.+)$/);if(!m)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=m[1],this.sValue=m[2]}else this.sType=f.type,this.sValue=f.value},this.setByString=function(f,u){void 0!==u&&(this.sRule=u);var m=f.match(/^([^=]+)=(.+)$/);if(!m)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(m[1],m[2])},this._getDsType=function(){var f=this.sType,u=this.sValue,m=this.sRule;return"prn"===m?"CN"==f&&v(u)?"ia5":g(u)?"prn":"utf8":"utf8"===m?"CN"==f&&v(u)?"ia5":"C"==f?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(f,u,m){void 0!==m&&(this.sRule=m),this.sType=f,this.sValue=u},this.getValueObj=function(f,u){if("utf8"==f)return new s({str:u});if("prn"==f)return new a({str:u});if("tel"==f)return new o({str:u});if("ia5"==f)return new l({str:u});if("vis"==f)return new p({str:u});if("bmp"==f)return new d({str:u});throw new Error("unsupported directory string type: type="+f+" value="+u)},this.getEncodedHex=function(){null==this.dsType&&(this.dsType=this._getDsType());var f=KJUR.asn1.x509.OID.atype2obj(this.sType),u=this.getValueObj(this.dsType,this.sValue),m=new i({array:[f,u]});return this.TLV=m.getEncodedHex(),this.TLV},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.x509.SubjectPublicKeyInfo=function(e){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var s=KJUR.asn1,a=s.DERInteger,o=s.DERBitString,l=s.DERObjectIdentifier,p=s.DERSequence,d=s.ASN1Util.newObject,g=s.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new p({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var h=this.getASN1Object();return this.hTLV=h.getEncodedHex(),this.hTLV},this.setPubKey=function(h){try{if(h instanceof RSAKey){var b=d({seq:[{int:{bigint:h.n}},{int:{int:h.e}}]}).getEncodedHex();this.asn1AlgId=new g({name:"rsaEncryption"}),this.asn1SubjPKey=new o({hex:"00"+b})}}catch(S){}try{if(h instanceof KJUR.crypto.ECDSA){var c=new l({name:h.curveName});this.asn1AlgId=new g({name:"ecPublicKey",asn1params:c}),this.asn1SubjPKey=new o({hex:"00"+h.pubKeyHex})}}catch(S){}try{if(h instanceof KJUR.crypto.DSA){c=new d({seq:[{int:{bigint:h.p}},{int:{bigint:h.q}},{int:{bigint:h.g}}]}),this.asn1AlgId=new g({name:"dsa",asn1params:c});var E=new a({bigint:h.y});this.asn1SubjPKey=new o({hex:"00"+E.getEncodedHex()})}}catch(S){}},void 0!==e&&this.setPubKey(e)},extendClass(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Time=function(e){KJUR.asn1.x509.Time.superclass.constructor.call(this);var s=KJUR.asn1,a=s.DERUTCTime,o=s.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(l){this.timeParams=l},this.setByParam=function(l){this.params=l},this.getType=function(l){return l.match(/^[0-9]{12}Z$/)?"utc":l.match(/^[0-9]{14}Z$/)?"gen":l.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":l.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.getEncodedHex=function(){var l=this.params,p=null;if("string"==typeof l&&(l={str:l}),null!=l&&l.str&&(null==l.type||null==l.type)&&(l.type=this.getType(l.str)),null!=l&&l.str?("utc"==l.type&&(p=new a(l.str)),"gen"==l.type&&(p=new o(l.str))):p="gen"==this.type?new o:new a,null==p)throw new Error("wrong setting for Time");return this.TLV=p.getEncodedHex(),this.TLV},null!=e&&this.setByParam(e)},KJUR.asn1.x509.Time_bak=function(e){KJUR.asn1.x509.Time_bak.superclass.constructor.call(this);var s=KJUR.asn1,a=s.DERUTCTime,o=s.DERGeneralizedTime;this.setTimeParams=function(l){this.timeParams=l},this.getEncodedHex=function(){var l=null;return l=null!=this.timeParams?"utc"==this.type?new a(this.timeParams):new o(this.timeParams):"utc"==this.type?new a:new o,this.TLV=l.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},extendClass(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier=function(e){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var r=KJUR.asn1,i=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var a=null;for(var o in i)o===this.nameAlg&&(a=i[o]);if(null!==a)return this.hTLV=a,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var l=[this.asn1Alg];null!==this.asn1Params&&l.push(this.asn1Params);var p=new r.DERSequence({array:l});return this.hTLV=p.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var s=this.nameAlg.toLowerCase();"withdsa"!==s.substr(-7,7)&&"withecdsa"!==s.substr(-9,9)&&(this.asn1Params=new r.DERNull)}},extendClass(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},KJUR.asn1.x509.GeneralName=function(e){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var i={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},a=KJUR.asn1,l=a.DEROctetString,p=a.DERIA5String,d=a.DERTaggedObject,v=a.ASN1Object,g=a.x509.X500Name,f=pemtohex;this.explicit=!1,this.setByParam=function(u){var h=null;if(void 0!==u){if(void 0!==u.rfc822&&(this.type="rfc822",h=new p({str:u[this.type]})),void 0!==u.dns&&(this.type="dns",h=new p({str:u[this.type]})),void 0!==u.uri&&(this.type="uri",h=new p({str:u[this.type]})),void 0!==u.dn&&(this.type="dn",this.explicit=!0,h="string"==typeof u.dn?new g({str:u.dn}):u.dn instanceof KJUR.asn1.x509.X500Name?u.dn:new g(u.dn)),void 0!==u.ldapdn&&(this.type="dn",this.explicit=!0,h=new g({ldapstr:u.ldapdn})),void 0!==u.certissuer){this.type="dn",this.explicit=!0;var b=null;if((y=u.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=y.indexOf("-----BEGIN ")&&(b=f(y)),null==b)throw"certissuer param not cert";(c=new X509).hex=b;var E=c.getIssuerHex();(h=new v).hTLV=E}if(void 0!==u.certsubj){var y,c;if(this.type="dn",this.explicit=!0,b=null,(y=u.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=y.indexOf("-----BEGIN ")&&(b=f(y)),null==b)throw"certsubj param not cert";(c=new X509).hex=b,E=c.getSubjectHex(),(h=new v).hTLV=E}if(void 0!==u.ip){this.type="ip",this.explicit=!1;var x,S=u.ip,A="malformed IP address";if(S.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(x=intarystrtohex("["+S.split(".").join(",")+"]")).length)throw A}else if(S.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))x=ipv6tohex(S);else{if(!S.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw A;x=S}h=new l({hex:x})}if(null==this.type)throw"unsupported type in params="+u;this.asn1Obj=new d({explicit:this.explicit,tag:i[this.type],obj:h})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralNames=function(e){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);var i=KJUR.asn1;this.setByParamArray=function(s){for(var a=0;a<s.length;a++){var o=new i.x509.GeneralName(s[a]);this.asn1Array.push(o)}},this.getEncodedHex=function(){return new i.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},extendClass(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OID=new function(){var e=KJUR.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(n){if(void 0!==this.objCache[n])return this.objCache[n];if(void 0===this.name2oidList[n])throw"Name of ObjectIdentifier not defined: "+n;var i=new e({oid:this.name2oidList[n]});return this.objCache[n]=i,i},this.atype2obj=function(n){if(void 0!==this.objCache[n])return this.objCache[n];var r;if(n.match(/^\d+\.\d+\.[0-9.]+$/))r=n;else if(void 0!==this.atype2oidList[n])r=this.atype2oidList[n];else{if(void 0===this.name2oidList[n])throw new Error("AttributeType name undefined: "+n);r=this.name2oidList[n]}var i=new e({oid:r});return this.objCache[n]=i,i},this.registerOIDs=function(n){if(this.checkOIDs(n))for(var r in n)this.name2oidList[r]=n[r]},this.checkOIDs=function(n){try{var r=Object.keys(n);return 0!=r.length&&(r.map(function(i,s,a){if(!this[i].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},n),!0)}catch(i){return!1}}},KJUR.asn1.x509.OID.oid2name=function(e){var n=KJUR.asn1.x509.OID.name2oidList;for(var r in n)if(n[r]==e)return r;return""},KJUR.asn1.x509.OID.oid2atype=function(e){var n=KJUR.asn1.x509.OID.atype2oidList;for(var r in n)if(n[r]==e)return r;return e},KJUR.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var n=KJUR.asn1.x509.OID.name2oidList;return void 0===n[e]?"":n[e]},KJUR.asn1.x509.X509Util={},KJUR.asn1.x509.X509Util.newCertPEM=function(e){return new(0,KJUR.asn1.x509.Certificate)(e).getPEM()},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),(void 0===KJUR.asn1.cms||!KJUR.asn1.cms)&&(KJUR.asn1.cms={}),KJUR.asn1.cms.Attribute=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.DERSet,o=i.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(l){this.params=l},this.getValueArray=function(){throw new n("not yet implemented abstract")},this.getEncodedHex=function(){var l=new o({oid:this.typeOid}),p=new a({array:this.getValueArray()});return new s({array:[l,p]}).getEncodedHex()}},extendClass(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentType=function(e){var r=KJUR.asn1;r.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new r.DERObjectIdentifier(this.params.type)]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.MessageDigest=function(e){var r=KJUR.asn1,i=r.DEROctetString;r.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new i(this.params)]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningTime=function(e){var r=KJUR.asn1;r.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new r.x509.Time(this.params)]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificate=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.cms,o=a.ESSCertID;a.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new n("parameter 'array' not specified");for(var p=this.params.array,d=[],v=0;v<p.length;v++){var g=p[v];0==e.hasis&&"string"==typeof g&&(-1!=g.indexOf("-----BEGIN")||ASN1HEX.isASN1HEX(g))&&(g={cert:g}),0!=g.hasis&&0==e.hasis&&(g.hasis=!1),d.push(new o(g))}var f=new s({array:d});return[new s({array:[f]})]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.ESSCertID=function(e){KJUR.asn1.cms.ESSCertID.superclass.constructor.call(this);var n=Error,r=KJUR,i=r.asn1,s=i.DEROctetString,a=i.DERSequence,o=i.cms.IssuerSerial;this.params=null,this.getCertHash=function(l,p){if(null!=l.hash)return l.hash;if("string"==typeof l&&-1==l.indexOf("-----BEGIN")&&!ASN1HEX.isASN1HEX(l))return l;var d,v,g;if("string"==typeof l)d=l;else{if(null==l.cert)throw new n("hash nor cert unspecified");d=l.cert}if(v=-1!=d.indexOf("-----BEGIN")?pemtohex(d):d,"string"==typeof l&&(-1!=l.indexOf("-----BEGIN")?v=pemtohex(l):ASN1HEX.isASN1HEX(l)&&(v=l)),null!=l.alg)g=l.alg;else{if(null==p)throw new n("hash alg unspecified");g=p}return r.crypto.Util.hashHex(v,g)},this.getEncodedHex=function(){var l=this.params,p=this.getCertHash(l,"sha1"),d=[];return d.push(new s({hex:p})),("string"==typeof l&&-1!=l.indexOf("-----BEGIN")||null!=l.cert&&0!=l.hasis||null!=l.issuer&&null!=l.serial)&&d.push(new o(l)),new a({array:d}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.ESSCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SigningCertificateV2=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,o=i.cms,l=o.ESSCertIDv2;o.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new n("parameter 'array' not specified");for(var d=this.params.array,v=[],g=0;g<d.length;g++){var f=d[g];(null!=e.alg||0==e.hasis)&&"string"==typeof f&&(-1!=f.indexOf("-----BEGIN")||ASN1HEX.isASN1HEX(f))&&(f={cert:f}),null==f.alg&&null!=e.alg&&(f.alg=e.alg),0!=f.hasis&&0==e.hasis&&(f.hasis=!1),v.push(new l(f))}var u=new s({array:v});return[new s({array:[u]})]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.ESSCertIDv2=function(e){KJUR.asn1.cms.ESSCertIDv2.superclass.constructor.call(this),Error;var i=KJUR.asn1,s=i.DEROctetString,a=i.DERSequence,o=i.cms.IssuerSerial,l=i.x509.AlgorithmIdentifier;this.params=null,this.getEncodedHex=function(){var p=this.params,d=this.getCertHash(p,"sha256"),v=[];return null!=p.alg&&"sha256"!=p.alg&&v.push(new l({name:p.alg})),v.push(new s({hex:d})),("string"==typeof p&&-1!=p.indexOf("-----BEGIN")||null!=p.cert&&0!=p.hasis||null!=p.issuer&&null!=p.serial)&&v.push(new o(p)),new a({array:v}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.ESSCertIDv2,KJUR.asn1.cms.ESSCertID),KJUR.asn1.cms.IssuerSerial=function(e){var n=Error,i=KJUR.asn1,s=i.DERInteger,a=i.DERSequence,p=i.x509.GeneralNames,d=X509;i.cms.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(v){this.params=v},this.getEncodedHex=function(){var g,f,v=this.params;if("string"==typeof v&&-1!=v.indexOf("-----BEGIN")||null!=v.cert){var u;u=null!=v.cert?v.cert:v;var m=new d;m.readCertPEM(u),g=m.getIssuer(),f={hex:m.getSerialNumberHex()}}else{if(null==v.issuer||!v.serial)throw new n("cert or issuer and serial parameter not specified");g=v.issuer,f=v.serial}var h=new p([{dn:g}]),y=new s(f);return new a({array:[h,y]}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.IssuerSerial,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerIdentifier=function(e){var a=KJUR.asn1.cms,o=a.IssuerAndSerialNumber,l=a.SubjectKeyIdentifier;Error,a.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var f=this.params;if("isssn"==f.type)return new o(f).getEncodedHex();if("skid"==f.type)return new l(f).getEncodedHex();throw new Error("wrong property for isssn or skid")},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SignerIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.cms.IssuerAndSerialNumber=function(e){var r=KJUR.asn1,i=r.DERInteger,s=r.DERSequence,l=r.x509.X500Name,p=X509,d=Error;r.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var g,f,v=this.params;if("string"==typeof v&&-1!=v.indexOf("-----BEGIN")||null!=v.cert){var u;u=null!=v.cert?v.cert:v;var m=new p;m.readCertPEM(u),g=m.getIssuer(),f={hex:m.getSerialNumberHex()}}else{if(null==v.issuer||!v.serial)throw new d("cert or issuer and serial parameter not specified");g=v.issuer,f=v.serial}var h=new l(g),y=new i(f);return new s({array:[h,y]}).getEncodedHex()},this.setByParam=function(v){this.params=v},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SubjectKeyIdentifier=function(e){var r=KJUR.asn1,a=r.ASN1Util.newObject,g=X509,f=Error;r.cms.SubjectKeyIdentifier.superclass.constructor.call(this),this.getEncodedHex=function(){var m,u=this.params;if(null==u.cert&&null==u.skid)throw new f("property cert nor skid undefined");return null!=u.cert?m=new g(u.cert).getExtSubjectKeyIdentifier().kid.hex:null!=u.skid&&(m=u.skid),a({tag:{tage:"a0",obj:{octstr:{hex:m}}}}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SubjectKeyIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.cms.AttributeList=function(e){var n=Error,i=KJUR.asn1,s=i.DERSet,a=i.cms;a.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(o){this.params=o},this.getEncodedHex=function(){var o=this.params;if(null!=this.hTLV)return this.hTLV;var l=!0;null!=o.sortflag&&(l=o.sortflag);for(var p=o.array,d=[],v=0;v<p.length;v++){var g=p[v],f=g.attr;if("contentType"==f)d.push(new a.ContentType(g));else if("messageDigest"==f)d.push(new a.MessageDigest(g));else if("signingTime"==f)d.push(new a.SigningTime(g));else if("signingCertificate"==f)d.push(new a.SigningCertificate(g));else if("signingCertificateV2"==f)d.push(new a.SigningCertificateV2(g));else if("signaturePolicyIdentifier"==f)d.push(new KJUR.asn1.cades.SignaturePolicyIdentifier(g));else{if("signatureTimeStamp"!=f&&"timeStampToken"!=f)throw new n("unknown attr: "+f);d.push(new KJUR.asn1.cades.SignatureTimeStamp(g))}}var u=new s({array:d,sortflag:l});return this.hTLV=u.getEncodedHex(),this.hTLV},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerInfo=function(e){var n=Error,i=KJUR.asn1,s=i.DERInteger,a=i.DEROctetString,o=i.DERSequence,l=i.DERTaggedObject,p=i.cms,d=p.SignerIdentifier,v=p.AttributeList,y=i.x509.AlgorithmIdentifier,b=KJUR.crypto,c=KEYUTIL;p.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var E=this.params,S=E.sigalg,x=new v(E.sattrs).getEncodedHex(),A=c.getKey(E.signkey),O=new b.Signature({alg:S});O.init(A),O.updateHex(x);var F=O.sign();E.sighex=F},this.getEncodedHex=function(){var E=this.params,S=[];if(S.push(new s({int:E.version})),S.push(new d(E.id)),S.push(new y({name:E.hashalg})),null!=E.sattrs){var x=new v(E.sattrs);try{S.push(new l({tag:"a0",explicit:!1,obj:x}))}catch(O){throw new n("si sattr error: "+O)}}if(S.push(new y(null!=E.sigalgfield?{name:E.sigalgfield}:{name:E.sigalg})),null==E.sighex&&null!=E.signkey&&this.sign(),S.push(new a({hex:E.sighex})),null!=E.uattrs){x=new v(E.uattrs);try{S.push(new l({tag:"a1",explicit:!1,obj:x}))}catch(F){throw new n("si uattr error: "+F)}}return new o({array:S}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.EncapsulatedContentInfo=function(e){var r=KJUR.asn1,i=r.DERTaggedObject,s=r.DERSequence,a=r.DERObjectIdentifier,o=r.DEROctetString;r.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var p=this.params,d=[];if(d.push(new a(p.type)),null!=p.content&&(null!=p.content.hex||null!=p.content.str)&&1!=p.isDetached){var v=new o(p.content),g=new i({tag:"a0",explicit:!0,obj:v});d.push(g)}return new s({array:d}).getEncodedHex()},this.setByParam=function(p){this.params=p},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentInfo=function(e){var r=KJUR.asn1,i=r.DERTaggedObject,s=r.DERSequence,a=r.DERObjectIdentifier;KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var p=this.params,d=[];d.push(new a(p.type));var v=new i({tag:"a0",explicit:!0,obj:p.obj});return d.push(v),new s({array:d}).getEncodedHex()},this.setByParam=function(p){this.params=p},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignedData=function(e){Error;var i=KJUR.asn1,a=i.DERInteger,o=i.DERSet,l=i.DERSequence,d=i.cms,v=d.EncapsulatedContentInfo,g=d.SignerInfo,f=d.ContentInfo,u=d.CertificateSet,m=d.RevocationInfoChoices,y=i.x509.AlgorithmIdentifier;KJUR.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var b=this.params;this._setDigestAlgs(b),this._setContentTypeByEContent(b),this._setMessageDigestByEContent(b),this._setSignerInfoVersion(b),this._setSignedDataVersion(b)},this._setDigestAlgs=function(b){for(var c={},E=b.sinfos,S=0;S<E.length;S++)c[E[S].hashalg]=1;b.hashalgs=Object.keys(c).sort()},this._setContentTypeByEContent=function(b){for(var c=b.econtent.type,E=b.sinfos,S=0;S<E.length;S++)this._getAttrParamByName(E[S],"contentType").type=c},this._setMessageDigestByEContent=function(b){var c=b.econtent,S=c.content.hex;null==S&&"data"==c.type&&null!=c.content.str&&(S=rstrtohex(c.content.str));for(var x=b.sinfos,A=0;A<x.length;A++){var O=x[A],F=O.hashalg,w=this._getAttrParamByName(O,"messageDigest"),P=KJUR.crypto.Util.hashHex(S,F);w.hex=P}},this._getAttrParamByName=function(b,c){for(var E=b.sattrs.array,S=0;S<E.length;S++)if(E[S].attr==c)return E[S]},this._setSignerInfoVersion=function(b){for(var c=b.sinfos,E=0;E<c.length;E++){var S=c[E],x=1;"skid"==S.id.type&&(x=3),S.version=x}},this._setSignedDataVersion=function(b){var c=this._getSignedDataVersion(b);b.version=c},this._getSignedDataVersion=function(b){if(null!=b.revinfos)for(var c=b.revinfos,E=0;E<c.length;E++)if(null!=c[E].ocsp)return 5;var x=b.sinfos;for(E=0;E<x.length;E++)if(3==b.sinfos[E].version)return 3;return"data"!=b.econtent.type?3:1},this.getEncodedHex=function(){var b=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=b.fixed&&this.checkAndFixParam();var c=[];c.push(new a({int:b.version}));for(var E=[],S=0;S<b.hashalgs.length;S++)E.push(new y({name:b.hashalgs[S]}));c.push(new o({array:E})),c.push(new v(b.econtent)),null!=b.certs&&c.push(new u(b.certs)),null!=b.revinfos&&c.push(new m(b.revinfos));var A=[];for(S=0;S<b.sinfos.length;S++)A.push(new g(b.sinfos[S]));return c.push(new o({array:A})),new l({array:c}).getEncodedHex()},this.getContentInfo=function(){return new f({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CertificateSet=function(e){KJUR.asn1.cms.CertificateSet.superclass.constructor.call(this);var n=Error,r=KJUR.asn1,i=r.DERTaggedObject,s=r.DERSet,a=r.ASN1Object;this.params=null,this.getEncodedHex=function(){var p,o=this.params,l=[];if(o instanceof Array)p=o;else{if(null==o.array)throw new n("cert array not specified");p=o.array}for(var d=0;d<p.length;d++){var g=pemtohex(p[d]),f=new a;f.hTLV=g,l.push(f)}var u={array:l};0==o.sortflag&&(u.sortflag=!1);var m=new s(u);return new i({tag:"a0",explicit:!1,obj:m}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.CertificateSet,KJUR.asn1.ASN1Object),KJUR.asn1.cms.RevocationInfoChoices=function(e){KJUR.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var n=this.params;if(!n instanceof Array)throw new Error("params is not array");for(var r=[],i=0;i<n.length;i++)r.push(new KJUR.asn1.cms.RevocationInfoChoice(n[i]));return KJUR.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:r}}}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.RevocationInfoChoices,KJUR.asn1.ASN1Object),KJUR.asn1.cms.RevocationInfoChoice=function(e){KJUR.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var n=this.params;if(null!=n.crl&&"string"==typeof n.crl){var r=n.crl;return-1!=n.crl.indexOf("-----BEGIN")&&(r=pemtohex(n.crl)),r}if(null!=n.ocsp)return KJUR.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new KJUR.asn1.cms.OtherRevocationFormat(n)}}).getEncodedHex();throw new Error("property crl or ocsp undefined")},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.RevocationInfoChoice,KJUR.asn1.ASN1Object),KJUR.asn1.cms.OtherRevocationFormat=function(e){KJUR.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var n=Error,s=KJUR.asn1.ASN1Util.newObject,a=KJUR.lang.String.isHex;this.params=null,this.getEncodedHex=function(){var o=this.params;if(null==o.ocsp)throw new n("property ocsp not specified");if(!a(o.ocsp)||!ASN1HEX.isASN1HEX(o.ocsp))throw new n("ocsp value not ASN.1 hex string");return s({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:o.ocsp}}]}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cms.OtherRevocationFormat,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CMSUtil=new function(){},KJUR.asn1.cms.CMSUtil.newSignedData=function(e){return new KJUR.asn1.cms.SignedData(e)},KJUR.asn1.cms.CMSUtil.verifySignedData=function(e){var u=ASN1HEX.getVbyList,m=ASN1HEX.getTLVbyList,h=ASN1HEX.getIdxbyList,y=ASN1HEX.getChildIdx,b=ASN1HEX.getTLV,c=ASN1HEX.oidname,E=KJUR.crypto.Util.hashHex;void 0===e.cms&&(0,KJUR.lang.String.isHex)(e.cms);var S=e.cms,O=function(_,j){var R=j.idx;j.signerid_issuer1=m(_,R,[1,0],"30"),j.signerid_serial1=u(_,R,[1,1],"02"),j.hashalg=c(u(_,R,[2,0],"06"));var L=h(_,R,[3],"a0");j.idxSignedAttrs=L,F(_,j,L);var k=y(_,R).length;if(k<6)throw"malformed SignerInfo";j.sigalg=c(u(_,R,[k-2,0],"06")),j.sigval=u(_,R,[k-1],"04")},F=function(_,j,R){var L=y(_,R);j.signedAttrIdxList=L;for(var N=0;N<L.length;N++){var q,k=L[N],B=u(_,k,[0],"06");"2a864886f70d010905"===B?(q=hextoutf8(u(_,k,[1,0])),j.saSigningTime=q):"2a864886f70d010904"===B&&(q=u(_,k,[1,0],"04"),j.saMessageDigest=q)}},D=function(_,j,R,L){R.verifyDetail={};var N=R.verifyDetail,k=j.parse.econtent,B=R.hashalg,q=R.saMessageDigest;N.validMessageDigest=!1,E(k,B)===q&&(N.validMessageDigest=!0),function(_,j,R,L){var k,N=j.parse.certsIdx;if(void 0===j.certs){k=[],j.certkeys=[];for(var B=y(_,N),q=0;q<B.length;q++){var V=b(_,B[q]),C=new X509;C.readCertHex(V),k[q]=C,j.certkeys[q]=C.getPublicKey()}j.certs=k}else k=j.certs;for(j.cccc=k.length,j.cccci=B.length,q=0;q<k.length;q++){var M=C.getIssuerHex(),K=C.getSerialNumberHex();R.signerid_issuer1===M&&R.signerid_serial1===K&&(R.certkey_idx=q)}}(_,j,R),N.validSignatureValue=!1;var V=R.sigalg,C="31"+b(_,R.idxSignedAttrs).substr(2);R.signedattrshex=C;var M=j.certs[R.certkey_idx].getPublicKey(),K=new KJUR.crypto.Signature({alg:V});K.init(M),K.updateHex(C);var U=K.verify(R.sigval);N.validSignatureValue_isValid=U,!0===U&&(N.validSignatureValue=!0),R.isValid=!1,N.validMessageDigest&&N.validSignatureValue&&(R.isValid=!0)},I={isValid:!1,parse:{}};return function(_,j){if("2a864886f70d010702"!==u(_,0,[0],"06"))return j;j.cmsType="signedData",j.econtent=u(_,0,[1,0,2,1,0]),function(_,j){for(var R,L=3;L<6;L++)if(void 0!==(R=h(_,0,[1,0,L]))){var N=_.substr(R,2);"a0"===N&&(j.certsIdx=R),"a1"===N&&(j.revinfosIdx=R),"31"===N&&(j.signerinfosIdx=R)}}(_,j),j.signerInfos=[],function(_,j){var R=j.signerinfosIdx;if(void 0!==R){var L=y(_,R);j.signerInfoIdxList=L;for(var N=0;N<L.length;N++){var B={idx:L[N]};O(_,B),j.signerInfos.push(B)}}}(_,j)}(S,I.parse),function(_,j){for(var R=j.parse.signerInfos,L=R.length,N=!0,k=0;k<L;k++){var B=R[k];D(_,j,B),B.isValid||(N=!1)}j.isValid=N}(S,I),I},KJUR.asn1.cms.CMSParser=function(){var e=Error,n=X509,r=new n,i=ASN1HEX,s=i.getV,a=i.getTLV,l=i.getTLVbyList,p=i.getTLVbyListEx,d=i.getVbyList,v=i.getVbyListEx,g=i.getChildIdx;this.getCMSSignedData=function(f){var u=l(f,0,[1,0]);return this.getSignedData(u)},this.getSignedData=function(f){var u=g(f,0),m={},h=s(f,u[0]),y=parseInt(h,16);m.version=y;var b=a(f,u[1]);m.hashalgs=this.getHashAlgArray(b);var c=a(f,u[2]);m.econtent=this.getEContent(c);var E=p(f,0,["[0]"]);null!=E&&(m.certs=this.getCertificateSet(E)),p(f,0,["[1]"]);var x=p(f,0,[3]);return m.sinfos=this.getSignerInfos(x),m},this.getHashAlgArray=function(f){for(var u=g(f,0),m=new n,h=[],y=0;y<u.length;y++){var b=a(f,u[y]),c=m.getAlgorithmIdentifierName(b);h.push(c)}return h},this.getEContent=function(f){var u={},m=d(f,0,[0]),h=d(f,0,[1,0]);return u.type=KJUR.asn1.x509.OID.oid2name(ASN1HEX.hextooidstr(m)),u.content={hex:h},u},this.getSignerInfos=function(f){for(var u=[],m=g(f,0),h=0;h<m.length;h++){var y=a(f,m[h]),b=this.getSignerInfo(y);u.push(b)}return u},this.getSignerInfo=function(f){var u={},m=g(f,0),h=i.getInt(f,m[0],-1);-1!=h&&(u.version=h);var y=a(f,m[1]),b=this.getIssuerAndSerialNumber(y);u.id=b;var c=a(f,m[2]),E=r.getAlgorithmIdentifierName(c);u.hashalg=E;var S=p(f,0,["[0]"]);if(null!=S){var x=this.getAttributeList(S);u.sattrs=x}var A=p(f,0,[3]),O=r.getAlgorithmIdentifierName(A);u.sigalg=O;var F=v(f,0,[4]);u.sighex=F;var w=p(f,0,["[1]"]);if(null!=w){var P=this.getAttributeList(w);u.uattrs=P}return u},this.getSignerIdentifier=function(f){if("30"==f.substr(0,2))return this.getIssuerAndSerialNumber(f);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(f){var u={type:"isssn"},m=g(f,0),h=a(f,m[0]);u.issuer=r.getX500Name(h);var y=s(f,m[1]);return u.serial={hex:y},u},this.getAttributeList=function(f){for(var u=[],m=g(f,0),h=0;h<m.length;h++){var y=a(f,m[h]),b=this.getAttribute(y);u.push(b)}return{array:u}},this.getAttribute=function(f){var u={},m=g(f,0),h=i.getOID(f,m[0]),y=KJUR.asn1.x509.OID.oid2name(h);u.attr=y;var b=a(f,m[1]),c=g(b,0);if(1==c.length)u.valhex=a(b,c[0]);else{for(var E=[],S=0;S<c.length;S++)E.push(a(b,c[S]));u.valhex=E}return"contentType"==y?this.setContentType(u):"messageDigest"==y?this.setMessageDigest(u):"signingTime"==y?this.setSigningTime(u):"signingCertificate"==y?this.setSigningCertificate(u):"signingCertificateV2"==y?this.setSigningCertificateV2(u):"signaturePolicyIdentifier"==y&&this.setSignaturePolicyIdentifier(u),u},this.setContentType=function(f){var u=i.getOIDName(f.valhex,0,null);null!=u&&(f.type=u,delete f.valhex)},this.setSigningTime=function(f){var m=hextoutf8(s(f.valhex,0));f.str=m,delete f.valhex},this.setMessageDigest=function(f){var u=s(f.valhex,0);f.hex=u,delete f.valhex},this.setSigningCertificate=function(f){var u=g(f.valhex,0);if(u.length>0){for(var m=a(f.valhex,u[0]),h=g(m,0),y=[],b=0;b<h.length;b++){var c=a(m,h[b]),E=this.getESSCertID(c);y.push(E)}f.array=y}if(u.length>1){var S=a(f.valhex,u[1]);f.polhex=S}delete f.valhex},this.setSignaturePolicyIdentifier=function(f){var u=g(f.valhex,0);if(u.length>0){var m=i.getOID(f.valhex,u[0]);f.oid=m}if(u.length>1){var h=new n,y=g(f.valhex,u[1]),b=a(f.valhex,y[0]),c=h.getAlgorithmIdentifierName(b);f.alg=c;var E=s(f.valhex,y[1]);f.hash=E}delete f.valhex},this.setSigningCertificateV2=function(f){var u=g(f.valhex,0);if(u.length>0){for(var m=a(f.valhex,u[0]),h=g(m,0),y=[],b=0;b<h.length;b++){var c=a(m,h[b]),E=this.getESSCertIDv2(c);y.push(E)}f.array=y}if(u.length>1){var S=a(f.valhex,u[1]);f.polhex=S}delete f.valhex},this.getESSCertID=function(f){var u={},m=g(f,0);if(m.length>0){var h=s(f,m[0]);u.hash=h}if(m.length>1){var y=a(f,m[1]),b=this.getIssuerSerial(y);null!=b.serial&&(u.serial=b.serial),null!=b.issuer&&(u.issuer=b.issuer)}return u},this.getESSCertIDv2=function(f){var u={},m=g(f,0);if(m.length<1||3<m.length)throw new e("wrong number of elements");var h=0;if("30"==f.substr(m[0],2)){var y=a(f,m[0]);u.alg=r.getAlgorithmIdentifierName(y),h++}else u.alg="sha256";var b=s(f,m[h]);if(u.hash=b,m.length>h+1){var c=a(f,m[h+1]),E=this.getIssuerSerial(c);u.issuer=E.issuer,u.serial=E.serial}return u},this.getIssuerSerial=function(f){var u={},m=g(f,0),h=a(f,m[0]),y=r.getGeneralNames(h);u.issuer=y[0].dn;var c=s(f,m[1]);return u.serial={hex:c},u},this.getCertificateSet=function(f){for(var u=g(f,0),m=[],h=0;h<u.length;h++){var y=a(f,u[h]);if("30"==y.substr(0,2)){var b=hextopem(y,"CERTIFICATE");m.push(b)}}return{array:m,sortflag:!1}}},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),(void 0===KJUR.asn1.tsp||!KJUR.asn1.tsp)&&(KJUR.asn1.tsp={}),KJUR.asn1.tsp.TimeStampToken=function(e){var i=KJUR.asn1.tsp;i.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var s=new i.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=s.getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.TimeStampToken,KJUR.asn1.cms.SignedData),KJUR.asn1.tsp.TSTInfo=function(e){Error;var i=KJUR.asn1,s=i.DERSequence,a=i.DERInteger,o=i.DERBoolean,l=i.DERGeneralizedTime,p=i.DERObjectIdentifier,d=i.DERTaggedObject,v=i.tsp,g=v.MessageImprint,f=v.Accuracy,m=i.x509.GeneralName;if(v.TSTInfo.superclass.constructor.call(this),this.dVersion=new a({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var h=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(h.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(h.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(h.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");h.push(this.dGenTime),null!=this.dAccuracy&&h.push(this.dAccuracy),null!=this.dOrdering&&h.push(this.dOrdering),null!=this.dNonce&&h.push(this.dNonce),null!=this.dTsa&&h.push(this.dTsa);var y=new s({array:h});return this.hTLV=y.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new p({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new g(e.messageImprint)),void 0!==e.serial&&(this.dSerial=new a(e.serial)),void 0!==e.genTime&&(this.dGenTime=new l(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new f(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new o),void 0!==e.nonce&&(this.dNonce=new a(e.nonce)),void 0!==e.tsa&&(this.dTsa=new d({tag:"a0",explicit:!0,obj:new m({dn:e.tsa})}))}},extendClass(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.Accuracy=function(e){var r=KJUR.asn1,i=r.ASN1Util.newObject;r.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var s=this.params,a=[];return null!=s.seconds&&"number"==typeof s.seconds&&a.push({int:s.seconds}),null!=s.millis&&"number"==typeof s.millis&&a.push({tag:{tagi:"80",obj:{int:s.millis}}}),null!=s.micros&&"number"==typeof s.micros&&a.push({tag:{tagi:"81",obj:{int:s.micros}}}),i({seq:a}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.MessageImprint=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.DEROctetString,o=r.x509.AlgorithmIdentifier;r.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var l=this.params,p=new o({name:l.alg}),d=new s({hex:l.hash});return new i({array:[p,d]}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampReq=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.DERInteger,a=r.DERBoolean,l=r.DERObjectIdentifier,p=r.tsp,d=p.MessageImprint;p.TimeStampReq.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var v=this.params,g=[];return g.push(new s({int:1})),g.push(v.messageImprint instanceof KJUR.asn1.ASN1Object?v.messageImprint:new d(v.messageImprint)),null!=v.policy&&g.push(new l(v.policy)),null!=v.nonce&&g.push(new s(v.nonce)),1==v.certreq&&g.push(new a),new i({array:g}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampResp=function(e){var r=KJUR.asn1,i=r.DERSequence,a=r.tsp,o=a.PKIStatusInfo;a.TimeStampResp.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var l=this.params,p=[new o(l.statusinfo)];return null!=l.econtent&&p.push(new a.TimeStampToken(l).getContentInfo()),null!=l.tst&&l.tst instanceof r.ASN1Object&&p.push(l.tst),new i({array:p}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatusInfo=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.tsp,o=a.PKIStatus,l=a.PKIFreeText,p=a.PKIFailureInfo;a.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var d=this.params,v=[];if("string"==typeof d)v.push(new o(d));else{if(null==d.status)throw new n("property 'status' unspecified");v.push(new o(d.status)),null!=d.statusstr&&v.push(new l(d.statusstr)),null!=d.failinfo&&v.push(new p(d.failinfo))}return new s({array:v}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus=function(e){var n=Error,i=KJUR.asn1,s=i.DERInteger;i.tsp.PKIStatus.superclass.constructor.call(this);var o={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.getEncodedHex=function(){var d,l=this.params;if("string"==typeof l)try{d=o[l]}catch(v){throw new n("undefined name: "+l)}else{if("number"!=typeof l)throw new n("unsupported params");d=l}return new s({int:d}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFreeText=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.DERUTF8String;i.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var l=this.params;if(!l instanceof Array)throw new n("wrong params: not array");for(var p=[],d=0;d<l.length;d++)p.push(new a({str:l[d]}));return new s({array:p}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo=function(e){var n=Error,i=KJUR.asn1,s=i.DERBitString,l={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};i.tsp.PKIFailureInfo.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var d,p=this.params;if("string"==typeof p)try{d=l[p]}catch(v){throw new n("undefined name: "+p)}else{if("number"!=typeof p)throw new n("wrong params");d=p}return new s({bin:d.toString(2)}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(n,r){throw"not implemented yet"}},KJUR.asn1.tsp.SimpleTSAAdapter=function(e){var i=KJUR.asn1.tsp,s=KJUR.crypto.Util.hashHex;i.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(a,o){var l=s(a,o);this.params.econtent.content.messageImprint={alg:o,hash:l},this.params.econtent.content.serial={int:this.serial++};var p=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:p},new i.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.FixedTSAAdapter=function(e){var i=KJUR.asn1.tsp,s=KJUR.crypto.Util.hashHex;i.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(a,o){var l=s(a,o);return this.params.econtent.content.messageImprint={alg:o,hash:l},new i.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},extendClass(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.TSPUtil=new function(){},KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new KJUR.asn1.tsp.TimeStampToken(e)},KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var n=ASN1HEX,i=n.getV,s=n.getTLV,a={certreq:!1},o=(0,n.getChildIdx)(e,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var l=s(e,o[1]);a.messageImprint=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(l);for(var p=2;p<o.length;p++){var d=o[p],v=e.substr(d,2);if("06"==v){var g=i(e,d);a.policy=n.hextooidstr(g)}"02"==v&&(a.nonce=i(e,d)),"01"==v&&(a.certreq=!0)}return a},KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var n=ASN1HEX,r=n.getChildIdx,i=n.getV,s=n.getIdxbyList,a={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";r(e,0);var p=i(e,s(e,0,[0,0])),d=n.hextooidstr(p),v=KJUR.asn1.x509.OID.oid2name(d);if(""==v)throw"hashAlg name undefined: "+d;var g=v,f=s(e,0,[1]);return a.alg=g,a.hash=i(e,f),a},KJUR.asn1.tsp.TSPParser=function(){Error;var r=new X509,i=ASN1HEX,s=i.getV,a=i.getTLV,o=i.getIdxbyList,p=i.getChildIdx,d=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],v={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(g){var f=p(g,0);if(1==f.length)return this.getPKIStatusInfo(a(g,f[0]));if(f.length>1){var u=this.getPKIStatusInfo(a(g,f[0])),m=a(g,f[1]),h=this.getToken(m);return h.statusinfo=u,h}},this.getToken=function(g){var u=(new KJUR.asn1.cms.CMSParser).getCMSSignedData(g);return this.setTSTInfo(u),u},this.setTSTInfo=function(g){var f=g.econtent;if("tstinfo"==f.type){var m=this.getTSTInfo(f.content.hex);f.content=m}},this.getTSTInfo=function(g){var f={},u=p(g,0),m=s(g,u[1]);f.policy=hextooid(m);var h=a(g,u[2]);f.messageImprint=this.getMessageImprint(h);var y=s(g,u[3]);f.serial={hex:y};var b=s(g,u[4]);f.genTime={str:hextoutf8(b)};var c=0;if(u.length>5&&"30"==g.substr(u[5],2)){var E=a(g,u[5]);f.accuracy=this.getAccuracy(E),c++}if(u.length>5+c&&"01"==g.substr(u[5+c],2)&&("ff"==s(g,u[5+c])&&(f.ordering=!0),c++),u.length>5+c&&"02"==g.substr(u[5+c],2)){var x=s(g,u[5+c]);f.nonce={hex:x},c++}if(u.length>5+c&&"a0"==g.substr(u[5+c],2)){var A=a(g,u[5+c]);A="30"+A.substr(2),pGeneralNames=r.getGeneralNames(A);var O=pGeneralNames[0].dn;f.tsa=O,c++}if(u.length>5+c&&"a1"==g.substr(u[5+c],2)){var F=a(g,u[5+c]);F="30"+F.substr(2);var w=r.getExtParamArray(F);f.ext=w,c++}return f},this.getAccuracy=function(g){for(var f={},u=p(g,0),m=0;m<u.length;m++){var h=g.substr(u[m],2),y=s(g,u[m]),b=parseInt(y,16);"02"==h?f.seconds=b:"80"==h?f.millis=b:"81"==h&&(f.micros=b)}return f},this.getMessageImprint=function(g){if("30"!=g.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var f={},m=(p(g,0),o(g,0,[0,0])),h=s(g,m),y=i.hextooidstr(h),b=KJUR.asn1.x509.OID.oid2name(y);if(""==b)throw new Error("hashAlg name undefined: "+y);var c=b,E=o(g,0,[1]);return f.alg=c,f.hash=s(g,E),f},this.getPKIStatusInfo=function(g){var f={},u=p(g,0),m=0;try{var h=s(g,u[0]),y=parseInt(h,16);f.status=d[y]}catch(E){}if(u.length>1&&"30"==g.substr(u[1],2)){var b=a(g,u[1]);f.statusstr=this.getPKIFreeText(b),m++}if(u.length>m&&"03"==g.substr(u[1+m],2)){var c=a(g,u[1+m]);f.failinfo=this.getPKIFailureInfo(c)}return f},this.getPKIFreeText=function(g){for(var f=[],u=p(g,0),m=0;m<u.length;m++)f.push(i.getString(g,u[m]));return f},this.getPKIFailureInfo=function(g){var f=i.getInt(g,0);return null!=v[f]?v[f]:f}},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),(void 0===KJUR.asn1.cades||!KJUR.asn1.cades)&&(KJUR.asn1.cades={}),KJUR.asn1.cades.SignaturePolicyIdentifier=function(e){var i=KJUR.asn1.cades,s=i.SignaturePolicyId;i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new s(this.params)]},this.setByParam=function(a){this.params=a},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.SignaturePolicyId=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.DERObjectIdentifier,l=r.cades,d=l.OtherHashAlgAndValue;l.SignaturePolicyId.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var v=this.params,g=[];return g.push(new s(v.oid)),g.push(new d(v)),new i({array:g}).getEncodedHex()},this.setByParam=function(v){this.params=v},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.SignaturePolicyId,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHashAlgAndValue=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.DEROctetString,l=i.x509.AlgorithmIdentifier;i.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var v=this.params;if(null==v.alg)throw new n("property 'alg' not specified");if(null==v.hash&&null==v.cert)throw new n("property 'hash' nor 'cert' not specified");var g=null;if(null!=v.hash)g=v.hash;else if(null!=v.cert){if("string"!=typeof v.cert)throw new n("cert not string");var f=v.cert;-1!=v.cert.indexOf("-----BEGIN")&&(f=pemtohex(v.cert)),g=KJUR.crypto.Util.hashHex(f,v.alg)}var u=[];return u.push(new l({name:v.alg})),u.push(new a({hex:g})),new s({array:u}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHashValue=function(e){KJUR.asn1.cades.OtherHashValue.superclass.constructor.call(this);var n=Error,a=KJUR.asn1.DEROctetString;this.params=null,this.getEncodedHex=function(){var l=this.params;if(null==l.hash&&null==l.cert)throw new n("hash or cert not specified");var p=null;if(null!=l.hash)p=l.hash;else if(null!=l.cert){if("string"!=typeof l.cert)throw new n("cert not string");var d=l.cert;-1!=l.cert.indexOf("-----BEGIN")&&(d=pemtohex(l.cert)),p=KJUR.crypto.Util.hashHex(d,"sha1")}return new a({hex:p}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.OtherHashValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.SignatureTimeStamp=function(e){var n=Error,i=KJUR.lang.String.isHex,s=KJUR.asn1,a=s.ASN1Object;s.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var p=this.params;if(null!=p.tst){if(i(p.tst))return(d=new a).hTLV=p.tst,[d];if(p.tst instanceof a)return[p.tst];throw new n("params.tst has wrong value")}if(null!=p.res){var d,v=p.res;if(v instanceof a&&(v=v.getEncodedHex()),"string"!=typeof v||!i(v))throw new n("params.res has wrong value");return ASN1HEX.getTLVbyList(v,0,[1]),(d=new a).hTLV=p.tst,[d]}},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.CompleteCertificateRefs=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.cades,o=a.OtherCertID,l=KJUR.lang.String.isHex;a.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var p=this.params,d=[],v=0;v<p.array.length;v++){var g=p.array[v];if("string"==typeof g)if(-1!=g.indexOf("-----BEGIN"))g={cert:g};else{if(!l(g))throw new n("unsupported value: "+g);g={hash:g}}null!=p.alg&&null==g.alg&&(g.alg=p.alg),null!=p.hasis&&null==g.hasis&&(g.hasis=p.hasis);var f=new o(g);d.push(f)}return[new s({array:d})]},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherCertID=function(e){var r=KJUR.asn1,i=r.DERSequence,a=r.cms.IssuerSerial,o=r.cades,l=o.OtherHashValue,p=o.OtherHashAlgAndValue;o.OtherCertID.superclass.constructor.call(this),this.params=e,this.getEncodedHex=function(){var d=this.params;"string"==typeof d&&(-1!=d.indexOf("-----BEGIN")?d={cert:d}:_isHex(d)&&(d={hash:d}));var g,v=[];if(g=null!=d.alg?new p(d):new l(d),v.push(g),null!=d.cert&&1==d.hasis||null!=d.issuer&&null!=d.serial){var f=new a(d);v.push(f)}return new i({array:v}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHash=function(e){Error;var a=KJUR.asn1.cades,o=a.OtherHashAlgAndValue,l=a.OtherHashValue,d=KJUR.lang.String.isHex;a.OtherHash.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var v=this.params;return"string"==typeof v&&(-1!=v.indexOf("-----BEGIN")?v={cert:v}:d(v)&&(v={hash:v})),(null!=v.alg?new o(v):new l(v)).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object),KJUR.asn1.cades.CAdESUtil=new function(){},KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){return(new KJUR.asn1.cms.CMSParser).getCMSSignedData(e)},KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,n,r){var a=ASN1HEX.getTLV,o=ASN1HEX.getV,p=KJUR.asn1,d=p.ASN1Object,v=p.cms,g=v.AttributeList,f=v.SignerInfo,u={},m=(0,ASN1HEX.getChildIdx)(e,n);if(6!=m.length)throw"not supported items for SignerInfo (!=6)";var h=m.shift();u.version=a(e,h);var y=m.shift();u.si=a(e,y);var b=m.shift();u.digalg=a(e,b);var c=m.shift();u.sattrs=a(e,c);var E=m.shift();u.sigalg=a(e,E);var S=m.shift();u.sig=a(e,S),u.sigval=o(e,S);var x=null;return u.obj=new f,(x=new d).hTLV=u.version,u.obj.dCMSVersion=x,(x=new d).hTLV=u.si,u.obj.dSignerIdentifier=x,(x=new d).hTLV=u.digalg,u.obj.dDigestAlgorithm=x,(x=new d).hTLV=u.sattrs,u.obj.dSignedAttrs=x,(x=new d).hTLV=u.sigalg,u.obj.dSigAlg=x,(x=new d).hTLV=u.sig,u.obj.dSig=x,u.obj.dUnsignedAttrs=new g,u},(void 0===KJUR.asn1.csr||!KJUR.asn1.csr)&&(KJUR.asn1.csr={}),KJUR.asn1.csr.CertificationRequest=function(e){var r=KJUR.asn1,i=r.DERBitString,s=r.DERSequence,a=r.csr,l=a.CertificationRequestInfo;a.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(p){this.params=p},this.sign=function(){var p=new l(this.params).getEncodedHex(),d=new KJUR.crypto.Signature({alg:this.params.sigalg});d.init(this.params.sbjprvkey),d.updateHex(p);var v=d.sign();this.params.sighex=v},this.getPEM=function(){return hextopem(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){var p=this.params,d=new KJUR.asn1.csr.CertificationRequestInfo(this.params),v=new KJUR.asn1.x509.AlgorithmIdentifier({name:p.sigalg});if(null==p.sighex&&null!=p.sbjprvkey&&this.sign(),null==p.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var g=new i({hex:"00"+p.sighex});return new s({array:[d,v,g]}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CertificationRequestInfo=function(e){var r=KJUR.asn1,s=r.DERSequence,a=r.DERInteger,o=r.DERUTF8String,l=r.DERTaggedObject,p=r.ASN1Util.newObject,v=r.x509,g=v.X500Name,f=v.Extensions,u=v.SubjectPublicKeyInfo;r.csr.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(m){null!=m&&(this.params=m)},this.getEncodedHex=function(){var m=this.params,h=[];if(h.push(new a({int:0})),h.push(new g(m.subject)),h.push(new u(KEYUTIL.getKey(m.sbjpubkey))),null!=m.extreq){var y=new f(m.extreq),b=p({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[y]}]}}});h.push(b)}else h.push(new l({tag:"a0",explicit:!1,obj:new o({str:""})}));return new s({array:h}).getEncodedHex()},null!=e&&this.setByParam(e)},extendClass(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CSRUtil=new function(){},KJUR.asn1.csr.CSRUtil.newCSRPEM=function(e){return new KJUR.asn1.csr.CertificationRequest(e).getPEM()},KJUR.asn1.csr.CSRUtil.getParam=function(e){var r=ASN1HEX.getV;_getIdxbyList=ASN1HEX.getIdxbyList,_getTLVbyList=ASN1HEX.getTLVbyList,_getTLVbyListEx=ASN1HEX.getTLVbyListEx,_getVbyListEx=ASN1HEX.getVbyListEx;var s={};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var a=pemtohex(e,"CERTIFICATE REQUEST");try{var o=_getTLVbyListEx(a,0,[0,1]);if("3000"==o)s.subject={};else{var v=new X509;s.subject=v.getX500Name(o)}}catch(u){}var l=_getTLVbyListEx(a,0,[0,2]),p=KEYUTIL.getKey(l,null,"pkcs8pub");s.sbjpubkey=KEYUTIL.getPEM(p,"PKCS8PUB");var u,d="2a864886f70d01090e"!=r(u=a,_getIdxbyList(u,0,[0,3,0,0],"06"))?null:_getTLVbyList(u,0,[0,3,0,1,0],"30");v=new X509,null!=d&&(s.extreq=v.getExtParamArray(d));try{var g=_getTLVbyListEx(a,0,[1],"30");v=new X509,s.sigalg=v.getAlgorithmIdentifierName(g)}catch(u){}try{var f=_getVbyListEx(a,0,[2]);s.sighex=f}catch(u){}return s},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.asn1||!KJUR.asn1)&&(KJUR.asn1={}),(void 0===KJUR.asn1.ocsp||!KJUR.asn1.ocsp)&&(KJUR.asn1.ocsp={}),KJUR.asn1.ocsp.DEFAULT_HASH="sha1",KJUR.asn1.ocsp.OCSPResponse=function(e){KJUR.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var r=KJUR.asn1.ASN1Util.newObject,i=KJUR.asn1.ocsp.ResponseBytes,s=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var a=this.params.resstatus;return"number"==typeof a?a:"string"!=typeof a?-1:s.indexOf(a)},this.setByParam=function(a){this.params=a},this.getEncodedHex=function(){var a=this.params,o=this._getStatusCode();if(-1==o)throw new Error("responseStatus not supported: "+a.resstatus);if(0!=o)return r({seq:[{enum:{int:o}}]}).getEncodedHex();var l=new i(a);return r({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:l}}]}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.OCSPResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponseBytes=function(e){KJUR.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var n=KJUR.asn1,r=n.DERSequence,i=n.DERObjectIdentifier,s=n.DEROctetString,a=n.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(o){this.params=o},this.getEncodedHex=function(){var o=this.params;if("ocspBasic"!=o.restype)throw new Error("not supported responseType: "+o.restype);var l=new a(o),p=[];return p.push(new i({name:"ocspBasic"})),p.push(new s({hex:l.getEncodedHex()})),new r({array:p}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.ResponseBytes,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.BasicOCSPResponse=function(e){KJUR.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var n=Error,r=KJUR.asn1,i=r.ASN1Object,s=r.DERSequence,o=r.DERTaggedObject,l=r.DERBitString,d=r.x509.AlgorithmIdentifier,v=r.ocsp;_SingleResponseList=v.SingleResponseList,_ResponseData=v.ResponseData,this.params=null,this.setByParam=function(f){this.params=f},this.sign=function(){var f=this.params,u=f.tbsresp.getEncodedHex(),m=new KJUR.crypto.Signature({alg:f.sigalg});m.init(f.reskey),m.updateHex(u),f.sighex=m.sign()},this.getEncodedHex=function(){var f=this.params;null==f.tbsresp&&(f.tbsresp=new _ResponseData(f)),null==f.sighex&&null!=f.reskey&&this.sign();var u=[];if(u.push(f.tbsresp),u.push(new d({name:f.sigalg})),u.push(new l({hex:"00"+f.sighex})),null!=f.certs&&null!=f.certs.length){for(var m=[],h=0;h<f.certs.length;h++){var y=f.certs[h],b=null;if(ASN1HEX.isASN1HEX(y))b=y;else{if(!y.match(/-----BEGIN/))throw new n("certs["+h+"] not hex or PEM");b=pemtohex(y)}m.push(new i({tlv:b}))}var c=new s({array:m});u.push(new o({tag:"a0",explicit:!0,obj:c}))}return new s({array:u}).getEncodedHex()},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.BasicOCSPResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponseData=function(e){KJUR.asn1.ocsp.ResponseData.superclass.constructor.call(this);var n=Error,r=KJUR.asn1,i=r.DERSequence,s=r.DERGeneralizedTime,a=r.DERTaggedObject,o=r.x509.Extensions,l=r.ocsp,p=l.ResponderID;_SingleResponseList=l.SingleResponseList,this.params=null,this.getEncodedHex=function(){var d=this.params;null!=d.respid&&new n("respid not specified"),null!=d.prodat&&new n("prodat not specified"),null!=d.array&&new n("array not specified");var v=[];if(v.push(new p(d.respid)),v.push(new s(d.prodat)),v.push(new _SingleResponseList(d.array)),null!=d.ext){var g=new o(d.ext);v.push(new a({tag:"a1",explicit:!0,obj:g}))}return new i({array:v}).getEncodedHex()},this.setByParam=function(d){this.params=d},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.ResponseData,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponderID=function(e){KJUR.asn1.ocsp.ResponderID.superclass.constructor.call(this);var n=KJUR.asn1,r=n.ASN1Util.newObject,i=n.x509.X500Name;this.params=null,this.getEncodedHex=function(){var s=this.params;if(null!=s.key)return r({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:s.key}}}}).getEncodedHex();if(null!=s.name)return r({tag:{tag:"a1",explicit:!0,obj:new i(s.name)}}).getEncodedHex();throw new Error("key or name not specified")},this.setByParam=function(s){this.params=s},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.ResponderID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.SingleResponseList=function(e){KJUR.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var n=KJUR.asn1,r=n.DERSequence,i=n.ocsp.SingleResponse;this.params=null,this.getEncodedHex=function(){var s=this.params;if("object"!=typeof s||null==s.length)throw new Error("params not specified properly");for(var a=[],o=0;o<s.length;o++)a.push(new i(s[o]));return new r({array:a}).getEncodedHex()},this.setByParam=function(s){this.params=s},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.SingleResponseList,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.SingleResponse=function(e){var n=Error,i=KJUR.asn1,s=i.DERSequence,a=i.DERGeneralizedTime,o=i.DERTaggedObject,l=i.ocsp,p=l.CertID,d=l.CertStatus,g=i.x509.Extensions;l.SingleResponse.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var f=this.params,u=[];if(null==f.certid)throw new n("certid unspecified");if(null==f.status)throw new n("status unspecified");if(null==f.thisupdate)throw new n("thisupdate unspecified");if(u.push(new p(f.certid)),u.push(new d(f.status)),u.push(new a(f.thisupdate)),null!=f.nextupdate){var m=new a(f.nextupdate);u.push(new o({tag:"a0",explicit:!0,obj:m}))}if(null!=f.ext){var h=new g(f.ext);u.push(new o({tag:"a1",explicit:!0,obj:h}))}return new s({array:u}).getEncodedHex()},this.setByParam=function(f){this.params=f},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.SingleResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.CertID=function(e){var r=KJUR.asn1,i=r.DEROctetString,s=r.DERInteger,a=r.DERSequence,l=r.x509.AlgorithmIdentifier,p=r.ocsp,d=p.DEFAULT_HASH,g=KJUR.crypto.Util.hashHex,f=X509,u=ASN1HEX;if(p.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(y,b,c,E){void 0===E&&(E=d),this.dHashAlg=new l({name:E}),this.dIssuerNameHash=new i({hex:y}),this.dIssuerKeyHash=new i({hex:b}),this.dSerialNumber=new s({hex:c})},this.setByCert=function(y,b,c){void 0===c&&(c=d);var E=new f;E.readCertPEM(b);var S=new f;S.readCertPEM(y);var x=S.getPublicKeyHex(),A=u.getVbyList(x,0,[1],"03",!0),O=E.getSerialNumberHex(),F=g(S.getSubjectHex(),c),w=g(A,c);this.setByValue(F,w,O,c),this.hoge=E.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var b=new a({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=b.getEncodedHex(),this.hTLV},void 0!==e){var m=e;if(void 0!==m.issuerCert&&void 0!==m.subjectCert){var h=d;void 0===m.alg&&(h=void 0),this.setByCert(m.issuerCert,m.subjectCert,h)}else{if(void 0===m.issname||void 0===m.isskey||void 0===m.sbjsn)throw new Error("invalid constructor arguments");h=d,void 0===m.alg&&(h=void 0),this.setByValue(m.issname,m.isskey,m.sbjsn,h)}}},extendClass(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.CertStatus=function(e){KJUR.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.getEncodedHex=function(){var n=this.params;if("good"==n.status)return"8000";if("unknown"==n.status)return"8200";if("revoked"==n.status){var r=[{gentime:{str:n.time}}];return null!=n.reason&&r.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:n.reason}}}}),KJUR.asn1.ASN1Util.newObject({tag:{tag:"a1",explicit:!1,obj:{seq:r}}}).getEncodedHex()}throw new Error("bad status")},this.setByParam=function(n){this.params=n},void 0!==e&&this.setByParam(e)},extendClass(KJUR.asn1.ocsp.CertStatus,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.Request=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.ocsp;if(s.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var o=[];if(null===this.dReqCert)throw"reqCert not set";o.push(this.dReqCert);var l=new i({array:o});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==e){var a=new s.CertID(e);this.dReqCert=a}},extendClass(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.TBSRequest=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.ocsp;s.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(a){for(var o=[],l=0;l<a.length;l++){var p=new s.Request(a[0]);o.push(p)}this.dRequestList=o},this.getEncodedHex=function(){var a=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var o=new i({array:this.dRequestList});if(a.push(o),null!==this.dRequestExt)throw"requestExtensions not supported";var l=new i({array:a});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},extendClass(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPRequest=function(e){var r=KJUR.asn1,i=r.DERSequence,s=r.ocsp;if(s.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var o=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(o.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var l=new i({array:o});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var a=new s.TBSRequest(e);this.dTbsRequest=a}},extendClass(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPUtil={},KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(e,n,r){var a=KJUR.asn1.ocsp;return void 0===r&&(r=a.DEFAULT_HASH),new a.OCSPRequest({reqList:[{alg:r,issuerCert:e,subjectCert:n}]}).getEncodedHex()},KJUR.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var r=ASN1HEX.getVbyList,i=ASN1HEX.getVbyListEx,s=ASN1HEX.getIdxbyList,o=ASN1HEX.getV,l={};try{var p=i(e,0,[0],"0a");l.responseStatus=parseInt(p,16)}catch(f){}if(0!==l.responseStatus)return l;try{var d=s(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(d,2)?l.certStatus="good":"a1"===e.substr(d,2)?(l.certStatus="revoked",l.revocationTime=hextoutf8(r(e,d,[0]))):"82"===e.substr(d,2)&&(l.certStatus="unknown")}catch(f){}try{var v=s(e,0,[1,0,1,0,0,2,0,2]);l.thisUpdate=hextoutf8(o(e,v))}catch(f){}try{var g=s(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(g,2)&&(l.nextUpdate=hextoutf8(r(e,g,[0])))}catch(f){}return l},KJUR.asn1.ocsp.OCSPParser=function(){var e=Error,n=X509,r=new n,s=ASN1HEX.getV,a=ASN1HEX.getTLV,o=ASN1HEX.getIdxbyList,l=ASN1HEX.getVbyList,p=ASN1HEX.getTLVbyList,d=ASN1HEX.getVbyListEx,v=ASN1HEX.getTLVbyListEx,g=ASN1HEX.getChildIdx;this.getOCSPRequest=function(f){var u=g(f,0);if(1!=u.length&&2!=u.length)throw new e("wrong number elements: "+u.length);return this.getTBSRequest(a(f,u[0]))},this.getTBSRequest=function(f){var u={},m=v(f,0,[0],"30");u.array=this.getRequestList(m);var h=v(f,0,["[2]",0],"30");return null!=h&&(u.ext=r.getExtParamArray(h)),u},this.getRequestList=function(f){for(var u=[],m=g(f,0),h=0;h<m.length;h++)f=a(f,m[h]),u.push(this.getRequest(f));return u},this.getRequest=function(f){var u=g(f,0);if(1!=u.length&&2!=u.length)throw new e("wrong number elements: "+u.length);var m=this.getCertID(a(f,u[0]));if(2==u.length){var h=o(f,0,[1,0]);m.ext=r.getExtParamArray(a(f,h))}return m},this.getCertID=function(f){var u=g(f,0);if(4!=u.length)throw new e("wrong number elements: "+u.length);var m=new n,h={};return h.alg=m.getAlgorithmIdentifierName(a(f,u[0])),h.issname=s(f,u[1]),h.isskey=s(f,u[2]),h.sbjsn=s(f,u[3]),h},this.getOCSPResponse=function(f){var m,u=g(f,0),h=s(f,u[0]),y=parseInt(h);if(1==u.length)return{resstatus:y};var b=p(f,0,[1,0]);return(m=this.getResponseBytes(b)).resstatus=y,m},this.getResponseBytes=function(f){var m,u=g(f,0),h=p(f,0,[1,0]);m=this.getBasicOCSPResponse(h);var y=s(f,u[0]);return m.restype=KJUR.asn1.x509.OID.oid2name(hextooid(y)),m},this.getBasicOCSPResponse=function(f){var m,u=g(f,0);m=this.getResponseData(a(f,u[0]));var h=new X509;m.alg=h.getAlgorithmIdentifierName(a(f,u[1]));var y=s(f,u[2]);m.sighex=y.substr(2);var b=d(f,0,["[0]"]);if(null!=b){for(var c=g(b,0),E=[],S=0;S<c.length;S++){var x=a(b,c[S]);E.push(x)}m.certs=E}return m},this.getResponseData=function(f){var u=g(f,0),m=u.length,h={},y=0;"a0"==f.substr(u[0],2)&&y++,h.respid=this.getResponderID(a(f,u[y++]));var b=s(f,u[y++]);if(h.prodat=hextoutf8(b),h.array=this.getSingleResponseList(a(f,u[y++])),"a1"==f.substr(u[m-1],2)){var c=p(f,u[m-1],[0]),E=new X509;h.ext=E.getExtParamArray(c)}return h},this.getResponderID=function(f){var u={};if("a2"==f.substr(0,2)){var m=l(f,0,[0]);u.key=m}if("a1"==f.substr(0,2)){var h=p(f,0,[0]),y=new X509;u.name=y.getX500Name(h)}return u},this.getSingleResponseList=function(f){for(var u=g(f,0),m=[],h=0;h<u.length;h++){var y=this.getSingleResponse(a(f,u[h]));m.push(y)}return m},this.getSingleResponse=function(f){var u=g(f,0),m={},h=this.getCertID(a(f,u[0]));m.certid=h;var y=this.getCertStatus(a(f,u[1]));if(m.status=y,"18"==f.substr(u[2],2)){var b=s(f,u[2]);m.thisupdate=hextoutf8(b)}for(var c=3;c<u.length;c++){if("a0"==f.substr(u[c],2)){var E=l(f,u[c],[0],"18");m.nextupdate=hextoutf8(E)}if("a1"==f.substr(u[c],2)){var S=new X509,x=p(f,0,[c,0]);m.ext=S.getExtParamArray(x)}}return m},this.getCertStatus=function(f){var u={};if("8000"==f)return{status:"good"};if("8200"==f)return{status:"unknown"};if("a1"==f.substr(0,2)){u.status="revoked";var h=hextoutf8(l(f,0,[0]));u.time=h}return u}},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.lang||!KJUR.lang)&&(KJUR.lang={}),KJUR.lang.String=function(){},"function"==typeof Buffer?(utf8tob64u=function(e){return b64tob64u(Buffer.from(e,"utf8").toString("base64"))},b64utoutf8=function(e){return Buffer.from(b64utob64(e),"base64").toString("utf8")}):(utf8tob64u=function(e){return hextob64u(uricmptohex(encodeURIComponentAll(e)))},b64utoutf8=function(e){return decodeURIComponent(hextouricmp(b64utohex(e)))}),KJUR.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},KJUR.lang.String.isHex=function(e){return ishex(e)},KJUR.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},KJUR.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=b64utob64(e),KJUR.lang.String.isBase64(e))},KJUR.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},KJUR.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},KJUR.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},KJUR.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var strdiffidx=function(e,n){var r=e.length;e.length>n.length&&(r=n.length);for(var i=0;i<r;i++)if(e.charCodeAt(i)!=n.charCodeAt(i))return i;return e.length!=n.length?r:-1};function oidtohex(e){var n=function(l){var p=l.toString(16);return 1==p.length&&(p="0"+p),p},r=function(l){var p="",v=parseInt(l,10).toString(2),g=7-v.length%7;7==g&&(g=0);for(var f="",u=0;u<g;u++)f+="0";for(v=f+v,u=0;u<v.length-1;u+=7){var m=v.substr(u,7);u!=v.length-7&&(m="1"+m),p+=n(parseInt(m,2))}return p};try{if(!e.match(/^[0-9.]+$/))return null;var i="",s=e.split("."),a=40*parseInt(s[0],10)+parseInt(s[1],10);i+=n(a),s.splice(0,2);for(var o=0;o<s.length;o++)i+=r(s[o]);return i}catch(l){return null}}function hextooid(e){if(!ishex(e))return null;try{var n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=e.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(2*o,2),16));var l=[],p="";for(o=0;o<a.length;o++)128&a[o]?p+=strpad((127&a[o]).toString(2),7):(p+=strpad((127&a[o]).toString(2),7),l.push(new String(parseInt(p,2))),p="");var d=n.join(".");return l.length>0&&(d=d+"."+l.join(".")),d}catch(v){return null}}var strpad=function(e,n,r){return null==r&&(r="0"),e.length>=n?e:new Array(n-e.length+1).join(r)+e};function bitstrtoint(e){try{var n=e.substr(0,2);if("00"==n)return parseInt(e.substr(2),16);var r=parseInt(n,16),i=e.substr(2),s=parseInt(i,16).toString(2);return"0"==s&&(s="00000000"),s=s.slice(0,0-r),parseInt(s,2)}catch(a){return-1}}function inttobitstr(e){var n=Number(e).toString(2),r=8-n.length%8;8==r&&(r=0),n+=strpad("",r,"0");var i=parseInt(n,2).toString(16);return i.length%2==1&&(i="0"+i),"0"+r+i}function extendClass(e,n){var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n)}(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.crypto||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(e,n){if(void 0===this.DIGESTINFOHEAD[n])throw"alg not supported in Util.DIGESTINFOHEAD: "+n;return this.DIGESTINFOHEAD[n]+e},this.getPaddedDigestInfoHex=function(e,n,r){var i=this.getDigestInfoHex(e,n),s=r/4;if(i.length+22>s)throw"key is too short for SigAlg: keylen="+r+","+n;for(var a="0001",o="00"+i,l="",p=s-a.length-o.length,d=0;d<p;d+=2)l+="ff";return a+l+o},this.hashString=function(e,n){return new KJUR.crypto.MessageDigest({alg:n}).digestString(e)},this.hashHex=function(e,n){return new KJUR.crypto.MessageDigest({alg:n}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof RSAKey||e instanceof KJUR.crypto.DSA||e instanceof KJUR.crypto.ECDSA}},KJUR.crypto.Util.md5=function(e){return new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.ripemd160=function(e){return new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.SECURERANDOMGEN=new SecureRandom,KJUR.crypto.Util.getRandomHexOfNbytes=function(e){var n=new Array(e);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(n),BAtohex(n)},KJUR.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbytes(e),16)},KJUR.crypto.Util.getRandomHexOfNbits=function(e){var n=e%8,i=new Array((e-n)/8+1);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(i),i[0]=(255<<n&255^255)&i[0],BAtohex(i)},KJUR.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbits(e),16)},KJUR.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var n=e.bitLength();;){var r=KJUR.crypto.Util.getRandomBigIntegerOfNbits(n);if(-1!=e.compareTo(r))return r}},KJUR.crypto.Util.getRandomBigIntegerMinToMax=function(e,n){var r=e.compareTo(n);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var i=n.subtract(e);return KJUR.crypto.Util.getRandomBigIntegerZeroToMax(i).add(e)},KJUR.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(s,a){if(null!==(s=KJUR.crypto.MessageDigest.getCanonicalAlgName(s))&&void 0===a&&(a=KJUR.crypto.Util.DEFAULTPROVIDER[s]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(s)&&"cryptojs"==a){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[s].create()}catch(o){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+o}this.updateString=function(o){this.md.update(o)},this.updateHex=function(o){var l=CryptoJS.enc.Hex.parse(o);this.md.update(l)},this.digest=function(){return this.md.finalize().toString(CryptoJS.enc.Hex)},this.digestString=function(o){return this.updateString(o),this.digest()},this.digestHex=function(o){return this.updateHex(o),this.digest()}}if(-1!=":sha256:".indexOf(s)&&"sjcl"==a){try{this.md=new sjcl.hash.sha256}catch(o){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+o}this.updateString=function(o){this.md.update(o)},this.updateHex=function(o){var l=sjcl.codec.hex.toBits(o);this.md.update(l)},this.digest=function(){var o=this.md.finalize();return sjcl.codec.hex.fromBits(o)},this.digestString=function(o){return this.updateString(o),this.digest()},this.digestHex=function(o){return this.updateHex(o),this.digest()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},KJUR.crypto.MessageDigest.getHashLength=function(e){var n=KJUR.crypto.MessageDigest,r=n.getCanonicalAlgName(e);if(void 0===n.HASHLENGTH[r])throw"not supported algorithm: "+e;return n.HASHLENGTH[r]},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(e){this.setAlgAndProvider=function(o,l){if(null==(o=o.toLowerCase())&&(o="hmacsha1"),"hmac"!=(o=o.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+o;void 0===l&&(l=KJUR.crypto.Util.DEFAULTPROVIDER[o]),this.algProv=o+"/"+l;var p=o.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(p)&&"cryptojs"==l){try{this.mac=CryptoJS.algo.HMAC.create(KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[p],this.pass)}catch(v){throw"setAlgAndProvider hash alg set fail hashAlg="+p+"/"+v}this.updateString=function(v){this.mac.update(v)},this.updateHex=function(v){var g=CryptoJS.enc.Hex.parse(v);this.mac.update(g)},this.doFinal=function(){return this.mac.finalize().toString(CryptoJS.enc.Hex)},this.doFinalString=function(v){return this.updateString(v),this.doFinal()},this.doFinalHex=function(v){return this.updateHex(v),this.doFinal()}}},this.updateString=function(o){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(o){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(o){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(o){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(o){if("string"==typeof o){var l=o;return(o.length%2==1||!o.match(/^[0-9A-Fa-f]+$/))&&(l=rstrtohex(o)),void(this.pass=CryptoJS.enc.Hex.parse(l))}if("object"!=typeof o)throw"KJUR.crypto.Mac unsupported password type: "+o;if(l=null,void 0!==o.hex){if(o.hex.length%2!=0||!o.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+o.hex;l=o.hex}if(void 0!==o.utf8&&(l=utf8tohex(o.utf8)),void 0!==o.rstr&&(l=rstrtohex(o.rstr)),void 0!==o.b64&&(l=b64tohex(o.b64)),void 0!==o.b64u&&(l=b64utohex(o.b64u)),null==l)throw"KJUR.crypto.Mac unsupported password type: "+o;this.pass=CryptoJS.enc.Hex.parse(l)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(e){var n=null;if(this._setAlgNames=function(){var b=this.algName.match(/^(.+)with(.+)$/);b&&(this.mdAlgName=b[1].toLowerCase(),this.pubkeyAlgName=b[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(b,c){for(var E="",S=c/4-b.length,x=0;x<S;x++)E+="0";return E+b},this.setAlgAndProvider=function(b,c){if(this._setAlgNames(),"cryptojs/jsrsa"!=c)throw new Error("provider not supported: "+c);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(E){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+E)}this.init=function(E,S){var x=null;try{x=void 0===S?KEYUTIL.getKey(E):KEYUTIL.getKey(E,S)}catch(A){throw"init failed:"+A}if(!0===x.isPrivate)this.prvKey=x,this.state="SIGN";else{if(!0!==x.isPublic)throw"init failed.:"+x;this.pubKey=x,this.state="VERIFY"}},this.updateString=function(E){this.md.updateString(E)},this.updateHex=function(E){this.md.updateHex(E)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==KJUR.crypto.ECDSA&&(this.prvKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof KJUR.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(E){return this.updateString(E),this.sign()},this.signHex=function(E){return this.updateHex(E),this.sign()},this.verify=function(E){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==KJUR.crypto.ECDSA&&(this.pubKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,E,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,E);if(void 0!==KJUR.crypto.ECDSA&&this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,E);if(void 0!==KJUR.crypto.DSA&&this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,E);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(b,c){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(b){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(b){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(b){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(b){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,this.provName=void 0===e.prov?KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{n=KEYUTIL.getKey(e.prvkeypem),this.init(n)}catch(b){throw"fatal error to load pem private key: "+b}}},KJUR.crypto.Cipher=function(e){},KJUR.crypto.Cipher.encrypt=function(e,n,r){if(n instanceof RSAKey&&n.isPublic){var i=KJUR.crypto.Cipher.getAlgByKeyAndName(n,r);if("RSA"===i)return n.encrypt(e);if("RSAOAEP"===i)return n.encryptOAEP(e,"sha1");var s=i.match(/^RSAOAEP(\d+)$/);if(null!==s)return n.encryptOAEP(e,"sha"+s[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.decrypt=function(e,n,r){if(n instanceof RSAKey&&n.isPrivate){var i=KJUR.crypto.Cipher.getAlgByKeyAndName(n,r);if("RSA"===i)return n.decrypt(e);if("RSAOAEP"===i)return n.decryptOAEP(e,"sha1");var s=i.match(/^RSAOAEP(\d+)$/);if(null!==s)return n.decryptOAEP(e,"sha"+s[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.getAlgByKeyAndName=function(e,n){if(e instanceof RSAKey){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(n))return n;if(null==n)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+n}throw"getAlgByKeyAndName: not supported algorithm name: "+n},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.crypto||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.ECDSA=function(e){var a=Error,o=BigInteger,l=ECPointFp,p=KJUR.crypto.ECDSA,d=KJUR.crypto.ECParameterDB,v=p.getName,f=ASN1HEX.getVbyListEx,u=ASN1HEX.isASN1HEX,m=new SecureRandom;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(b){return new o(b.bitLength(),m).mod(b.subtract(o.ONE)).add(o.ONE)},this.setNamedCurve=function(b){this.ecparams=d.getByName(b),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=b},this.setPrivateKeyHex=function(b){this.isPrivate=!0,this.prvKeyHex=b},this.setPublicKeyHex=function(b){this.isPublic=!0,this.pubKeyHex=b},this.getPublicKeyXYHex=function(){var b=this.pubKeyHex;if("04"!==b.substr(0,2))throw"this method supports uncompressed format(04) only";var c=this.ecparams.keycharlen;if(b.length!==2+2*c)throw"malformed public key hex length";var E={};return E.x=b.substr(2,c),E.y=b.substr(2+c),E},this.getShortNISTPCurveName=function(){var b=this.curveName;return"secp256r1"===b||"NIST P-256"===b||"P-256"===b||"prime256v1"===b?"P-256":"secp384r1"===b||"NIST P-384"===b||"P-384"===b?"P-384":"secp521r1"===b||"NIST P-521"===b||"P-521"===b?"P-521":null},this.generateKeyPairHex=function(){var c=this.getBigRandom(this.ecparams.n),E=this.ecparams.keycharlen,S=("0000000000"+c.toString(16)).slice(-E);return this.setPrivateKeyHex(S),{ecprvhex:S,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var b=new o(this.prvKeyHex,16),c=this.ecparams.G.multiply(b),E=c.getX().toBigInteger(),S=c.getY().toBigInteger(),x=this.ecparams.keycharlen,F="04"+("0000000000"+E.toString(16)).slice(-x)+("0000000000"+S.toString(16)).slice(-x);return this.setPublicKeyHex(F),F},this.signWithMessageHash=function(b){return this.signHex(b,this.prvKeyHex)},this.signHex=function(b,c){var E=new o(c,16),S=this.ecparams.n,x=new o(b.substring(0,this.ecparams.keycharlen),16);do{var A=this.getBigRandom(S),w=this.ecparams.G.multiply(A).getX().toBigInteger().mod(S)}while(w.compareTo(o.ZERO)<=0);var P=A.modInverse(S).multiply(x.add(E.multiply(w))).mod(S);return p.biRSSigToASN1Sig(w,P)},this.sign=function(b,c){var E=c,S=this.ecparams.n,x=o.fromByteArrayUnsigned(b);do{var A=this.getBigRandom(S),w=this.ecparams.G.multiply(A).getX().toBigInteger().mod(S)}while(w.compareTo(BigInteger.ZERO)<=0);var P=A.modInverse(S).multiply(x.add(E.multiply(w))).mod(S);return this.serializeSig(w,P)},this.verifyWithMessageHash=function(b,c){return this.verifyHex(b,c,this.pubKeyHex)},this.verifyHex=function(b,c,E){try{var S,x,A=p.parseSigHex(c);S=A.r,x=A.s;var O=l.decodeFromHex(this.ecparams.curve,E),F=new o(b.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(F,S,x,O)}catch(w){return!1}},this.verify=function(b,c,E){var S,x,O;if(Bitcoin.Util.isArray(c)){var A=this.parseSig(c);S=A.r,x=A.s}else{if("object"!=typeof c||!c.r||!c.s)throw"Invalid value for signature";S=c.r,x=c.s}if(E instanceof ECPointFp)O=E;else{if(!Bitcoin.Util.isArray(E))throw"Invalid format for pubkey value, must be byte array or ECPointFp";O=l.decodeFrom(this.ecparams.curve,E)}var F=o.fromByteArrayUnsigned(b);return this.verifyRaw(F,S,x,O)},this.verifyRaw=function(b,c,E,S){var x=this.ecparams.n,A=this.ecparams.G;if(c.compareTo(o.ONE)<0||c.compareTo(x)>=0||E.compareTo(o.ONE)<0||E.compareTo(x)>=0)return!1;var O=E.modInverse(x),F=b.multiply(O).mod(x),w=c.multiply(O).mod(x);return A.multiply(F).add(S.multiply(w)).getX().toBigInteger().mod(x).equals(c)},this.serializeSig=function(b,c){var E=b.toByteArraySigned(),S=c.toByteArraySigned(),x=[];return x.push(2),x.push(E.length),(x=x.concat(E)).push(2),x.push(S.length),(x=x.concat(S)).unshift(x.length),x.unshift(48),x},this.parseSig=function(b){var c;if(48!=b[0])throw new Error("Signature not a valid DERSequence");if(2!=b[c=2])throw new Error("First element in signature must be a DERInteger");var E=b.slice(c+2,c+2+b[c+1]);if(2!=b[c+=2+b[c+1]])throw new Error("Second element in signature must be a DERInteger");var S=b.slice(c+2,c+2+b[c+1]);return c+=2+b[c+1],{r:o.fromByteArrayUnsigned(E),s:o.fromByteArrayUnsigned(S)}},this.parseSigCompact=function(b){if(65!==b.length)throw"Signature has the wrong length";var c=b[0]-27;if(c<0||c>7)throw"Invalid signature type";var E=this.ecparams.n;return{r:o.fromByteArrayUnsigned(b.slice(1,33)).mod(E),s:o.fromByteArrayUnsigned(b.slice(33,65)).mod(E),i:c}},this.readPKCS5PrvKeyHex=function(b){if(!1===u(b))throw new Error("not ASN.1 hex string");var c,E,S;try{c=f(b,0,["[0]",0],"06"),E=f(b,0,[1],"04");try{S=f(b,0,["[1]",0],"03")}catch(x){}}catch(x){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=v(c),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(S),this.setPrivateKeyHex(E),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(b){if(!1===u(b))throw new a("not ASN.1 hex string");var E,S,x;try{f(b,0,[1,0],"06"),E=f(b,0,[1,1],"06"),S=f(b,0,[2,0,1],"04");try{x=f(b,0,[2,0,"[1]",0],"03")}catch(A){}}catch(A){throw new a("malformed PKCS#8 plain ECC private key")}if(this.curveName=v(E),void 0===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(x),this.setPrivateKeyHex(S),this.isPublic=!1},this.readPKCS8PubKeyHex=function(b){if(!1===u(b))throw new a("not ASN.1 hex string");var E,S;try{f(b,0,[0,0],"06"),E=f(b,0,[0,1],"06"),S=f(b,0,[1],"03")}catch(x){throw new a("malformed PKCS#8 ECC public key")}if(this.curveName=v(E),null===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(S)},this.readCertPubKeyHex=function(b,c){if(!1===u(b))throw new a("not ASN.1 hex string");var E,S;try{E=f(b,0,[0,5,0,1],"06"),S=f(b,0,[0,5,1],"03")}catch(x){throw new a("malformed X.509 certificate ECC public key")}if(this.curveName=v(E),null===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(S)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},KJUR.crypto.ECDSA.parseSigHex=function(e){var n=KJUR.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new BigInteger(n.r,16),s:new BigInteger(n.s,16)}},KJUR.crypto.ECDSA.parseSigHexInHexRS=function(e){var r=ASN1HEX.getChildIdx,i=ASN1HEX.getV;if(ASN1HEX.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var s=r(e,0);if(2!=s.length)throw new Error("signature shall have two elements");var a=s[0],o=s[1];if("02"!=e.substr(a,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(o,2))throw new Error("2nd item not ASN.1 integer");return{r:i(e,a),s:i(e,o)}},KJUR.crypto.ECDSA.asn1SigToConcatSig=function(e){var n=KJUR.crypto.ECDSA.parseSigHexInHexRS(e),r=n.r,i=n.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(i.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==r.substr(0,2)&&(r=r.substr(2)),"00"==i.substr(0,2)&&(i=i.substr(2));var s=Math.max(r.length,i.length);return(r=("000000"+r).slice(-s))+("000000"+i).slice(-s)}if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),r.length%32==30&&(r="00"+r),i.length%32==30&&(i="00"+i),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(i.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+i},KJUR.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var n=e.substr(0,e.length/2),r=e.substr(e.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(n,r)},KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(e,n){var r=new BigInteger(e,16),i=new BigInteger(n,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(r,i)},KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(e,n){var r=KJUR.asn1,i=new r.DERInteger({bigint:e}),s=new r.DERInteger({bigint:n});return new r.DERSequence({array:[i,s]}).getEncodedHex()},KJUR.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":"2b81040023"===e?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(e)?"secp521r1":null},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.crypto||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.ECParameterDB=new function(){var e={},n={};function r(i){return new BigInteger(i,16)}this.getByName=function(i){var s=i;if(void 0!==n[s]&&(s=n[i]),void 0!==e[s])return e[s];throw"unregistered EC curve name: "+s},this.regist=function(i,s,a,o,l,p,d,v,g,f,u,m){e[i]={};var h=r(a),y=r(o),b=r(l),c=r(p),E=r(d),S=new ECCurveFp(h,y,b),x=S.decodePointHex("04"+v+g);e[i].name=i,e[i].keylen=s,e[i].keycharlen=2*Math.ceil(s/8),e[i].curve=S,e[i].G=x,e[i].n=c,e[i].h=E,e[i].oid=u,e[i].info=m;for(var A=0;A<f.length;A++)n[f[A]]=i}},KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.crypto||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.DSA=function(){var r=ASN1HEX.getVbyListEx,i=ASN1HEX.isASN1HEX,s=BigInteger;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(a,o,l,p,d){this.isPrivate=!0,this.p=a,this.q=o,this.g=l,this.y=p,this.x=d},this.setPrivateHex=function(a,o,l,p,d){var v,g,f,u,m;v=new BigInteger(a,16),g=new BigInteger(o,16),f=new BigInteger(l,16),u="string"==typeof p&&p.length>1?new BigInteger(p,16):null,m=new BigInteger(d,16),this.setPrivate(v,g,f,u,m)},this.setPublic=function(a,o,l,p){this.isPublic=!0,this.p=a,this.q=o,this.g=l,this.y=p,this.x=null},this.setPublicHex=function(a,o,l,p){var d,v,g,f;d=new BigInteger(a,16),v=new BigInteger(o,16),g=new BigInteger(l,16),f=new BigInteger(p,16),this.setPublic(d,v,g,f)},this.signWithMessageHash=function(a){var o=this.p,l=this.q,p=this.g,v=this.x,g=KJUR.crypto.Util.getRandomBigIntegerMinToMax(BigInteger.ONE.add(BigInteger.ONE),l.subtract(BigInteger.ONE)),u=new BigInteger(a.substr(0,l.bitLength()/4),16),m=p.modPow(g,o).mod(l),h=g.modInverse(l).multiply(u.add(v.multiply(m))).mod(l);return KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:m}},{int:{bigint:h}}]})},this.verifyWithMessageHash=function(a,o){var l=this.p,p=this.q,d=this.g,v=this.y,g=this.parseASN1Signature(o),f=g[0],u=g[1],h=new BigInteger(a.substr(0,p.bitLength()/4),16);if(BigInteger.ZERO.compareTo(f)>0||f.compareTo(p)>0||BigInteger.ZERO.compareTo(u)>=0||u.compareTo(p)>0)throw"invalid DSA signature";var y=u.modInverse(p),b=h.multiply(y).mod(p),c=f.multiply(y).mod(p);return 0==d.modPow(b,l).multiply(v.modPow(c,l)).mod(l).mod(p).compareTo(f)},this.parseASN1Signature=function(a){try{return[new s(r(a,0,[0],"02"),16),new s(r(a,0,[1],"02"),16)]}catch(p){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(a){var o,l,p,d,v;if(!1===i(a))throw new Error("not ASN.1 hex string");try{o=r(a,0,[1],"02"),l=r(a,0,[2],"02"),p=r(a,0,[3],"02"),d=r(a,0,[4],"02"),v=r(a,0,[5],"02")}catch(g){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(o,l,p,d,v)},this.readPKCS8PrvKeyHex=function(a){var o,l,p,d;if(!1===i(a))throw new Error("not ASN.1 hex string");try{o=r(a,0,[1,1,0],"02"),l=r(a,0,[1,1,1],"02"),p=r(a,0,[1,1,2],"02"),d=r(a,0,[2,0],"02")}catch(v){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(o,l,p,null,d)},this.readPKCS8PubKeyHex=function(a){var o,l,p,d;if(!1===i(a))throw new Error("not ASN.1 hex string");try{o=r(a,0,[0,1,0],"02"),l=r(a,0,[0,1,1],"02"),p=r(a,0,[0,1,2],"02"),d=r(a,0,[1,0],"02")}catch(v){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(o,l,p,d)},this.readCertPubKeyHex=function(a,o){var l,p,d,v;if(!1===i(a))throw new Error("not ASN.1 hex string");try{l=r(a,0,[0,5,0,1,0],"02"),p=r(a,0,[0,5,0,1,1],"02"),d=r(a,0,[0,5,0,1,2],"02"),v=r(a,0,[0,5,1,0],"02")}catch(g){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(l,p,d,v)}};var KEYUTIL=function(){var e=function(h,y,b){return i(CryptoJS.AES,h,y,b)},i=function(h,y,b,c){var E=CryptoJS.enc.Hex.parse(y),S=CryptoJS.enc.Hex.parse(b),x=CryptoJS.enc.Hex.parse(c),A={};A.key=S,A.iv=x,A.ciphertext=E;var O=h.decrypt(A,S,{iv:x});return CryptoJS.enc.Hex.stringify(O)},s=function(h,y,b){return l(CryptoJS.AES,h,y,b)},l=function(h,y,b,c){var E=CryptoJS.enc.Hex.parse(y),S=CryptoJS.enc.Hex.parse(b),x=CryptoJS.enc.Hex.parse(c),A=h.encrypt(E,S,{iv:x}),O=CryptoJS.enc.Hex.parse(A.toString());return CryptoJS.enc.Base64.stringify(O)},p={"AES-256-CBC":{proc:e,eproc:s,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:s,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:s,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(h,y,b){return i(CryptoJS.TripleDES,h,y,b)},eproc:function(h,y,b){return l(CryptoJS.TripleDES,h,y,b)},keylen:24,ivlen:8},"DES-CBC":{proc:function(h,y,b){return i(CryptoJS.DES,h,y,b)},eproc:function(h,y,b){return l(CryptoJS.DES,h,y,b)},keylen:8,ivlen:8}},g=function(h){var y={},b=h.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));b&&(y.cipher=b[1],y.ivsalt=b[2]);var c=h.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));c&&(y.type=c[1]);var E=-1,S=0;-1!=h.indexOf("\r\n\r\n")&&(E=h.indexOf("\r\n\r\n"),S=2),-1!=h.indexOf("\n\n")&&(E=h.indexOf("\n\n"),S=1);var x=h.indexOf("-----END");if(-1!=E&&-1!=x){var A=h.substring(E+2*S,x-S);A=A.replace(/\s+/g,""),y.data=A}return y},f=function(h,y,b){for(var c=b.substring(0,16),E=CryptoJS.enc.Hex.parse(c),S=CryptoJS.enc.Utf8.parse(y),x=p[h].keylen+p[h].ivlen,A="",O=null;;){var F=CryptoJS.algo.MD5.create();if(null!=O&&F.update(O),F.update(S),F.update(E),O=F.finalize(),(A+=CryptoJS.enc.Hex.stringify(O)).length>=2*x)break}var w={};return w.keyhex=A.substr(0,2*p[h].keylen),w.ivhex=A.substr(2*p[h].keylen,2*p[h].ivlen),w},u=function(h,y,b,c){var E=CryptoJS.enc.Base64.parse(h),S=CryptoJS.enc.Hex.stringify(E);return(0,p[y].proc)(S,b,c)};return{version:"1.0.0",parsePKCS5PEM:function(h){return g(h)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(h,y,b){return f(h,y,b)},decryptKeyB64:function(h,y,b,c){return u(h,y,b,c)},getDecryptedKeyHex:function(h,y){var b=g(h),E=b.cipher,S=b.ivsalt,x=b.data,A=f(E,y,S);return u(x,E,A.keyhex,S)},getEncryptedPKCS5PEMFromPrvKeyHex:function(h,y,b,c,E){var P="";if((void 0===c||null==c)&&(c="AES-256-CBC"),void 0===p[c])throw new Error("KEYUTIL unsupported algorithm: "+c);if(void 0===E||null==E){var x=function(h){var y=CryptoJS.lib.WordArray.random(h);return CryptoJS.enc.Hex.stringify(y)}(p[c].ivlen);E=x.toUpperCase()}var F=function(h,y,b,c){return(0,p[y].eproc)(h,b,c)}(y,c,f(c,b,E).keyhex,E);return P="-----BEGIN "+h+" PRIVATE KEY-----\r\n",P+="Proc-Type: 4,ENCRYPTED\r\n",P+="DEK-Info: "+c+","+E+"\r\n",P+="\r\n",(P+=F.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+h+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(h){var b=ASN1HEX.getChildIdx,c=ASN1HEX.getV,E={},S=b(h,0);if(2!=S.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+S.length);E.ciphertext=c(h,S[1]);var x=b(h,S[0]);if(2!=x.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+x.length);if("2a864886f70d01050d"!=c(h,x[0]))throw new Error("this only supports pkcs5PBES2");var A=b(h,x[1]);if(2!=x.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+A.length);var O=b(h,A[1]);if(2!=O.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+O.length);if("2a864886f70d0307"!=c(h,O[0]))throw"this only supports TripleDES";E.encryptionSchemeAlg="TripleDES",E.encryptionSchemeIV=c(h,O[1]);var F=b(h,A[0]);if(2!=F.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+F.length);if("2a864886f70d01050c"!=c(h,F[0]))throw new Error("this only supports pkcs5PBKDF2");var w=b(h,F[1]);if(w.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+w.length);E.pbkdf2Salt=c(h,w[0]);var P=c(h,w[1]);try{E.pbkdf2Iter=parseInt(P,16)}catch(T){throw new Error("malformed format pbkdf2Iter: "+P)}return E},getPBKDF2KeyHexFromParam:function(h,y){var b=CryptoJS.enc.Hex.parse(h.pbkdf2Salt),E=CryptoJS.PBKDF2(y,b,{keySize:6,iterations:h.pbkdf2Iter});return CryptoJS.enc.Hex.stringify(E)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(h,y){var b=pemtohex(h,"ENCRYPTED PRIVATE KEY"),c=this.parseHexOfEncryptedPKCS8(b),E=KEYUTIL.getPBKDF2KeyHexFromParam(c,y),S={};S.ciphertext=CryptoJS.enc.Hex.parse(c.ciphertext);var x=CryptoJS.enc.Hex.parse(E),A=CryptoJS.enc.Hex.parse(c.encryptionSchemeIV),O=CryptoJS.TripleDES.decrypt(S,x,{iv:A});return CryptoJS.enc.Hex.stringify(O)},getKeyFromEncryptedPKCS8PEM:function(h,y){var b=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(h,y);return this.getKeyFromPlainPrivatePKCS8Hex(b)},parsePlainPrivatePKCS8Hex:function(h){var y=ASN1HEX,b=y.getChildIdx,c=y.getV,E={algparam:null};if("30"!=h.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var S=b(h,0);if(S.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=h.substr(S[1],2))throw new Error("malformed PKCS8 private key(code:003)");var x=b(h,S[1]);if(2!=x.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=h.substr(x[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(E.algoid=c(h,x[0]),"06"==h.substr(x[1],2)&&(E.algparam=c(h,x[1])),"04"!=h.substr(S[2],2))throw new Error("malformed PKCS8 private key(code:006)");return E.keyidx=y.getVidx(h,S[2]),E},getKeyFromPlainPrivatePKCS8PEM:function(h){var y=pemtohex(h,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(y)},getKeyFromPlainPrivatePKCS8Hex:function(h){var b,y=this.parsePlainPrivatePKCS8Hex(h);if("2a864886f70d010101"==y.algoid)b=new RSAKey;else if("2a8648ce380401"==y.algoid)b=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!=y.algoid)throw new Error("unsupported private key algorithm");b=new KJUR.crypto.ECDSA}return b.readPKCS8PrvKeyHex(h),b},_getKeyFromPublicPKCS8Hex:function(h){var y,b=ASN1HEX.getVbyList(h,0,[0,0],"06");if("2a864886f70d010101"===b)y=new RSAKey;else if("2a8648ce380401"===b)y=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!==b)throw new Error("unsupported PKCS#8 public key hex");y=new KJUR.crypto.ECDSA}return y.readPKCS8PubKeyHex(h),y},parsePublicRawRSAKeyHex:function(h){var b=ASN1HEX.getChildIdx,c=ASN1HEX.getV,E={};if("30"!=h.substr(0,2))throw new Error("malformed RSA key(code:001)");var S=b(h,0);if(2!=S.length)throw new Error("malformed RSA key(code:002)");if("02"!=h.substr(S[0],2))throw new Error("malformed RSA key(code:003)");if(E.n=c(h,S[0]),"02"!=h.substr(S[1],2))throw new Error("malformed RSA key(code:004)");return E.e=c(h,S[1]),E},parsePublicPKCS8Hex:function(h){var y=ASN1HEX,b=y.getChildIdx,c=y.getV,E={algparam:null},S=b(h,0);if(2!=S.length)throw new Error("outer DERSequence shall have 2 elements: "+S.length);var x=S[0];if("30"!=h.substr(x,2))throw new Error("malformed PKCS8 public key(code:001)");var A=b(h,x);if(2!=A.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=h.substr(A[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(E.algoid=c(h,A[0]),"06"==h.substr(A[1],2)?E.algparam=c(h,A[1]):"30"==h.substr(A[1],2)&&(E.algparam={},E.algparam.p=y.getVbyList(h,A[1],[0],"02"),E.algparam.q=y.getVbyList(h,A[1],[1],"02"),E.algparam.g=y.getVbyList(h,A[1],[2],"02")),"03"!=h.substr(S[1],2))throw new Error("malformed PKCS8 public key(code:004)");return E.key=c(h,S[1]).substr(2),E}}}();KEYUTIL.getKey=function(e,n,r){var F,s=(i=ASN1HEX).getChildIdx,o=i.getVbyList,l=KJUR.crypto,p=l.ECDSA,d=l.DSA,v=RSAKey,g=pemtohex,f=KEYUTIL;if(void 0!==v&&e instanceof v||void 0!==p&&e instanceof p||void 0!==d&&e instanceof d)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new p({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new p({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(u=new v).setPublic(e.n,e.e),u;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(u=new v).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),u;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(u=new v).setPrivate(e.n,e.e,e.d),u;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(u=new d).setPublic(e.p,e.q,e.g,e.y),u;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(u=new d).setPrivate(e.p,e.q,e.g,e.y,e.x),u;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(u=new v).setPublic(b64utohex(e.n),b64utohex(e.e)),u;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(u=new v).setPrivateEx(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d),b64utohex(e.p),b64utohex(e.q),b64utohex(e.dp),b64utohex(e.dq),b64utohex(e.qi)),u;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(u=new v).setPrivate(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d)),u;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(m=new p({curve:e.crv})).ecparams.keycharlen,y=("0000000000"+b64utohex(e.x)).slice(-h),b=("0000000000"+b64utohex(e.y)).slice(-h);return m.setPublicKeyHex(c="04"+y+b),m}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(m=new p({curve:e.crv})).ecparams.keycharlen;var c="04"+(y=("0000000000"+b64utohex(e.x)).slice(-h))+(b=("0000000000"+b64utohex(e.y)).slice(-h)),E=("0000000000"+b64utohex(e.d)).slice(-h);return m.setPublicKeyHex(c),m.setPrivateKeyHex(E),m}if("pkcs5prv"===r){var x,S=e,i=ASN1HEX;if(9===(x=s(S,0)).length)(u=new v).readPKCS5PrvKeyHex(S);else if(6===x.length)(u=new d).readPKCS5PrvKeyHex(S);else{if(!(x.length>2&&"04"===S.substr(x[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(u=new p).readPKCS5PrvKeyHex(S)}return u}if("pkcs8prv"===r)return f.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return f._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return X509.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return X509.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var A=pemtohex(e,"PUBLIC KEY");return f._getKeyFromPublicPKCS8Hex(A)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var O=g(e,"RSA PRIVATE KEY");return f.getKey(O,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=o(F=g(e,"DSA PRIVATE KEY"),0,[1],"02"),P=o(F,0,[2],"02"),T=o(F,0,[3],"02"),D=o(F,0,[4],"02"),H=o(F,0,[5],"02");return(u=new d).setPrivate(new BigInteger(w,16),new BigInteger(P,16),new BigInteger(T,16),new BigInteger(D,16),new BigInteger(H,16)),u}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return O=g(e,"EC PRIVATE KEY"),f.getKey(O,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return f.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var I=f.getDecryptedKeyHex(e,n),_=new RSAKey;return _.readPKCS5PrvKeyHex(I),_}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var m,u=o(F=f.getDecryptedKeyHex(e,n),0,[1],"04"),j=o(F,0,[2,0],"06"),R=o(F,0,[3,0],"03").substr(2);if(void 0===KJUR.crypto.OID.oidhex2name[j])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+j);return(m=new p({curve:KJUR.crypto.OID.oidhex2name[j]})).setPublicKeyHex(R),m.setPrivateKeyHex(u),m.isPublic=!1,m}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return w=o(F=f.getDecryptedKeyHex(e,n),0,[1],"02"),P=o(F,0,[2],"02"),T=o(F,0,[3],"02"),D=o(F,0,[4],"02"),H=o(F,0,[5],"02"),(u=new d).setPrivate(new BigInteger(w,16),new BigInteger(P,16),new BigInteger(T,16),new BigInteger(D,16),new BigInteger(H,16)),u;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return f.getKeyFromEncryptedPKCS8PEM(e,n);throw new Error("not supported argument")},KEYUTIL.generateKeypair=function(e,n){if("RSA"==e){var r=n;(i=new RSAKey).generate(r,"10001"),i.isPrivate=!0,i.isPublic=!0;var s=new RSAKey,a=i.n.toString(16),o=i.e.toString(16);return s.setPublic(a,o),s.isPrivate=!1,s.isPublic=!0,(l={}).prvKeyObj=i,l.pubKeyObj=s,l}if("EC"==e){var i,l,p=n,v=new KJUR.crypto.ECDSA({curve:p}).generateKeyPairHex();return(i=new KJUR.crypto.ECDSA({curve:p})).setPublicKeyHex(v.ecpubhex),i.setPrivateKeyHex(v.ecprvhex),i.isPrivate=!0,i.isPublic=!1,(s=new KJUR.crypto.ECDSA({curve:p})).setPublicKeyHex(v.ecpubhex),s.isPrivate=!1,s.isPublic=!0,(l={}).prvKeyObj=i,l.pubKeyObj=s,l}throw new Error("unknown algorithm: "+e)},KEYUTIL.getPEM=function(e,n,r,i,s,a){var l=KJUR.asn1,p=l.DERObjectIdentifier,d=l.DERInteger,v=l.ASN1Util.newObject,u=KJUR.crypto,m=u.DSA,h=u.ECDSA,y=RSAKey;function b(_){return v({seq:[{int:0},{int:{bigint:_.n}},{int:_.e},{int:{bigint:_.d}},{int:{bigint:_.p}},{int:{bigint:_.q}},{int:{bigint:_.dmp1}},{int:{bigint:_.dmq1}},{int:{bigint:_.coeff}}]})}function c(_){return v({seq:[{int:1},{octstr:{hex:_.prvKeyHex}},{tag:["a0",!0,{oid:{name:_.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+_.pubKeyHex}}]}]})}function E(_){return v({seq:[{int:0},{int:{bigint:_.p}},{int:{bigint:_.q}},{int:{bigint:_.g}},{int:{bigint:_.y}},{int:{bigint:_.x}}]})}if((void 0!==y&&e instanceof y||void 0!==m&&e instanceof m||void 0!==h&&e instanceof h)&&1==e.isPublic&&(void 0===n||"PKCS8PUB"==n))return hextopem(x=new(0,l.x509.SubjectPublicKeyInfo)(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==n&&void 0!==y&&e instanceof y&&(void 0===r||null==r)&&1==e.isPrivate)return hextopem(x=b(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==n&&void 0!==h&&e instanceof h&&(void 0===r||null==r)&&1==e.isPrivate){var O=new p({name:e.curveName}).getEncodedHex(),w=c(e).getEncodedHex(),P="";return(P+=hextopem(O,"EC PARAMETERS"))+hextopem(w,"EC PRIVATE KEY")}if("PKCS1PRV"==n&&void 0!==m&&e instanceof m&&(void 0===r||null==r)&&1==e.isPrivate)return hextopem(x=E(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==n&&void 0!==y&&e instanceof y&&void 0!==r&&null!=r&&1==e.isPrivate){var x=b(e).getEncodedHex();return void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",x,r,i,a)}if("PKCS5PRV"==n&&void 0!==h&&e instanceof h&&void 0!==r&&null!=r&&1==e.isPrivate)return x=c(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",x,r,i,a);if("PKCS5PRV"==n&&void 0!==m&&e instanceof m&&void 0!==r&&null!=r&&1==e.isPrivate)return x=E(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",x,r,i,a);var T=function(_,j){var R=D(_,j);return new v({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:R.pbkdf2Salt}},{int:R.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:R.encryptionSchemeIV}}]}]}]},{octstr:{hex:R.ciphertext}}]}).getEncodedHex()},D=function(_,j){var L=CryptoJS.lib.WordArray.random(8),k=CryptoJS.lib.WordArray.random(8),B=CryptoJS.PBKDF2(j,L,{keySize:6,iterations:100}),q=CryptoJS.enc.Hex.parse(_),V=CryptoJS.TripleDES.encrypt(q,B,{iv:k})+"",C={};return C.ciphertext=V,C.pbkdf2Salt=CryptoJS.enc.Hex.stringify(L),C.pbkdf2Iter=100,C.encryptionSchemeAlg="DES-EDE3-CBC",C.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(k),C};if("PKCS8PRV"==n&&null!=y&&e instanceof y&&1==e.isPrivate){var I=b(e).getEncodedHex();return x=v({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:I}}]}).getEncodedHex(),void 0===r||null==r?hextopem(x,"PRIVATE KEY"):hextopem(w=T(x,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==n&&void 0!==h&&e instanceof h&&1==e.isPrivate)return I=new v({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),x=v({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:I}}]}).getEncodedHex(),void 0===r||null==r?hextopem(x,"PRIVATE KEY"):hextopem(w=T(x,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==n&&void 0!==m&&e instanceof m&&1==e.isPrivate)return I=new d({bigint:e.x}).getEncodedHex(),x=v({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:I}}]}).getEncodedHex(),void 0===r||null==r?hextopem(x,"PRIVATE KEY"):hextopem(w=T(x,r),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},KEYUTIL.getKeyFromCSRPEM=function(e){var n=pemtohex(e,"CERTIFICATE REQUEST");return KEYUTIL.getKeyFromCSRHex(n)},KEYUTIL.getKeyFromCSRHex=function(e){var n=KEYUTIL.parseCSRHex(e);return KEYUTIL.getKey(n.p8pubkeyhex,null,"pkcs8pub")},KEYUTIL.parseCSRHex=function(e){var r=ASN1HEX.getChildIdx,i=ASN1HEX.getTLV,s={},a=e;if("30"!=a.substr(0,2))throw new Error("malformed CSR(code:001)");var o=r(a,0);if(o.length<1)throw new Error("malformed CSR(code:002)");if("30"!=a.substr(o[0],2))throw new Error("malformed CSR(code:003)");var l=r(a,o[0]);if(l.length<3)throw new Error("malformed CSR(code:004)");return s.p8pubkeyhex=i(a,l[2]),s},KEYUTIL.getKeyID=function(e){var n=KEYUTIL,r=ASN1HEX;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=n.getKey(e));var i=pemtohex(n.getPEM(e)),s=r.getIdxbyList(i,0,[1]),a=r.getV(i,s).substring(2);return KJUR.crypto.Util.hashHex(a,"sha1")},KEYUTIL.getJWK=function(e,n,r,i,s){var a,l,o={},p=KJUR.crypto.Util.hashHex;if("string"==typeof e)a=KEYUTIL.getKey(e),-1!=e.indexOf("CERTIFICATE")&&(l=pemtohex(e));else{if("object"!=typeof e)throw new Error("unsupported keyinfo type");e instanceof X509?(a=e.getPublicKey(),l=e.hex):a=e}if(a instanceof RSAKey&&a.isPrivate)o.kty="RSA",o.n=hextob64u(a.n.toString(16)),o.e=hextob64u(a.e.toString(16)),o.d=hextob64u(a.d.toString(16)),o.p=hextob64u(a.p.toString(16)),o.q=hextob64u(a.q.toString(16)),o.dp=hextob64u(a.dmp1.toString(16)),o.dq=hextob64u(a.dmq1.toString(16)),o.qi=hextob64u(a.coeff.toString(16));else if(a instanceof RSAKey&&a.isPublic)o.kty="RSA",o.n=hextob64u(a.n.toString(16)),o.e=hextob64u(a.e.toString(16));else if(a instanceof KJUR.crypto.ECDSA&&a.isPrivate){if("P-256"!==(d=a.getShortNISTPCurveName())&&"P-384"!==d&&"P-521"!==d)throw new Error("unsupported curve name for JWT: "+d);var v=a.getPublicKeyXYHex();o.kty="EC",o.crv=d,o.x=hextob64u(v.x),o.y=hextob64u(v.y),o.d=hextob64u(a.prvKeyHex)}else if(a instanceof KJUR.crypto.ECDSA&&a.isPublic){var d;if("P-256"!==(d=a.getShortNISTPCurveName())&&"P-384"!==d&&"P-521"!==d)throw new Error("unsupported curve name for JWT: "+d);v=a.getPublicKeyXYHex(),o.kty="EC",o.crv=d,o.x=hextob64u(v.x),o.y=hextob64u(v.y)}if(null==o.kty)throw new Error("unsupported keyinfo");return!a.isPrivate&&1!=n&&(o.kid=KJUR.jws.JWS.getJWKthumbprint(o)),null!=l&&1!=r&&(o.x5c=[hex2b64(l)]),null!=l&&1!=i&&(o.x5t=b64tob64u(hex2b64(p(l,"sha1")))),null!=l&&1!=s&&(o["x5t#S256"]=b64tob64u(hex2b64(p(l,"sha256")))),o},KEYUTIL.getJWKFromKey=function(e){return KEYUTIL.getJWK(e,!0,!0,!0,!0)},RSAKey.getPosArrayOfChildrenFromHex=function(e){return ASN1HEX.getChildIdx(e,0)},RSAKey.getHexValueArrayOfChildrenFromHex=function(e){var f,r=ASN1HEX.getV,i=r(e,(f=RSAKey.getPosArrayOfChildrenFromHex(e))[0]),s=r(e,f[1]),a=r(e,f[2]),o=r(e,f[3]),l=r(e,f[4]),p=r(e,f[5]),d=r(e,f[6]),v=r(e,f[7]),g=r(e,f[8]);return(f=new Array).push(i,s,a,o,l,p,d,v,g),f},RSAKey.prototype.readPrivateKeyFromPEMString=function(e){var n=pemtohex(e),r=RSAKey.getHexValueArrayOfChildrenFromHex(n);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},RSAKey.prototype.readPKCS5PrvKeyHex=function(e){var n=RSAKey.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},RSAKey.prototype.readPKCS8PrvKeyHex=function(e){var n,r,i,s,a,o,l,p,v=ASN1HEX.getVbyListEx;if(!1===ASN1HEX.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{n=v(e,0,[2,0,1],"02"),r=v(e,0,[2,0,2],"02"),i=v(e,0,[2,0,3],"02"),s=v(e,0,[2,0,4],"02"),a=v(e,0,[2,0,5],"02"),o=v(e,0,[2,0,6],"02"),l=v(e,0,[2,0,7],"02"),p=v(e,0,[2,0,8],"02")}catch(g){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(n,r,i,s,a,o,l,p)},RSAKey.prototype.readPKCS5PubKeyHex=function(e){var n=ASN1HEX,r=n.getV;if(!1===n.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var i=n.getChildIdx(e,0);if(2!==i.length||"02"!==e.substr(i[0],2)||"02"!==e.substr(i[1],2))throw new Error("wrong hex for PKCS#5 public key");var s=r(e,i[0]),a=r(e,i[1]);this.setPublic(s,a)},RSAKey.prototype.readPKCS8PubKeyHex=function(e){var n=ASN1HEX;if(!1===n.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==n.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=n.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},RSAKey.prototype.readCertPubKeyHex=function(e,n){var r,i;(r=new X509).readCertHex(e),i=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)};var _RE_HEXDECONLY=new RegExp("[^0-9a-f]","gi");function _rsasign_getHexPaddedDigestInfoForString(e,n,r){var s=KJUR.crypto.Util.hashString(e,r);return KJUR.crypto.Util.getPaddedDigestInfoHex(s,r,n)}function _zeroPaddingOfSignature(e,n){for(var r="",i=n/4-e.length,s=0;s<i;s++)r+="0";return r+e}function pss_mgf1_str(e,n,r){for(var i="",s=0;i.length<n;)i+=hextorstr(r(rstrtohex(e+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])))),s+=1;return i}function _rsasign_getDecryptSignatureBI(e,n,r){var i=new RSAKey;return i.setPublic(n,r),i.doPublic(e)}function _rsasign_getHexDigestInfoFromSig(e,n,r){return _rsasign_getDecryptSignatureBI(e,n,r).toString(16).replace(/^1f+00/,"")}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(e){for(var n in KJUR.crypto.Util.DIGESTINFOHEAD){var r=KJUR.crypto.Util.DIGESTINFOHEAD[n],i=r.length;if(e.substring(0,i)==r)return[n,e.substring(i)]}return[]}function X509(e){var b,n=ASN1HEX,r=n.getChildIdx,i=n.getV,s=n.getTLV,a=n.getVbyList,o=n.getVbyListEx,l=n.getTLVbyList,p=n.getTLVbyListEx,d=n.getIdxbyList,v=n.getIdxbyListEx,g=n.getVidx,f=n.getInt,u=n.oidname,m=n.hextooidstr,y=pemtohex;try{b=KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(c){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var c=l(this.hex,0,[0,0]);if("a0"==c.substr(0,2)){var E=l(c,0,[0]),S=f(E,0);if(S<0||2<S)throw new Error("malformed version field");return this.version=S+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return o(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var c=p(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(c)},this.getAlgorithmIdentifierName=function(c){for(var E in b)if(c===b[E])return E;return u(o(c,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return l(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return l(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var c=a(this.hex,0,[0,4+this.foffset,0]);return c=c.replace(/(..)/g,"%$1"),decodeURIComponent(c)},this.getNotAfter=function(){var c=a(this.hex,0,[0,4+this.foffset,1]);return c=c.replace(/(..)/g,"%$1"),decodeURIComponent(c)},this.getPublicKeyHex=function(){return n.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return d(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var c=this.getPublicKeyIdx();return d(this.hex,c,[1,0],"30")},this.getPublicKey=function(){return KEYUTIL.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var c=l(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(c)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(c){var E=this.getSignatureAlgorithmField(),S=this.getSignatureValueHex(),x=l(this.hex,0,[0],"30"),A=new KJUR.crypto.Signature({alg:E});return A.init(c),A.updateHex(x),A.verify(S)},this.parseExt=function(c){var E,S,x;if(void 0===c){if(3!==this.version)return-1;E=d(x=this.hex,0,[0,7,0],"30"),S=r(x,E)}else{x=pemtohex(c);var A=d(x,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(x,A))return void(this.aExtInfo=new Array);E=d(x,0,[0,3,0,1,0],"30"),S=r(x,E),this.hex=x}this.aExtInfo=new Array;for(var O=0;O<S.length;O++){var F={critical:!1},P=0;3===r(x,S[O]).length&&(F.critical=!0,P=1),F.oid=n.hextooidstr(a(x,S[O],[0],"06"));var T=d(x,S[O],[1+P]);F.vidx=g(x,T),this.aExtInfo.push(F)}},this.getExtInfo=function(c){var E=this.aExtInfo,S=c;if(c.match(/^[0-9.]+$/)||(S=KJUR.asn1.x509.OID.name2oid(c)),""!==S)for(var x=0;x<E.length;x++)if(E[x].oid===S)return E[x]},this.getExtBasicConstraints=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("basicConstraints");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"basicConstraints"};if(E&&(x.critical=!0),"3000"===c)return x;if("30030101ff"===c)return x.cA=!0,x;if("30060101ff02"===c.substr(0,12)){var A=i(c,10),O=parseInt(A,16);return x.cA=!0,x.pathLen=O,x}throw new Error("hExtV parse error: "+c)},this.getExtKeyUsage=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("keyUsage");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"keyUsage"};return E&&(x.critical=!0),x.names=this.getExtKeyUsageString(c).split(","),x},this.getExtKeyUsageBin=function(c){if(void 0===c){var E=this.getExtInfo("keyUsage");if(void 0===E)return"";c=s(this.hex,E.vidx)}if(8!=c.length&&10!=c.length)throw new Error("malformed key usage value: "+c);var S="000000000000000"+parseInt(c.substr(6),16).toString(2);return 8==c.length&&(S=S.slice(-8)),10==c.length&&(S=S.slice(-16)),""==(S=S.replace(/0+$/,""))&&(S="0"),S},this.getExtKeyUsageString=function(c){for(var E=this.getExtKeyUsageBin(c),S=new Array,x=0;x<E.length;x++)"1"==E.substr(x,1)&&S.push(X509.KEYUSAGE_NAME[x]);return S.join(",")},this.getExtSubjectKeyIdentifier=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("subjectKeyIdentifier");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"subjectKeyIdentifier"};E&&(x.critical=!0);var A=i(c,0);return x.kid={hex:A},x},this.getExtAuthorityKeyIdentifier=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("authorityKeyIdentifier");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"authorityKeyIdentifier"};E&&(x.critical=!0);for(var A=r(c,0),O=0;O<A.length;O++){var F=c.substr(A[O],2);if("80"===F&&(x.kid={hex:i(c,A[O])}),"a1"===F){var w=s(c,A[O]),P=this.getGeneralNames(w);x.issuer=P[0].dn}"82"===F&&(x.sn={hex:i(c,A[O])})}return x},this.getExtExtKeyUsage=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("extKeyUsage");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"extKeyUsage",array:[]};E&&(x.critical=!0);for(var A=r(c,0),O=0;O<A.length;O++)x.array.push(u(i(c,A[O])));return x},this.getExtExtKeyUsageName=function(){var c=this.getExtInfo("extKeyUsage");if(void 0===c)return c;var E=new Array,S=s(this.hex,c.vidx);if(""===S)return E;for(var x=r(S,0),A=0;A<x.length;A++)E.push(u(i(S,x[A])));return E},this.getExtSubjectAltName=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("subjectAltName");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"subjectAltName",array:[]};return E&&(x.critical=!0),x.array=this.getGeneralNames(c),x},this.getExtIssuerAltName=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("issuerAltName");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"issuerAltName",array:[]};return E&&(x.critical=!0),x.array=this.getGeneralNames(c),x},this.getGeneralNames=function(c){for(var E=r(c,0),S=[],x=0;x<E.length;x++){var A=this.getGeneralName(s(c,E[x]));void 0!==A&&S.push(A)}return S},this.getGeneralName=function(c){var E=c.substr(0,2),S=i(c,0),x=hextorstr(S);return"81"==E?{rfc822:x}:"82"==E?{dns:x}:"86"==E?{uri:x}:"87"==E?{ip:hextoip(S)}:"a4"==E?{dn:this.getX500Name(S)}:void 0},this.getExtSubjectAltName2=function(){var c,E,S,x=this.getExtInfo("subjectAltName");if(void 0===x)return x;for(var A=new Array,O=s(this.hex,x.vidx),F=r(O,0),w=0;w<F.length;w++)S=O.substr(F[w],2),c=i(O,F[w]),"81"===S&&(E=hextoutf8(c),A.push(["MAIL",E])),"82"===S&&(E=hextoutf8(c),A.push(["DNS",E])),"84"===S&&(E=X509.hex2dn(c,0),A.push(["DN",E])),"86"===S&&(E=hextoutf8(c),A.push(["URI",E])),"87"===S&&(E=hextoip(c),A.push(["IP",E]));return A},this.getExtCRLDistributionPoints=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("cRLDistributionPoints");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"cRLDistributionPoints",array:[]};E&&(x.critical=!0);for(var A=r(c,0),O=0;O<A.length;O++){var F=s(c,A[O]);x.array.push(this.getDistributionPoint(F))}return x},this.getDistributionPoint=function(c){for(var E={},S=r(c,0),x=0;x<S.length;x++){var A=c.substr(S[x],2),O=s(c,S[x]);"a0"==A&&(E.dpname=this.getDistributionPointName(O))}return E},this.getDistributionPointName=function(c){for(var E={},S=r(c,0),x=0;x<S.length;x++){var A=c.substr(S[x],2),O=s(c,S[x]);"a0"==A&&(E.full=this.getGeneralNames(O))}return E},this.getExtCRLDistributionPointsURI=function(){var c=this.getExtInfo("cRLDistributionPoints");if(void 0===c)return c;for(var E=new Array,S=r(this.hex,c.vidx),x=0;x<S.length;x++)try{var O=hextoutf8(a(this.hex,S[x],[0,0,0],"86"));E.push(O)}catch(F){}return E},this.getExtAIAInfo=function(){var c=this.getExtInfo("authorityInfoAccess");if(void 0===c)return c;for(var E={ocsp:[],caissuer:[]},S=r(this.hex,c.vidx),x=0;x<S.length;x++){var A=a(this.hex,S[x],[0],"06"),O=a(this.hex,S[x],[1],"86");"2b06010505073001"===A&&E.ocsp.push(hextoutf8(O)),"2b06010505073002"===A&&E.caissuer.push(hextoutf8(O))}return E},this.getExtAuthorityInfoAccess=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("authorityInfoAccess");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"authorityInfoAccess",array:[]};E&&(x.critical=!0);for(var A=r(c,0),O=0;O<A.length;O++){var F=o(c,A[O],[0],"06"),P=hextoutf8(a(c,A[O],[1],"86"));if("2b06010505073001"==F)x.array.push({ocsp:P});else{if("2b06010505073002"!=F)throw new Error("unknown method: "+F);x.array.push({caissuer:P})}}return x},this.getExtCertificatePolicies=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("certificatePolicies");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"certificatePolicies",array:[]};E&&(x.critical=!0);for(var A=r(c,0),O=0;O<A.length;O++){var F=s(c,A[O]),w=this.getPolicyInformation(F);x.array.push(w)}return x},this.getPolicyInformation=function(c){var E={},S=a(c,0,[0],"06");E.policyoid=u(S);var x=v(c,0,[1],"30");if(-1!=x){E.array=[];for(var A=r(c,x),O=0;O<A.length;O++){var F=s(c,A[O]),w=this.getPolicyQualifierInfo(F);E.array.push(w)}}return E},this.getPolicyQualifierInfo=function(c){var E={},S=a(c,0,[0],"06");if("2b06010505070201"===S){var x=o(c,0,[1],"16");E.cps=hextorstr(x)}else if("2b06010505070202"===S){var A=l(c,0,[1],"30");E.unotice=this.getUserNotice(A)}return E},this.getUserNotice=function(c){for(var E={},S=r(c,0),x=0;x<S.length;x++){var A=s(c,S[x]);"30"!=A.substr(0,2)&&(E.exptext=this.getDisplayText(A))}return E},this.getDisplayText=function(c){var S={};return S.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[c.substr(0,2)],S.str=hextorstr(i(c,0)),S},this.getExtCRLNumber=function(c,E){var S={extname:"cRLNumber"};if(E&&(S.critical=!0),"02"==c.substr(0,2))return S.num={hex:i(c,0)},S;throw new Error("hExtV parse error: "+c)},this.getExtCRLReason=function(c,E){var S={extname:"cRLReason"};if(E&&(S.critical=!0),"0a"==c.substr(0,2))return S.code=parseInt(i(c,0),16),S;throw new Error("hExtV parse error: "+c)},this.getExtOcspNonce=function(c,E){var S={extname:"ocspNonce"};E&&(S.critical=!0);var x=i(c,0);return S.hex=x,S},this.getExtOcspNoCheck=function(c,E){var S={extname:"ocspNoCheck"};return E&&(S.critical=!0),S},this.getExtAdobeTimeStamp=function(c,E){if(void 0===c&&void 0===E){var S=this.getExtInfo("adobeTimeStamp");if(void 0===S)return;c=s(this.hex,S.vidx),E=S.critical}var x={extname:"adobeTimeStamp"};E&&(x.critical=!0);var A=r(c,0);if(A.length>1){var O=s(c,A[1]),F=this.getGeneralName(O);null!=F.uri&&(x.uri=F.uri)}if(A.length>2){var w=s(c,A[2]);"0101ff"==w&&(x.reqauth=!0),"010100"==w&&(x.reqauth=!1)}return x},this.getX500NameRule=function(c){for(var F=null,w=[],P=0;P<c.length;P++)for(var T=c[P],D=0;D<T.length;D++)w.push(T[D]);for(P=0;P<w.length;P++){var H=w[P],I=H.ds,j=H.type;if("prn"!=I&&"utf8"!=I&&"ia5"!=I)return"mixed";if("ia5"==I){if("CN"!=j)return"mixed";if(KJUR.lang.String.isMail(H.value))continue;return"mixed"}if("C"==j){if("prn"==I)continue;return"mixed"}if(null==F)F=I;else if(F!==I)return"mixed"}return null==F?"prn":F},this.getX500Name=function(c){var E=this.getX500NameArray(c);return{array:E,str:this.dnarraytostr(E)}},this.getX500NameArray=function(c){for(var E=[],S=r(c,0),x=0;x<S.length;x++)E.push(this.getRDN(s(c,S[x])));return E},this.getRDN=function(c){for(var E=[],S=r(c,0),x=0;x<S.length;x++)E.push(this.getAttrTypeAndValue(s(c,S[x])));return E},this.getAttrTypeAndValue=function(c){var E={type:null,value:null,ds:null},S=r(c,0),x=a(c,S[0],[],"06"),A=a(c,S[1],[]),O=KJUR.asn1.ASN1Util.oidHexToInt(x);return E.type=KJUR.asn1.x509.OID.oid2atype(O),E.ds=this.HEX2STAG[c.substr(S[1],2)],E.value="bmp"!=E.ds?hextoutf8(A):ucs2hextoutf8(A),E},this.readCertPEM=function(c){this.readCertHex(y(c))},this.readCertHex=function(c){this.hex=c,this.getVersion();try{d(this.hex,0,[0,7],"a3"),this.parseExt()}catch(E){}},this.getParam=function(){var c={};return c.version=this.getVersion(),c.serial={hex:this.getSerialNumberHex()},c.sigalg=this.getSignatureAlgorithmField(),c.issuer=this.getIssuer(),c.notbefore=this.getNotBefore(),c.notafter=this.getNotAfter(),c.subject=this.getSubject(),c.sbjpubkey=hextopem(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(c.ext=this.getExtParamArray()),c.sighex=this.getSignatureValueHex(),c},this.getExtParamArray=function(c){null==c&&-1!=v(this.hex,0,[0,"[3]"])&&(c=p(this.hex,0,[0,"[3]",0],"30"));for(var S=[],x=r(c,0),A=0;A<x.length;A++){var O=s(c,x[A]),F=this.getExtParam(O);null!=F&&S.push(F)}return S},this.getExtParam=function(c){var x=r(c,0).length;if(2!=x&&3!=x)throw new Error("wrong number elements in Extension: "+x+" "+c);var A=m(a(c,0,[0],"06")),O=!1;3==x&&"0101ff"==l(c,0,[1])&&(O=!0);var F=l(c,0,[x-1,0]),w=void 0;if("2.5.29.14"==A?w=this.getExtSubjectKeyIdentifier(F,O):"2.5.29.15"==A?w=this.getExtKeyUsage(F,O):"2.5.29.17"==A?w=this.getExtSubjectAltName(F,O):"2.5.29.18"==A?w=this.getExtIssuerAltName(F,O):"2.5.29.19"==A?w=this.getExtBasicConstraints(F,O):"2.5.29.31"==A?w=this.getExtCRLDistributionPoints(F,O):"2.5.29.32"==A?w=this.getExtCertificatePolicies(F,O):"2.5.29.35"==A?w=this.getExtAuthorityKeyIdentifier(F,O):"2.5.29.37"==A?w=this.getExtExtKeyUsage(F,O):"1.3.6.1.5.5.7.1.1"==A?w=this.getExtAuthorityInfoAccess(F,O):"2.5.29.20"==A?w=this.getExtCRLNumber(F,O):"2.5.29.21"==A?w=this.getExtCRLReason(F,O):"1.3.6.1.5.5.7.48.1.2"==A?w=this.getExtOcspNonce(F,O):"1.3.6.1.5.5.7.48.1.5"==A?w=this.getExtOcspNoCheck(F,O):"1.2.840.113583.1.1.9.1"==A&&(w=this.getExtAdobeTimeStamp(F,O)),null!=w)return w;var P={extname:A,extn:F};return O&&(P.critical=!0),P},this.findExt=function(c,E){for(var S=0;S<c.length;S++)if(c[S].extname==E)return c[S];return null},this.updateExtCDPFullURI=function(c,E){var S=this.findExt(c,"cRLDistributionPoints");if(null!=S&&null!=S.array)for(var x=S.array,A=0;A<x.length;A++)if(null!=x[A].dpname&&null!=x[A].dpname.full)for(var O=x[A].dpname.full,F=0;F<O.length;F++){var w=O[A];null!=w.uri&&(w.uri=E)}},this.updateExtAIAOCSP=function(c,E){var S=this.findExt(c,"authorityInfoAccess");if(null!=S&&null!=S.array)for(var x=S.array,A=0;A<x.length;A++)null!=x[A].ocsp&&(x[A].ocsp=E)},this.updateExtAIACAIssuer=function(c,E){var S=this.findExt(c,"authorityInfoAccess");if(null!=S&&null!=S.array)for(var x=S.array,A=0;A<x.length;A++)null!=x[A].caissuer&&(x[A].caissuer=E)},this.dnarraytostr=function(c){return"/"+c.map(function(x){return function E(x){return x.map(function(A){return function S(x){return x.type+"="+x.value}(A).replace(/\+/,"\\+")}).join("+")}(x).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var O,F,w,k,E=function(k){for(var B="",q=k.array,V=0;V<q.length;V++){var C=q[V];if(B+="    policy oid: "+C.policyoid+"\n",void 0!==C.array)for(var M=0;M<C.array.length;M++){var K=C.array[M];void 0!==K.cps&&(B+="    cps: "+K.cps+"\n")}}return B},S=function(k){for(var B="",q=k.array,V=0;V<q.length;V++){var C=q[V];try{void 0!==C.dpname.full[0].uri&&(B+="    "+C.dpname.full[0].uri+"\n")}catch(M){}try{void 0!==C.dname.full[0].dn.hex&&(B+="    "+X509.hex2dn(C.dpname.full[0].dn.hex)+"\n")}catch(M){}}return B},x=function(k){for(var B="",q=k.array,V=0;V<q.length;V++){var C=q[V];void 0!==C.caissuer&&(B+="    caissuer: "+C.caissuer+"\n"),void 0!==C.ocsp&&(B+="    ocsp: "+C.ocsp+"\n")}return B};if(O="Basic Fields\n",O+="  serial number: "+this.getSerialNumberHex()+"\n",O+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",O+="  issuer: "+this.getIssuerString()+"\n",O+="  notBefore: "+this.getNotBefore()+"\n",O+="  notAfter: "+this.getNotAfter()+"\n",O+="  subject: "+this.getSubjectString()+"\n",O+="  subject public key info: \n",O+="    key algorithm: "+(F=this.getPublicKey()).type+"\n","RSA"===F.type&&(O+="    n="+hextoposhex(F.n.toString(16)).substr(0,16)+"...\n",O+="    e="+hextoposhex(F.e.toString(16))+"\n"),null!=(w=this.aExtInfo)){O+="X509v3 Extensions:\n";for(var P=0;P<w.length;P++){var T=w[P],D=KJUR.asn1.x509.OID.oid2name(T.oid);""===D&&(D=T.oid);var H="";if(!0===T.critical&&(H="CRITICAL"),O+="  "+D+" "+H+":\n","basicConstraints"===D){var I=this.getExtBasicConstraints();void 0===I.cA?O+="    {}\n":(O+="    cA=true",void 0!==I.pathLen&&(O+=", pathLen="+I.pathLen),O+="\n")}else if("keyUsage"===D)O+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===D)O+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===D){var _=this.getExtAuthorityKeyIdentifier();void 0!==_.kid&&(O+="    kid="+_.kid.hex+"\n")}else"extKeyUsage"===D?O+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===D?O+="    "+(k=this.getExtSubjectAltName(),JSON.stringify(k.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===D?O+=S(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===D?O+=x(this.getExtAuthorityInfoAccess()):"certificatePolicies"===D&&(O+=E(this.getExtCertificatePolicies()))}}return(O+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):KJUR.lang.String.isHex(e)&&this.readCertHex(e))}RSAKey.prototype.sign=function(e,n){var i=KJUR.crypto.Util.hashString(e,n);return this.signWithMessageHash(i,n)},RSAKey.prototype.signWithMessageHash=function(e,n){var i=parseBigInt(KJUR.crypto.Util.getPaddedDigestInfoHex(e,n,this.n.bitLength()),16);return _zeroPaddingOfSignature(this.doPrivate(i).toString(16),this.n.bitLength())},RSAKey.prototype.signPSS=function(e,n,r){var a,s=(a=rstrtohex(e),KJUR.crypto.Util.hashHex(a,n));return void 0===r&&(r=-1),this.signWithMessageHashPSS(s,n,r)},RSAKey.prototype.signWithMessageHashPSS=function(e,n,r){var l,i=hextorstr(e),s=i.length,a=this.n.bitLength()-1,o=Math.ceil(a/8),p=function(y){return KJUR.crypto.Util.hashHex(y,n)};if(-1===r||void 0===r)r=s;else if(-2===r)r=o-s-2;else if(r<-2)throw new Error("invalid salt length");if(o<s+r+2)throw new Error("data too long");var d="";r>0&&(d=new Array(r),(new SecureRandom).nextBytes(d),d=String.fromCharCode.apply(String,d));var v=hextorstr(p(rstrtohex("\0\0\0\0\0\0\0\0"+i+d))),g=[];for(l=0;l<o-r-s-2;l+=1)g[l]=0;var f=String.fromCharCode.apply(String,g)+"\x01"+d,u=pss_mgf1_str(v,f.length,p),m=[];for(l=0;l<f.length;l+=1)m[l]=f.charCodeAt(l)^u.charCodeAt(l);for(m[0]&=~(65280>>8*o-a&255),l=0;l<s;l++)m.push(v.charCodeAt(l));return m.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(m)).toString(16),this.n.bitLength())},RSAKey.prototype.verify=function(e,n){if(null==(n=n.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=parseBigInt(n,16),i=this.n.bitLength();if(r.bitLength()>i)return!1;var a=this.doPublic(r).toString(16);if(a.length+3!=i/4)return!1;var l=_rsasign_getAlgNameAndHashFromHexDisgestInfo(a.replace(/^1f+00/,""));return 0!=l.length&&l[1]==KJUR.crypto.Util.hashString(e,l[0])},RSAKey.prototype.verifyWithMessageHash=function(e,n){if(n.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=parseBigInt(n,16);if(r.bitLength()>this.n.bitLength())return 0;var a=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=a.length&&a[1]==e},RSAKey.prototype.verifyPSS=function(e,n,r,i){var o,a=(o=rstrtohex(e),KJUR.crypto.Util.hashHex(o,r));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(a,n,r,i)},RSAKey.prototype.verifyWithMessageHashPSS=function(e,n,r,i){if(n.length!=Math.ceil(this.n.bitLength()/4))return!1;var v,s=new BigInteger(n,16),a=function(c){return KJUR.crypto.Util.hashHex(c,r)},o=hextorstr(e),l=o.length,p=this.n.bitLength()-1,d=Math.ceil(p/8);if(-1===i||void 0===i)i=l;else if(-2===i)i=d-l-2;else if(i<-2)throw new Error("invalid salt length");if(d<l+i+2)throw new Error("data too long");var g=this.doPublic(s).toByteArray();for(v=0;v<g.length;v+=1)g[v]&=255;for(;g.length<d;)g.unshift(0);if(188!==g[d-1])throw new Error("encoded message does not end in 0xbc");var f=(g=String.fromCharCode.apply(String,g)).substr(0,d-l-1),u=g.substr(f.length,l),m=65280>>8*d-p&255;if(0!=(f.charCodeAt(0)&m))throw new Error("bits beyond keysize not zero");var h=pss_mgf1_str(u,f.length,a),y=[];for(v=0;v<f.length;v+=1)y[v]=f.charCodeAt(v)^h.charCodeAt(v);y[0]&=~m;var b=d-l-i-2;for(v=0;v<b;v+=1)if(0!==y[v])throw new Error("leftmost octets not zero");if(1!==y[b])throw new Error("0x01 marker not found");return u===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+o+String.fromCharCode.apply(String,y.slice(-i)))))},RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.SALT_LEN_RECOVER=-2,X509.hex2dn=function(e,n){void 0===n&&(n=0);var r=new X509;return ASN1HEX.getTLV(e,n),r.getX500Name(e).str},X509.hex2rdn=function(e,n){if(void 0===n&&(n=0),"31"!==e.substr(n,2))throw new Error("malformed RDN");for(var r=new Array,i=ASN1HEX.getChildIdx(e,n),s=0;s<i.length;s++)r.push(X509.hex2attrTypeValue(e,i[s]));return(r=r.map(function(a){return a.replace("+","\\+")})).join("+")},X509.hex2attrTypeValue=function(e,n){var r=ASN1HEX,i=r.getV;if(void 0===n&&(n=0),"30"!==e.substr(n,2))throw new Error("malformed attribute type and value");var s=r.getChildIdx(e,n);2!==s.length||e.substr(s[0],2);var a=i(e,s[0]),o=KJUR.asn1.ASN1Util.oidHexToInt(a);return KJUR.asn1.x509.OID.oid2atype(o)+"="+hextorstr(i(e,s[1]))},X509.getPublicKeyFromCertHex=function(e){var n=new X509;return n.readCertHex(e),n.getPublicKey()},X509.getPublicKeyFromCertPEM=function(e){var n=new X509;return n.readCertPEM(e),n.getPublicKey()},X509.getPublicKeyInfoPropOfCertPEM=function(e){var s,a,r=ASN1HEX.getVbyList,i={algparam:null};return(s=new X509).readCertPEM(e),a=s.getPublicKeyHex(),i.keyhex=r(a,0,[1],"03").substr(2),i.algoid=r(a,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(a,0,[0,1],"06")),i},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var X509CRL=function(e){var r=KJUR.lang.String.isHex,s=ASN1HEX.getV,a=ASN1HEX.getTLV,o=ASN1HEX.getVbyList,l=ASN1HEX.getTLVbyList,p=ASN1HEX.getTLVbyListEx,d=ASN1HEX.getIdxbyList,v=ASN1HEX.getIdxbyListEx,g=ASN1HEX.getChildIdx,f=new X509;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this._setPos=function(){var u=d(this.hex,0,[0,0]),m=this.hex.substr(u,2);if("02"==m)this.posSigAlg=1;else{if("30"!=m)throw new Error("malformed 1st item of TBSCertList: "+m);this.posSigAlg=0}var b,h=d(this.hex,0,[0,this.posSigAlg+3]),y=this.hex.substr(h,2);if("17"==y||"18"==y)b=d(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=b&&"30"==this.hex.substr(b,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==y)this.posRevCert=this.posSigAlg+3;else{if("a0"!=y)throw new Error("malformed nextUpdate or revCert tag: "+y);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(o(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var u=l(this.hex,0,[0,this.posSigAlg],"30");return f.getAlgorithmIdentifierName(u)},this.getIssuer=function(){var u=l(this.hex,0,[0,this.posSigAlg+1],"30");return f.getX500Name(u)},this.getThisUpdate=function(){var u=o(this.hex,0,[0,this.posSigAlg+2]);return result=hextorstr(u)},this.getNextUpdate=function(){var u=d(this.hex,0,[0,this.posSigAlg+3]),m=this.hex.substr(u,2);return"17"!=m&&"18"!=m?null:hextorstr(s(this.hex,u))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var u=[],m=d(this.hex,0,[0,this.posRevCert]),h=g(this.hex,m),y=0;y<h.length;y++){var b=a(this.hex,h[y]);u.push(this.getRevCert(b))}return u},this.getRevCert=function(u){var m={},h=g(u,0);return m.sn={hex:o(u,0,[0],"02")},m.date=hextorstr(o(u,0,[1])),3==h.length&&(m.ext=f.getExtParamArray(l(u,0,[2]))),m},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(u){var m=this.getSignatureAlgorithmField(),h=this.getSignatureValueHex(),y=l(this.hex,0,[0],"30"),b=new KJUR.crypto.Signature({alg:m});return b.init(u),b.updateHex(y),b.verify(h)},this.getParam=function(){var u={},m=this.getVersion();null!=m&&(u.version=m),u.sigalg=this.getSignatureAlgorithmField(),u.issuer=this.getIssuer(),u.thisupdate=this.getThisUpdate();var h=this.getNextUpdate();null!=h&&(u.nextupdate=h);var y=this.getRevCertArray();if(null!=y&&(u.revcert=y),-1!=v(this.hex,0,[0,"[0]"])){var c=p(this.hex,0,[0,"[0]",0]);u.ext=f.getExtParamArray(c)}return u.sighex=this.getSignatureValueHex(),u},"string"==typeof e&&(r(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=pemtohex(e)),this._setPos())};(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.jws||!KJUR.jws)&&(KJUR.jws={}),KJUR.jws.JWS=function(){var r=KJUR.jws.JWS.isSafeJSONString;this.parseJWS=function(i,s){if(void 0===this.parsedJWS||!s&&void 0===this.parsedJWS.sigvalH){var a=i.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==a)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var o=a[1],l=a[2],p=a[3],d=o+"."+l;if(this.parsedJWS={},this.parsedJWS.headB64U=o,this.parsedJWS.payloadB64U=l,this.parsedJWS.sigvalB64U=p,this.parsedJWS.si=d,!s){var v=b64utohex(p),g=parseBigInt(v,16);this.parsedJWS.sigvalH=v,this.parsedJWS.sigvalBI=g}var f=b64utoutf8(o),u=b64utoutf8(l);if(this.parsedJWS.headS=f,this.parsedJWS.payloadS=u,!r(f,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+f}}},KJUR.jws.JWS.sign=function(e,n,r,i,s){var h,y,b,l=KJUR.jws.JWS,p=l.readSafeJSONString,d=l.isSafeJSONString,v=KJUR.crypto,f=v.Mac,u=v.Signature,m=JSON;if("string"!=typeof n&&"object"!=typeof n)throw"spHeader must be JSON string or object: "+n;if("object"==typeof n&&(h=m.stringify(y=n)),"string"==typeof n){if(!d(h=n))throw"JWS Head is not safe JSON string: "+h;y=p(h)}if(b=r,"object"==typeof r&&(b=m.stringify(r)),(""==e||null==e)&&void 0!==y.alg&&(e=y.alg),""!=e&&null!=e&&void 0===y.alg&&(y.alg=e,h=m.stringify(y)),e!==y.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+y.alg;var c=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;c=l.jwsalg2sigalg[e];var x=utf8tob64u(h)+"."+utf8tob64u(b),A="";if("Hmac"==c.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var O=new f({alg:c,prov:"cryptojs",pass:i});O.updateString(x),A=O.doFinal()}else if(-1!=c.indexOf("withECDSA")){(F=new u({alg:c})).init(i,s),F.updateString(x);var w=F.sign();A=KJUR.crypto.ECDSA.asn1SigToConcatSig(w)}else if("none"!=c){var F;(F=new u({alg:c})).init(i,s),F.updateString(x),A=F.sign()}return x+"."+hextob64u(A)},KJUR.jws.JWS.verify=function(e,n,r){var g,a=KJUR.jws.JWS,o=a.readSafeJSONString,l=KJUR.crypto,p=l.ECDSA,d=l.Mac,v=l.Signature;void 0!==typeof RSAKey&&(g=RSAKey);var f=e.split(".");if(3!==f.length)return!1;var E,h=f[0]+"."+f[1],y=b64utohex(f[2]),b=o(b64utoutf8(f[0])),c=null;if(void 0===b.alg)throw"algorithm not specified in header";if(E=(c=b.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+c+":"))throw"algorithm '"+c+"' not accepted in the list";if("none"!=c&&null===n)throw"key shall be specified to verify.";if("string"==typeof n&&-1!=n.indexOf("-----BEGIN ")&&(n=KEYUTIL.getKey(n)),!("RS"!=E&&"PS"!=E||n instanceof g))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==E&&!(n instanceof p))throw"key shall be a ECDSA obj for ES* algs";var x=null;if(void 0===a.jwsalg2sigalg[b.alg])throw"unsupported alg name: "+c;if("none"==(x=a.jwsalg2sigalg[c]))throw"not supported";if("Hmac"==x.substr(0,4)){if(void 0===n)throw"hexadecimal key shall be specified for HMAC";var O=new d({alg:x,pass:n});return O.updateString(h),y==O.doFinal()}if(-1!=x.indexOf("withECDSA")){var w,F=null;try{F=p.concatSigToASN1Sig(y)}catch(P){return!1}return(w=new v({alg:x})).init(n),w.updateString(h),w.verify(F)}return(w=new v({alg:x})).init(n),w.updateString(h),w.verify(y)},KJUR.jws.JWS.parse=function(e){var s,a,n=e.split("."),r={};if(2!=n.length&&3!=n.length)throw"malformed sJWS: wrong number of '.' splitted elements";return s=n[1],3==n.length&&(a=n[2]),r.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(n[0])),r.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(s)),r.headerPP=JSON.stringify(r.headerObj,null,"  "),r.payloadPP=null==r.payloadObj?b64utoutf8(s):JSON.stringify(r.payloadObj,null,"  "),void 0!==a&&(r.sigHex=b64utohex(a)),r},KJUR.jws.JWS.verifyJWT=function(e,n,r){var s=KJUR.jws,a=s.JWS,o=a.readSafeJSONString,l=a.inArray,p=a.includedArray,d=e.split("."),v=d[0],g=d[1],m=(b64utohex(d[2]),o(b64utoutf8(v))),h=o(b64utoutf8(g));if(void 0===m.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!l(m.alg,r.alg)||void 0!==h.iss&&"object"==typeof r.iss&&!l(h.iss,r.iss)||void 0!==h.sub&&"object"==typeof r.sub&&!l(h.sub,r.sub))return!1;if(void 0!==h.aud&&"object"==typeof r.aud)if("string"==typeof h.aud){if(!l(h.aud,r.aud))return!1}else if("object"==typeof h.aud&&!p(h.aud,r.aud))return!1;var y=s.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(y=r.verifyAt),(void 0===r.gracePeriod||"number"!=typeof r.gracePeriod)&&(r.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+r.gracePeriod<y||void 0!==h.nbf&&"number"==typeof h.nbf&&y<h.nbf-r.gracePeriod||void 0!==h.iat&&"number"==typeof h.iat&&y<h.iat-r.gracePeriod||void 0!==h.jti&&void 0!==r.jti&&h.jti!==r.jti||!a.verify(e,n,r.alg))},KJUR.jws.JWS.includedArray=function(e,n){var r=KJUR.jws.JWS.inArray;if(null===e||"object"!=typeof e||"number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],n))return!1;return!0},KJUR.jws.JWS.inArray=function(e,n){if(null===n||"object"!=typeof n||"number"!=typeof n.length)return!1;for(var r=0;r<n.length;r++)if(n[r]==e)return!0;return!1},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(e,n,r){var i=null;try{return"object"!=typeof(i=jsonParse(e))||i.constructor===Array?0:(n&&(n[r]=i),1)}catch(s){return 0}},KJUR.jws.JWS.readSafeJSONString=function(e){var n=null;try{return"object"!=typeof(n=jsonParse(e))||n.constructor===Array?null:n}catch(r){return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var n=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return n[1]},KJUR.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var n="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";n+='"e":"'+e.e+'",',n+='"kty":"'+e.kty+'",',n+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";n+='"crv":"'+e.crv+'",',n+='"kty":"'+e.kty+'",',n+='"x":"'+e.x+'",',n+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";n+='"kty":"'+e.kty+'",',n+='"k":"'+e.k+'"}'}var r=rstrtohex(n);return hextob64u(KJUR.crypto.Util.hashHex(r,"sha256"))},KJUR.jws.IntDate={},KJUR.jws.IntDate.get=function(e){var n=KJUR.jws.IntDate,r=n.getNow,i=n.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return i(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},KJUR.jws.IntDate.getZulu=function(e){return zulutosec(e)},KJUR.jws.IntDate.getNow=function(){return~~(new Date/1e3)},KJUR.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(e){var n=new Date(1e3*e);return("0000"+n.getUTCFullYear()).slice(-4)+("00"+(n.getUTCMonth()+1)).slice(-2)+("00"+n.getUTCDate()).slice(-2)+("00"+n.getUTCHours()).slice(-2)+("00"+n.getUTCMinutes()).slice(-2)+("00"+n.getUTCSeconds()).slice(-2)+"Z"},(void 0===KJUR||!KJUR)&&(KJUR={}),(void 0===KJUR.jws||!KJUR.jws)&&(KJUR.jws={}),KJUR.jws.JWSJS=function(){var r=KJUR.jws.JWS,i=r.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(s){this.init();var a=s.split(".");if(3!=a.length)throw"malformed input JWS";this.aHeader.push(a[0]),this.sPayload=a[1],this.aSignature.push(a[2])},this.addSignature=function(s,a,o,l){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var p=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var v=KJUR.jws.JWS.sign(s,a,this.sPayload,o,l).split(".");this.aHeader.push(v[0]),this.aSignature.push(v[2])}catch(u){throw this.aHeader.length>p&&this.aHeader.pop(),this.aSignature.length>p&&this.aSignature.pop(),"addSignature failed: "+u}},this.verifyAll=function(s){if(this.aHeader.length!==s.length||this.aSignature.length!==s.length)return!1;for(var a=0;a<s.length;a++){var o=s[a];if(2!==o.length)return!1;if(!1===this.verifyNth(a,o[0],o[1]))return!1}return!0},this.verifyNth=function(s,a,o){if(this.aHeader.length<=s||this.aSignature.length<=s)return!1;var d=this.aHeader[s]+"."+this.sPayload+"."+this.aSignature[s],v=!1;try{v=r.verify(d,a,o)}catch(g){return!1}return v},this.readJWSJS=function(s){if("string"==typeof s){var a=i(s);if(null==a)throw"argument is not safe JSON object string";this.aHeader=a.headers,this.sPayload=a.payload,this.aSignature=a.signatures}else try{if(!(s.headers.length>0))throw"malformed header";if(this.aHeader=s.headers,"string"!=typeof s.payload)throw"malformed signatures";if(this.sPayload=s.payload,!(s.signatures.length>0))throw"malformed signatures";this.aSignature=s.signatures}catch(o){throw"malformed JWS-JS JSON object: "+o}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var qz=function(){Array.isArray||(Array.isArray=function(i){return"[object Array]"===Object.prototype.toString.call(i)}),Number.isInteger||(Number.isInteger=function(i){return"number"==typeof i&&isFinite(i)&&Math.floor(i)===i}),void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(i){return this}});var e={VERSION:"2.1.2",DEBUG:!1,log:{trace:function(){e.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){e.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE"},websocket:{connection:null,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(i,s,a){if(i.port.secure.length)!i.port.insecure.length&&!i.usingSecure&&(e.log.trace("No insecure ports specified - forcing secure connection"),i.usingSecure=!0);else{if(!i.port.insecure.length)return void a(new Error("No ports have been specified to connect over"));i.usingSecure&&(e.log.error("No secure ports specified - forcing insecure connection"),i.usingSecure=!1)}var l,o=function(){if(i.port.portIndex++,i.usingSecure&&i.port.portIndex>=i.port.secure.length||!i.usingSecure&&i.port.portIndex>=i.port.insecure.length){if(i.hostIndex>=i.host.length-1)return void a(new Error("Unable to establish connection with QZ"));i.hostIndex++,i.port.portIndex=0}e.websocket.setup.findConnection(i,s,a)};l=i.usingSecure?i.protocol.secure+i.host[i.hostIndex]+":"+i.port.secure[i.port.portIndex]:i.protocol.insecure+i.host[i.hostIndex]+":"+i.port.insecure[i.port.portIndex];try{e.log.trace("Attempting connection",l),e.websocket.connection=new e.tools.ws(l)}catch(p){return e.log.error(p),void o()}null!=e.websocket.connection?(e.websocket.connection.established=!1,e.websocket.connection.onopen=function(p){if(!e.websocket.connection.established&&(e.log.trace(p),e.log.info("Established connection with QZ Tray on "+l),e.websocket.setup.openConnection({resolve:s,reject:a}),i.keepAlive>0))var d=setInterval(function(){e.tools.isActive()?e.websocket.connection.send("ping"):clearInterval(d)},1e3*i.keepAlive)},e.websocket.connection.onclose=function(){e.websocket.connection&&"undefined"!=typeof navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&e.websocket.connection.onerror()},e.websocket.connection.onerror=function(p){e.log.trace(p),e.websocket.connection=null,o()}):a(new Error("Unable to create a websocket connection"))},openConnection:function(i){function s(a){void 0===a&&(a=null),r.api.getVersion().then(function(o){e.websocket.connection.version=o,e.websocket.connection.semver=o.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var l=0;l<e.websocket.connection.semver.length;l++){try{if(3==l&&0==e.websocket.connection.semver[l].toLowerCase().indexOf("rc")){e.websocket.connection.semver[l]=-e.websocket.connection.semver[l].replace(/\D/g,"");continue}e.websocket.connection.semver[l]=parseInt(e.websocket.connection.semver[l])}catch(p){}e.websocket.connection.semver.length<4&&(e.websocket.connection.semver[3]=0)}e.compatible.algorithm(!0)}).then(function(){e.websocket.connection.sendData({certificate:a,promise:i})})}e.websocket.connection.established=!0,e.websocket.connection.onclose=function(a){for(var o in e.log.trace(a),e.log.info("Closed connection with QZ Tray"),null!=this.promise&&this.promise.resolve(),e.websocket.callClose(a),e.websocket.connection=null,e.websocket.pendingCalls)e.websocket.pendingCalls.hasOwnProperty(o)&&e.websocket.pendingCalls[o].reject(new Error("Connection closed before response received"))},e.websocket.connection.onerror=function(a){e.websocket.callError(a)},e.websocket.connection.sendData=function(a){e.log.trace("Preparing object for websocket",a),null==a.timestamp&&(a.timestamp=Date.now(),"number"!=typeof a.timestamp&&(a.timestamp=(new Date).getTime())),null!=a.promise&&(a.uid=e.websocket.setup.newUID(),e.websocket.pendingCalls[a.uid]=a.promise),a.signAlgorithm=e.security.signAlgorithm,a.position={x:"undefined"!=typeof screen?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft):0,y:"undefined"!=typeof screen?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop):0};try{if(null!=a.call&&null==a.signature){var l=e.tools.hash(e.tools.stringify({call:a.call,params:a.params,timestamp:a.timestamp}));l.then||(l=e.tools.promise(function(p){p(l)})),l.then(function(p){return e.security.callSign(p)}).then(function(p){e.log.trace("Signature for call",p),a.signature=p,e.signContent=void 0,e.websocket.connection.send(e.tools.stringify(a))})}else e.log.trace("Signature for call",a.signature),e.websocket.connection.send(e.tools.stringify(a))}catch(p){e.log.error(p),null!=a.promise&&(a.promise.reject(p),delete e.websocket.pendingCalls[a.uid])}},e.websocket.connection.onmessage=function(a){var o=JSON.parse(a.data);if(null!=o.uid){e.log.trace("Received response from websocket",o);var l=e.websocket.pendingCalls[o.uid];null==l?e.log.allay("No promise found for returned response"):null!=o.error?l.reject(new Error(o.error)):l.resolve(o.result),delete e.websocket.pendingCalls[o.uid]}else if(null==o.type)e.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(o.type){case e.streams.serial:o.event||(o.event=JSON.stringify({portName:o.key,output:o.data})),e.serial.callSerial(JSON.parse(o.event));break;case e.streams.usb:o.event||(o.event=JSON.stringify({vendorId:o.key[0],productId:o.key[1],output:o.data})),e.usb.callUsb(JSON.parse(o.event));break;case e.streams.hid:e.hid.callHid(JSON.parse(o.event));break;case e.streams.printer:e.printers.callPrinter(JSON.parse(o.event));break;case e.streams.file:e.file.callFile(JSON.parse(o.event));break;default:e.log.allay("Cannot determine stream type for callback",o)}},e.security.callCert().then(s).catch(s)},newUID:function(){return(new Array(7).join("0")+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},dataPromise:function(i,s,a,o){return e.tools.promise(function(l,p){e.websocket.connection.sendData({call:i,promise:{resolve:l,reject:p},params:s,signature:a,timestamp:o})})},pendingCalls:{},errorCallbacks:[],callError:function(i){if(Array.isArray(e.websocket.errorCallbacks))for(var s=0;s<e.websocket.errorCallbacks.length;s++)e.websocket.errorCallbacks[s](i);else e.websocket.errorCallbacks(i)},closedCallbacks:[],callClose:function(i){if(Array.isArray(e.websocket.closedCallbacks))for(var s=0;s<e.websocket.closedCallbacks.length;s++)e.websocket.closedCallbacks[s](i);else e.websocket.closedCallbacks(i)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",altPrinting:!1,encoding:null,endOfDoc:null,perSpool:1}},serial:{serialCallbacks:[],callSerial:function(i){if(Array.isArray(e.serial.serialCallbacks))for(var s=0;s<e.serial.serialCallbacks.length;s++)e.serial.serialCallbacks[s](i);else e.serial.serialCallbacks(i)}},usb:{usbCallbacks:[],callUsb:function(i){if(Array.isArray(e.usb.usbCallbacks))for(var s=0;s<e.usb.usbCallbacks.length;s++)e.usb.usbCallbacks[s](i);else e.usb.usbCallbacks(i)}},hid:{hidCallbacks:[],callHid:function(i){if(Array.isArray(e.hid.hidCallbacks))for(var s=0;s<e.hid.hidCallbacks.length;s++)e.hid.hidCallbacks[s](i);else e.hid.hidCallbacks(i)}},printers:{printerCallbacks:[],callPrinter:function(i){if(Array.isArray(e.printers.printerCallbacks))for(var s=0;s<e.printers.printerCallbacks.length;s++)e.printers.printerCallbacks[s](i);else e.printers.printerCallbacks(i)}},file:{fileCallbacks:[],callFile:function(i){if(Array.isArray(e.file.fileCallbacks))for(var s=0;s<e.file.fileCallbacks.length;s++)e.file.fileCallbacks[s](i);else e.file.fileCallbacks(i)}},security:{certHandler:function(i,s){s()},callCert:function(){return"function"==typeof e.security.certHandler.then||"AsyncFunction"===e.security.certHandler.constructor.name?e.security.certHandler():e.tools.promise(e.security.certHandler)},signatureFactory:function(){return function(i){i()}},callSign:function(i){return"function"==typeof e.security.signatureFactory.then||"AsyncFunction"===e.security.signatureFactory.constructor.name?e.security.signatureFactory(i):e.tools.promise(e.security.signatureFactory(i))},signAlgorithm:"SHA1"},tools:{promise:function(i){return"undefined"!=typeof RSVP?new RSVP.Promise(i):"undefined"!=typeof Promise?new Promise(i):void e.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},stringify:function(i){var s=Array.prototype.toJSON;delete Array.prototype.toJSON;var a=JSON.stringify(i);return s&&(Array.prototype.toJSON=s),a},hash:function(i){return void 0!==Sha256?Sha256.hash(i):e.SHA.hash(i)},ws:"undefined"!=typeof WebSocket?WebSocket:null,absolute:function(i){if("undefined"!=typeof window&&"function"==typeof document.createElement){var s=document.createElement("a");return s.href=i,s.href}return"object"==typeof exports&&require("path").resolve(i),i},relative:function(i){for(var s=0;s<i.length;s++)if(i[s].constructor===Object){var a=!1;0===i[s].data.search(/data:image\/\w+;base64,/)?(i[s].flavor="base64",i[s].data=i[s].data.replace(/^data:image\/\w+;base64,/,"")):i[s].flavor?["FILE","XML"].indexOf(i[s].flavor.toUpperCase())>-1&&(a=!0):(i[s].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(i[s].format.toUpperCase())>-1||i[s].type&&(["PIXEL","IMAGE","PDF"].indexOf(i[s].type.toUpperCase())>-1&&!i[s].format||["HTML","PDF"].indexOf(i[s].type.toUpperCase())>-1&&(!i[s].format||"FILE"===i[s].format.toUpperCase())))&&(a=!0),a&&(i[s].data=e.tools.absolute(i[s].data)),i[s].options&&"string"==typeof i[s].options.overlay&&(i[s].options.overlay=e.tools.absolute(i[s].options.overlay))}},extend:function(i){"object"!=typeof i&&(i={});for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var o in a)if(a.hasOwnProperty(o)){if(i===a[o])continue;var l;a[o]&&a[o].constructor&&a[o].constructor===Object?(l=Array.isArray(a[o])?i[o]||[]:i[o]||{},i[o]=e.tools.extend(l,a[o])):void 0!==a[o]&&(i[o]=a[o])}}return i},versionCompare:function(i,s,a,o){if(e.tools.assertActive()){var l=e.websocket.connection.semver;return l[0]!=i?l[0]-i:null!=s&&l[1]!=s?l[1]-s:null!=a&&l[2]!=a?l[2]-a:null!=o&&l.length>3&&l[3]!=o?Number.isInteger(l[3])&&Number.isInteger(o)?l[3]-o:l[3].toString().localeCompare(o.toString()):0}},isVersion:function(i,s,a,o){return 0==e.tools.versionCompare(i,s,a,o)},isActive:function(){return null!=e.websocket.connection&&e.websocket.connection.established},assertActive:function(){if(e.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")}},compatible:{data:function(i){if(e.tools.isVersion(2,0)){e.log.trace("Converting print data to v2.0 for "+e.websocket.connection.version);for(var s=0;s<i.length;s++)i[s].constructor===Object&&(i[s].type&&"RAW"===i[s].type.toUpperCase()&&i[s].format&&"IMAGE"===i[s].format.toUpperCase()&&(i[s].flavor&&"BASE64"===i[s].flavor.toUpperCase()&&(i[s].data="data:image/compat;base64,"+i[s].data),i[s].flavor="IMAGE"),(i[s].type&&"RAW"===i[s].type.toUpperCase()||i[s].format&&"COMMAND"===i[s].format.toUpperCase())&&(i[s].format="RAW"),i[s].type=i[s].format,i[s].format=i[s].flavor,delete i[s].flavor)}},config:function(i,s){return e.tools.isVersion(2,0)&&(s.rasterize||(i.rasterize=!0)),i},networking:function(i,s,a,o,l){return e.tools.isVersion(2,0)?e.tools.promise(function(p,d){e.websocket.dataPromise("websocket.getNetworkInfo",{hostname:i,port:s},a,o).then(function(v){p(void 0!==l?l(v):v)},d)}):e.tools.promise(function(p,d){e.websocket.dataPromise("networking.device",{hostname:i,port:s},a,o).then(function(v){p({ipAddress:v.ip,macAddress:v.mac})},d)})},algorithm:function(i){return!e.tools.isActive()||!e.tools.isVersion(2,0)||(i||e.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1)}},SHA:{hash:function(i){i=i.utf8Encode()+String.fromCharCode(128);for(var s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l=Math.ceil((i.length/4+2)/16),p=new Array(l),d=0;d<l;d++){p[d]=new Array(16);for(var v=0;v<16;v++)p[d][v]=i.charCodeAt(64*d+4*v)<<24|i.charCodeAt(64*d+4*v+1)<<16|i.charCodeAt(64*d+4*v+2)<<8|i.charCodeAt(64*d+4*v+3)}p[l-1][14]=8*(i.length-1)/Math.pow(2,32),p[l-1][14]=Math.floor(p[l-1][14]),p[l-1][15]=8*(i.length-1)&4294967295;var f,u,m,h,y,b,c,E,g=new Array(64);for(d=0;d<l;d++){for(var S=0;S<16;S++)g[S]=p[d][S];for(S=16;S<64;S++)g[S]=e.SHA._dev1(g[S-2])+g[S-7]+e.SHA._dev0(g[S-15])+g[S-16]&4294967295;for(f=a[0],u=a[1],m=a[2],h=a[3],y=a[4],b=a[5],c=a[6],E=a[7],S=0;S<64;S++){var x=E+e.SHA._sig1(y)+e.SHA._ch(y,b,c)+s[S]+g[S],A=e.SHA._sig0(f)+e.SHA._maj(f,u,m);E=c,c=b,b=y,y=h+x&4294967295,h=m,m=u,u=f,f=x+A&4294967295}a[0]=a[0]+f&4294967295,a[1]=a[1]+u&4294967295,a[2]=a[2]+m&4294967295,a[3]=a[3]+h&4294967295,a[4]=a[4]+y&4294967295,a[5]=a[5]+b&4294967295,a[6]=a[6]+c&4294967295,a[7]=a[7]+E&4294967295}return e.SHA._hexStr(a[0])+e.SHA._hexStr(a[1])+e.SHA._hexStr(a[2])+e.SHA._hexStr(a[3])+e.SHA._hexStr(a[4])+e.SHA._hexStr(a[5])+e.SHA._hexStr(a[6])+e.SHA._hexStr(a[7])},_rotr:function(i,s){return s>>>i|s<<32-i},_sig0:function(i){return e.SHA._rotr(2,i)^e.SHA._rotr(13,i)^e.SHA._rotr(22,i)},_sig1:function(i){return e.SHA._rotr(6,i)^e.SHA._rotr(11,i)^e.SHA._rotr(25,i)},_dev0:function(i){return e.SHA._rotr(7,i)^e.SHA._rotr(18,i)^i>>>3},_dev1:function(i){return e.SHA._rotr(17,i)^e.SHA._rotr(19,i)^i>>>10},_ch:function(i,s,a){return i&s^~i&a},_maj:function(i,s,a){return i&s^i&a^s&a},_hexStr:function(i){for(var s="",o=7;o>=0;o--)s+=(i>>>4*o&15).toString(16);return s}}};function n(i,s){this.config=e.tools.extend({},e.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(a){"string"==typeof a&&(a={name:a}),this.printer=a},this.getPrinter=function(){return this.printer},this.reconfigure=function(a){for(var o in a)void 0!==a[o]&&(this._dirtyOpts[o]=!0);e.tools.extend(this.config,a)},this.getOptions=function(){return e.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(i),this.reconfigure(s)}n.prototype.print=function(i,s,a){r.print(this,i,s,a)};var r={websocket:{isActive:function(){return e.tools.isActive()},connect:function(i){return e.tools.promise(function(s,a){if(e.tools.isActive())a(new Error("An open connection with QZ Tray already exists"));else if(null==e.websocket.connection)if(e.tools.ws)if(e.tools.ws.CLOSED&&2!=e.tools.ws.CLOSED){null==i&&(i={}),("undefined"==typeof location||"https:"!==location.protocol)&&void 0===i.usingSecure&&(e.log.trace("Disabling secure ports due to insecure page"),i.usingSecure=!1),void 0!==i.host&&!Array.isArray(i.host)&&(i.host=[i.host]);var o=function(l){var p=!1,d=function(){p||(p=!0,i&&l<i.retries?o(l+1):(e.websocket.connection=null,a.apply(null,arguments)))},v=function(){var g=e.tools.extend({},e.websocket.connectConfig,i);e.websocket.setup.findConnection(g,s,d)};0==l?v():setTimeout(v,1e3*i.delay)};o(0)}else a(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));else a(new Error("WebSocket not supported by this browser"));else a(new Error("The current connection attempt has not returned yet"))})},disconnect:function(){return e.tools.promise(function(i,s){e.tools.isActive()?(e.websocket.connection.close(),e.websocket.connection.promise={resolve:i,reject:s}):s(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(i){e.websocket.errorCallbacks=i},setClosedCallbacks:function(i){e.websocket.closedCallbacks=i},getNetworkInfo:e.compatible.networking,getConnectionInfo:function(){if(e.tools.assertActive()){var i=e.websocket.connection.url.split(/[:\/]+/g);return{socket:i[0],host:i[1],port:+i[2]}}}},printers:{getDefault:function(i,s){return e.websocket.dataPromise("printers.getDefault",null,i,s)},find:function(i,s,a){return e.websocket.dataPromise("printers.find",{query:i},s,a)},details:function(){return e.websocket.dataPromise("printers.detail")},startListening:function(i){return Array.isArray(i)||(i=[i]),e.websocket.dataPromise("printers.startListening",{printerNames:i})},stopListening:function(){return e.websocket.dataPromise("printers.stopListening")},getStatus:function(){return e.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(i){e.printers.printerCallbacks=i}},configs:{setDefaults:function(i){e.tools.extend(e.printing.defaultConfig,i)},create:function(i,s){return new n(i,s)}},print:function(i,s){var a=!1,o=[],l=[];arguments.length>=3&&("boolean"==typeof arguments[2]?(a=arguments[2],arguments.length>=5&&(o=arguments[3],l=arguments[4])):arguments.length>=4&&(o=arguments[2],l=arguments[3]),o&&!Array.isArray(o)&&(o=[o]),l&&!Array.isArray(l)&&(l=[l])),Array.isArray(i)||(i=[i]),Array.isArray(s[0])||(s=[s]);for(var p=0;p<s.length;p++)e.tools.relative(s[p]),e.compatible.data(s[p]);for(var d=function(h){var y={printer:h.config.getPrinter(),options:h.config.getOptions(),data:h.data};return e.websocket.dataPromise("print",y,h.signature,h.timestamp)},v=[],g=0;g<i.length||g<s.length;g++)!function(h){var y={config:i[Math.min(h,i.length-1)],data:s[Math.min(h,s.length-1)],signature:o[h],timestamp:l[h]};v.push(function(){return d(y)})}(g);var f=null;if(a){var u=[];f=function(h){u.push(h)},v.push(function(){return e.tools.promise(function(h,y){u.length?y(u):h()})})}var m=null;return v.reduce(function(h,y){return m=h.catch(f).then(y)},e.tools.promise(function(h){h()})),m},serial:{findPorts:function(){return e.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(i){e.serial.serialCallbacks=i},openPort:function(i,s){return e.websocket.dataPromise("serial.openPort",{port:i,options:s})},sendData:function(i,s,a){return e.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof s&&(s={data:s,type:"PLAIN"}),s.type&&"FILE"==s.type.toUpperCase()&&(s.data=e.tools.absolute(s.data))),e.websocket.dataPromise("serial.sendData",{port:i,data:s,options:a})},closePort:function(i){return e.websocket.dataPromise("serial.closePort",{port:i})}},usb:{listDevices:function(i){return e.websocket.dataPromise("usb.listDevices",{includeHubs:i})},listInterfaces:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.listInterfaces",i)},listEndpoints:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),e.websocket.dataPromise("usb.listEndpoints",i)},setUsbCallbacks:function(i){e.usb.usbCallbacks=i},claimDevice:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),e.websocket.dataPromise("usb.claimDevice",i)},isClaimed:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.isClaimed",i)},sendData:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),e.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof i.data&&(i.data={data:i.data,type:"PLAIN"}),i.data.type&&"FILE"==i.data.type.toUpperCase()&&(i.data.data=e.tools.absolute(i.data.data))),e.websocket.dataPromise("usb.sendData",i)},readData:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),e.websocket.dataPromise("usb.readData",i)},openStream:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),e.websocket.dataPromise("usb.openStream",i)},closeStream:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),e.websocket.dataPromise("usb.closeStream",i)},releaseDevice:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.releaseDevice",i)}},hid:{listDevices:function(){return e.websocket.dataPromise("hid.listDevices")},startListening:function(){return e.websocket.dataPromise("hid.startListening")},stopListening:function(){return e.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(i){e.hid.hidCallbacks=i},claimDevice:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.claimDevice",i)},isClaimed:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.isClaimed",i)},sendData:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),e.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof i.data&&(i.data={data:i.data,type:"PLAIN"}),i.data.type&&"FILE"==i.data.type.toUpperCase()&&(i.data.data=e.tools.absolute(i.data.data))),e.websocket.dataPromise("hid.sendData",i)},readData:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),e.websocket.dataPromise("hid.readData",i)},openStream:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),e.websocket.dataPromise("hid.openStream",i)},closeStream:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.closeStream",i)},releaseDevice:function(i){return"object"!=typeof i&&(i={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.releaseDevice",i)}},file:{list:function(i,s){var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.list",a)},read:function(i,s){var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.read",a)},write:function(i,s){var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.write",a)},remove:function(i,s){var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.remove",a)},startListening:function(i,s){s&&void 0!==s.include&&!Array.isArray(s.include)&&(s.include=[s.include]),s&&void 0!==s.exclude&&!Array.isArray(s.exclude)&&(s.exclude=[s.exclude]);var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.startListening",a)},stopListening:function(i,s){var a=e.tools.extend({path:i},s);return e.websocket.dataPromise("file.stopListening",a)},setFileCallbacks:function(i){e.file.fileCallbacks=i}},networking:{device:function(i,s){return e.tools.isVersion(2,0)?e.compatible.networking(i,s,null,null,function(a){return{ip:a.ipAddress,mac:a.macAddress}}):e.websocket.dataPromise("networking.device",{hostname:i,port:s})},devices:function(i,s){return e.tools.isVersion(2,0)?e.compatible.networking(i,s,null,null,function(a){return[{ip:a.ipAddress,mac:a.macAddress}]}):e.websocket.dataPromise("networking.devices",{hostname:i,port:s})}},security:{setCertificatePromise:function(i){e.security.certHandler=i},setSignaturePromise:function(i){e.security.signatureFactory=i},setSignatureAlgorithm:function(i){console.log("Seteando alg",i),e.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(i.toUpperCase())<0?e.log.error("Signing algorithm '"+i+"' is not supported."):e.security.signAlgorithm=i)},getSignatureAlgorithm:function(){return e.security.signAlgorithm}},api:{showDebug:function(i){return e.DEBUG=i},getVersion:function(){return e.websocket.dataPromise("getVersion")},isVersion:e.tools.isVersion,isVersionGreater:function(i,s,a,o){return e.tools.versionCompare(i,s,a,o)>0},isVersionLess:function(i,s,a,o){return e.tools.versionCompare(i,s,a,o)<0},setPromiseType:function(i){e.tools.promise=i},setSha256Type:function(i){e.tools.hash=i},setWebSocketType:function(i){e.tools.ws=i}},version:e.VERSION};return r}();!function(){if("function"==typeof define&&define.amd)define(qz),console.log("ffff");else if("object"==typeof exports){console.log("oooo"),module.exports=qz;try{var e=require("crypto");qz.api.setSha256Type(function(n){return e.createHash("sha256").update(n).digest("hex")})}catch(n){console.log(n)}}else window.qz=qz}();var Sha256={hash:function(e){e=e.utf8Encode();var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];e+=String.fromCharCode(128);for(var s=Math.ceil((e.length/4+2)/16),a=new Array(s),o=0;s>o;o++){a[o]=new Array(16);for(var l=0;16>l;l++)a[o][l]=e.charCodeAt(64*o+4*l)<<24|e.charCodeAt(64*o+4*l+1)<<16|e.charCodeAt(64*o+4*l+2)<<8|e.charCodeAt(64*o+4*l+3)}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;var p,d,v,g,f,u,m,h,y=new Array(64);for(o=0;s>o;o++){for(var b=0;16>b;b++)y[b]=a[o][b];for(b=16;64>b;b++)y[b]=Sha256.\u03c31(y[b-2])+y[b-7]+Sha256.\u03c30(y[b-15])+y[b-16]&4294967295;for(p=r[0],d=r[1],v=r[2],g=r[3],f=r[4],u=r[5],m=r[6],h=r[7],b=0;64>b;b++){var c=h+Sha256.\u03a31(f)+Sha256.Ch(f,u,m)+n[b]+y[b],E=Sha256.\u03a30(p)+Sha256.Maj(p,d,v);h=m,m=u,u=f,f=g+c&4294967295,g=v,v=d,d=p,p=c+E&4294967295}r[0]=r[0]+p&4294967295,r[1]=r[1]+d&4294967295,r[2]=r[2]+v&4294967295,r[3]=r[3]+g&4294967295,r[4]=r[4]+f&4294967295,r[5]=r[5]+u&4294967295,r[6]=r[6]+m&4294967295,r[7]=r[7]+h&4294967295}return Sha256.toHexStr(r[0])+Sha256.toHexStr(r[1])+Sha256.toHexStr(r[2])+Sha256.toHexStr(r[3])+Sha256.toHexStr(r[4])+Sha256.toHexStr(r[5])+Sha256.toHexStr(r[6])+Sha256.toHexStr(r[7])},ROTR:function(e,n){return n>>>e|n<<32-e},\u03a30:function(e){return Sha256.ROTR(2,e)^Sha256.ROTR(13,e)^Sha256.ROTR(22,e)},\u03a31:function(e){return Sha256.ROTR(6,e)^Sha256.ROTR(11,e)^Sha256.ROTR(25,e)},\u03c30:function(e){return Sha256.ROTR(7,e)^Sha256.ROTR(18,e)^e>>>3},\u03c31:function(e){return Sha256.ROTR(17,e)^Sha256.ROTR(19,e)^e>>>10},Ch:function(e,n,r){return e&n^~e&r},Maj:function(e,n,r){return e&n^e&r^n&r},toHexStr:function(e){for(var r="",i=7;i>=0;i--)r+=(e>>>4*i&15).toString(16);return r}};void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(e){return this}}),"undefined"!=typeof module&&module.exports&&(module.exports=Sha256),"function"==typeof define&&define.amd&&define([],function(){return Sha256}),function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Quill=r():n.Quill=r()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function r(i){if(n[i])return n[i].exports;var s=n[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=n,r.d=function(i,s,a){r.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:a})},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=109)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(17),s=r(18),a=r(19),o=r(45),l=r(46),p=r(47),d=r(48),v=r(49),g=r(12),f=r(32),u=r(33),m=r(31),h=r(1);n.default={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:i.default,Format:s.default,Leaf:a.default,Embed:d.default,Scroll:o.default,Block:p.default,Inline:l.default,Text:v.default,Attributor:{Attribute:g.default,Class:f.default,Style:u.default,Store:m.default}}},function(e,n,r){"use strict";var m,i=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,y){h.__proto__=y}||function(h,y){for(var b in y)y.hasOwnProperty(b)&&(h[b]=y[b])},function(h,y){function b(){this.constructor=h}m(h,y),h.prototype=null===y?Object.create(y):(b.prototype=y.prototype,new b)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(m){function h(y){var b=this;return(b=m.call(this,y="[Parchment] "+y)||this).message=y,b.name=b.constructor.name,b}return i(h,m),h}(Error);n.ParchmentError=s;var d,a={},o={},l={},p={};function f(m,h){var y;if(void 0===h&&(h=d.ANY),"string"==typeof m)y=p[m]||a[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)y=p.text;else if("number"==typeof m)m&d.LEVEL&d.BLOCK?y=p.block:m&d.LEVEL&d.INLINE&&(y=p.inline);else if(m instanceof HTMLElement){var b=(m.getAttribute("class")||"").split(/\s+/);for(var c in b)if(y=o[b[c]])break;y=y||l[m.tagName]}return null==y?null:h&d.LEVEL&y.scope&&h&d.TYPE&y.scope?y:null}n.DATA_KEY="__blot",function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"}(d=n.Scope||(n.Scope={})),n.create=function v(m,h){var y=f(m);if(null==y)throw new s("Unable to create "+m+" blot");var b=y,c=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:b.create(h);return new b(c,h)},n.find=function g(m,h){return void 0===h&&(h=!1),null==m?null:null!=m[n.DATA_KEY]?m[n.DATA_KEY].blot:h?g(m.parentNode,h):null},n.query=f,n.register=function u(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];if(m.length>1)return m.map(function(c){return u(c)});var y=m[0];if("string"!=typeof y.blotName&&"string"!=typeof y.attrName)throw new s("Invalid definition");if("abstract"===y.blotName)throw new s("Cannot register abstract class");if(p[y.blotName||y.attrName]=y,"string"==typeof y.keyName)a[y.keyName]=y;else if(null!=y.className&&(o[y.className]=y),null!=y.tagName){y.tagName=Array.isArray(y.tagName)?y.tagName.map(function(c){return c.toUpperCase()}):y.tagName.toUpperCase();var b=Array.isArray(y.tagName)?y.tagName:[y.tagName];b.forEach(function(c){(null==l[c]||null==y.className)&&(l[c]=y)})}return y}},function(e,n,r){var i=r(51),s=r(11),a=r(3),o=r(20),l=String.fromCharCode(0),p=function(d){this.ops=Array.isArray(d)?d:null!=d&&Array.isArray(d.ops)?d.ops:[]};p.prototype.insert=function(d,v){var g={};return 0===d.length?this:(g.insert=d,null!=v&&"object"==typeof v&&Object.keys(v).length>0&&(g.attributes=v),this.push(g))},p.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},p.prototype.retain=function(d,v){if(d<=0)return this;var g={retain:d};return null!=v&&"object"==typeof v&&Object.keys(v).length>0&&(g.attributes=v),this.push(g)},p.prototype.push=function(d){var v=this.ops.length,g=this.ops[v-1];if(d=a(!0,{},d),"object"==typeof g){if("number"==typeof d.delete&&"number"==typeof g.delete)return this.ops[v-1]={delete:g.delete+d.delete},this;if("number"==typeof g.delete&&null!=d.insert&&"object"!=typeof(g=this.ops[(v-=1)-1]))return this.ops.unshift(d),this;if(s(d.attributes,g.attributes)){if("string"==typeof d.insert&&"string"==typeof g.insert)return this.ops[v-1]={insert:g.insert+d.insert},"object"==typeof d.attributes&&(this.ops[v-1].attributes=d.attributes),this;if("number"==typeof d.retain&&"number"==typeof g.retain)return this.ops[v-1]={retain:g.retain+d.retain},"object"==typeof d.attributes&&(this.ops[v-1].attributes=d.attributes),this}}return v===this.ops.length?this.ops.push(d):this.ops.splice(v,0,d),this},p.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},p.prototype.filter=function(d){return this.ops.filter(d)},p.prototype.forEach=function(d){this.ops.forEach(d)},p.prototype.map=function(d){return this.ops.map(d)},p.prototype.partition=function(d){var v=[],g=[];return this.forEach(function(f){(d(f)?v:g).push(f)}),[v,g]},p.prototype.reduce=function(d,v){return this.ops.reduce(d,v)},p.prototype.changeLength=function(){return this.reduce(function(d,v){return v.insert?d+o.length(v):v.delete?d-v.delete:d},0)},p.prototype.length=function(){return this.reduce(function(d,v){return d+o.length(v)},0)},p.prototype.slice=function(d,v){d=d||0,"number"!=typeof v&&(v=1/0);for(var g=[],f=o.iterator(this.ops),u=0;u<v&&f.hasNext();){var m;u<d?m=f.next(d-u):(m=f.next(v-u),g.push(m)),u+=o.length(m)}return new p(g)},p.prototype.compose=function(d){var v=o.iterator(this.ops),g=o.iterator(d.ops),f=[],u=g.peek();if(null!=u&&"number"==typeof u.retain&&null==u.attributes){for(var m=u.retain;"insert"===v.peekType()&&v.peekLength()<=m;)m-=v.peekLength(),f.push(v.next());u.retain-m>0&&g.next(u.retain-m)}for(var h=new p(f);v.hasNext()||g.hasNext();)if("insert"===g.peekType())h.push(g.next());else if("delete"===v.peekType())h.push(v.next());else{var y=Math.min(v.peekLength(),g.peekLength()),b=v.next(y),c=g.next(y);if("number"==typeof c.retain){var E={};"number"==typeof b.retain?E.retain=y:E.insert=b.insert;var S=o.attributes.compose(b.attributes,c.attributes,"number"==typeof b.retain);if(S&&(E.attributes=S),h.push(E),!g.hasNext()&&s(h.ops[h.ops.length-1],E)){var x=new p(v.rest());return h.concat(x).chop()}}else"number"==typeof c.delete&&"number"==typeof b.retain&&h.push(c)}return h.chop()},p.prototype.concat=function(d){var v=new p(this.ops.slice());return d.ops.length>0&&(v.push(d.ops[0]),v.ops=v.ops.concat(d.ops.slice(1))),v},p.prototype.diff=function(d,v){if(this.ops===d.ops)return new p;var g=[this,d].map(function(y){return y.map(function(b){if(null!=b.insert)return"string"==typeof b.insert?b.insert:l;throw new Error("diff() called "+(y===d?"on":"with")+" non-document")}).join("")}),f=new p,u=i(g[0],g[1],v),m=o.iterator(this.ops),h=o.iterator(d.ops);return u.forEach(function(y){for(var b=y[1].length;b>0;){var c=0;switch(y[0]){case i.INSERT:c=Math.min(h.peekLength(),b),f.push(h.next(c));break;case i.DELETE:c=Math.min(b,m.peekLength()),m.next(c),f.delete(c);break;case i.EQUAL:c=Math.min(m.peekLength(),h.peekLength(),b);var E=m.next(c),S=h.next(c);s(E.insert,S.insert)?f.retain(c,o.attributes.diff(E.attributes,S.attributes)):f.push(S).delete(c)}b-=c}}),f.chop()},p.prototype.eachLine=function(d,v){v=v||"\n";for(var g=o.iterator(this.ops),f=new p,u=0;g.hasNext();){if("insert"!==g.peekType())return;var m=g.peek(),h=o.length(m)-g.peekLength(),y="string"==typeof m.insert?m.insert.indexOf(v,h)-h:-1;if(y<0)f.push(g.next());else if(y>0)f.push(g.next(y));else{if(!1===d(f,g.next(1).attributes||{},u))return;u+=1,f=new p}}f.length()>0&&d(f,{},u)},p.prototype.transform=function(d,v){if(v=!!v,"number"==typeof d)return this.transformPosition(d,v);for(var g=o.iterator(this.ops),f=o.iterator(d.ops),u=new p;g.hasNext()||f.hasNext();)if("insert"!==g.peekType()||!v&&"insert"===f.peekType())if("insert"===f.peekType())u.push(f.next());else{var m=Math.min(g.peekLength(),f.peekLength()),h=g.next(m),y=f.next(m);if(h.delete)continue;y.delete?u.push(y):u.retain(m,o.attributes.transform(h.attributes,y.attributes,v))}else u.retain(o.length(g.next()));return u.chop()},p.prototype.transformPosition=function(d,v){v=!!v;for(var g=o.iterator(this.ops),f=0;g.hasNext()&&f<=d;){var u=g.peekLength(),m=g.peekType();g.next(),"delete"!==m?("insert"===m&&(f<d||!v)&&(d+=u),f+=u):d-=Math.min(u,d-f)}return d},e.exports=p},function(e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(g){return"function"==typeof Array.isArray?Array.isArray(g):"[object Array]"===i.call(g)},l=function(g){if(!g||"[object Object]"!==i.call(g))return!1;var m,f=r.call(g,"constructor"),u=g.constructor&&g.constructor.prototype&&r.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!f&&!u)return!1;for(m in g);return void 0===m||r.call(g,m)},p=function(g,f){s&&"__proto__"===f.name?s(g,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):g[f.name]=f.newValue},d=function(g,f){if("__proto__"===f){if(!r.call(g,f))return;if(a)return a(g,f).value}return g[f]};e.exports=function v(){var g,f,u,m,h,y,b=arguments[0],c=1,E=arguments.length,S=!1;for("boolean"==typeof b&&(S=b,b=arguments[1]||{},c=2),(null==b||"object"!=typeof b&&"function"!=typeof b)&&(b={});c<E;++c)if(null!=(g=arguments[c]))for(f in g)u=d(b,f),b!==(m=d(g,f))&&(S&&m&&(l(m)||(h=o(m)))?(h?(h=!1,y=u&&o(u)?u:[]):y=u&&l(u)?u:{},p(b,{name:f,newValue:v(S,y,m)})):void 0!==m&&p(b,{name:f,newValue:m}));return b}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=function(){function w(P,T){for(var D=0;D<T.length;D++){var H=T[D];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(P,H.key,H)}}return function(P,T,D){return T&&w(P.prototype,T),D&&w(P,D),P}}(),s=function w(P,T,D){null===P&&(P=Function.prototype);var H=Object.getOwnPropertyDescriptor(P,T);if(void 0===H){var I=Object.getPrototypeOf(P);return null===I?void 0:w(I,T,D)}if("value"in H)return H.value;var _=H.get;return void 0===_?void 0:_.call(D)},o=b(r(3)),p=b(r(2)),v=b(r(0)),f=b(r(16)),m=b(r(6)),y=b(r(7));function b(w){return w&&w.__esModule?w:{default:w}}function c(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")}function E(w,P){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||"object"!=typeof P&&"function"!=typeof P?w:P}function S(w,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function, not "+typeof P);w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(w,P):w.__proto__=P)}var A=function(w){function P(){return c(this,P),E(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return S(P,w),i(P,[{key:"attach",value:function(){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"attach",this).call(this),this.attributes=new v.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new p.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,H){var I=v.default.query(D,v.default.Scope.BLOCK_ATTRIBUTE);null!=I&&this.attributes.attribute(I,H)}},{key:"formatAt",value:function(D,H,I,_){this.format(I,_)}},{key:"insertAt",value:function(D,H,I){if("string"==typeof H&&H.endsWith("\n")){var _=v.default.create(O.blotName);this.parent.insertBefore(_,0===D?this:this.next),_.insertAt(0,H.slice(0,-1))}else s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,D,H,I)}}]),P}(v.default.Embed);A.scope=v.default.Scope.BLOCK_BLOT;var O=function(w){function P(T){c(this,P);var D=E(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,T));return D.cache={},D}return S(P,w),i(P,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(v.default.Leaf).reduce(function(D,H){return 0===H.length()?D:D.insert(H.value(),F(H))},new p.default).insert("\n",F(this))),this.cache.delta}},{key:"deleteAt",value:function(D,H){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,D,H),this.cache={}}},{key:"formatAt",value:function(D,H,I,_){H<=0||(v.default.query(I,v.default.Scope.BLOCK)?D+H===this.length()&&this.format(I,_):s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,D,Math.min(H,this.length()-D-1),I,_),this.cache={})}},{key:"insertAt",value:function(D,H,I){if(null!=I)return s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,D,H,I);if(0!==H.length){var _=H.split("\n"),j=_.shift();j.length>0&&(D<this.length()-1||null==this.children.tail?s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),j):this.children.tail.insertAt(this.children.tail.length(),j),this.cache={});var R=this;_.reduce(function(L,N){return(R=R.split(L,!0)).insertAt(0,N),N.length},D+j.length)}}},{key:"insertBefore",value:function(D,H){var I=this.children.head;s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,D,H),I instanceof f.default&&I.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(D,H){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"moveChildren",this).call(this,D,H),this.cache={}}},{key:"optimize",value:function(D){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(H&&(0===D||D>=this.length()-1)){var I=this.clone();return 0===D?(this.parent.insertBefore(I,this),this):(this.parent.insertBefore(I,this.next),I)}var _=s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"split",this).call(this,D,H);return this.cache={},_}}]),P}(v.default.Block);function F(w){var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==w||("function"==typeof w.formats&&(P=(0,o.default)(P,w.formats())),null==w.parent||"scroll"==w.parent.blotName||w.parent.statics.scope!==w.statics.scope)?P:F(w.parent,P)}O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[m.default,v.default.Embed,y.default],n.bubbleFormats=F,n.BlockEmbed=A,n.default=O},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s=function(L,N){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return function R(L,N){var k=[],B=!0,q=!1,V=void 0;try{for(var M,C=L[Symbol.iterator]();!(B=(M=C.next()).done)&&(k.push(M.value),!N||k.length!==N);B=!0);}catch(K){q=!0,V=K}finally{try{!B&&C.return&&C.return()}finally{if(q)throw V}}return k}(L,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function R(L,N){for(var k=0;k<N.length;k++){var B=N[k];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(L,B.key,B)}}return function(L,N,k){return N&&R(L.prototype,N),k&&R(L,k),L}}();r(50);var l=F(r(2)),d=F(r(14)),g=F(r(8)),u=F(r(9)),h=F(r(0)),y=r(15),b=F(y),E=F(r(3)),x=F(r(10)),O=F(r(34));function F(R){return R&&R.__esModule?R:{default:R}}function w(R,L,N){return L in R?Object.defineProperty(R,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):R[L]=N,R}function P(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}var T=(0,x.default)("quill"),D=function(){function R(L){var N=this,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(P(this,R),this.options=H(L,k),this.container=this.options.container,null==this.container)return T.error("Invalid Quill container",L);this.options.debug&&R.debug(this.options.debug);var B=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=h.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(V){V===g.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(V,C){var M=N.selection.lastRange,K=M&&0===M.length?M.index:void 0;I.call(N,function(){return N.editor.update(null,C,K)},V)});var q=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+B+"<p><br></p></div>");this.setContents(q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(R,null,[{key:"debug",value:function(N){!0===N&&(N="log"),x.default.level(N)}},{key:"find",value:function(N){return N.__quill||h.default.find(N)}},{key:"import",value:function(N){return null==this.imports[N]&&T.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,k){var B=this,q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof N){var V=N.attrName||N.blotName;"string"==typeof V?this.register("formats/"+V,N,k):Object.keys(N).forEach(function(C){B.register(C,N[C],k)})}else null!=this.imports[N]&&!q&&T.warn("Overwriting "+N+" with",k),this.imports[N]=k,(N.startsWith("blots/")||N.startsWith("formats/"))&&"abstract"!==k.blotName?h.default.register(k):N.startsWith("modules")&&"function"==typeof k.register&&k.register()}}]),a(R,[{key:"addContainer",value:function(N){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof N){var B=N;(N=document.createElement("div")).classList.add(B)}return this.container.insertBefore(N,k),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,k,B){var q=this,V=_(N,k,B),C=s(V,4);return I.call(this,function(){return q.editor.deleteText(N,k)},B=C[3],N=C[0],-1*(k=C[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,k){var B=this,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.default.sources.API;return I.call(this,function(){var V=B.getSelection(!0),C=new l.default;if(null==V)return C;if(h.default.query(N,h.default.Scope.BLOCK))C=B.editor.formatLine(V.index,V.length,w({},N,k));else{if(0===V.length)return B.selection.format(N,k),C;C=B.editor.formatText(V.index,V.length,w({},N,k))}return B.setSelection(V,g.default.sources.SILENT),C},q)}},{key:"formatLine",value:function(N,k,B,q,V){var M,C=this,K=_(N,k,B,q,V),U=s(K,4);return k=U[1],M=U[2],I.call(this,function(){return C.editor.formatLine(N,k,M)},V=U[3],N=U[0],0)}},{key:"formatText",value:function(N,k,B,q,V){var M,C=this,K=_(N,k,B,q,V),U=s(K,4);return k=U[1],M=U[2],I.call(this,function(){return C.editor.formatText(N,k,M)},V=U[3],N=U[0],0)}},{key:"getBounds",value:function(N){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=void 0;B="number"==typeof N?this.selection.getBounds(N,k):this.selection.getBounds(N.index,N.length);var q=this.container.getBoundingClientRect();return{bottom:B.bottom-q.top,height:B.height,left:B.left-q.left,right:B.right-q.left,top:B.top-q.top,width:B.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-N,B=_(N,k),q=s(B,2);return this.editor.getContents(N=q[0],k=q[1])}},{key:"getFormat",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof N?this.editor.getFormat(N,k):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof N?this.scroll.lines(N.index,N.length):this.scroll.lines(N,k)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-N,B=_(N,k),q=s(B,2);return this.editor.getText(N=q[0],k=q[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,k,B){var q=this,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R.sources.API;return I.call(this,function(){return q.editor.insertEmbed(N,k,B)},V,N)}},{key:"insertText",value:function(N,k,B,q,V){var M,C=this,K=_(N,0,B,q,V),U=s(K,4);return M=U[2],I.call(this,function(){return C.editor.insertText(N,k,M)},V=U[3],N=U[0],k.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,k,B){this.clipboard.dangerouslyPasteHTML(N,k,B)}},{key:"removeFormat",value:function(N,k,B){var q=this,V=_(N,k,B),C=s(V,4);return k=C[1],I.call(this,function(){return q.editor.removeFormat(N,k)},B=C[3],N=C[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var k=this,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API;return I.call(this,function(){N=new l.default(N);var q=k.getLength(),V=k.editor.deleteText(0,q),C=k.editor.applyDelta(N),M=C.ops[C.ops.length-1];return null!=M&&"string"==typeof M.insert&&"\n"===M.insert[M.insert.length-1]&&(k.editor.deleteText(k.getLength()-1,1),C.delete(1)),V.compose(C)},B)}},{key:"setSelection",value:function(N,k,B){if(null==N)this.selection.setRange(null,k||R.sources.API);else{var q=_(N,k,B),V=s(q,4);B=V[3],this.selection.setRange(new y.Range(N=V[0],k=V[1]),B),B!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API,B=(new l.default).insert(N);return this.setContents(B,k)}},{key:"update",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.default.sources.USER,k=this.scroll.update(N);return this.selection.update(N),k}},{key:"updateContents",value:function(N){var k=this,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API;return I.call(this,function(){return N=new l.default(N),k.editor.applyDelta(N,B)},B,!0)}}]),R}();function H(R,L){if((L=(0,E.default)(!0,{container:R,modules:{clipboard:!0,keyboard:!0,history:!0}},L)).theme&&L.theme!==D.DEFAULTS.theme){if(L.theme=D.import("themes/"+L.theme),null==L.theme)throw new Error("Invalid theme "+L.theme+". Did you register it?")}else L.theme=O.default;var N=(0,E.default)(!0,{},L.theme.DEFAULTS);[N,L].forEach(function(q){q.modules=q.modules||{},Object.keys(q.modules).forEach(function(V){!0===q.modules[V]&&(q.modules[V]={})})});var B=Object.keys(N.modules).concat(Object.keys(L.modules)).reduce(function(q,V){var C=D.import("modules/"+V);return null==C?T.error("Cannot load "+V+" module. Are you sure you registered it?"):q[V]=C.DEFAULTS||{},q},{});return null!=L.modules&&L.modules.toolbar&&L.modules.toolbar.constructor!==Object&&(L.modules.toolbar={container:L.modules.toolbar}),L=(0,E.default)(!0,{},D.DEFAULTS,{modules:B},N,L),["bounds","container","scrollingContainer"].forEach(function(q){"string"==typeof L[q]&&(L[q]=document.querySelector(L[q]))}),L.modules=Object.keys(L.modules).reduce(function(q,V){return L.modules[V]&&(q[V]=L.modules[V]),q},{}),L}function I(R,L,N,k){if(this.options.strict&&!this.isEnabled()&&L===g.default.sources.USER)return new l.default;var B=null==N?null:this.getSelection(),q=this.editor.delta,V=R();if(null!=B&&(!0===N&&(N=B.index),null==k?B=j(B,V,L):0!==k&&(B=j(B,N,k,L)),this.setSelection(B,g.default.sources.SILENT)),V.length()>0){var C,K,M=[g.default.events.TEXT_CHANGE,V,q,L];(C=this.emitter).emit.apply(C,[g.default.events.EDITOR_CHANGE].concat(M)),L!==g.default.sources.SILENT&&(K=this.emitter).emit.apply(K,M)}return V}function _(R,L,N,k,B){var q={};return"number"==typeof R.index&&"number"==typeof R.length?"number"!=typeof L?(B=k,k=N,N=L,L=R.length,R=R.index):(L=R.length,R=R.index):"number"!=typeof L&&(B=k,k=N,N=L,L=0),"object"===(void 0===N?"undefined":i(N))?(q=N,B=k):"string"==typeof N&&(null!=k?q[N]=k:B=N),[R,L,q,B=B||g.default.sources.API]}function j(R,L,N,k){if(null==R)return null;var B=void 0,q=void 0;if(L instanceof l.default){var V=[R.index,R.index+R.length].map(function(U){return L.transformPosition(U,k!==g.default.sources.USER)}),C=s(V,2);B=C[0],q=C[1]}else{var M=[R.index,R.index+R.length].map(function(U){return U<L||U===L&&k===g.default.sources.USER?U:N>=0?U+N:Math.max(L,U+N)}),K=s(M,2);B=K[0],q=K[1]}return new y.Range(B,q-B)}D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=g.default.events,D.sources=g.default.sources,D.version="1.3.7",D.imports={delta:l.default,parchment:h.default,"core/module":u.default,"core/theme":O.default},n.expandConfig=H,n.overload=_,n.default=D},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(h,y){for(var b=0;b<y.length;b++){var c=y[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,y,b){return y&&m(h.prototype,y),b&&m(h,b),h}}(),s=function m(h,y,b){null===h&&(h=Function.prototype);var c=Object.getOwnPropertyDescriptor(h,y);if(void 0===c){var E=Object.getPrototypeOf(h);return null===E?void 0:m(E,y,b)}if("value"in c)return c.value;var S=c.get;return void 0===S?void 0:S.call(b)},o=d(r(7)),p=d(r(0));function d(m){return m&&m.__esModule?m:{default:m}}function v(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function g(m,h){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?m:h}var u=function(m){function h(){return v(this,h),g(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return function f(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(m,h):m.__proto__=h)}(h,m),i(h,[{key:"formatAt",value:function(b,c,E,S){if(h.compare(this.statics.blotName,E)<0&&p.default.query(E,p.default.Scope.BLOT)){var x=this.isolate(b,c);S&&x.wrap(E,S)}else s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"formatAt",this).call(this,b,c,E,S)}},{key:"optimize",value:function(b){if(s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"optimize",this).call(this,b),this.parent instanceof h&&h.compare(this.statics.blotName,this.parent.statics.blotName)>0){var c=this.parent.isolate(this.offset(),this.length());this.moveChildren(c),c.wrap(this)}}}],[{key:"compare",value:function(b,c){var E=h.order.indexOf(b),S=h.order.indexOf(c);return E>=0||S>=0?E-S:b===c?0:b<c?-1:1}}]),h}(p.default.Inline);u.allowedChildren=[u,p.default.Embed,o.default],u.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=u},function(e,n,r){"use strict";function o(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function l(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?v:g}Object.defineProperty(n,"__esModule",{value:!0});var d=function(v){function g(){return o(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function p(v,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}(g,v),g}(function a(v){return v&&v.__esModule?v:{default:v}}(r(0)).default.Text);n.default=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function y(b,c){for(var E=0;E<c.length;E++){var S=c[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,c,E){return c&&y(b.prototype,c),E&&y(b,E),b}}(),s=function y(b,c,E){null===b&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,c);if(void 0===S){var x=Object.getPrototypeOf(b);return null===x?void 0:y(x,c,E)}if("value"in S)return S.value;var A=S.get;return void 0===A?void 0:A.call(E)},o=d(r(54));function d(y){return y&&y.__esModule?y:{default:y}}var u=(0,d(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(y){document.addEventListener(y,function(){for(var b=arguments.length,c=Array(b),E=0;E<b;E++)c[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){var x;S.__quill&&S.__quill.emitter&&(x=S.__quill.emitter).handleDOM.apply(x,c)})})});var h=function(y){function b(){!function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function g(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?y:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.listeners={},c.on("error",u.error),c}return function f(y,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}(b,y),i(b,[{key:"emit",value:function(){u.log.apply(u,arguments),s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var S=arguments.length,x=Array(S>1?S-1:0),A=1;A<S;A++)x[A-1]=arguments[A];(this.listeners[E.type]||[]).forEach(function(O){var F=O.node,w=O.handler;(E.target===F||F.contains(E.target))&&w.apply(void 0,[E].concat(x))})}},{key:"listenDOM",value:function(E,S,x){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:S,handler:x})}}]),b}(o.default);h.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},h.sources={API:"api",SILENT:"silent",USER:"user"},n.default=h},function(e,n,r){"use strict";function i(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function a(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,a),this.quill=o,this.options=l};s.DEFAULTS={},n.default=s},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],s="warn";function a(l){if(i.indexOf(l)<=i.indexOf(s)){for(var p,d=arguments.length,v=Array(d>1?d-1:0),g=1;g<d;g++)v[g-1]=arguments[g];(p=console)[l].apply(p,v)}}function o(l){return i.reduce(function(p,d){return p[d]=a.bind(console,d,l),p},{})}a.level=o.level=function(l){s=l},n.default=o},function(e,n,r){var i=Array.prototype.slice,s=r(52),a=r(53),o=e.exports=function(v,g,f){return f||(f={}),v===g||(v instanceof Date&&g instanceof Date?v.getTime()===g.getTime():!v||!g||"object"!=typeof v&&"object"!=typeof g?f.strict?v===g:v==g:function d(v,g,f){var u,m;if(l(v)||l(g)||v.prototype!==g.prototype)return!1;if(a(v))return!!a(g)&&(v=i.call(v),g=i.call(g),o(v,g,f));if(p(v)){if(!p(g)||v.length!==g.length)return!1;for(u=0;u<v.length;u++)if(v[u]!==g[u])return!1;return!0}try{var h=s(v),y=s(g)}catch(b){return!1}if(h.length!=y.length)return!1;for(h.sort(),y.sort(),u=h.length-1;u>=0;u--)if(h[u]!=y[u])return!1;for(u=h.length-1;u>=0;u--)if(!o(v[m=h[u]],g[m],f))return!1;return typeof v==typeof g}(v,g,f))};function l(v){return null==v}function p(v){return!(!v||"object"!=typeof v||"number"!=typeof v.length||"function"!=typeof v.copy||"function"!=typeof v.slice||v.length>0&&"number"!=typeof v[0])}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),s=function(){function a(o,l,p){void 0===p&&(p={}),this.attrName=o,this.keyName=l,this.scope=null!=p.scope?p.scope&i.Scope.LEVEL|i.Scope.TYPE&i.Scope.ATTRIBUTE:i.Scope.ATTRIBUTE,null!=p.whitelist&&(this.whitelist=p.whitelist)}return a.keys=function(o){return[].map.call(o.attributes,function(l){return l.name})},a.prototype.add=function(o,l){return!!this.canAdd(o,l)&&(o.setAttribute(this.keyName,l),!0)},a.prototype.canAdd=function(o,l){return null!=i.query(o,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof l?this.whitelist.indexOf(l.replace(/["']/g,""))>-1:this.whitelist.indexOf(l)>-1))},a.prototype.remove=function(o){o.removeAttribute(this.keyName)},a.prototype.value=function(o){var l=o.getAttribute(this.keyName);return this.canAdd(o,l)&&l?l:""},a}();n.default=s},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=function(O,F){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return function A(O,F){var w=[],P=!0,T=!1,D=void 0;try{for(var I,H=O[Symbol.iterator]();!(P=(I=H.next()).done)&&(w.push(I.value),!F||w.length!==F);P=!0);}catch(_){T=!0,D=_}finally{try{!P&&H.return&&H.return()}finally{if(T)throw D}}return w}(O,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function A(O,F){for(var w=0;w<F.length;w++){var P=F[w];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}return function(O,F,w){return F&&A(O.prototype,F),w&&A(O,w),O}}(),a=function A(O,F,w){null===O&&(O=Function.prototype);var P=Object.getOwnPropertyDescriptor(O,F);if(void 0===P){var T=Object.getPrototypeOf(O);return null===T?void 0:A(T,F,w)}if("value"in P)return P.value;var D=P.get;return void 0===D?void 0:D.call(w)},l=y(r(2)),d=y(r(0)),g=y(r(4)),u=y(r(6)),h=y(r(7));function y(A){return A&&A.__esModule?A:{default:A}}function b(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function c(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?A:O}function E(A,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var S=function(A){function O(){return b(this,O),c(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return E(O,A),O}(u.default);S.blotName="code",S.tagName="CODE";var x=function(A){function O(){return b(this,O),c(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return E(O,A),s(O,[{key:"delta",value:function(){var w=this,P=this.domNode.textContent;return P.endsWith("\n")&&(P=P.slice(0,-1)),P.split("\n").reduce(function(T,D){return T.insert(D).insert("\n",w.formats())},new l.default)}},{key:"format",value:function(w,P){if(w!==this.statics.blotName||!P){var T=this.descendant(h.default,this.length()-1),H=i(T,1)[0];null!=H&&H.deleteAt(H.length()-1,1),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,w,P)}}},{key:"formatAt",value:function(w,P,T,D){if(0!==P&&null!=d.default.query(T,d.default.Scope.BLOCK)&&(T!==this.statics.blotName||D!==this.statics.formats(this.domNode))){var H=this.newlineIndex(w);if(!(H<0||H>=w+P)){var I=this.newlineIndex(w,!0)+1,_=H-I+1,j=this.isolate(I,_),R=j.next;j.format(T,D),R instanceof O&&R.formatAt(0,w-I+P-_,T,D)}}}},{key:"insertAt",value:function(w,P,T){if(null==T){var D=this.descendant(h.default,w),H=i(D,2);H[0].insertAt(H[1],P)}}},{key:"length",value:function(){var w=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?w:w+1}},{key:"newlineIndex",value:function(w){var P=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(P)return this.domNode.textContent.slice(0,w).lastIndexOf("\n");var T=this.domNode.textContent.slice(w).indexOf("\n");return T>-1?w+T:-1}},{key:"optimize",value:function(w){this.domNode.textContent.endsWith("\n")||this.appendChild(d.default.create("text","\n")),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,w);var P=this.next;null!=P&&P.prev===this&&P.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===P.statics.formats(P.domNode)&&(P.optimize(w),P.moveChildren(this),P.remove())}},{key:"replace",value:function(w){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,w),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(P){var T=d.default.find(P);null==T?P.parentNode.removeChild(P):T instanceof d.default.Embed?T.remove():T.unwrap()})}}],[{key:"create",value:function(w){var P=a(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,w);return P.setAttribute("spellcheck",!1),P}},{key:"formats",value:function(){return!0}}]),O}(g.default);x.blotName="code-block",x.tagName="PRE",x.TAB="  ",n.Code=S,n.default=x},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s=function(L,N){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return function R(L,N){var k=[],B=!0,q=!1,V=void 0;try{for(var M,C=L[Symbol.iterator]();!(B=(M=C.next()).done)&&(k.push(M.value),!N||k.length!==N);B=!0);}catch(K){q=!0,V=K}finally{try{!B&&C.return&&C.return()}finally{if(q)throw V}}return k}(L,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function R(L,N){for(var k=0;k<N.length;k++){var B=N[k];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(L,B.key,B)}}return function(L,N,k){return N&&R(L.prototype,N),k&&R(L,k),L}}(),l=P(r(2)),d=P(r(20)),g=P(r(0)),u=P(r(13)),h=P(r(24)),y=r(4),b=P(y),E=P(r(16)),x=P(r(21)),O=P(r(11)),w=P(r(3));function P(R){return R&&R.__esModule?R:{default:R}}var H=/^[ -~]*$/,I=function(){function R(L){(function D(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")})(this,R),this.scroll=L,this.delta=this.getDelta()}return a(R,[{key:"applyDelta",value:function(N){var k=this,B=!1;this.scroll.update();var q=this.scroll.length();return this.scroll.batchStart(),N=function j(R){return R.reduce(function(L,N){if(1===N.insert){var k=(0,x.default)(N.attributes);return delete k.image,L.insert({image:N.attributes.image},k)}if(null!=N.attributes&&(!0===N.attributes.list||!0===N.attributes.bullet)&&((N=(0,x.default)(N)).attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),"string"==typeof N.insert){var B=N.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return L.insert(B,N.attributes)}return L.push(N)},new l.default)}(N),N.reduce(function(V,C){var M=C.retain||C.delete||C.insert.length||1,K=C.attributes||{};if(null!=C.insert){if("string"==typeof C.insert){var U=C.insert;U.endsWith("\n")&&B&&(B=!1,U=U.slice(0,-1)),V>=q&&!U.endsWith("\n")&&(B=!0),k.scroll.insertAt(V,U);var W=k.scroll.line(V),Y=s(W,2),ee=Y[0],te=Y[1],ne=(0,w.default)({},(0,y.bubbleFormats)(ee));if(ee instanceof b.default){var oe=ee.descendant(g.default.Leaf,te),le=s(oe,1);ne=(0,w.default)(ne,(0,y.bubbleFormats)(le[0]))}K=d.default.attributes.diff(ne,K)||{}}else if("object"===i(C.insert)){var G=Object.keys(C.insert)[0];if(null==G)return V;k.scroll.insertAt(V,G,C.insert[G])}q+=M}return Object.keys(K).forEach(function($){k.scroll.formatAt(V,M,$,K[$])}),V+M},0),N.reduce(function(V,C){return"number"==typeof C.delete?(k.scroll.deleteAt(V,C.delete),V):V+(C.retain||C.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,k){return this.scroll.deleteAt(N,k),this.update((new l.default).retain(N).delete(k))}},{key:"formatLine",value:function(N,k){var B=this,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(q).forEach(function(V){if(null==B.scroll.whitelist||B.scroll.whitelist[V]){var C=B.scroll.lines(N,Math.max(k,1)),M=k;C.forEach(function(K){var U=K.length();if(K instanceof u.default){var W=N-K.offset(B.scroll),Y=K.newlineIndex(W+M)-W+1;K.formatAt(W,Y,V,q[V])}else K.format(V,q[V]);M-=U})}}),this.scroll.optimize(),this.update((new l.default).retain(N).retain(k,(0,x.default)(q)))}},{key:"formatText",value:function(N,k){var B=this,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(q).forEach(function(V){B.scroll.formatAt(N,k,V,q[V])}),this.update((new l.default).retain(N).retain(k,(0,x.default)(q)))}},{key:"getContents",value:function(N,k){return this.delta.slice(N,N+k)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,k){return N.concat(k.delta())},new l.default)}},{key:"getFormat",value:function(N){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=[],q=[];0===k?this.scroll.path(N).forEach(function(C){var K=s(C,1)[0];K instanceof b.default?B.push(K):K instanceof g.default.Leaf&&q.push(K)}):(B=this.scroll.lines(N,k),q=this.scroll.descendants(g.default.Leaf,N,k));var V=[B,q].map(function(C){if(0===C.length)return{};for(var M=(0,y.bubbleFormats)(C.shift());Object.keys(M).length>0;){var K=C.shift();if(null==K)return M;M=_((0,y.bubbleFormats)(K),M)}return M});return w.default.apply(w.default,V)}},{key:"getText",value:function(N,k){return this.getContents(N,k).filter(function(B){return"string"==typeof B.insert}).map(function(B){return B.insert}).join("")}},{key:"insertEmbed",value:function(N,k,B){return this.scroll.insertAt(N,k,B),this.update((new l.default).retain(N).insert(function T(R,L,N){return L in R?Object.defineProperty(R,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):R[L]=N,R}({},k,B)))}},{key:"insertText",value:function(N,k){var B=this,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return k=k.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(N,k),Object.keys(q).forEach(function(V){B.scroll.formatAt(N,k.length,V,q[V])}),this.update((new l.default).retain(N).insert(k,(0,x.default)(q)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return!(N.statics.blotName!==b.default.blotName||N.children.length>1)&&N.children.head instanceof E.default}},{key:"removeFormat",value:function(N,k){var B=this.getText(N,k),q=this.scroll.line(N+k),V=s(q,2),C=V[0],M=V[1],K=0,U=new l.default;null!=C&&(K=C instanceof u.default?C.newlineIndex(M)-M+1:C.length()-M,U=C.delta().slice(M,M+K-1).insert("\n"));var Y=this.getContents(N,k+K).diff((new l.default).insert(B).concat(U)),ee=(new l.default).retain(N).concat(Y);return this.applyDelta(ee)}},{key:"update",value:function(N){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,q=this.delta;if(1===k.length&&"characterData"===k[0].type&&k[0].target.data.match(H)&&g.default.find(k[0].target)){var V=g.default.find(k[0].target),C=(0,y.bubbleFormats)(V),M=V.offset(this.scroll),K=k[0].oldValue.replace(h.default.CONTENTS,""),U=(new l.default).insert(K),W=(new l.default).insert(V.value()),Y=(new l.default).retain(M).concat(U.diff(W,B));N=Y.reduce(function(ee,te){return te.insert?ee.insert(te.insert,C):ee.push(te)},new l.default),this.delta=q.compose(N)}else this.delta=this.getDelta(),(!N||!(0,O.default)(q.compose(N),this.delta))&&(N=q.diff(this.delta,B));return N}}]),R}();function _(R,L){return Object.keys(L).reduce(function(N,k){return null==R[k]||(L[k]===R[k]?N[k]=L[k]:Array.isArray(L[k])?L[k].indexOf(R[k])<0&&(N[k]=L[k].concat([R[k]])):N[k]=[L[k],R[k]]),N},{})}n.default=I},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=function(O,F){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return function A(O,F){var w=[],P=!0,T=!1,D=void 0;try{for(var I,H=O[Symbol.iterator]();!(P=(I=H.next()).done)&&(w.push(I.value),!F||w.length!==F);P=!0);}catch(_){T=!0,D=_}finally{try{!P&&H.return&&H.return()}finally{if(T)throw D}}return w}(O,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function A(O,F){for(var w=0;w<F.length;w++){var P=F[w];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}return function(O,F,w){return F&&A(O.prototype,F),w&&A(O,w),O}}(),o=h(r(0)),p=h(r(21)),v=h(r(11)),f=h(r(8));function h(A){return A&&A.__esModule?A:{default:A}}function y(A){if(Array.isArray(A)){for(var O=0,F=Array(A.length);O<A.length;O++)F[O]=A[O];return F}return Array.from(A)}function b(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}var c=(0,h(r(10)).default)("quill:selection"),E=function A(O){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(this,A),this.index=O,this.length=F},S=function(){function A(O,F){var w=this;b(this,A),this.emitter=F,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){w.mouseDown||setTimeout(w.update.bind(w,f.default.sources.USER),1)}),this.emitter.on(f.default.events.EDITOR_CHANGE,function(P,T){P===f.default.events.TEXT_CHANGE&&T.length()>0&&w.update(f.default.sources.SILENT)}),this.emitter.on(f.default.events.SCROLL_BEFORE_UPDATE,function(){if(w.hasFocus()){var P=w.getNativeRange();null!=P&&P.start.node!==w.cursor.textNode&&w.emitter.once(f.default.events.SCROLL_UPDATE,function(){try{w.setNativeRange(P.start.node,P.start.offset,P.end.node,P.end.offset)}catch(T){}})}}),this.emitter.on(f.default.events.SCROLL_OPTIMIZE,function(P,T){if(T.range){var D=T.range;w.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)}}),this.update(f.default.sources.SILENT)}return s(A,[{key:"handleComposition",value:function(){var F=this;this.root.addEventListener("compositionstart",function(){F.composing=!0}),this.root.addEventListener("compositionend",function(){if(F.composing=!1,F.cursor.parent){var w=F.cursor.restore();if(!w)return;setTimeout(function(){F.setNativeRange(w.startNode,w.startOffset,w.endNode,w.endOffset)},1)}})}},{key:"handleDragging",value:function(){var F=this;this.emitter.listenDOM("mousedown",document.body,function(){F.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){F.mouseDown=!1,F.update(f.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(F,w){if(null==this.scroll.whitelist||this.scroll.whitelist[F]){this.scroll.update();var P=this.getNativeRange();if(null!=P&&P.native.collapsed&&!o.default.query(F,o.default.Scope.BLOCK)){if(P.start.node!==this.cursor.textNode){var T=o.default.find(P.start.node,!1);if(null==T)return;if(T instanceof o.default.Leaf){var D=T.split(P.start.offset);T.parent.insertBefore(this.cursor,D)}else T.insertBefore(this.cursor,P.start.node);this.cursor.attach()}this.cursor.format(F,w),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(F){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=this.scroll.length();F=Math.min(F,P-1),w=Math.min(F+w,P-1)-F;var T=void 0,D=this.scroll.leaf(F),H=i(D,2),I=H[0],_=H[1];if(null==I)return null;var j=I.position(_,!0),R=i(j,2);T=R[0],_=R[1];var L=document.createRange();if(w>0){L.setStart(T,_);var N=this.scroll.leaf(F+w),k=i(N,2);if(null==(I=k[0]))return null;var B=I.position(_=k[1],!0),q=i(B,2);return L.setEnd(T=q[0],_=q[1]),L.getBoundingClientRect()}var V="left",C=void 0;return T instanceof Text?(_<T.data.length?(L.setStart(T,_),L.setEnd(T,_+1)):(L.setStart(T,_-1),L.setEnd(T,_),V="right"),C=L.getBoundingClientRect()):(C=I.domNode.getBoundingClientRect(),_>0&&(V="right")),{bottom:C.top+C.height,height:C.height,left:C[V],right:C[V],top:C.top,width:0}}},{key:"getNativeRange",value:function(){var F=document.getSelection();if(null==F||F.rangeCount<=0)return null;var w=F.getRangeAt(0);if(null==w)return null;var P=this.normalizeNative(w);return c.info("getNativeRange",P),P}},{key:"getRange",value:function(){var F=this.getNativeRange();return null==F?[null,null]:[this.normalizedToRange(F),F]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(F){var w=this,P=[[F.start.node,F.start.offset]];F.native.collapsed||P.push([F.end.node,F.end.offset]);var T=P.map(function(I){var _=i(I,2),j=_[0],R=_[1],L=o.default.find(j,!0),N=L.offset(w.scroll);return 0===R?N:L instanceof o.default.Container?N+L.length():N+L.index(j,R)}),D=Math.min(Math.max.apply(Math,y(T)),this.scroll.length()-1),H=Math.min.apply(Math,[D].concat(y(T)));return new E(H,D-H)}},{key:"normalizeNative",value:function(F){if(!x(this.root,F.startContainer)||!F.collapsed&&!x(this.root,F.endContainer))return null;var w={start:{node:F.startContainer,offset:F.startOffset},end:{node:F.endContainer,offset:F.endOffset},native:F};return[w.start,w.end].forEach(function(P){for(var T=P.node,D=P.offset;!(T instanceof Text)&&T.childNodes.length>0;)if(T.childNodes.length>D)T=T.childNodes[D],D=0;else{if(T.childNodes.length!==D)break;D=(T=T.lastChild)instanceof Text?T.data.length:T.childNodes.length+1}P.node=T,P.offset=D}),w}},{key:"rangeToNative",value:function(F){var w=this,P=F.collapsed?[F.index]:[F.index,F.index+F.length],T=[],D=this.scroll.length();return P.forEach(function(H,I){H=Math.min(D-1,H);var j=w.scroll.leaf(H),R=i(j,2),N=R[1],k=R[0].position(N,0!==I),B=i(k,2);T.push(B[0],N=B[1])}),T.length<2&&(T=T.concat(T)),T}},{key:"scrollIntoView",value:function(F){var w=this.lastRange;if(null!=w){var P=this.getBounds(w.index,w.length);if(null!=P){var T=this.scroll.length()-1,D=this.scroll.line(Math.min(w.index,T)),I=i(D,1)[0],_=I;if(w.length>0){var j=this.scroll.line(Math.min(w.index+w.length,T));_=i(j,1)[0]}if(null!=I&&null!=_){var L=F.getBoundingClientRect();P.top<L.top?F.scrollTop-=L.top-P.top:P.bottom>L.bottom&&(F.scrollTop+=P.bottom-L.bottom)}}}}},{key:"setNativeRange",value:function(F,w){var P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,D=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(c.info("setNativeRange",F,w,P,T),null==F||null!=this.root.parentNode&&null!=F.parentNode&&null!=P.parentNode){var H=document.getSelection();if(null!=H)if(null!=F){this.hasFocus()||this.root.focus();var I=(this.getNativeRange()||{}).native;if(null==I||D||F!==I.startContainer||w!==I.startOffset||P!==I.endContainer||T!==I.endOffset){"BR"==F.tagName&&(w=[].indexOf.call(F.parentNode.childNodes,F),F=F.parentNode),"BR"==P.tagName&&(T=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode);var _=document.createRange();_.setStart(F,w),_.setEnd(P,T),H.removeAllRanges(),H.addRange(_)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(F){var w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.default.sources.API;if("string"==typeof w&&(P=w,w=!1),c.info("setRange",F),null!=F){var T=this.rangeToNative(F);this.setNativeRange.apply(this,y(T).concat([w]))}else this.setNativeRange(null);this.update(P)}},{key:"update",value:function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default.sources.USER,w=this.lastRange,P=this.getRange(),T=i(P,2),D=T[0],H=T[1];if(this.lastRange=D,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,v.default)(w,this.lastRange)){var I;!this.composing&&null!=H&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var j,_=[f.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(w),F];(I=this.emitter).emit.apply(I,[f.default.events.EDITOR_CHANGE].concat(_)),F!==f.default.sources.SILENT&&(j=this.emitter).emit.apply(j,_)}}}]),A}();function x(A,O){return O instanceof Text&&(O=O.parentNode),A.contains(O)}n.Range=E,n.default=S},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function f(u,m){for(var h=0;h<m.length;h++){var y=m[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,m,h){return m&&f(u.prototype,m),h&&f(u,h),u}}(),s=function f(u,m,h){null===u&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,m);if(void 0===y){var b=Object.getPrototypeOf(u);return null===b?void 0:f(b,m,h)}if("value"in y)return y.value;var c=y.get;return void 0===c?void 0:c.call(h)};function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}var g=function(f){function u(){return p(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),i(u,[{key:"insertInto",value:function(h,y){0===h.children.length?s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"insertInto",this).call(this,h,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),u}(function l(f){return f&&f.__esModule?f:{default:f}}(r(0)).default.Embed);g.blotName="break",g.tagName="BR",n.default=g},function(e,n,r){"use strict";var d,i=this&&this.__extends||(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var f in g)g.hasOwnProperty(f)&&(v[f]=g[f])},function(v,g){function f(){this.constructor=v}d(v,g),v.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(44),a=r(30),o=r(1),l=function(d){function v(g){var f=d.call(this,g)||this;return f.build(),f}return i(v,d),v.prototype.appendChild=function(g){this.insertBefore(g)},v.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},v.prototype.build=function(){var g=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(f){try{var u=p(f);g.insertBefore(u,g.children.head||void 0)}catch(m){if(m instanceof o.ParchmentError)return;throw m}})},v.prototype.deleteAt=function(g,f){if(0===g&&f===this.length())return this.remove();this.children.forEachAt(g,f,function(u,m,h){u.deleteAt(m,h)})},v.prototype.descendant=function(g,f){var u=this.children.find(f),m=u[0],h=u[1];return null==g.blotName&&g(m)||null!=g.blotName&&m instanceof g?[m,h]:m instanceof v?m.descendant(g,h):[null,-1]},v.prototype.descendants=function(g,f,u){void 0===f&&(f=0),void 0===u&&(u=Number.MAX_VALUE);var m=[],h=u;return this.children.forEachAt(f,u,function(y,b,c){(null==g.blotName&&g(y)||null!=g.blotName&&y instanceof g)&&m.push(y),y instanceof v&&(m=m.concat(y.descendants(g,b,h))),h-=c}),m},v.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),d.prototype.detach.call(this)},v.prototype.formatAt=function(g,f,u,m){this.children.forEachAt(g,f,function(h,y,b){h.formatAt(y,b,u,m)})},v.prototype.insertAt=function(g,f,u){var m=this.children.find(g),h=m[0];if(h)h.insertAt(m[1],f,u);else{var b=null==u?o.create("text",f):o.create(f,u);this.appendChild(b)}},v.prototype.insertBefore=function(g,f){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(u){return g instanceof u}))throw new o.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,f)},v.prototype.length=function(){return this.children.reduce(function(g,f){return g+f.length()},0)},v.prototype.moveChildren=function(g,f){this.children.forEach(function(u){g.insertBefore(u,f)})},v.prototype.optimize=function(g){if(d.prototype.optimize.call(this,g),0===this.children.length)if(null!=this.statics.defaultChild){var f=o.create(this.statics.defaultChild);this.appendChild(f),f.optimize(g)}else this.remove()},v.prototype.path=function(g,f){void 0===f&&(f=!1);var u=this.children.find(g,f),m=u[0],h=u[1],y=[[this,g]];return m instanceof v?y.concat(m.path(h,f)):(null!=m&&y.push([m,h]),y)},v.prototype.removeChild=function(g){this.children.remove(g)},v.prototype.replace=function(g){g instanceof v&&g.moveChildren(this),d.prototype.replace.call(this,g)},v.prototype.split=function(g,f){if(void 0===f&&(f=!1),!f){if(0===g)return this;if(g===this.length())return this.next}var u=this.clone();return this.parent.insertBefore(u,this.next),this.children.forEachAt(g,this.length(),function(m,h,y){m=m.split(h,f),u.appendChild(m)}),u},v.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},v.prototype.update=function(g,f){var u=this,m=[],h=[];g.forEach(function(y){y.target===u.domNode&&"childList"===y.type&&(m.push.apply(m,y.addedNodes),h.push.apply(h,y.removedNodes))}),h.forEach(function(y){if(!(null!=y.parentNode&&"IFRAME"!==y.tagName&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=o.find(y);null!=b&&(null==b.domNode.parentNode||b.domNode.parentNode===u.domNode)&&b.detach()}}),m.filter(function(y){return y.parentNode==u.domNode}).sort(function(y,b){return y===b?0:y.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var b=null;null!=y.nextSibling&&(b=o.find(y.nextSibling));var c=p(y);(c.next!=b||null==c.next)&&(null!=c.parent&&c.parent.removeChild(u),u.insertBefore(c,b||void 0))})},v}(a.default);function p(d){var v=o.find(d);if(null==v)try{v=o.create(d)}catch(g){v=o.create(o.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(f){v.domNode.appendChild(f)}),d.parentNode&&d.parentNode.replaceChild(v.domNode,d),v.attach()}return v}n.default=l},function(e,n,r){"use strict";var d,i=this&&this.__extends||(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var f in g)g.hasOwnProperty(f)&&(v[f]=g[f])},function(v,g){function f(){this.constructor=v}d(v,g),v.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),a=r(31),o=r(17),l=r(1),p=function(d){function v(g){var f=d.call(this,g)||this;return f.attributes=new a.default(f.domNode),f}return i(v,d),v.formats=function(g){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?g.tagName.toLowerCase():void 0)},v.prototype.format=function(g,f){var u=l.query(g);u instanceof s.default?this.attributes.attribute(u,f):f&&null!=u&&(g!==this.statics.blotName||this.formats()[g]!==f)&&this.replaceWith(g,f)},v.prototype.formats=function(){var g=this.attributes.values(),f=this.statics.formats(this.domNode);return null!=f&&(g[this.statics.blotName]=f),g},v.prototype.replaceWith=function(g,f){var u=d.prototype.replaceWith.call(this,g,f);return this.attributes.copy(u),u},v.prototype.update=function(g,f){var u=this;d.prototype.update.call(this,g,f),g.some(function(m){return m.target===u.domNode&&"attributes"===m.type})&&this.attributes.build()},v.prototype.wrap=function(g,f){var u=d.prototype.wrap.call(this,g,f);return u instanceof v&&u.statics.scope===this.statics.scope&&this.attributes.move(u),u},v}(o.default);n.default=p},function(e,n,r){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var v in d)d.hasOwnProperty(v)&&(p[v]=d[v])},function(p,d){function v(){this.constructor=p}l(p,d),p.prototype=null===d?Object.create(d):(v.prototype=d.prototype,new v)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(30),a=r(1),o=function(l){function p(){return null!==l&&l.apply(this,arguments)||this}return i(p,l),p.value=function(d){return!0},p.prototype.index=function(d,v){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(v,1):-1},p.prototype.position=function(d,v){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(g+=1),[this.parent.domNode,g]},p.prototype.value=function(){var d;return(d={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},p.scope=a.Scope.INLINE_BLOT,p}(s.default);n.default=o},function(e,n,r){var i=r(11),s=r(3),a={attributes:{compose:function(l,p,d){"object"!=typeof l&&(l={}),"object"!=typeof p&&(p={});var v=s(!0,{},p);for(var g in d||(v=Object.keys(v).reduce(function(f,u){return null!=v[u]&&(f[u]=v[u]),f},{})),l)void 0!==l[g]&&void 0===p[g]&&(v[g]=l[g]);return Object.keys(v).length>0?v:void 0},diff:function(l,p){"object"!=typeof l&&(l={}),"object"!=typeof p&&(p={});var d=Object.keys(l).concat(Object.keys(p)).reduce(function(v,g){return i(l[g],p[g])||(v[g]=void 0===p[g]?null:p[g]),v},{});return Object.keys(d).length>0?d:void 0},transform:function(l,p,d){if("object"!=typeof l)return p;if("object"==typeof p){if(!d)return p;var v=Object.keys(p).reduce(function(g,f){return void 0===l[f]&&(g[f]=p[f]),g},{});return Object.keys(v).length>0?v:void 0}}},iterator:function(l){return new o(l)},length:function(l){return"number"==typeof l.delete?l.delete:"number"==typeof l.retain?l.retain:"string"==typeof l.insert?l.insert.length:1}};function o(l){this.ops=l,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(l){l||(l=1/0);var p=this.ops[this.index];if(p){var d=this.offset,v=a.length(p);if(l>=v-d?(l=v-d,this.index+=1,this.offset=0):this.offset+=l,"number"==typeof p.delete)return{delete:l};var g={};return p.attributes&&(g.attributes=p.attributes),"number"==typeof p.retain?g.retain=l:g.insert="string"==typeof p.insert?p.insert.substr(d,l):p.insert,g}return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},o.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var l=this.offset,p=this.index,d=this.next(),v=this.ops.slice(this.index);return this.offset=l,this.index=p,[d].concat(v)}return[]},e.exports=a},function(e,n){var r=function(){"use strict";function i(u,m){return null!=m&&u instanceof m}var s,a,o;try{s=Map}catch(u){s=function(){}}try{a=Set}catch(u){a=function(){}}try{o=Promise}catch(u){o=function(){}}function l(u,m,h,y,b){"object"==typeof m&&(h=m.depth,y=m.prototype,b=m.includeNonEnumerable,m=m.circular);var c=[],E=[],S="undefined"!=typeof Buffer;return void 0===m&&(m=!0),void 0===h&&(h=1/0),function x(A,O){if(null===A)return null;if(0===O)return A;var F,w;if("object"!=typeof A)return A;if(i(A,s))F=new s;else if(i(A,a))F=new a;else if(i(A,o))F=new o(function(L,N){A.then(function(k){L(x(k,O-1))},function(k){N(x(k,O-1))})});else if(l.__isArray(A))F=[];else if(l.__isRegExp(A))F=new RegExp(A.source,f(A)),A.lastIndex&&(F.lastIndex=A.lastIndex);else if(l.__isDate(A))F=new Date(A.getTime());else{if(S&&Buffer.isBuffer(A))return F=Buffer.allocUnsafe?Buffer.allocUnsafe(A.length):new Buffer(A.length),A.copy(F),F;i(A,Error)?F=Object.create(A):void 0===y?(w=Object.getPrototypeOf(A),F=Object.create(w)):(F=Object.create(y),w=y)}if(m){var P=c.indexOf(A);if(-1!=P)return E[P];c.push(A),E.push(F)}for(var T in i(A,s)&&A.forEach(function(L,N){var k=x(N,O-1),B=x(L,O-1);F.set(k,B)}),i(A,a)&&A.forEach(function(L){var N=x(L,O-1);F.add(N)}),A){var D;w&&(D=Object.getOwnPropertyDescriptor(w,T)),(!D||null!=D.set)&&(F[T]=x(A[T],O-1))}if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(A);for(T=0;T<H.length;T++){var I=H[T];(_=Object.getOwnPropertyDescriptor(A,I))&&!_.enumerable&&!b||(F[I]=x(A[I],O-1),_.enumerable||Object.defineProperty(F,I,{enumerable:!1}))}}if(b){var j=Object.getOwnPropertyNames(A);for(T=0;T<j.length;T++){var _,R=j[T];(_=Object.getOwnPropertyDescriptor(A,R))&&_.enumerable||(F[R]=x(A[R],O-1),Object.defineProperty(F,R,{enumerable:!1}))}}return F}(u,h)}function p(u){return Object.prototype.toString.call(u)}function f(u){var m="";return u.global&&(m+="g"),u.ignoreCase&&(m+="i"),u.multiline&&(m+="m"),m}return l.clonePrototype=function(m){if(null===m)return null;var h=function(){};return h.prototype=m,new h},l.__objToStr=p,l.__isDate=function d(u){return"object"==typeof u&&"[object Date]"===p(u)},l.__isArray=function v(u){return"object"==typeof u&&"[object Array]"===p(u)},l.__isRegExp=function g(u){return"object"==typeof u&&"[object RegExp]"===p(u)},l.__getRegExpFlags=f,l}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(w,P){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return function F(w,P){var T=[],D=!0,H=!1,I=void 0;try{for(var j,_=w[Symbol.iterator]();!(D=(j=_.next()).done)&&(T.push(j.value),!P||T.length!==P);D=!0);}catch(R){H=!0,I=R}finally{try{!D&&_.return&&_.return()}finally{if(H)throw I}}return T}(w,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function F(w,P){for(var T=0;T<P.length;T++){var D=P[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(w,D.key,D)}}return function(w,P,T){return P&&F(w.prototype,P),T&&F(w,T),w}}(),a=function F(w,P,T){null===w&&(w=Function.prototype);var D=Object.getOwnPropertyDescriptor(w,P);if(void 0===D){var H=Object.getPrototypeOf(w);return null===H?void 0:F(H,P,T)}if("value"in D)return D.value;var I=D.get;return void 0===I?void 0:I.call(T)},l=c(r(0)),d=c(r(8)),v=r(4),g=c(v),u=c(r(16)),h=c(r(13)),b=c(r(25));function c(F){return F&&F.__esModule?F:{default:F}}function A(F){return F instanceof g.default||F instanceof v.BlockEmbed}var O=function(F){function w(P,T){!function E(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}(this,w);var D=function S(F,w){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?F:w}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,P));return D.emitter=T.emitter,Array.isArray(T.whitelist)&&(D.whitelist=T.whitelist.reduce(function(H,I){return H[I]=!0,H},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return function x(F,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function, not "+typeof w);F.prototype=Object.create(w&&w.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(F,w):F.__proto__=w)}(w,F),s(w,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(T,D){var H=this.line(T),I=i(H,2),_=I[0],j=I[1],R=this.line(T+D),N=i(R,1)[0];if(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"deleteAt",this).call(this,T,D),null!=N&&_!==N&&j>0){if(_ instanceof v.BlockEmbed||N instanceof v.BlockEmbed)return void this.optimize();if(_ instanceof h.default){var k=_.newlineIndex(_.length(),!0);if(k>-1&&(_=_.split(k+1))===N)return void this.optimize()}else if(N instanceof h.default){var B=N.newlineIndex(0);B>-1&&N.split(B+1)}_.moveChildren(N,N.children.head instanceof u.default?null:N.children.head),_.remove()}this.optimize()}},{key:"enable",value:function(){var T=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",T)}},{key:"formatAt",value:function(T,D,H,I){null!=this.whitelist&&!this.whitelist[H]||(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,T,D,H,I),this.optimize())}},{key:"insertAt",value:function(T,D,H){if(null==H||null==this.whitelist||this.whitelist[D]){if(T>=this.length())if(null==H||null==l.default.query(D,l.default.Scope.BLOCK)){var I=l.default.create(this.statics.defaultChild);this.appendChild(I),null==H&&D.endsWith("\n")&&(D=D.slice(0,-1)),I.insertAt(0,D,H)}else{var _=l.default.create(D,H);this.appendChild(_)}else a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertAt",this).call(this,T,D,H);this.optimize()}}},{key:"insertBefore",value:function(T,D){if(T.statics.scope===l.default.Scope.INLINE_BLOT){var H=l.default.create(this.statics.defaultChild);H.appendChild(T),T=H}a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,T,D)}},{key:"leaf",value:function(T){return this.path(T).pop()||[null,-1]}},{key:"line",value:function(T){return T===this.length()?this.line(T-1):this.descendant(A,T)}},{key:"lines",value:function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,H=function I(_,j,R){var L=[],N=R;return _.children.forEachAt(j,R,function(k,B,q){A(k)?L.push(k):k instanceof l.default.Container&&(L=L.concat(I(k,B,N))),N-=q}),L};return H(this,T,D)}},{key:"optimize",value:function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,T,D),T.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,T,D))}},{key:"path",value:function(T){return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"path",this).call(this,T).slice(1)}},{key:"update",value:function(T){if(!0!==this.batch){var D=d.default.sources.USER;"string"==typeof T&&(D=T),Array.isArray(T)||(T=this.observer.takeRecords()),T.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,D,T),a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"update",this).call(this,T.concat([])),T.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,D,T)}}}]),w}(l.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[g.default,v.BlockEmbed,b.default],n.default=O},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},s=function(M,K){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function C(M,K){var U=[],W=!0,Y=!1,ee=void 0;try{for(var ne,te=M[Symbol.iterator]();!(W=(ne=te.next()).done)&&(U.push(ne.value),!K||U.length!==K);W=!0);}catch(oe){Y=!0,ee=oe}finally{try{!W&&te.return&&te.return()}finally{if(Y)throw ee}}return U}(M,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function C(M,K){for(var U=0;U<K.length;U++){var W=K[U];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(M,W.key,W)}}return function(M,K,U){return K&&C(M.prototype,K),U&&C(M,U),M}}(),l=F(r(21)),d=F(r(11)),g=F(r(3)),u=F(r(2)),h=F(r(20)),b=F(r(0)),E=F(r(5)),x=F(r(10)),O=F(r(9));function F(C){return C&&C.__esModule?C:{default:C}}function w(C,M,K){return M in C?Object.defineProperty(C,M,{value:K,enumerable:!0,configurable:!0,writable:!0}):C[M]=K,C}var H=(0,x.default)("quill:keyboard"),I=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",_=function(C){function M(K,U){!function P(C,M){if(!(C instanceof M))throw new TypeError("Cannot call a class as a function")}(this,M);var W=function T(C,M){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?C:M}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,K,U));return W.bindings={},Object.keys(W.options.bindings).forEach(function(Y){"list autofill"===Y&&null!=K.scroll.whitelist&&!K.scroll.whitelist.list||W.options.bindings[Y]&&W.addBinding(W.options.bindings[Y])}),W.addBinding({key:M.keys.ENTER,shiftKey:null},k),W.addBinding({key:M.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(W.addBinding({key:M.keys.BACKSPACE},{collapsed:!0},R),W.addBinding({key:M.keys.DELETE},{collapsed:!0},L)):(W.addBinding({key:M.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},R),W.addBinding({key:M.keys.DELETE},{collapsed:!0,suffix:/^.?$/},L)),W.addBinding({key:M.keys.BACKSPACE},{collapsed:!1},N),W.addBinding({key:M.keys.DELETE},{collapsed:!1},N),W.addBinding({key:M.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},R),W.listen(),W}return function D(C,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);C.prototype=Object.create(M&&M.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(C,M):C.__proto__=M)}(M,C),a(M,null,[{key:"match",value:function(U,W){return W=V(W),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(Y){return!!W[Y]!==U[Y]&&null!==W[Y]})&&W.key===(U.which||U.keyCode)}}]),a(M,[{key:"addBinding",value:function(U){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ee=V(U);if(null==ee||null==ee.key)return H.warn("Attempted to add invalid keyboard binding",ee);"function"==typeof W&&(W={handler:W}),"function"==typeof Y&&(Y={handler:Y}),ee=(0,g.default)(ee,W,Y),this.bindings[ee.key]=this.bindings[ee.key]||[],this.bindings[ee.key].push(ee)}},{key:"listen",value:function(){var U=this;this.quill.root.addEventListener("keydown",function(W){if(!W.defaultPrevented){var ee=(U.bindings[W.which||W.keyCode]||[]).filter(function(ce){return M.match(W,ce)});if(0!==ee.length){var te=U.quill.getSelection();if(null!=te&&U.quill.hasFocus()){var ne=U.quill.getLine(te.index),oe=s(ne,2),le=oe[0],ue=oe[1],G=U.quill.getLeaf(te.index),$=s(G,2),X=$[0],J=$[1],Z=0===te.length?[X,J]:U.quill.getLeaf(te.index+te.length),re=s(Z,2),ie=re[0],ae=re[1],se=X instanceof b.default.Text?X.value().slice(0,J):"",fe=ie instanceof b.default.Text?ie.value().slice(ae):"",Q={collapsed:0===te.length,empty:0===te.length&&le.length()<=1,format:U.quill.getFormat(te),offset:ue,prefix:se,suffix:fe};ee.some(function(ce){if(null!=ce.collapsed&&ce.collapsed!==Q.collapsed||null!=ce.empty&&ce.empty!==Q.empty||null!=ce.offset&&ce.offset!==Q.offset)return!1;if(Array.isArray(ce.format)){if(ce.format.every(function(de){return null==Q.format[de]}))return!1}else if("object"===i(ce.format)&&!Object.keys(ce.format).every(function(de){return!0===ce.format[de]?null!=Q.format[de]:!1===ce.format[de]?null==Q.format[de]:(0,d.default)(ce.format[de],Q.format[de])}))return!1;return!(null!=ce.prefix&&!ce.prefix.test(Q.prefix)||null!=ce.suffix&&!ce.suffix.test(Q.suffix))&&!0!==ce.handler.call(U,te,Q)})&&W.preventDefault()}}}})}}]),M}(O.default);function j(C,M){var K;return w(K={key:C,shiftKey:M,altKey:null},C===_.keys.LEFT?"prefix":"suffix",/^$/),w(K,"handler",function(Y){var ee=Y.index;C===_.keys.RIGHT&&(ee+=Y.length+1);var te=this.quill.getLeaf(ee);return!(s(te,1)[0]instanceof b.default.Embed&&(C===_.keys.LEFT?M?this.quill.setSelection(Y.index-1,Y.length+1,E.default.sources.USER):this.quill.setSelection(Y.index-1,E.default.sources.USER):M?this.quill.setSelection(Y.index,Y.length+1,E.default.sources.USER):this.quill.setSelection(Y.index+Y.length+1,E.default.sources.USER),1))}),K}function R(C,M){if(!(0===C.index||this.quill.getLength()<=1)){var K=this.quill.getLine(C.index),W=s(K,1)[0],Y={};if(0===M.offset){var ee=this.quill.getLine(C.index-1),ne=s(ee,1)[0];if(null!=ne&&ne.length()>1){var oe=W.formats(),le=this.quill.getFormat(C.index-1,1);Y=h.default.attributes.diff(oe,le)||{}}}var ue=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(M.prefix)?2:1;this.quill.deleteText(C.index-ue,ue,E.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(C.index-ue,ue,Y,E.default.sources.USER),this.quill.focus()}}function L(C,M){var K=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(M.suffix)?2:1;if(!(C.index>=this.quill.getLength()-K)){var U={},W=0,Y=this.quill.getLine(C.index),te=s(Y,1)[0];if(M.offset>=te.length()-1){var ne=this.quill.getLine(C.index+1),le=s(ne,1)[0];if(le){var ue=te.formats(),G=this.quill.getFormat(C.index,1);U=h.default.attributes.diff(ue,G)||{},W=le.length()}}this.quill.deleteText(C.index,K,E.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(C.index+W-1,K,U,E.default.sources.USER)}}function N(C){var M=this.quill.getLines(C),K={};if(M.length>1){var U=M[0].formats(),W=M[M.length-1].formats();K=h.default.attributes.diff(W,U)||{}}this.quill.deleteText(C,E.default.sources.USER),Object.keys(K).length>0&&this.quill.formatLine(C.index,1,K,E.default.sources.USER),this.quill.setSelection(C.index,E.default.sources.SILENT),this.quill.focus()}function k(C,M){var K=this;C.length>0&&this.quill.scroll.deleteAt(C.index,C.length);var U=Object.keys(M.format).reduce(function(W,Y){return b.default.query(Y,b.default.Scope.BLOCK)&&!Array.isArray(M.format[Y])&&(W[Y]=M.format[Y]),W},{});this.quill.insertText(C.index,"\n",U,E.default.sources.USER),this.quill.setSelection(C.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(M.format).forEach(function(W){null==U[W]&&(Array.isArray(M.format[W])||"link"!==W&&K.quill.format(W,M.format[W],E.default.sources.USER))})}function B(C){return{key:_.keys.TAB,shiftKey:!C,format:{"code-block":!0},handler:function(K){var U=b.default.query("code-block"),W=K.index,Y=K.length,ee=this.quill.scroll.descendant(U,W),te=s(ee,2),ne=te[0],oe=te[1];if(null!=ne){var le=this.quill.getIndex(ne),ue=ne.newlineIndex(oe,!0)+1,G=ne.newlineIndex(le+oe+Y),$=ne.domNode.textContent.slice(ue,G).split("\n");oe=0,$.forEach(function(X,J){C?(ne.insertAt(ue+oe,U.TAB),oe+=U.TAB.length,0===J?W+=U.TAB.length:Y+=U.TAB.length):X.startsWith(U.TAB)&&(ne.deleteAt(ue+oe,U.TAB.length),oe-=U.TAB.length,0===J?W-=U.TAB.length:Y-=U.TAB.length),oe+=X.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(W,Y,E.default.sources.SILENT)}}}}function q(C){return{key:C[0].toUpperCase(),shortKey:!0,handler:function(K,U){this.quill.format(C,!U.format[C],E.default.sources.USER)}}}function V(C){if("string"==typeof C||"number"==typeof C)return V({key:C});if("object"===(void 0===C?"undefined":i(C))&&(C=(0,l.default)(C,!1)),"string"==typeof C.key)if(null!=_.keys[C.key.toUpperCase()])C.key=_.keys[C.key.toUpperCase()];else{if(1!==C.key.length)return null;C.key=C.key.toUpperCase().charCodeAt(0)}return C.shortKey&&(C[I]=C.shortKey,delete C.shortKey),C}_.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},_.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:_.keys.TAB,format:["blockquote","indent","list"],handler:function(M,K){if(K.collapsed&&0!==K.offset)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:_.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(M,K){if(K.collapsed&&0!==K.offset)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:_.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(M,K){null!=K.format.indent?this.quill.format("indent","-1",E.default.sources.USER):null!=K.format.list&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":B(!0),"outdent code-block":B(!1),"remove tab":{key:_.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(M){this.quill.deleteText(M.index-1,1,E.default.sources.USER)}},tab:{key:_.keys.TAB,handler:function(M){this.quill.history.cutoff();var K=(new u.default).retain(M.index).delete(M.length).insert("\t");this.quill.updateContents(K,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index+1,E.default.sources.SILENT)}},"list empty enter":{key:_.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(M,K){this.quill.format("list",!1,E.default.sources.USER),K.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:_.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(M){var K=this.quill.getLine(M.index),U=s(K,2),W=U[0],Y=U[1],ee=(0,g.default)({},W.formats(),{list:"checked"}),te=(new u.default).retain(M.index).insert("\n",ee).retain(W.length()-Y-1).retain(1,{list:"unchecked"});this.quill.updateContents(te,E.default.sources.USER),this.quill.setSelection(M.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:_.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(M,K){var U=this.quill.getLine(M.index),W=s(U,2),Y=W[0],ee=W[1],te=(new u.default).retain(M.index).insert("\n",K.format).retain(Y.length()-ee-1).retain(1,{header:null});this.quill.updateContents(te,E.default.sources.USER),this.quill.setSelection(M.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(M,K){var U=K.prefix.length,W=this.quill.getLine(M.index),Y=s(W,2),ee=Y[0],te=Y[1];if(te>U)return!0;var ne=void 0;switch(K.prefix.trim()){case"[]":case"[ ]":ne="unchecked";break;case"[x]":ne="checked";break;case"-":case"*":ne="bullet";break;default:ne="ordered"}this.quill.insertText(M.index," ",E.default.sources.USER),this.quill.history.cutoff();var oe=(new u.default).retain(M.index-te).delete(U+1).retain(ee.length()-2-te).retain(1,{list:ne});this.quill.updateContents(oe,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index-U,E.default.sources.SILENT)}},"code exit":{key:_.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(M){var K=this.quill.getLine(M.index),U=s(K,2),W=U[0],Y=U[1],ee=(new u.default).retain(M.index+W.length()-Y-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ee,E.default.sources.USER)}},"embed left":j(_.keys.LEFT,!1),"embed left shift":j(_.keys.LEFT,!0),"embed right":j(_.keys.RIGHT,!1),"embed right shift":j(_.keys.RIGHT,!0)}},n.default=_,n.SHORTKEY=I},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function h(y,b,c){null===y&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,b);if(void 0===E){var S=Object.getPrototypeOf(y);return null===S?void 0:h(S,b,c)}if("value"in E)return E.value;var x=E.get;return void 0===x?void 0:x.call(c)},a=function(){function h(y,b){for(var c=0;c<b.length;c++){var E=b[c];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,b,c){return b&&h(y.prototype,b),c&&h(y,c),y}}(),l=v(r(0)),d=v(r(7));function v(h){return h&&h.__esModule?h:{default:h}}var m=function(h){function y(b,c){!function g(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}(this,y);var E=function f(h,y){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?h:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b));return E.selection=c,E.textNode=document.createTextNode(y.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return function u(h,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);h.prototype=Object.create(y&&y.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(h,y):h.__proto__=y)}(y,h),a(y,null,[{key:"value",value:function(){}}]),a(y,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(c,E){if(0!==this._length)return s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,c,E);for(var S=this,x=0;null!=S&&S.statics.scope!==l.default.Scope.BLOCK_BLOT;)x+=S.offset(S.parent),S=S.parent;null!=S&&(this._length=y.CONTENTS.length,S.optimize(),S.formatAt(x,y.CONTENTS.length,c,E),this._length=0)}},{key:"index",value:function(c,E){return c===this.textNode?0:s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,c,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var c=this.textNode,E=this.selection.getNativeRange(),S=void 0,x=void 0,A=void 0;if(null!=E&&E.start.node===c&&E.end.node===c){var O=[c,E.start.offset,E.end.offset];S=O[0],x=O[1],A=O[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var F=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof d.default?(S=this.next.domNode,this.next.insertAt(0,F),this.textNode.data=y.CONTENTS):(this.textNode.data=F,this.parent.insertBefore(l.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=x){var P=function(y,b){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return function h(y,b){var c=[],E=!0,S=!1,x=void 0;try{for(var O,A=y[Symbol.iterator]();!(E=(O=A.next()).done)&&(c.push(O.value),!b||c.length!==b);E=!0);}catch(F){S=!0,x=F}finally{try{!E&&A.return&&A.return()}finally{if(S)throw x}}return c}(y,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}([x,A].map(function(T){return Math.max(0,Math.min(S.data.length,T-1))}),2);return{startNode:S,startOffset:x=P[0],endNode:S,endOffset:A=P[1]}}}}},{key:"update",value:function(c,E){var S=this;if(c.some(function(A){return"characterData"===A.type&&A.target===S.textNode})){var x=this.restore();x&&(E.range=x)}}},{key:"value",value:function(){return""}}]),y}(l.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\ufeff",n.default=m},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=l(r(0)),a=r(4),o=l(a);function l(f){return f&&f.__esModule?f:{default:f}}function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}var g=function(f){function u(){return p(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),u}(s.default.Container);g.allowedChildren=[o.default,a.BlockEmbed,g],n.default=g},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=function(){function m(h,y){for(var b=0;b<y.length;b++){var c=y[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,y,b){return y&&m(h.prototype,y),b&&m(h,b),h}}(),s=function m(h,y,b){null===h&&(h=Function.prototype);var c=Object.getOwnPropertyDescriptor(h,y);if(void 0===c){var E=Object.getPrototypeOf(h);return null===E?void 0:m(E,y,b)}if("value"in c)return c.value;var S=c.get;return void 0===S?void 0:S.call(b)},o=function l(m){return m&&m.__esModule?m:{default:m}}(r(0));function p(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function d(m,h){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?m:h}var g=function(m){function h(){return p(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return function v(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(m,h):m.__proto__=h)}(h,m),i(h,[{key:"value",value:function(b){var c=s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,b);return c.startsWith("rgb(")?"#"+(c=c.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join(""):c}}]),h}(o.default.Attributor.Style),f=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),u=new g("color","color",{scope:o.default.Scope.INLINE});n.ColorAttributor=g,n.ColorClass=f,n.ColorStyle=u},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=function(){function u(m,h){for(var y=0;y<h.length;y++){var b=h[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,h,y){return h&&u(m.prototype,h),y&&u(m,y),m}}(),s=function u(m,h,y){null===m&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,h);if(void 0===b){var c=Object.getPrototypeOf(m);return null===c?void 0:u(c,h,y)}if("value"in b)return b.value;var E=b.get;return void 0===E?void 0:E.call(y)};function p(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}function d(u,m){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?u:m}var g=function(u){function m(){return p(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return function v(u,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);u.prototype=Object.create(m&&m.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(u,m):u.__proto__=m)}(m,u),i(m,[{key:"format",value:function(y,b){if(y!==this.statics.blotName||!b)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,y,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(y){var b=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,y);return y=this.sanitize(y),b.setAttribute("href",y),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return f(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),m}(function l(u){return u&&u.__esModule?u:{default:u}}(r(6)).default);function f(u,m){var h=document.createElement("a");h.href=u;var y=h.href.slice(0,h.href.indexOf(":"));return m.indexOf(y)>-1}g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"],n.default=g,n.sanitize=f},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=function(){function m(h,y){for(var b=0;b<y.length;b++){var c=y[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,y,b){return y&&m(h.prototype,y),b&&m(h,b),h}}(),o=d(r(23)),p=d(r(107));function d(m){return m&&m.__esModule?m:{default:m}}var g=0;function f(m,h){m.setAttribute(h,"true"!==m.getAttribute(h))}var u=function(){function m(h){var y=this;(function v(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")})(this,m),this.select=h,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case o.default.keys.ENTER:y.togglePicker();break;case o.default.keys.ESCAPE:y.escape(),b.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var b=this,c=document.createElement("span");return c.tabIndex="0",c.setAttribute("role","button"),c.classList.add("ql-picker-item"),y.hasAttribute("value")&&c.setAttribute("data-value",y.getAttribute("value")),y.textContent&&c.setAttribute("data-label",y.textContent),c.addEventListener("click",function(){b.selectItem(c,!0)}),c.addEventListener("keydown",function(E){switch(E.keyCode){case o.default.keys.ENTER:b.selectItem(c,!0),E.preventDefault();break;case o.default.keys.ESCAPE:b.escape(),E.preventDefault()}}),c}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=p.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(c){var E=y.buildItem(c);b.appendChild(E),!0===c.selected&&y.selectItem(E)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(b){y.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=this.container.querySelector(".ql-selected");if(y!==c&&(null!=c&&c.classList.remove("ql-selected"),null!=y&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":i(Event))){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var c=null!=y&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",c)}}]),m}();n.default=u},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=H(r(0)),o=H(r(5)),l=r(4),p=H(l),v=H(r(16)),f=H(r(25)),m=H(r(24)),y=H(r(35)),c=H(r(6)),S=H(r(22)),A=H(r(7)),F=H(r(55)),P=H(r(42)),D=H(r(23));function H(I){return I&&I.__esModule?I:{default:I}}o.default.register({"blots/block":p.default,"blots/block/embed":l.BlockEmbed,"blots/break":v.default,"blots/container":f.default,"blots/cursor":m.default,"blots/embed":y.default,"blots/inline":c.default,"blots/scroll":S.default,"blots/text":A.default,"modules/clipboard":F.default,"modules/history":P.default,"modules/keyboard":D.default}),s.default.register(p.default,v.default,m.default,c.default,S.default,A.default),n.default=o.default},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),s=function(){function a(o){this.domNode=o,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(o){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var l;return Array.isArray(this.tagName)?("string"==typeof o&&(o=o.toUpperCase(),parseInt(o).toString()===o&&(o=parseInt(o))),l="number"==typeof o?document.createElement(this.tagName[o-1]):this.tagName.indexOf(o)>-1?document.createElement(o):document.createElement(this.tagName[0])):l=document.createElement(this.tagName),this.className&&l.classList.add(this.className),l},a.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var o=this.domNode.cloneNode(!1);return i.create(o)},a.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},a.prototype.deleteAt=function(o,l){this.isolate(o,l).remove()},a.prototype.formatAt=function(o,l,p,d){var v=this.isolate(o,l);if(null!=i.query(p,i.Scope.BLOT)&&d)v.wrap(p,d);else if(null!=i.query(p,i.Scope.ATTRIBUTE)){var g=i.create(this.statics.scope);v.wrap(g),g.format(p,d)}},a.prototype.insertAt=function(o,l,p){var d=null==p?i.create("text",l):i.create(l,p),v=this.split(o);this.parent.insertBefore(d,v)},a.prototype.insertInto=function(o,l){void 0===l&&(l=null),null!=this.parent&&this.parent.children.remove(this);var p=null;o.children.insertBefore(this,l),null!=l&&(p=l.domNode),(this.domNode.parentNode!=o.domNode||this.domNode.nextSibling!=p)&&o.domNode.insertBefore(this.domNode,p),this.parent=o,this.attach()},a.prototype.isolate=function(o,l){var p=this.split(o);return p.split(l),p},a.prototype.length=function(){return 1},a.prototype.offset=function(o){return void 0===o&&(o=this.parent),null==this.parent||this==o?0:this.parent.children.offset(this)+this.parent.offset(o)},a.prototype.optimize=function(o){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},a.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(o){null!=o.parent&&(o.parent.insertBefore(this,o.next),o.remove())},a.prototype.replaceWith=function(o,l){var p="string"==typeof o?i.create(o,l):o;return p.replace(this),p},a.prototype.split=function(o,l){return 0===o?this:this.next},a.prototype.update=function(o,l){},a.prototype.wrap=function(o,l){var p="string"==typeof o?i.create(o,l):o;return null!=this.parent&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},a.blotName="abstract",a}();n.default=s},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(12),s=r(32),a=r(33),o=r(1),l=function(){function p(d){this.attributes={},this.domNode=d,this.build()}return p.prototype.attribute=function(d,v){v?d.add(this.domNode,v)&&(null!=d.value(this.domNode)?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},p.prototype.build=function(){var d=this;this.attributes={};var v=i.default.keys(this.domNode),g=s.default.keys(this.domNode),f=a.default.keys(this.domNode);v.concat(g).concat(f).forEach(function(u){var m=o.query(u,o.Scope.ATTRIBUTE);m instanceof i.default&&(d.attributes[m.attrName]=m)})},p.prototype.copy=function(d){var v=this;Object.keys(this.attributes).forEach(function(g){var f=v.attributes[g].value(v.domNode);d.format(g,f)})},p.prototype.move=function(d){var v=this;this.copy(d),Object.keys(this.attributes).forEach(function(g){v.attributes[g].remove(v.domNode)}),this.attributes={}},p.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(v,g){return v[g]=d.attributes[g].value(d.domNode),v},{})},p}();n.default=l},function(e,n,r){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var v in d)d.hasOwnProperty(v)&&(p[v]=d[v])},function(p,d){function v(){this.constructor=p}l(p,d),p.prototype=null===d?Object.create(d):(v.prototype=d.prototype,new v)});function a(l,p){return(l.getAttribute("class")||"").split(/\s+/).filter(function(v){return 0===v.indexOf(p+"-")})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(l){function p(){return null!==l&&l.apply(this,arguments)||this}return i(p,l),p.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(v){return v.split("-").slice(0,-1).join("-")})},p.prototype.add=function(d,v){return!!this.canAdd(d,v)&&(this.remove(d),d.classList.add(this.keyName+"-"+v),!0)},p.prototype.remove=function(d){a(d,this.keyName).forEach(function(g){d.classList.remove(g)}),0===d.classList.length&&d.removeAttribute("class")},p.prototype.value=function(d){var g=(a(d,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(d,g)?g:""},p}(r(12).default);n.default=o},function(e,n,r){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var v in d)d.hasOwnProperty(v)&&(p[v]=d[v])},function(p,d){function v(){this.constructor=p}l(p,d),p.prototype=null===d?Object.create(d):(v.prototype=d.prototype,new v)});function a(l){var p=l.split("-"),d=p.slice(1).map(function(v){return v[0].toUpperCase()+v.slice(1)}).join("");return p[0]+d}Object.defineProperty(n,"__esModule",{value:!0});var o=function(l){function p(){return null!==l&&l.apply(this,arguments)||this}return i(p,l),p.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(v){return v.split(":")[0].trim()})},p.prototype.add=function(d,v){return!!this.canAdd(d,v)&&(d.style[a(this.keyName)]=v,!0)},p.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},p.prototype.value=function(d){var v=d.style[a(this.keyName)];return this.canAdd(d,v)?v:""},p}(r(12).default);n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(l,p){for(var d=0;d<p.length;d++){var v=p[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}return function(l,p,d){return p&&o(l.prototype,p),d&&o(l,d),l}}(),a=function(){function o(l,p){(function s(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.quill=l,this.options=p,this.modules={}}return i(o,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(d){null==p.modules[d]&&p.addModule(d)})}},{key:"addModule",value:function(p){var d=this.quill.constructor.import("modules/"+p);return this.modules[p]=new d(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),o}();a.DEFAULTS={modules:{}},a.themes={default:a},n.default=a},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function h(y,b){for(var c=0;c<b.length;c++){var E=b[c];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,b,c){return b&&h(y.prototype,b),c&&h(y,c),y}}(),s=function h(y,b,c){null===y&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,b);if(void 0===E){var S=Object.getPrototypeOf(y);return null===S?void 0:h(S,b,c)}if("value"in E)return E.value;var x=E.get;return void 0===x?void 0:x.call(c)},o=d(r(0)),p=d(r(7));function d(h){return h&&h.__esModule?h:{default:h}}var u="\ufeff",m=function(h){function y(b){!function v(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}(this,y);var c=function g(h,y){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?h:y}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b));return c.contentNode=document.createElement("span"),c.contentNode.setAttribute("contenteditable",!1),[].slice.call(c.domNode.childNodes).forEach(function(E){c.contentNode.appendChild(E)}),c.leftGuard=document.createTextNode(u),c.rightGuard=document.createTextNode(u),c.domNode.appendChild(c.leftGuard),c.domNode.appendChild(c.contentNode),c.domNode.appendChild(c.rightGuard),c}return function f(h,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);h.prototype=Object.create(y&&y.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(h,y):h.__proto__=y)}(y,h),i(y,[{key:"index",value:function(c,E){return c===this.leftGuard?0:c===this.rightGuard?1:s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,c,E)}},{key:"restore",value:function(c){var E=void 0,S=void 0,x=c.data.split(u).join("");if(c===this.leftGuard)if(this.prev instanceof p.default){var A=this.prev.length();this.prev.insertAt(A,x),E={startNode:this.prev.domNode,startOffset:A+x.length}}else S=document.createTextNode(x),this.parent.insertBefore(o.default.create(S),this),E={startNode:S,startOffset:x.length};else c===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,x),E={startNode:this.next.domNode,startOffset:x.length}):(S=document.createTextNode(x),this.parent.insertBefore(o.default.create(S),this.next),E={startNode:S,startOffset:x.length}));return c.data=u,E}},{key:"update",value:function(c,E){var S=this;c.forEach(function(x){if("characterData"===x.type&&(x.target===S.leftGuard||x.target===S.rightGuard)){var A=S.restore(x.target);A&&(E.range=A)}})}}]),y}(o.default.Embed);n.default=m},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=function a(v){return v&&v.__esModule?v:{default:v}}(r(0)),o={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},l=new s.default.Attributor.Attribute("align","align",o),p=new s.default.Attributor.Class("align","ql-align",o),d=new s.default.Attributor.Style("align","text-align",o);n.AlignAttribute=l,n.AlignClass=p,n.AlignStyle=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=function o(d){return d&&d.__esModule?d:{default:d}}(r(0)),a=r(26),l=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),p=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});n.BackgroundClass=l,n.BackgroundStyle=p},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=function a(v){return v&&v.__esModule?v:{default:v}}(r(0)),o={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},l=new s.default.Attributor.Attribute("direction","dir",o),p=new s.default.Attributor.Class("direction","ql-direction",o),d=new s.default.Attributor.Style("direction","direction",o);n.DirectionAttribute=l,n.DirectionClass=p,n.DirectionStyle=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=function(){function h(y,b){for(var c=0;c<b.length;c++){var E=b[c];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,b,c){return b&&h(y.prototype,b),c&&h(y,c),y}}(),s=function h(y,b,c){null===y&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,b);if(void 0===E){var S=Object.getPrototypeOf(y);return null===S?void 0:h(S,b,c)}if("value"in E)return E.value;var x=E.get;return void 0===x?void 0:x.call(c)},o=function l(h){return h&&h.__esModule?h:{default:h}}(r(0));function p(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}function d(h,y){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?h:y}var g={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new o.default.Attributor.Class("font","ql-font",g),u=function(h){function y(){return p(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return function v(h,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);h.prototype=Object.create(y&&y.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(h,y):h.__proto__=y)}(y,h),i(y,[{key:"value",value:function(c){return s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,c).replace(/["']/g,"")}}]),y}(o.default.Attributor.Style),m=new u("font","font-family",g);n.FontStyle=m,n.FontClass=f},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=function a(p){return p&&p.__esModule?p:{default:p}}(r(0)),o=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),l=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=o,n.SizeStyle=l},function(e,n,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=function(){function b(c,E){for(var S=0;S<E.length;S++){var x=E[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(c,x.key,x)}}return function(c,E,S){return E&&b(c.prototype,E),S&&b(c,S),c}}(),a=v(r(0)),l=v(r(5));function v(b){return b&&b.__esModule?b:{default:b}}var m=function(b){function c(E,S){!function g(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}(this,c);var x=function f(b,c){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?b:c}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,E,S));return x.lastRecorded=0,x.ignoreChange=!1,x.clear(),x.quill.on(l.default.events.EDITOR_CHANGE,function(A,O,F,w){A!==l.default.events.TEXT_CHANGE||x.ignoreChange||(x.options.userOnly&&w!==l.default.sources.USER?x.transform(O):x.record(O,F))}),x.quill.keyboard.addBinding({key:"Z",shortKey:!0},x.undo.bind(x)),x.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},x.redo.bind(x)),/Win/i.test(navigator.platform)&&x.quill.keyboard.addBinding({key:"Y",shortKey:!0},x.redo.bind(x)),x}return function u(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}(c,b),i(c,[{key:"change",value:function(S,x){if(0!==this.stack[S].length){var A=this.stack[S].pop();this.stack[x].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[S],l.default.sources.USER),this.ignoreChange=!1;var O=y(A[S]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,x){if(0!==S.ops.length){this.stack.redo=[];var A=this.quill.getContents().diff(x),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var F=this.stack.undo.pop();A=A.compose(F.undo),S=F.redo.compose(S)}else this.lastRecorded=O;this.stack.undo.push({redo:S,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(x){x.undo=S.transform(x.undo,!0),x.redo=S.transform(x.redo,!0)}),this.stack.redo.forEach(function(x){x.undo=S.transform(x.undo,!0),x.redo=S.transform(x.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),c}(v(r(9)).default);function y(b){var c=b.reduce(function(S,x){return S+(x.delete||0)},0),E=b.length()-c;return function h(b){var c=b.ops[b.ops.length-1];return null!=c&&(null!=c.insert?"string"==typeof c.insert&&c.insert.endsWith("\n"):null!=c.attributes&&Object.keys(c.attributes).some(function(E){return null!=a.default.query(E,a.default.Scope.BLOCK)}))}(b)&&(E-=1),E}m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},n.default=m,n.getLastChangeIndex=y},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=function(){function k(B,q){for(var V=0;V<q.length;V++){var C=q[V];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(B,C.key,C)}}return function(B,q,V){return q&&k(B.prototype,q),V&&k(B,V),B}}(),s=function k(B,q,V){null===B&&(B=Function.prototype);var C=Object.getOwnPropertyDescriptor(B,q);if(void 0===C){var M=Object.getPrototypeOf(B);return null===M?void 0:k(M,q,V)}if("value"in C)return C.value;var K=C.get;return void 0===K?void 0:K.call(V)},o=O(r(3)),p=O(r(2)),v=O(r(8)),f=O(r(23)),m=O(r(34)),y=O(r(59)),c=O(r(60)),S=O(r(28)),A=O(r(61));function O(k){return k&&k.__esModule?k:{default:k}}function F(k,B){if(!(k instanceof B))throw new TypeError("Cannot call a class as a function")}function w(k,B){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!B||"object"!=typeof B&&"function"!=typeof B?k:B}function P(k,B){if("function"!=typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function, not "+typeof B);k.prototype=Object.create(B&&B.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(k,B):k.__proto__=B)}var T=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],I=["1","2","3",!1],_=["small",!1,"large","huge"],j=function(k){function B(q,V){F(this,B);var C=w(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,q,V));return q.emitter.listenDOM("click",document.body,function K(U){if(!document.body.contains(q.root))return document.body.removeEventListener("click",K);null!=C.tooltip&&!C.tooltip.root.contains(U.target)&&document.activeElement!==C.tooltip.textbox&&!C.quill.hasFocus()&&C.tooltip.hide(),null!=C.pickers&&C.pickers.forEach(function(W){W.container.contains(U.target)||W.close()})}),C}return P(B,k),i(B,[{key:"addModule",value:function(V){var C=s(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"addModule",this).call(this,V);return"toolbar"===V&&this.extendToolbar(C),C}},{key:"buildButtons",value:function(V,C){V.forEach(function(M){(M.getAttribute("class")||"").split(/\s+/).forEach(function(U){if(U.startsWith("ql-")&&(U=U.slice("ql-".length),null!=C[U]))if("direction"===U)M.innerHTML=C[U][""]+C[U].rtl;else if("string"==typeof C[U])M.innerHTML=C[U];else{var W=M.value||"";null!=W&&C[U][W]&&(M.innerHTML=C[U][W])}})})}},{key:"buildPickers",value:function(V,C){var M=this;this.pickers=V.map(function(U){if(U.classList.contains("ql-align"))return null==U.querySelector("option")&&N(U,T),new c.default(U,C.align);if(U.classList.contains("ql-background")||U.classList.contains("ql-color")){var W=U.classList.contains("ql-background")?"background":"color";return null==U.querySelector("option")&&N(U,D,"background"===W?"#ffffff":"#000000"),new y.default(U,C[W])}return null==U.querySelector("option")&&(U.classList.contains("ql-font")?N(U,H):U.classList.contains("ql-header")?N(U,I):U.classList.contains("ql-size")&&N(U,_)),new S.default(U)}),this.quill.on(v.default.events.EDITOR_CHANGE,function(){M.pickers.forEach(function(W){W.update()})})}}]),B}(m.default);j.DEFAULTS=(0,o.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var B=this,q=this.container.querySelector("input.ql-image[type=file]");null==q&&((q=document.createElement("input")).setAttribute("type","file"),q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),q.classList.add("ql-image"),q.addEventListener("change",function(){if(null!=q.files&&null!=q.files[0]){var V=new FileReader;V.onload=function(C){var M=B.quill.getSelection(!0);B.quill.updateContents((new p.default).retain(M.index).delete(M.length).insert({image:C.target.result}),v.default.sources.USER),B.quill.setSelection(M.index+1,v.default.sources.SILENT),q.value=""},V.readAsDataURL(q.files[0])}}),this.container.appendChild(q)),q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var R=function(k){function B(q,V){F(this,B);var C=w(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,q,V));return C.textbox=C.root.querySelector('input[type="text"]'),C.listen(),C}return P(B,k),i(B,[{key:"listen",value:function(){var V=this;this.textbox.addEventListener("keydown",function(C){f.default.match(C,"enter")?(V.save(),C.preventDefault()):f.default.match(C,"escape")&&(V.cancel(),C.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=C?this.textbox.value=C:V!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+V)||""),this.root.setAttribute("data-mode",V)}},{key:"restoreFocus",value:function(){var V=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=V}},{key:"save",value:function(){var V=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var C=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",V,v.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",V,v.default.sources.USER)),this.quill.root.scrollTop=C;break;case"video":V=function L(k){var B=k.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||k.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return B?(B[1]||"https")+"://www.youtube.com/embed/"+B[2]+"?showinfo=0":(B=k.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(B[1]||"https")+"://player.vimeo.com/video/"+B[2]+"/":k}(V);case"formula":if(!V)break;var M=this.quill.getSelection(!0);if(null!=M){var K=M.index+M.length;this.quill.insertEmbed(K,this.root.getAttribute("data-mode"),V,v.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(K+1," ",v.default.sources.USER),this.quill.setSelection(K+2,v.default.sources.USER)}}this.textbox.value="",this.hide()}}]),B}(A.default);function N(k,B){var q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];B.forEach(function(V){var C=document.createElement("option");V===q?C.setAttribute("selected","selected"):C.setAttribute("value",V),k.appendChild(C)})}n.BaseTooltip=R,n.default=j},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var o,l=this.iterator();o=l();)if(o===a)return!0;return!1},s.prototype.insertBefore=function(a,o){!a||(a.next=o,null!=o?(a.prev=o.prev,null!=o.prev&&(o.prev.next=a),o.prev=a,o===this.head&&(this.head=a)):null!=this.tail?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var o=0,l=this.head;null!=l;){if(l===a)return o;o+=l.length(),l=l.next}return-1},s.prototype.remove=function(a){!this.contains(a)||(null!=a.prev&&(a.prev.next=a.next),null!=a.next&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return void 0===a&&(a=this.head),function(){var o=a;return null!=a&&(a=a.next),o}},s.prototype.find=function(a,o){void 0===o&&(o=!1);for(var l,p=this.iterator();l=p();){var d=l.length();if(a<d||o&&a===d&&(null==l.next||0!==l.next.length()))return[l,a];a-=d}return[null,0]},s.prototype.forEach=function(a){for(var o,l=this.iterator();o=l();)a(o)},s.prototype.forEachAt=function(a,o,l){if(!(o<=0))for(var g,p=this.find(a),f=a-p[1],u=this.iterator(p[0]);(g=u())&&f<a+o;){var m=g.length();a>f?l(g,a-f,Math.min(o,f+m-a)):l(g,0,Math.min(m,a+o-f)),f+=m}},s.prototype.map=function(a){return this.reduce(function(o,l){return o.push(a(l)),o},[])},s.prototype.reduce=function(a,o){for(var l,p=this.iterator();l=p();)o=a(o,l);return o},s}();n.default=i},function(e,n,r){"use strict";var d,i=this&&this.__extends||(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var f in g)g.hasOwnProperty(f)&&(v[f]=g[f])},function(v,g){function f(){this.constructor=v}d(v,g),v.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),a=r(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},p=function(d){function v(g){var f=d.call(this,g)||this;return f.scroll=f,f.observer=new MutationObserver(function(u){f.update(u)}),f.observer.observe(f.domNode,o),f.attach(),f}return i(v,d),v.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},v.prototype.deleteAt=function(g,f){this.update(),0===g&&f===this.length()?this.children.forEach(function(u){u.remove()}):d.prototype.deleteAt.call(this,g,f)},v.prototype.formatAt=function(g,f,u,m){this.update(),d.prototype.formatAt.call(this,g,f,u,m)},v.prototype.insertAt=function(g,f,u){this.update(),d.prototype.insertAt.call(this,g,f,u)},v.prototype.optimize=function(g,f){var u=this;void 0===g&&(g=[]),void 0===f&&(f={}),d.prototype.optimize.call(this,f);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)g.push(m.pop());for(var h=function(E,S){void 0===S&&(S=!0),null!=E&&E!==u&&null!=E.domNode.parentNode&&(null==E.domNode[a.DATA_KEY].mutations&&(E.domNode[a.DATA_KEY].mutations=[]),S&&h(E.parent))},y=function(E){null==E.domNode[a.DATA_KEY]||null==E.domNode[a.DATA_KEY].mutations||(E instanceof s.default&&E.children.forEach(y),E.optimize(f))},b=g,c=0;b.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(E){var S=a.find(E.target,!0);null!=S&&(S.domNode===E.target&&("childList"===E.type?(h(a.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(x){var A=a.find(x,!1);h(A,!1),A instanceof s.default&&A.children.forEach(function(O){h(O,!1)})})):"attributes"===E.type&&h(S.prev)),h(S))}),this.children.forEach(y),m=(b=[].slice.call(this.observer.takeRecords())).slice();m.length>0;)g.push(m.pop())}},v.prototype.update=function(g,f){var u=this;void 0===f&&(f={}),(g=g||this.observer.takeRecords()).map(function(m){var h=a.find(m.target,!0);return null==h?null:null==h.domNode[a.DATA_KEY].mutations?(h.domNode[a.DATA_KEY].mutations=[m],h):(h.domNode[a.DATA_KEY].mutations.push(m),null)}).forEach(function(m){null==m||m===u||null==m.domNode[a.DATA_KEY]||m.update(m.domNode[a.DATA_KEY].mutations||[],f)}),null!=this.domNode[a.DATA_KEY].mutations&&d.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,f),this.optimize(g,f)},v.blotName="scroll",v.defaultChild="block",v.scope=a.Scope.BLOCK_BLOT,v.tagName="DIV",v}(s.default);n.default=p},function(e,n,r){"use strict";var p,i=this&&this.__extends||(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)v.hasOwnProperty(g)&&(d[g]=v[g])},function(d,v){function g(){this.constructor=d}p(d,v),d.prototype=null===v?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),a=r(1),l=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return i(d,p),d.formats=function(v){if(v.tagName!==d.tagName)return p.formats.call(this,v)},d.prototype.format=function(v,g){var f=this;v!==this.statics.blotName||g?p.prototype.format.call(this,v,g):(this.children.forEach(function(u){u instanceof s.default||(u=u.wrap(d.blotName,!0)),f.attributes.copy(u)}),this.unwrap())},d.prototype.formatAt=function(v,g,f,u){null!=this.formats()[f]||a.query(f,a.Scope.ATTRIBUTE)?this.isolate(v,g).format(f,u):p.prototype.formatAt.call(this,v,g,f,u)},d.prototype.optimize=function(v){p.prototype.optimize.call(this,v);var g=this.formats();if(0===Object.keys(g).length)return this.unwrap();var f=this.next;f instanceof d&&f.prev===this&&function o(p,d){if(Object.keys(p).length!==Object.keys(d).length)return!1;for(var v in p)if(p[v]!==d[v])return!1;return!0}(g,f.formats())&&(f.moveChildren(this),f.remove())},d.blotName="inline",d.scope=a.Scope.INLINE_BLOT,d.tagName="SPAN",d}(s.default);n.default=l},function(e,n,r){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var v in d)d.hasOwnProperty(v)&&(p[v]=d[v])},function(p,d){function v(){this.constructor=p}l(p,d),p.prototype=null===d?Object.create(d):(v.prototype=d.prototype,new v)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),a=r(1),o=function(l){function p(){return null!==l&&l.apply(this,arguments)||this}return i(p,l),p.formats=function(d){var v=a.query(p.blotName).tagName;if(d.tagName!==v)return l.formats.call(this,d)},p.prototype.format=function(d,v){null!=a.query(d,a.Scope.BLOCK)&&(d!==this.statics.blotName||v?l.prototype.format.call(this,d,v):this.replaceWith(p.blotName))},p.prototype.formatAt=function(d,v,g,f){null!=a.query(g,a.Scope.BLOCK)?this.format(g,f):l.prototype.formatAt.call(this,d,v,g,f)},p.prototype.insertAt=function(d,v,g){if(null==g||null!=a.query(v,a.Scope.INLINE))l.prototype.insertAt.call(this,d,v,g);else{var f=this.split(d),u=a.create(v,g);f.parent.insertBefore(u,f)}},p.prototype.update=function(d,v){navigator.userAgent.match(/Trident/)?this.build():l.prototype.update.call(this,d,v)},p.blotName="block",p.scope=a.Scope.BLOCK_BLOT,p.tagName="P",p}(s.default);n.default=o},function(e,n,r){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var d in p)p.hasOwnProperty(d)&&(l[d]=p[d])},function(l,p){function d(){this.constructor=l}o(l,p),l.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(o){function l(){return null!==o&&o.apply(this,arguments)||this}return i(l,o),l.formats=function(p){},l.prototype.format=function(p,d){o.prototype.formatAt.call(this,0,this.length(),p,d)},l.prototype.formatAt=function(p,d,v,g){0===p&&d===this.length()?this.format(v,g):o.prototype.formatAt.call(this,p,d,v,g)},l.prototype.formats=function(){return this.statics.formats(this.domNode)},l}(r(19).default);n.default=a},function(e,n,r){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var v in d)d.hasOwnProperty(v)&&(p[v]=d[v])},function(p,d){function v(){this.constructor=p}l(p,d),p.prototype=null===d?Object.create(d):(v.prototype=d.prototype,new v)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),a=r(1),o=function(l){function p(d){var v=l.call(this,d)||this;return v.text=v.statics.value(v.domNode),v}return i(p,l),p.create=function(d){return document.createTextNode(d)},p.value=function(d){var v=d.data;return v.normalize&&(v=v.normalize()),v},p.prototype.deleteAt=function(d,v){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+v)},p.prototype.index=function(d,v){return this.domNode===d?v:-1},p.prototype.insertAt=function(d,v,g){null==g?(this.text=this.text.slice(0,d)+v+this.text.slice(d),this.domNode.data=this.text):l.prototype.insertAt.call(this,d,v,g)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(d){l.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(d,v){return void 0===v&&(v=!1),[this.domNode,d]},p.prototype.split=function(d,v){if(void 0===v&&(v=!1),!v){if(0===d)return this;if(d===this.length())return this.next}var g=a.create(this.domNode.splitText(d));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},p.prototype.update=function(d,v){var g=this;d.some(function(f){return"characterData"===f.type&&f.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=a.Scope.INLINE_BLOT,p}(s.default);n.default=o},function(e,n,r){"use strict";var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,o){return arguments.length>1&&!this.contains(a)==!o?o:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,o){return this.substr(o=o||0,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,o){var l=this.toString();("number"!=typeof o||!isFinite(o)||Math.floor(o)!==o||o>l.length)&&(o=l.length);var p=l.indexOf(a,o-=a.length);return-1!==p&&p===o}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(o){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof o)throw new TypeError("predicate must be a function");for(var v,l=Object(this),p=l.length>>>0,d=arguments[1],g=0;g<p;g++)if(o.call(d,v=l[g],g,l))return v}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,n){var r=-1;function a(c,E,S){if(c==E)return c?[[0,c]]:[];(S<0||c.length<S)&&(S=null);var x=d(c,E),A=c.substring(0,x);x=v(c=c.substring(x),E=E.substring(x));var O=c.substring(c.length-x),F=function o(c,E){var S;if(!c)return[[1,E]];if(!E)return[[r,c]];var x=c.length>E.length?c:E,A=c.length>E.length?E:c,O=x.indexOf(A);if(-1!=O)return S=[[1,x.substring(0,O)],[0,A],[1,x.substring(O+A.length)]],c.length>E.length&&(S[0][0]=S[2][0]=r),S;if(1==A.length)return[[r,c],[1,E]];var F=function g(c,E){var S=c.length>E.length?c:E,x=c.length>E.length?E:c;if(S.length<4||2*x.length<S.length)return null;function A(_,j,R){for(var B,q,V,C,L=_.substring(R,R+Math.floor(_.length/4)),N=-1,k="";-1!=(N=j.indexOf(L,N+1));){var M=d(_.substring(R),j.substring(N)),K=v(_.substring(0,R),j.substring(0,N));k.length<K+M&&(k=j.substring(N-K,N)+j.substring(N,N+M),B=_.substring(0,R-K),q=_.substring(R+M),V=j.substring(0,N-K),C=j.substring(N+M))}return 2*k.length>=_.length?[B,q,V,C,k]:null}var w,P,T,D,H,O=A(S,x,Math.ceil(S.length/4)),F=A(S,x,Math.ceil(S.length/2));return O||F?(w=F?O&&O[4].length>F[4].length?O:F:O,c.length>E.length?(P=w[0],T=w[1],D=w[2],H=w[3]):(D=w[0],H=w[1],P=w[2],T=w[3]),[P,T,D,H,w[4]]):null}(c,E);if(F){var P=F[1],D=F[3],H=F[4],I=a(F[0],F[2]),_=a(P,D);return I.concat([[0,H]],_)}return function l(c,E){for(var S=c.length,x=E.length,A=Math.ceil((S+x)/2),O=A,F=2*A,w=new Array(F),P=new Array(F),T=0;T<F;T++)w[T]=-1,P[T]=-1;w[O+1]=0,P[O+1]=0;for(var D=S-x,H=D%2!=0,I=0,_=0,j=0,R=0,L=0;L<A;L++){for(var N=-L+I;N<=L-_;N+=2){for(var k=O+N,q=(B=N==-L||N!=L&&w[k-1]<w[k+1]?w[k+1]:w[k-1]+1)-N;B<S&&q<x&&c.charAt(B)==E.charAt(q);)B++,q++;if(w[k]=B,B>S)_+=2;else if(q>x)I+=2;else if(H&&(V=O+D-N)>=0&&V<F&&-1!=P[V]&&B>=(C=S-P[V]))return p(c,E,B,q)}for(var M=-L+j;M<=L-R;M+=2){for(var C,V=O+M,K=(C=M==-L||M!=L&&P[V-1]<P[V+1]?P[V+1]:P[V-1]+1)-M;C<S&&K<x&&c.charAt(S-C-1)==E.charAt(x-K-1);)C++,K++;if(P[V]=C,C>S)R+=2;else if(K>x)j+=2;else if(!H){var B;if((k=O+D-M)>=0&&k<F&&-1!=w[k])if(q=O+(B=w[k])-k,B>=(C=S-C))return p(c,E,B,q)}}}return[[r,c],[1,E]]}(c,E)}(c=c.substring(0,c.length-x),E=E.substring(0,E.length-x));return A&&F.unshift([0,A]),O&&F.push([0,O]),f(F),null!=S&&(F=function h(c,E){var S=function m(c,E){if(0===E)return[0,c];for(var S=0,x=0;x<c.length;x++){var A=c[x];if(A[0]===r||0===A[0]){var O=S+A[1].length;if(E===O)return[x+1,c];if(E<O){c=c.slice();var F=E-S,w=[A[0],A[1].slice(0,F)],P=[A[0],A[1].slice(F)];return c.splice(x,1,w,P),[x+1,c]}S=O}}throw new Error("cursor_pos is out of bounds!")}(c,E),x=S[1],A=S[0],O=x[A],F=x[A+1];if(null==O)return c;if(0!==O[0])return c;if(null!=F&&O[1]+F[1]===F[1]+O[1])return x.splice(A,2,F,O),b(x,A,2);if(null!=F&&0===F[1].indexOf(O[1])){x.splice(A,2,[F[0],O[1]],[0,O[1]]);var w=F[1].slice(O[1].length);return w.length>0&&x.splice(A+2,0,[F[0],w]),b(x,A,3)}return c}(F,S)),F=function y(c){for(var E=!1,S=function(F){return F.charCodeAt(0)>=56320&&F.charCodeAt(0)<=57343},x=function(F){return F.charCodeAt(F.length-1)>=55296&&F.charCodeAt(F.length-1)<=56319},A=2;A<c.length;A+=1)0===c[A-2][0]&&x(c[A-2][1])&&c[A-1][0]===r&&S(c[A-1][1])&&1===c[A][0]&&S(c[A][1])&&(E=!0,c[A-1][1]=c[A-2][1].slice(-1)+c[A-1][1],c[A][1]=c[A-2][1].slice(-1)+c[A][1],c[A-2][1]=c[A-2][1].slice(0,-1));if(!E)return c;var O=[];for(A=0;A<c.length;A+=1)c[A][1].length>0&&O.push(c[A]);return O}(F),F}function p(c,E,S,x){var A=c.substring(0,S),O=E.substring(0,x),F=c.substring(S),w=E.substring(x),P=a(A,O),T=a(F,w);return P.concat(T)}function d(c,E){if(!c||!E||c.charAt(0)!=E.charAt(0))return 0;for(var S=0,x=Math.min(c.length,E.length),A=x,O=0;S<A;)c.substring(O,A)==E.substring(O,A)?O=S=A:x=A,A=Math.floor((x-S)/2+S);return A}function v(c,E){if(!c||!E||c.charAt(c.length-1)!=E.charAt(E.length-1))return 0;for(var S=0,x=Math.min(c.length,E.length),A=x,O=0;S<A;)c.substring(c.length-A,c.length-O)==E.substring(E.length-A,E.length-O)?O=S=A:x=A,A=Math.floor((x-S)/2+S);return A}function f(c){c.push([0,""]);for(var F,E=0,S=0,x=0,A="",O="";E<c.length;)switch(c[E][0]){case 1:x++,O+=c[E][1],E++;break;case r:S++,A+=c[E][1],E++;break;case 0:S+x>1?(0!==S&&0!==x&&(0!==(F=d(O,A))&&(E-S-x>0&&0==c[E-S-x-1][0]?c[E-S-x-1][1]+=O.substring(0,F):(c.splice(0,0,[0,O.substring(0,F)]),E++),O=O.substring(F),A=A.substring(F)),0!==(F=v(O,A))&&(c[E][1]=O.substring(O.length-F)+c[E][1],O=O.substring(0,O.length-F),A=A.substring(0,A.length-F))),0===S?c.splice(E-x,S+x,[1,O]):0===x?c.splice(E-S,S+x,[r,A]):c.splice(E-S-x,S+x,[r,A],[1,O]),E=E-S-x+(S?1:0)+(x?1:0)+1):0!==E&&0==c[E-1][0]?(c[E-1][1]+=c[E][1],c.splice(E,1)):E++,x=0,S=0,A="",O=""}""===c[c.length-1][1]&&c.pop();var w=!1;for(E=1;E<c.length-1;)0==c[E-1][0]&&0==c[E+1][0]&&(c[E][1].substring(c[E][1].length-c[E-1][1].length)==c[E-1][1]?(c[E][1]=c[E-1][1]+c[E][1].substring(0,c[E][1].length-c[E-1][1].length),c[E+1][1]=c[E-1][1]+c[E+1][1],c.splice(E-1,1),w=!0):c[E][1].substring(0,c[E+1][1].length)==c[E+1][1]&&(c[E-1][1]+=c[E+1][1],c[E][1]=c[E][1].substring(c[E+1][1].length)+c[E+1][1],c.splice(E+1,1),w=!0)),E++;w&&f(c)}var u=a;function b(c,E,S){for(var x=E+S-1;x>=0&&x>=E-1;x--)if(x+1<c.length){var A=c[x],O=c[x+1];A[0]===O[1]&&c.splice(x,2,[A[0],A[1]+O[1]])}return c}u.INSERT=1,u.DELETE=r,u.EQUAL=0,e.exports=u},function(e,n){function r(i){var s=[];for(var a in i)s.push(a);return s}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,n){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function s(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}(n=e.exports=r?i:s).supported=i,n.unsupported=s},function(e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function s(){}function a(l,p,d){this.fn=l,this.context=p,this.once=d||!1}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),o.prototype.eventNames=function(){var d,v,p=[];if(0===this._eventsCount)return p;for(v in d=this._events)r.call(d,v)&&p.push(i?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},o.prototype.listeners=function(p,d){var g=this._events[i?i+p:p];if(d)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var f=0,u=g.length,m=new Array(u);f<u;f++)m[f]=g[f].fn;return m},o.prototype.emit=function(p,d,v,g,f,u){var m=i?i+p:p;if(!this._events[m])return!1;var b,c,h=this._events[m],y=arguments.length;if(h.fn){switch(h.once&&this.removeListener(p,h.fn,void 0,!0),y){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,d),!0;case 3:return h.fn.call(h.context,d,v),!0;case 4:return h.fn.call(h.context,d,v,g),!0;case 5:return h.fn.call(h.context,d,v,g,f),!0;case 6:return h.fn.call(h.context,d,v,g,f,u),!0}for(c=1,b=new Array(y-1);c<y;c++)b[c-1]=arguments[c];h.fn.apply(h.context,b)}else{var S,E=h.length;for(c=0;c<E;c++)switch(h[c].once&&this.removeListener(p,h[c].fn,void 0,!0),y){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,d);break;case 3:h[c].fn.call(h[c].context,d,v);break;case 4:h[c].fn.call(h[c].context,d,v,g);break;default:if(!b)for(S=1,b=new Array(y-1);S<y;S++)b[S-1]=arguments[S];h[c].fn.apply(h[c].context,b)}}return!0},o.prototype.on=function(p,d,v){var g=new a(d,v||this),f=i?i+p:p;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],g]:this._events[f].push(g):(this._events[f]=g,this._eventsCount++),this},o.prototype.once=function(p,d,v){var g=new a(d,v||this,!0),f=i?i+p:p;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],g]:this._events[f].push(g):(this._events[f]=g,this._eventsCount++),this},o.prototype.removeListener=function(p,d,v,g){var f=i?i+p:p;if(!this._events[f])return this;if(!d)return 0==--this._eventsCount?this._events=new s:delete this._events[f],this;var u=this._events[f];if(u.fn)u.fn===d&&(!g||u.once)&&(!v||u.context===v)&&(0==--this._eventsCount?this._events=new s:delete this._events[f]);else{for(var m=0,h=[],y=u.length;m<y;m++)(u[m].fn!==d||g&&!u[m].once||v&&u[m].context!==v)&&h.push(u[m]);h.length?this._events[f]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new s:delete this._events[f]}return this},o.prototype.removeAllListeners=function(p){var d;return p?this._events[d=i?i+p:p]&&(0==--this._eventsCount?this._events=new s:delete this._events[d]):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,o.EventEmitter=o,void 0!==e&&(e.exports=o)},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(G){return typeof G}:function(G){return G&&"function"==typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},s=function($,X){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return function G($,X){var J=[],Z=!0,re=!1,ie=void 0;try{for(var se,ae=$[Symbol.iterator]();!(Z=(se=ae.next()).done)&&(J.push(se.value),!X||J.length!==X);Z=!0);}catch(fe){re=!0,ie=fe}finally{try{!Z&&ae.return&&ae.return()}finally{if(re)throw ie}}return J}($,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function G($,X){for(var J=0;J<X.length;J++){var Z=X[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty($,Z.key,Z)}}return function($,X,J){return X&&G($.prototype,X),J&&G($,J),$}}(),l=P(r(3)),d=P(r(2)),g=P(r(0)),u=P(r(5)),h=P(r(10)),b=P(r(9)),c=r(36),E=r(37),x=P(r(13)),A=r(26),O=r(38),F=r(39),w=r(40);function P(G){return G&&G.__esModule?G:{default:G}}function T(G,$,X){return $ in G?Object.defineProperty(G,$,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[$]=X,G}var _=(0,h.default)("quill:clipboard"),j="__ql-matcher",R=[[Node.TEXT_NODE,ue],[Node.TEXT_NODE,ne],["br",function Y(G,$){return V($,"\n")||$.insert("\n"),$}],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,U],[Node.ELEMENT_NODE,function le(G,$){var X={},J=G.style||{};return J.fontStyle&&"italic"===q(G).fontStyle&&(X.italic=!0),J.fontWeight&&(q(G).fontWeight.startsWith("bold")||parseInt(q(G).fontWeight)>=700)&&(X.bold=!0),Object.keys(X).length>0&&($=B($,X)),parseFloat(J.textIndent||0)>0&&($=(new d.default).insert("\t").concat($)),$}],["li",function te(G,$){var X=g.default.query(G);if(null==X||"list-item"!==X.blotName||!V($,"\n"))return $;for(var J=-1,Z=G.parentNode;!Z.classList.contains("ql-clipboard");)"list"===(g.default.query(Z)||{}).blotName&&(J+=1),Z=Z.parentNode;return J<=0?$:$.compose((new d.default).retain($.length()-1).retain(1,{indent:J}))}],["b",K.bind(K,"bold")],["i",K.bind(K,"italic")],["style",function ee(){return new d.default}]],L=[c.AlignAttribute,O.DirectionAttribute].reduce(function(G,$){return G[$.keyName]=$,G},{}),N=[c.AlignStyle,E.BackgroundStyle,A.ColorStyle,O.DirectionStyle,F.FontStyle,w.SizeStyle].reduce(function(G,$){return G[$.keyName]=$,G},{}),k=function(G){function $(X,J){!function D(G,$){if(!(G instanceof $))throw new TypeError("Cannot call a class as a function")}(this,$);var Z=function H(G,$){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||"object"!=typeof $&&"function"!=typeof $?G:$}(this,($.__proto__||Object.getPrototypeOf($)).call(this,X,J));return Z.quill.root.addEventListener("paste",Z.onPaste.bind(Z)),Z.container=Z.quill.addContainer("ql-clipboard"),Z.container.setAttribute("contenteditable",!0),Z.container.setAttribute("tabindex",-1),Z.matchers=[],R.concat(Z.options.matchers).forEach(function(re){var ie=s(re,2),se=ie[1];!J.matchVisual&&se===oe||Z.addMatcher(ie[0],se)}),Z}return function I(G,$){if("function"!=typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function, not "+typeof $);G.prototype=Object.create($&&$.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(G,$):G.__proto__=$)}($,G),a($,[{key:"addMatcher",value:function(J,Z){this.matchers.push([J,Z])}},{key:"convert",value:function(J){if("string"==typeof J)return this.container.innerHTML=J.replace(/\>\r?\n +\</g,"><"),this.convert();var Z=this.quill.getFormat(this.quill.selection.savedRange.index);if(Z[x.default.blotName]){var re=this.container.innerText;return this.container.innerHTML="",(new d.default).insert(re,T({},x.default.blotName,Z[x.default.blotName]))}var ie=this.prepareMatching(),ae=s(ie,2),Q=M(this.container,ae[0],ae[1]);return V(Q,"\n")&&null==Q.ops[Q.ops.length-1].attributes&&(Q=Q.compose((new d.default).retain(Q.length()-1).delete(1))),_.log("convert",this.container.innerHTML,Q),this.container.innerHTML="",Q}},{key:"dangerouslyPasteHTML",value:function(J,Z){var re=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.default.sources.API;if("string"==typeof J)this.quill.setContents(this.convert(J),Z),this.quill.setSelection(0,u.default.sources.SILENT);else{var ie=this.convert(Z);this.quill.updateContents((new d.default).retain(J).concat(ie),re),this.quill.setSelection(J+ie.length(),u.default.sources.SILENT)}}},{key:"onPaste",value:function(J){var Z=this;if(!J.defaultPrevented&&this.quill.isEnabled()){var re=this.quill.getSelection(),ie=(new d.default).retain(re.index),ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(u.default.sources.SILENT),setTimeout(function(){ie=ie.concat(Z.convert()).delete(re.length),Z.quill.updateContents(ie,u.default.sources.USER),Z.quill.setSelection(ie.length()-re.length,u.default.sources.SILENT),Z.quill.scrollingContainer.scrollTop=ae,Z.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var J=this,Z=[],re=[];return this.matchers.forEach(function(ie){var ae=s(ie,2),se=ae[0],fe=ae[1];switch(se){case Node.TEXT_NODE:re.push(fe);break;case Node.ELEMENT_NODE:Z.push(fe);break;default:[].forEach.call(J.container.querySelectorAll(se),function(Q){Q[j]=Q[j]||[],Q[j].push(fe)})}}),[Z,re]}}]),$}(b.default);function B(G,$,X){return"object"===(void 0===$?"undefined":i($))?Object.keys($).reduce(function(J,Z){return B(J,Z,$[Z])},G):G.reduce(function(J,Z){return Z.attributes&&Z.attributes[$]?J.push(Z):J.insert(Z.insert,(0,l.default)({},T({},$,X),Z.attributes))},new d.default)}function q(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var $="__ql-computed-style";return G[$]||(G[$]=window.getComputedStyle(G))}function V(G,$){for(var X="",J=G.ops.length-1;J>=0&&X.length<$.length;--J){var Z=G.ops[J];if("string"!=typeof Z.insert)break;X=Z.insert+X}return X.slice(-1*$.length)===$}function C(G){if(0===G.childNodes.length)return!1;var $=q(G);return["block","list-item"].indexOf($.display)>-1}function M(G,$,X){return G.nodeType===G.TEXT_NODE?X.reduce(function(J,Z){return Z(G,J)},new d.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(J,Z){var re=M(Z,$,X);return Z.nodeType===G.ELEMENT_NODE&&(re=$.reduce(function(ie,ae){return ae(Z,ie)},re),re=(Z[j]||[]).reduce(function(ie,ae){return ae(Z,ie)},re)),J.concat(re)},new d.default):new d.default}function K(G,$,X){return B(X,G,!0)}function U(G,$){var X=g.default.Attributor.Attribute.keys(G),J=g.default.Attributor.Class.keys(G),Z=g.default.Attributor.Style.keys(G),re={};return X.concat(J).concat(Z).forEach(function(ie){var ae=g.default.query(ie,g.default.Scope.ATTRIBUTE);null!=ae&&(re[ae.attrName]=ae.value(G),re[ae.attrName])||(null!=(ae=L[ie])&&(ae.attrName===ie||ae.keyName===ie)&&(re[ae.attrName]=ae.value(G)||void 0),null!=(ae=N[ie])&&(ae.attrName===ie||ae.keyName===ie)&&(re[(ae=N[ie]).attrName]=ae.value(G)||void 0))}),Object.keys(re).length>0&&($=B($,re)),$}function W(G,$){var X=g.default.query(G);if(null==X)return $;if(X.prototype instanceof g.default.Embed){var J={},Z=X.value(G);null!=Z&&(J[X.blotName]=Z,$=(new d.default).insert(J,X.formats(G)))}else"function"==typeof X.formats&&($=B($,X.blotName,X.formats(G)));return $}function ne(G,$){return V($,"\n")||(C(G)||$.length()>0&&G.nextSibling&&C(G.nextSibling))&&$.insert("\n"),$}function oe(G,$){if(C(G)&&null!=G.nextElementSibling&&!V($,"\n\n")){var X=G.offsetHeight+parseFloat(q(G).marginTop)+parseFloat(q(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+1.5*X&&$.insert("\n")}return $}function ue(G,$){var X=G.data;if("O:P"===G.parentNode.tagName)return $.insert(X.trim());if(0===X.trim().length&&G.parentNode.classList.contains("ql-clipboard"))return $;if(!q(G.parentNode).whiteSpace.startsWith("pre")){var J=function(re,ie){return(ie=ie.replace(/[^\u00a0]/g,"")).length<1&&re?" ":ie};X=(X=X.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,J.bind(J,!0)),(null==G.previousSibling&&C(G.parentNode)||null!=G.previousSibling&&C(G.previousSibling))&&(X=X.replace(/^\s+/,J.bind(J,!1))),(null==G.nextSibling&&C(G.parentNode)||null!=G.nextSibling&&C(G.nextSibling))&&(X=X.replace(/\s+$/,J.bind(J,!1)))}return $.insert(X)}k.DEFAULTS={matchers:[],matchVisual:!0},n.default=k,n.matchAttributor=U,n.matchBlot=W,n.matchNewline=ne,n.matchSpacing=oe,n.matchText=ue},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function f(u,m){for(var h=0;h<m.length;h++){var y=m[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,m,h){return m&&f(u.prototype,m),h&&f(u,h),u}}(),s=function f(u,m,h){null===u&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,m);if(void 0===y){var b=Object.getPrototypeOf(u);return null===b?void 0:f(b,m,h)}if("value"in y)return y.value;var c=y.get;return void 0===c?void 0:c.call(h)};function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}var g=function(f){function u(){return p(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),i(u,[{key:"optimize",value:function(h){s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"optimize",this).call(this,h),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),u}(function l(f){return f&&f.__esModule?f:{default:f}}(r(6)).default);g.blotName="bold",g.tagName=["STRONG","B"],n.default=g},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=function(P,T){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return function w(P,T){var D=[],H=!0,I=!1,_=void 0;try{for(var R,j=P[Symbol.iterator]();!(H=(R=j.next()).done)&&(D.push(R.value),!T||D.length!==T);H=!0);}catch(L){I=!0,_=L}finally{try{!H&&j.return&&j.return()}finally{if(I)throw _}}return D}(P,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function w(P,T){for(var D=0;D<T.length;D++){var H=T[D];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(P,H.key,H)}}return function(P,T,D){return T&&w(P.prototype,T),D&&w(P,D),P}}(),o=h(r(2)),p=h(r(0)),v=h(r(5)),f=h(r(10)),m=h(r(9));function h(w){return w&&w.__esModule?w:{default:w}}function c(w,P){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||"object"!=typeof P&&"function"!=typeof P?w:P}var S=(0,f.default)("quill:toolbar"),x=function(w){function P(T,D){!function b(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")}(this,P);var _,H=c(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,T,D));if(Array.isArray(H.options.container)){var I=document.createElement("div");O(I,H.options.container),T.container.parentNode.insertBefore(I,T.container),H.container=I}else H.container="string"==typeof H.options.container?document.querySelector(H.options.container):H.options.container;return H.container instanceof HTMLElement?(H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(j){H.addHandler(j,H.options.handlers[j])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(j){H.attach(j)}),H.quill.on(v.default.events.EDITOR_CHANGE,function(j,R){j===v.default.events.SELECTION_CHANGE&&H.update(R)}),H.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){var j=H.quill.selection.getRange(),R=i(j,1);H.update(R[0])}),H):(_=S.error("Container required for toolbar",H.options),c(H,_))}return function E(w,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function, not "+typeof P);w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(w,P):w.__proto__=P)}(P,w),s(P,[{key:"addHandler",value:function(D,H){this.handlers[D]=H}},{key:"attach",value:function(D){var H=this,I=[].find.call(D.classList,function(j){return 0===j.indexOf("ql-")});if(I){if(I=I.slice("ql-".length),"BUTTON"===D.tagName&&D.setAttribute("type","button"),null==this.handlers[I]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[I])return void S.warn("ignoring attaching to disabled format",I,D);if(null==p.default.query(I))return void S.warn("ignoring attaching to nonexistent format",I,D)}D.addEventListener("SELECT"===D.tagName?"change":"click",function(j){var R=void 0;if("SELECT"===D.tagName){if(D.selectedIndex<0)return;var L=D.options[D.selectedIndex];R=!L.hasAttribute("selected")&&(L.value||!1)}else R=!D.classList.contains("ql-active")&&(D.value||!D.hasAttribute("value")),j.preventDefault();H.quill.focus();var N=H.quill.selection.getRange(),B=i(N,1)[0];if(null!=H.handlers[I])H.handlers[I].call(H,R);else if(p.default.query(I).prototype instanceof p.default.Embed){if(!(R=prompt("Enter "+I)))return;H.quill.updateContents((new o.default).retain(B.index).delete(B.length).insert(function y(w,P,T){return P in w?Object.defineProperty(w,P,{value:T,enumerable:!0,configurable:!0,writable:!0}):w[P]=T,w}({},I,R)),v.default.sources.USER)}else H.quill.format(I,R,v.default.sources.USER);H.update(B)}),this.controls.push([I,D])}}},{key:"update",value:function(D){var H=null==D?{}:this.quill.getFormat(D);this.controls.forEach(function(I){var _=i(I,2),j=_[0],R=_[1];if("SELECT"===R.tagName){var L=void 0;if(null==D)L=null;else if(null==H[j])L=R.querySelector("option[selected]");else if(!Array.isArray(H[j])){var N=H[j];"string"==typeof N&&(N=N.replace(/\"/g,'\\"')),L=R.querySelector('option[value="'+N+'"]')}null==L?(R.value="",R.selectedIndex=-1):L.selected=!0}else if(null==D)R.classList.remove("ql-active");else if(R.hasAttribute("value")){var k=H[j]===R.getAttribute("value")||null!=H[j]&&H[j].toString()===R.getAttribute("value")||null==H[j]&&!R.getAttribute("value");R.classList.toggle("ql-active",k)}else R.classList.toggle("ql-active",null!=H[j])})}}]),P}(m.default);function A(w,P,T){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+P),null!=T&&(D.value=T),w.appendChild(D)}function O(w,P){Array.isArray(P[0])||(P=[P]),P.forEach(function(T){var D=document.createElement("span");D.classList.add("ql-formats"),T.forEach(function(H){if("string"==typeof H)A(D,H);else{var I=Object.keys(H)[0],_=H[I];Array.isArray(_)?function F(w,P,T){var D=document.createElement("select");D.classList.add("ql-"+P),T.forEach(function(H){var I=document.createElement("option");!1!==H?I.setAttribute("value",H):I.setAttribute("selected","selected"),D.appendChild(I)}),w.appendChild(D)}(D,I,_):A(D,I,_)}}),w.appendChild(D)})}x.DEFAULTS={},x.DEFAULTS={container:null,handlers:{clean:function(){var P=this,T=this.quill.getSelection();if(null!=T)if(0==T.length){var D=this.quill.getFormat();Object.keys(D).forEach(function(H){null!=p.default.query(H,p.default.Scope.INLINE)&&P.quill.format(H,!1)})}else this.quill.removeFormat(T,v.default.sources.USER)},direction:function(P){var T=this.quill.getFormat().align;"rtl"===P&&null==T?this.quill.format("align","right",v.default.sources.USER):!P&&"right"===T&&this.quill.format("align",!1,v.default.sources.USER),this.quill.format("direction",P,v.default.sources.USER)},indent:function(P){var T=this.quill.getSelection(),D=this.quill.getFormat(T),H=parseInt(D.indent||0);if("+1"===P||"-1"===P){var I="+1"===P?1:-1;"rtl"===D.direction&&(I*=-1),this.quill.format("indent",H+I,v.default.sources.USER)}},link:function(P){!0===P&&(P=prompt("Enter link URL:")),this.quill.format("link",P,v.default.sources.USER)},list:function(P){var T=this.quill.getSelection(),D=this.quill.getFormat(T);this.quill.format("list","check"===P?"checked"!==D.list&&"unchecked"!==D.list&&"unchecked":P,v.default.sources.USER)}}},n.default=x,n.addControls=O},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function f(u,m){for(var h=0;h<m.length;h++){var y=m[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,m,h){return m&&f(u.prototype,m),h&&f(u,h),u}}(),s=function f(u,m,h){null===u&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,m);if(void 0===y){var b=Object.getPrototypeOf(u);return null===b?void 0:f(b,m,h)}if("value"in y)return y.value;var c=y.get;return void 0===c?void 0:c.call(h)},g=function(f){function u(m,h){!function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u);var y=function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,m));return y.label.innerHTML=h,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),y}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),i(u,[{key:"buildItem",value:function(h){var y=s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"buildItem",this).call(this,h);return y.style.backgroundColor=h.getAttribute("value")||"",y}},{key:"selectItem",value:function(h,y){s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"selectItem",this).call(this,h,y);var b=this.label.querySelector(".ql-color-label"),c=h&&h.getAttribute("data-value")||"";b&&("line"===b.tagName?b.style.stroke=c:b.style.fill=c)}}]),u}(function l(f){return f&&f.__esModule?f:{default:f}}(r(28)).default);n.default=g},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function f(u,m){for(var h=0;h<m.length;h++){var y=m[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,m,h){return m&&f(u.prototype,m),h&&f(u,h),u}}(),s=function f(u,m,h){null===u&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,m);if(void 0===y){var b=Object.getPrototypeOf(u);return null===b?void 0:f(b,m,h)}if("value"in y)return y.value;var c=y.get;return void 0===c?void 0:c.call(h)},g=function(f){function u(m,h){!function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u);var y=function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,m));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=h[b.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),i(u,[{key:"selectItem",value:function(h,y){s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"selectItem",this).call(this,h,y),this.label.innerHTML=(h=h||this.defaultItem).innerHTML}}]),u}(function l(f){return f&&f.__esModule?f:{default:f}}(r(28)).default);n.default=g},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(l,p){for(var d=0;d<p.length;d++){var v=p[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}return function(l,p,d){return p&&o(l.prototype,p),d&&o(l,d),l}}(),a=function(){function o(l,p){var d=this;(function s(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.quill=l,this.boundsContainer=p||document.body,this.root=l.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return i(o,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var d=p.left+p.width/2-this.root.offsetWidth/2,v=p.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=v+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),u=0;return f.right>g.right&&(this.root.style.left=d+(u=g.right-f.right)+"px"),f.left<g.left&&(this.root.style.left=d+(u=g.left-f.left)+"px"),f.bottom>g.bottom&&(this.root.style.top=v-(p.bottom-p.top+(f.bottom-f.top))+"px",this.root.classList.add("ql-flip")),u}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),o}();n.default=a},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function F(w,P,T){null===w&&(w=Function.prototype);var D=Object.getOwnPropertyDescriptor(w,P);if(void 0===D){var H=Object.getPrototypeOf(w);return null===H?void 0:F(H,P,T)}if("value"in D)return D.value;var I=D.get;return void 0===I?void 0:I.call(T)},a=function(){function F(w,P){for(var T=0;T<P.length;T++){var D=P[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(w,D.key,D)}}return function(w,P,T){return P&&F(w.prototype,P),T&&F(w,T),w}}(),l=b(r(3)),d=b(r(8)),v=r(43),g=b(v),u=b(r(27)),m=r(15),y=b(r(41));function b(F){return F&&F.__esModule?F:{default:F}}function c(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}function E(F,w){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?F:w}function S(F,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function, not "+typeof w);F.prototype=Object.create(w&&w.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(F,w):F.__proto__=w)}var x=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(F){function w(P,T){c(this,w),null!=T.modules.toolbar&&null==T.modules.toolbar.container&&(T.modules.toolbar.container=x);var D=E(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,P,T));return D.quill.container.classList.add("ql-snow"),D}return S(w,F),a(w,[{key:"extendToolbar",value:function(T){T.container.classList.add("ql-snow"),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),y.default),this.tooltip=new O(this.quill,this.options.bounds),T.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,H){T.handlers.link.call(T,!H.format.link)})}}]),w}(g.default);A.DEFAULTS=(0,l.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(w){if(w){var P=this.quill.getSelection();if(null==P||0==P.length)return;var T=this.quill.getText(P);/^\S+@\S+\.\S+$/.test(T)&&0!==T.indexOf("mailto:")&&(T="mailto:"+T),this.quill.theme.tooltip.edit("link",T)}else this.quill.format("link",!1)}}}}});var O=function(F){function w(P,T){c(this,w);var D=E(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,P,T));return D.preview=D.root.querySelector("a.ql-preview"),D}return S(w,F),a(w,[{key:"listen",value:function(){var T=this;s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){T.root.classList.contains("ql-editing")?T.save():T.edit("link",T.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if(null!=T.linkRange){var H=T.linkRange;T.restoreFocus(),T.quill.formatText(H,"link",!1,d.default.sources.USER),delete T.linkRange}D.preventDefault(),T.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(D,H,I){if(null!=D){if(0===D.length&&I===d.default.sources.USER){var j=function(w,P){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return function F(w,P){var T=[],D=!0,H=!1,I=void 0;try{for(var j,_=w[Symbol.iterator]();!(D=(j=_.next()).done)&&(T.push(j.value),!P||T.length!==P);D=!0);}catch(R){H=!0,I=R}finally{try{!D&&_.return&&_.return()}finally{if(H)throw I}}return T}(w,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(T.quill.scroll.descendant(u.default,D.index),2),R=j[0];if(null!=R){T.linkRange=new m.Range(D.index-j[1],R.length());var N=u.default.formats(R.domNode);return T.preview.textContent=N,T.preview.setAttribute("href",N),T.show(),void T.position(T.quill.getBounds(T.linkRange))}}else delete T.linkRange;T.hide()}})}},{key:"show",value:function(){s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),w}(v.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=A},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=Z(r(29)),a=r(36),o=r(38),l=r(64),d=Z(r(65)),g=Z(r(66)),f=r(67),u=Z(f),m=r(37),h=r(26),y=r(39),b=r(40),E=Z(r(56)),x=Z(r(68)),O=Z(r(27)),w=Z(r(69)),T=Z(r(70)),H=Z(r(71)),_=Z(r(72)),R=Z(r(73)),L=r(13),N=Z(L),B=Z(r(74)),V=Z(r(75)),M=Z(r(57)),U=Z(r(41)),Y=Z(r(28)),te=Z(r(59)),oe=Z(r(60)),ue=Z(r(61)),$=Z(r(108)),J=Z(r(62));function Z(re){return re&&re.__esModule?re:{default:re}}s.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":b.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":l.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":y.FontClass,"formats/size":b.SizeClass,"formats/blockquote":d.default,"formats/code-block":N.default,"formats/header":g.default,"formats/list":u.default,"formats/bold":E.default,"formats/code":L.Code,"formats/italic":x.default,"formats/link":O.default,"formats/script":w.default,"formats/strike":T.default,"formats/underline":H.default,"formats/image":_.default,"formats/video":R.default,"formats/list/item":f.ListItem,"modules/formula":B.default,"modules/syntax":V.default,"modules/toolbar":M.default,"themes/bubble":$.default,"themes/snow":J.default,"ui/icons":U.default,"ui/picker":Y.default,"ui/icon-picker":oe.default,"ui/color-picker":te.default,"ui/tooltip":ue.default},!0),n.default=s.default},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=function(){function u(m,h){for(var y=0;y<h.length;y++){var b=h[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,h,y){return h&&u(m.prototype,h),y&&u(m,y),m}}(),s=function u(m,h,y){null===m&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,h);if(void 0===b){var c=Object.getPrototypeOf(m);return null===c?void 0:u(c,h,y)}if("value"in b)return b.value;var E=b.get;return void 0===E?void 0:E.call(y)},o=function l(u){return u&&u.__esModule?u:{default:u}}(r(0));function p(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")}function d(u,m){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?u:m}var g=function(u){function m(){return p(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return function v(u,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);u.prototype=Object.create(m&&m.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(u,m):u.__proto__=m)}(m,u),i(m,[{key:"add",value:function(y,b){if("+1"===b||"-1"===b){var c=this.value(y)||0;b="+1"===b?c+1:c-1}return 0===b?(this.remove(y),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,y,b)}},{key:"canAdd",value:function(y,b){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,b)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,parseInt(b))}},{key:"value",value:function(y){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,y))||void 0}}]),m}(o.default.Attributor.Class),f=new g("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=f},function(e,n,r){"use strict";function o(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function l(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?v:g}Object.defineProperty(n,"__esModule",{value:!0});var d=function(v){function g(){return o(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function p(v,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}(g,v),g}(function a(v){return v&&v.__esModule?v:{default:v}}(r(4)).default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(f,u){for(var m=0;m<u.length;m++){var h=u[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,u,m){return u&&g(f.prototype,u),m&&g(f,m),f}}();function l(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")}function p(g,f){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?g:f}var v=function(g){function f(){return l(this,f),p(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return function d(g,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);g.prototype=Object.create(f&&f.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(g,f):g.__proto__=f)}(f,g),i(f,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),f}(function o(g){return g&&g.__esModule?g:{default:g}}(r(4)).default);v.blotName="header",v.tagName=["H1","H2","H3","H4","H5","H6"],n.default=v},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=function(){function c(E,S){for(var x=0;x<S.length;x++){var A=S[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,S,x){return S&&c(E.prototype,S),x&&c(E,x),E}}(),s=function c(E,S,x){null===E&&(E=Function.prototype);var A=Object.getOwnPropertyDescriptor(E,S);if(void 0===A){var O=Object.getPrototypeOf(E);return null===O?void 0:c(O,S,x)}if("value"in A)return A.value;var F=A.get;return void 0===F?void 0:F.call(x)},o=g(r(0)),p=g(r(4)),v=g(r(25));function g(c){return c&&c.__esModule?c:{default:c}}function u(c,E){if(!(c instanceof E))throw new TypeError("Cannot call a class as a function")}function m(c,E){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||"object"!=typeof E&&"function"!=typeof E?c:E}function h(c,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function, not "+typeof E);c.prototype=Object.create(E&&E.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(c,E):c.__proto__=E)}var y=function(c){function E(){return u(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return h(E,c),i(E,[{key:"format",value:function(x,A){x!==b.blotName||A?s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,x,A):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(x,A){return this.parent.isolate(this.offset(this.parent),this.length()),x===this.parent.statics.blotName?(this.parent.replaceWith(x,A),this):(this.parent.unwrap(),s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,x,A))}}],[{key:"formats",value:function(x){return x.tagName===this.tagName?void 0:s(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,x)}}]),E}(p.default);y.blotName="list-item",y.tagName="LI";var b=function(c){function E(S){u(this,E);var x=m(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,S)),A=function(F){if(F.target.parentNode===S){var w=x.statics.formats(S),P=o.default.find(F.target);"checked"===w?P.format("list","unchecked"):"unchecked"===w&&P.format("list","checked")}};return S.addEventListener("touchstart",A),S.addEventListener("mousedown",A),x}return h(E,c),i(E,null,[{key:"create",value:function(x){var A="ordered"===x?"OL":"UL",O=s(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,A);return("checked"===x||"unchecked"===x)&&O.setAttribute("data-checked","checked"===x),O}},{key:"formats",value:function(x){return"OL"===x.tagName?"ordered":"UL"===x.tagName?x.hasAttribute("data-checked")?"true"===x.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),i(E,[{key:"format",value:function(x,A){this.children.length>0&&this.children.tail.format(x,A)}},{key:"formats",value:function(){return function f(c,E,S){return E in c?Object.defineProperty(c,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):c[E]=S,c}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(x,A){if(x instanceof y)s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,x,A);else{var O=null==A?this.length():A.offset(this),F=this.split(O);F.parent.insertBefore(x,F)}}},{key:"optimize",value:function(x){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,x);var A=this.next;null!=A&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(x){if(x.statics.blotName!==this.statics.blotName){var A=o.default.create(this.statics.defaultChild);x.moveChildren(A),this.appendChild(A)}s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,x)}}]),E}(v.default);b.blotName="list",b.scope=o.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[y],n.ListItem=y,n.default=b},function(e,n,r){"use strict";function o(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function l(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?v:g}Object.defineProperty(n,"__esModule",{value:!0});var d=function(v){function g(){return o(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function p(v,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}(g,v),g}(function a(v){return v&&v.__esModule?v:{default:v}}(r(56)).default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function f(u,m){for(var h=0;h<m.length;h++){var y=m[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,m,h){return m&&f(u.prototype,m),h&&f(u,h),u}}(),s=function f(u,m,h){null===u&&(u=Function.prototype);var y=Object.getOwnPropertyDescriptor(u,m);if(void 0===y){var b=Object.getPrototypeOf(u);return null===b?void 0:f(b,m,h)}if("value"in y)return y.value;var c=y.get;return void 0===c?void 0:c.call(h)};function p(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function d(f,u){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?f:u}var g=function(f){function u(){return p(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return function v(f,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(f,u):f.__proto__=u)}(u,f),i(u,null,[{key:"create",value:function(h){return"super"===h?document.createElement("sup"):"sub"===h?document.createElement("sub"):s(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,h)}},{key:"formats",value:function(h){return"SUB"===h.tagName?"sub":"SUP"===h.tagName?"super":void 0}}]),u}(function l(f){return f&&f.__esModule?f:{default:f}}(r(6)).default);g.blotName="script",g.tagName=["SUB","SUP"],n.default=g},function(e,n,r){"use strict";function o(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function l(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?v:g}Object.defineProperty(n,"__esModule",{value:!0});var d=function(v){function g(){return o(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function p(v,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}(g,v),g}(function a(v){return v&&v.__esModule?v:{default:v}}(r(6)).default);d.blotName="strike",d.tagName="S",n.default=d},function(e,n,r){"use strict";function o(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function l(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?v:g}Object.defineProperty(n,"__esModule",{value:!0});var d=function(v){function g(){return o(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return function p(v,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}(g,v),g}(function a(v){return v&&v.__esModule?v:{default:v}}(r(6)).default);d.blotName="underline",d.tagName="U",n.default=d},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(h,y){for(var b=0;b<y.length;b++){var c=y[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,y,b){return y&&m(h.prototype,y),b&&m(h,b),h}}(),s=function m(h,y,b){null===h&&(h=Function.prototype);var c=Object.getOwnPropertyDescriptor(h,y);if(void 0===c){var E=Object.getPrototypeOf(h);return null===E?void 0:m(E,y,b)}if("value"in c)return c.value;var S=c.get;return void 0===S?void 0:S.call(b)},o=function p(m){return m&&m.__esModule?m:{default:m}}(r(0)),l=r(27);function d(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function v(m,h){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?m:h}var f=["alt","height","width"],u=function(m){function h(){return d(this,h),v(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return function g(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(m,h):m.__proto__=h)}(h,m),i(h,[{key:"format",value:function(b,c){f.indexOf(b)>-1?c?this.domNode.setAttribute(b,c):this.domNode.removeAttribute(b):s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,b,c)}}],[{key:"create",value:function(b){var c=s(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,b);return"string"==typeof b&&c.setAttribute("src",this.sanitize(b)),c}},{key:"formats",value:function(b){return f.reduce(function(c,E){return b.hasAttribute(E)&&(c[E]=b.getAttribute(E)),c},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,l.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),h}(o.default.Embed);u.blotName="image",u.tagName="IMG",n.default=u},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(h,y){for(var b=0;b<y.length;b++){var c=y[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(h,y,b){return y&&m(h.prototype,y),b&&m(h,b),h}}(),s=function m(h,y,b){null===h&&(h=Function.prototype);var c=Object.getOwnPropertyDescriptor(h,y);if(void 0===c){var E=Object.getPrototypeOf(h);return null===E?void 0:m(E,y,b)}if("value"in c)return c.value;var S=c.get;return void 0===S?void 0:S.call(b)},a=r(4),l=function p(m){return m&&m.__esModule?m:{default:m}}(r(27));function d(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function v(m,h){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?m:h}var f=["height","width"],u=function(m){function h(){return d(this,h),v(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return function g(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(m,h):m.__proto__=h)}(h,m),i(h,[{key:"format",value:function(b,c){f.indexOf(b)>-1?c?this.domNode.setAttribute(b,c):this.domNode.removeAttribute(b):s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,b,c)}}],[{key:"create",value:function(b){var c=s(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,b);return c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen",!0),c.setAttribute("src",this.sanitize(b)),c}},{key:"formats",value:function(b){return f.reduce(function(c,E){return b.hasAttribute(E)&&(c[E]=b.getAttribute(E)),c},{})}},{key:"sanitize",value:function(b){return l.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),h}(a.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",n.default=u},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=function(){function b(c,E){for(var S=0;S<E.length;S++){var x=E[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(c,x.key,x)}}return function(c,E,S){return E&&b(c.prototype,E),S&&b(c,S),c}}(),s=function b(c,E,S){null===c&&(c=Function.prototype);var x=Object.getOwnPropertyDescriptor(c,E);if(void 0===x){var A=Object.getPrototypeOf(c);return null===A?void 0:b(A,E,S)}if("value"in x)return x.value;var O=x.get;return void 0===O?void 0:O.call(S)},o=g(r(35)),p=g(r(5)),v=g(r(9));function g(b){return b&&b.__esModule?b:{default:b}}function f(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function u(b,c){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?b:c}function m(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}var h=function(b){function c(){return f(this,c),u(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return m(c,b),i(c,null,[{key:"create",value:function(S){var x=s(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,S);return"string"==typeof S&&(window.katex.render(S,x,{throwOnError:!1,errorColor:"#f00"}),x.setAttribute("data-value",S)),x}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),c}(o.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var y=function(b){function c(){f(this,c);var E=u(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return E}return m(c,b),i(c,null,[{key:"register",value:function(){p.default.register(h,!0)}}]),c}(v.default);n.FormulaBlot=h,n.default=y},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=function(){function S(x,A){for(var O=0;O<A.length;O++){var F=A[O];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(x,F.key,F)}}return function(x,A,O){return A&&S(x.prototype,A),O&&S(x,O),x}}(),s=function S(x,A,O){null===x&&(x=Function.prototype);var F=Object.getOwnPropertyDescriptor(x,A);if(void 0===F){var w=Object.getPrototypeOf(x);return null===w?void 0:S(w,A,O)}if("value"in F)return F.value;var P=F.get;return void 0===P?void 0:P.call(O)},o=u(r(0)),p=u(r(5)),v=u(r(9));function u(S){return S&&S.__esModule?S:{default:S}}function m(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}function h(S,x){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?S:x}function y(S,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);S.prototype=Object.create(x&&x.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(S,x):S.__proto__=x)}var b=function(S){function x(){return m(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return y(x,S),i(x,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var F=this.domNode.textContent;this.cachedText!==F&&((F.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=O(F),this.domNode.normalize(),this.attach()),this.cachedText=F)}}]),x}(u(r(13)).default);b.className="ql-syntax";var c=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),E=function(S){function x(A,O){m(this,x);var F=h(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,A,O));if("function"!=typeof F.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var w=null;return F.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(w),w=setTimeout(function(){F.highlight(),w=null},F.options.interval)}),F.highlight(),F}return y(x,S),i(x,null,[{key:"register",value:function(){p.default.register(c,!0),p.default.register(b,!0)}}]),i(x,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var F=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(w){w.highlight(O.options.highlight)}),this.quill.update(p.default.sources.SILENT),null!=F&&this.quill.setSelection(F,p.default.sources.SILENT)}}}]),x}(v.default);E.DEFAULTS={highlight:null==window.hljs?null:function(S){return window.hljs.highlightAuto(S).value},interval:1e3},n.CodeBlock=b,n.CodeToken=c,n.default=E},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function x(A,O,F){null===A&&(A=Function.prototype);var w=Object.getOwnPropertyDescriptor(A,O);if(void 0===w){var P=Object.getPrototypeOf(A);return null===P?void 0:x(P,O,F)}if("value"in w)return w.value;var T=w.get;return void 0===T?void 0:T.call(F)},s=function(){function x(A,O){for(var F=0;F<O.length;F++){var w=O[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(A,w.key,w)}}return function(A,O,F){return O&&x(A.prototype,O),F&&x(A,F),A}}(),o=m(r(3)),p=m(r(8)),d=r(43),v=m(d),g=r(15),u=m(r(41));function m(x){return x&&x.__esModule?x:{default:x}}function h(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function y(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?x:A}function b(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var c=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(x){function A(O,F){h(this,A),null!=F.modules.toolbar&&null==F.modules.toolbar.container&&(F.modules.toolbar.container=c);var w=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O,F));return w.quill.container.classList.add("ql-bubble"),w}return b(A,x),s(A,[{key:"extendToolbar",value:function(F){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(F.container),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),u.default)}}]),A}(v.default);E.DEFAULTS=(0,o.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(x){function A(O,F){h(this,A);var w=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O,F));return w.quill.on(p.default.events.EDITOR_CHANGE,function(P,T,D,H){if(P===p.default.events.SELECTION_CHANGE)if(null!=T&&T.length>0&&H===p.default.sources.USER){w.show(),w.root.style.left="0px",w.root.style.width="",w.root.style.width=w.root.offsetWidth+"px";var I=w.quill.getLines(T.index,T.length);if(1===I.length)w.position(w.quill.getBounds(T));else{var _=I[I.length-1],j=w.quill.getIndex(_),R=Math.min(_.length()-1,T.index+T.length-j),L=w.quill.getBounds(new g.Range(j,R));w.position(L)}}else document.activeElement!==w.textbox&&w.quill.hasFocus()&&w.hide()}),w}return b(A,x),s(A,[{key:"listen",value:function(){var F=this;i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){F.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!F.root.classList.contains("ql-hidden")){var w=F.quill.getSelection();null!=w&&F.position(F.quill.getBounds(w))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(F){var w=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,F),P=this.root.querySelector(".ql-tooltip-arrow");if(P.style.marginLeft="",0===w)return w;P.style.marginLeft=-1*w-P.offsetWidth/2+"px"}}]),A}(d.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=S,n.default=E},function(e,n,r){e.exports=r(63)}]).default});