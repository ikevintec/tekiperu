"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[5081],{32474:(j,A)=>{A.Z={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today:h=>"D\xeda"===h?"Hoy":("Semana"===h?"Esta":"Este")+" "+h.toLocaleLowerCase()},viewHint:h=>"Vista "+("Semana"===h?"de la":"del")+" "+h.toLocaleLowerCase(),weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el d\xeda",moreLinkText:"m\xe1s",moreLinkHint:h=>`Mostrar ${h} eventos m\xe1s`,noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"}},42783:(j,A,c)=>{c.d(A,{K:()=>w});var i=c(5e3),h=c(59783),q=c(20207),e=c(49115),C=c(93075),v=c(69808),y=c(14036),M=c(43724),J=c(31424);const E=["direccionRef"];function Y(u,f){1&u&&i._UZ(0,"p-message",31)}function Q(u,f){1&u&&i._UZ(0,"p-message",32)}function F(u,f){1&u&&i._UZ(0,"p-message",33)}function O(u,f){1&u&&i._UZ(0,"p-message",34)}function P(u,f){1&u&&i._UZ(0,"p-message",35)}function L(u,f){1&u&&i._UZ(0,"p-message",36)}const b=function(){return{width:"100%"}};function N(u,f){if(1&u){const l=i.EpF();i.TgZ(0,"form",1),i.TgZ(1,"div",2),i.TgZ(2,"div",3),i.TgZ(3,"div",4),i.TgZ(4,"div",5),i.TgZ(5,"label",6),i._uU(6,"Departamento (*)"),i.qZA(),i.TgZ(7,"p-dropdown",7),i.NdJ("onChange",function(){return i.CHM(l),i.oxw().changeDepartamento()}),i.qZA(),i.YNc(8,Y,1,0,"p-message",8),i.qZA(),i.TgZ(9,"div",5),i.TgZ(10,"label",9),i._uU(11,"Provincia (*)"),i.qZA(),i.TgZ(12,"p-dropdown",10),i.NdJ("onChange",function(){return i.CHM(l),i.oxw().changeProvincia()}),i.qZA(),i.YNc(13,Q,1,0,"p-message",11),i.qZA(),i.TgZ(14,"div",5),i.TgZ(15,"label",12),i._uU(16,"Distrito (*)"),i.qZA(),i.TgZ(17,"p-dropdown",13),i.NdJ("onChange",function(){return i.CHM(l),i.oxw().changeDistrito()}),i.qZA(),i.YNc(18,F,1,0,"p-message",14),i.qZA(),i.TgZ(19,"div",15),i.TgZ(20,"label",16),i._uU(21,"Direcci\xf3n (*)"),i.qZA(),i._UZ(22,"input",17,18),i.YNc(24,O,1,0,"p-message",19),i.qZA(),i.TgZ(25,"div",20),i.TgZ(26,"label",21),i._uU(27,"N\xfamero (*)"),i.qZA(),i._UZ(28,"input",22),i.YNc(29,P,1,0,"p-message",23),i.qZA(),i.TgZ(30,"div",20),i.TgZ(31,"label",24),i._uU(32,"Num. dpto."),i.qZA(),i._UZ(33,"input",25),i.qZA(),i.TgZ(34,"div",15),i.TgZ(35,"label",26),i._uU(36,"Referencia"),i.qZA(),i._UZ(37,"input",27),i.qZA(),i.TgZ(38,"div",15),i.TgZ(39,"label",28),i._uU(40,"Tipo (*)"),i.qZA(),i._UZ(41,"p-dropdown",29),i.YNc(42,L,1,0,"p-message",30),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&u){const l=i.oxw();i.Q6J("formGroup",l.modelForm),i.xp6(7),i.Akn(i.DdM(19,b)),i.Q6J("options",l.departamentos),i.xp6(1),i.Q6J("ngIf",l.modelForm.get("departamento").touched&&(null==l.modelForm.get("departamento").errors?null:l.modelForm.get("departamento").errors.required)),i.xp6(4),i.Akn(i.DdM(20,b)),i.Q6J("options",l.provincias),i.xp6(1),i.Q6J("ngIf",l.modelForm.get("provincia").touched&&(null==l.modelForm.get("provincia").errors?null:l.modelForm.get("provincia").errors.required)),i.xp6(4),i.Akn(i.DdM(21,b)),i.Q6J("options",l.distritos),i.xp6(1),i.Q6J("ngIf",l.modelForm.get("distrito").touched&&(null==l.modelForm.get("distrito").errors?null:l.modelForm.get("distrito").errors.required)),i.xp6(6),i.Q6J("ngIf",l.modelForm.get("direccion").touched&&(null==l.modelForm.get("direccion").errors?null:l.modelForm.get("direccion").errors.required)),i.xp6(5),i.Q6J("ngIf",l.modelForm.get("numero").touched&&(null==l.modelForm.get("numero").errors?null:l.modelForm.get("numero").errors.required)),i.xp6(12),i.Akn(i.DdM(22,b)),i.Q6J("options",l.tiposDireccion),i.xp6(1),i.Q6J("ngIf",l.modelForm.get("tipoDireccion").touched&&(null==l.modelForm.get("tipoDireccion").errors?null:l.modelForm.get("tipoDireccion").errors.required))}}let w=(()=>{class u{constructor(l,p,d,Z,x){this.messageService=l,this.loginService=p,this.confirmationService=d,this.cityService=Z,this.fb=x,this.departamentos=[],this.provincias=[],this.distritos=[]}ngOnInit(){this.tiposDireccion=[{label:"Casa",value:"CASA"},{label:"Oficina",value:"OFICINA"},{label:"Otro",value:"OTRO"}],this.loadDepartamentos()}onSelectDirection(l){const p=l.address_components,d=p.find(_=>_.types.find(g=>"street_number"===g)),Z=p.find(_=>_.types.find(g=>"route"===g)),x=p.find(_=>_.types.find(g=>"locality"===g)),U=p.find(_=>_.types.find(g=>"administrative_area_level_2"===g)),I=p.find(_=>_.types.find(g=>"administrative_area_level_1"===g));if(this.modelForm.patchValue(Object.assign(Object.assign(Object.assign({},d&&{numero:d.long_name}),Z&&{direccion:Z.long_name}),{latitud:l.geometry.location.lat(),longitud:l.geometry.location.lng()})),I){const _=this.departamentos.find(g=>g.nombreGoogleMaps.includes(I.long_name));if(_&&(this.provincias=_.items),this.modelForm.patchValue(Object.assign(Object.assign({},_&&{departamento:_}),_&&{codigoDepartamento:_.codigo})),U){const g=this.provincias.find(T=>T.nombreGoogleMaps.includes(U.long_name));if(g&&(this.distritos=g.items),this.modelForm.patchValue(Object.assign(Object.assign({},g&&{provincia:g}),g&&{codigoProvincia:g.codigo})),x){const T=this.distritos.find(B=>B.nombreGoogleMaps.includes(x.long_name));this.modelForm.patchValue(Object.assign(Object.assign({},T&&{distrito:T}),T&&{codigoDistrito:T.codigo}))}}}setTimeout(()=>this.direccionRef.nativeElement.focus())}changeDepartamento(){const l=this.modelForm.get("departamento").value;this.modelForm.patchValue({codigoDepartamento:l.codigo,provincia:void 0,distrito:void 0}),this.provincias=[],this.distritos=[],this.provincias=l.items}changeProvincia(){const l=this.modelForm.get("provincia").value;this.modelForm.patchValue({codigoProvincia:l.codigo,distrito:void 0}),this.distritos=[],this.distritos=l.items}changeDistrito(){const l=this.modelForm.get("distrito").value;this.modelForm.patchValue({codigoDistrito:l.codigo})}get titleButtonAction(){return"Registrar direcci\xf3n"}loadDepartamentos(){setTimeout(()=>{this.cityService.findAllUbigeo([].join("&")).subscribe(p=>{this.departamentos=p,this.modelToForm()})})}modelToForm(){if(this.modelForm.value.latitud&&this.modelForm.value.longitud&&(this.initialMarker=new google.maps.LatLng(Number(this.modelForm.value.latitud),Number(this.modelForm.value.longitud))),this.modelForm.value.codigoDepartamento){const l=this.departamentos.find(p=>p.codigo===this.modelForm.value.codigoDepartamento);if(l&&(this.provincias=l.items),this.modelForm.patchValue(Object.assign({},l&&{departamento:l})),this.modelForm.value.codigoProvincia){const p=this.provincias.find(d=>d.codigo===this.modelForm.value.codigoProvincia);if(p&&(this.distritos=p.items),this.modelForm.patchValue(Object.assign({},p&&{provincia:p})),this.modelForm.value.codigoDistrito){const d=this.distritos.find(Z=>Z.codigo===this.modelForm.value.codigoDistrito);this.modelForm.patchValue(Object.assign({},d&&{distrito:d}))}}}}}return u.\u0275fac=function(l){return new(l||u)(i.Y36(h.ez),i.Y36(q.r),i.Y36(h.YP),i.Y36(e.Z),i.Y36(C.qu))},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-direccion"]],viewQuery:function(l,p){if(1&l&&i.Gf(E,5),2&l){let d;i.iGM(d=i.CRH())&&(p.direccionRef=d.first)}},inputs:{modelForm:"modelForm"},decls:1,vars:1,consts:[["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-4"],["for","departamento",1,"label-form"],["appendTo","body","filter","true","id","departamento","dataKey","codigo","formControlName","departamento","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione departamento",4,"ngIf"],["for","provincia",1,"label-form"],["appendTo","body","filter","true","id","provincia","dataKey","codigo","formControlName","provincia","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione provincia",4,"ngIf"],["for","distrito",1,"label-form"],["appendTo","body","filter","true","id","distrito","dataKey","codigo","formControlName","distrito","placeholder","Seleccione...","optionLabel","nombre",3,"options","onChange"],["severity","error","text","Seleccione distrito",4,"ngIf"],[1,"col-6"],["for","direccion",1,"label-form"],["formControlName","direccion","id","direccion","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["direccionRef",""],["severity","error","text","Ingrese direcci\xf3n",4,"ngIf"],[1,"col-3"],["for","numero",1,"label-form"],["formControlName","numero","id","numero","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero",4,"ngIf"],["for","numeroDepartamento",1,"label-form"],["formControlName","numeroDepartamento","id","numeroDepartamento","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["for","referencia",1,"label-form"],["formControlName","referencia","id","referencia","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["for","tipoDireccion",1,"label-form"],["appendTo","body","id","tipoDireccion","formControlName","tipoDireccion","placeholder","Seleccione...",3,"options"],["severity","error","text","Seleccione tipo direcci\xf3n",4,"ngIf"],["severity","error","text","Seleccione departamento"],["severity","error","text","Seleccione provincia"],["severity","error","text","Seleccione distrito"],["severity","error","text","Ingrese direcci\xf3n"],["severity","error","text","Ingrese n\xfamero"],["severity","error","text","Seleccione tipo direcci\xf3n"]],template:function(l,p){1&l&&i.YNc(0,N,43,23,"form",0),2&l&&i.Q6J("ngIf",p.modelForm)},directives:[v.O5,C._Y,C.JL,C.sg,y.Lt,C.JJ,C.u,M.q,C.Fj,J.o],styles:[""]}),u})()},35081:(j,A,c)=>{c.r(A),c.d(A,{ClientesModule:()=>Xe});var i=c(74202),h=c(82817),q=c(92340),e=c(5e3),C=c(45330),v=c(69808),y=c(74297);function M(o,r){if(1&o&&(e.TgZ(0,"p",7),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Fecha registro: ",e.xi3(2,1,null==t.customer?null:t.customer.createdOn,"dd/MM/yyyy")," ")}}function J(o,r){if(1&o&&(e.TgZ(0,"div",16),e.TgZ(1,"p",7),e._UZ(2,"span",17),e._uU(3),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.customer?null:t.customer.direccionCompleta," ")}}function E(o,r){if(1&o&&(e.TgZ(0,"div",16),e.TgZ(1,"p",7),e._UZ(2,"span",18),e._uU(3),e.ALo(4,"date"),e.TgZ(5,"span",19),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",e.xi3(4,2,null==t.customer?null:t.customer.fechaNacimiento,"dd/MM/yyyy")," "),e.xp6(3),e.Oqu(t.eventBirthday)}}const Y=["*"];let Q=(()=>{class o{constructor(){}ngOnInit(){}get eventBirthday(){if(this.customer.fechaNacimiento){const t=new Date(this.customer.fechaNacimiento),n=t.getDate(),a=t.getMonth(),s=new Date(new Date).getDate(),m=new Date(new Date).getMonth();return n===s&&a===m?`Hoy es su cumplea\xf1os (${this.calculateAge(t)} a\xf1os)`:""}return""}calculateAge(t){const n=Date.now()-t.getTime(),a=new Date(n);return Math.abs(a.getUTCFullYear()-1970)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cliente-item"]],inputs:{customer:"customer"},ngContentSelectors:Y,decls:27,vars:7,consts:[[1,"grid","p-nogutter"],[1,"col-fixed",2,"width","30px"],["src","assets/resources/images/person.svg","alt","",2,"width","100%"],[1,"col"],[1,"ml-3"],[1,"col-12","xl:col-5","md:col-12"],[1,"mt-0","mb-0","text-bold"],[1,"mt-0","mb-0"],["aria-hidden","true",1,"fa","fa-id-card-o"],["class","mt-0 mb-0",4,"ngIf"],[1,"col-7","xl:col-7","sm:col-12"],[1,"m-l-5","grid","p-nogutter"],[1,"col-12","md:col-12"],["aria-hidden","true",1,"fa","fa-envelope"],["aria-hidden","true",1,"fa","fa-phone"],["class","col-12",4,"ngIf"],[1,"col-12"],["aria-hidden","true",1,"fa","fa-map-marker"],["aria-hidden","true",1,"fa","fa-calendar"],[1,"text-bold"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e._UZ(3,"img",2),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",0),e.TgZ(7,"div",5),e.TgZ(8,"p",6),e._uU(9),e.qZA(),e.TgZ(10,"p",7),e._UZ(11,"span",8),e._uU(12),e.qZA(),e.YNc(13,M,3,4,"p",9),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"p",7),e._UZ(18,"span",13),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",12),e.TgZ(21,"p",7),e._UZ(22,"span",14),e._uU(23),e.qZA(),e.qZA(),e.YNc(24,J,4,1,"div",15),e.YNc(25,E,7,5,"div",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.Hsn(26),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Oqu(null==n.customer?null:n.customer.razonSocial),e.xp6(3),e.hij(" ",null==n.customer?null:n.customer.numeroDocumento," "),e.xp6(1),e.Q6J("ngIf",null==n.customer?null:n.customer.createdOn),e.xp6(6),e.hij(" ",null==n.customer?null:n.customer.email," "),e.xp6(4),e.hij(" ",null==n.customer?null:n.customer.telefono," "),e.xp6(1),e.Q6J("ngIf",null==n.customer?null:n.customer.direccionCompleta),e.xp6(1),e.Q6J("ngIf",null==n.customer?null:n.customer.fechaNacimiento))},directives:[y.Z,v.O5],pipes:[v.uU],styles:[""]}),o})();var F=c(33725),O=c(47903),P=c(79679);function L(o,r){if(1&o&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h2",3),e._uU(3),e.qZA(),e._UZ(4,"app-cliente-item",4),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"p-tabView"),e.TgZ(7,"p-tabPanel",5),e._UZ(8,"app-cuentas-por-cobrar",6),e.qZA(),e.TgZ(9,"p-tabPanel",7),e._UZ(10,"app-membresias",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.customer.razonSocial),e.xp6(1),e.Q6J("customer",t.customer),e.xp6(4),e.Q6J("externalFilters",t.externalFilters),e.xp6(2),e.Q6J("externalFilters",t.externalFilters)}}let b=(()=>{class o{constructor(t){this.config=t}ngOnInit(){this.externalFilters=[`idCliente=${this.customer.id}`]}get customer(){return this.config.data.customer}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cliente-perfil"]],decls:1,vars:1,consts:[["class","grid",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"text-center"],[3,"customer"],["header","Cuentas por cobrar"],[3,"externalFilters"],["header","Membres\xedas"]],template:function(t,n){1&t&&e.YNc(0,L,11,4,"div",0),2&t&&e.Q6J("ngIf",n.customer)},directives:[v.O5,Q,F.xf,F.x4,O.U,P.X],styles:[""]}),o})();var N=c(37590),w=c(96310),u=c(20207),f=c(59783),l=c(47745),p=c(24394),d=c(93075),Z=c(31424),x=c(98952),U=c(10930),I=c(40845),_=c(4119),g=c(5766),T=c(15315),B=c(88205);let G=(()=>{class o{transform(t,n){return"1"==t?"DNI":"0"==t?"DOC NO DOM SIN RUC":"4"==t?"Carnet de ext.":"6"==t?"RUC":"7"==t?"Pasaporte":"A"==t?"CED DIPLOMATICA IDENTIDAD":""}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"tipoDocumentoIdentidad",type:o,pure:!0}),o})();const K=["dt"];function W(o,r){if(1&o&&e._UZ(0,"p-sortIcon",22),2&o){const t=e.oxw().$implicit;e.Q6J("field",t.field)}}function X(o,r){if(1&o&&(e.TgZ(0,"th",20),e._uU(1),e.YNc(2,W,1,1,"p-sortIcon",21),e.qZA()),2&o){const t=r.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",!t.isActions)}}function ee(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,X,3,3,"th",19),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function te(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(n[t.field].nombre)}}function oe(o,r){if(1&o&&(e.ynx(0),e.YNc(1,te,2,1,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n[t.field])}}function ne(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"tipoDocumentoIdentidad"),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n[t.field]))}}function ie(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"Tipo Documento"),e.qZA(),e.YNc(3,ne,3,3,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function re(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.numeroDocumento)}}function ae(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"N\xfamero Documento"),e.qZA(),e.YNc(3,re,2,1,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function le(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.razonSocial)}}function ce(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"Raz\xf3n Social"),e.qZA(),e.YNc(3,le,2,1,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function se(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.direccionCompleta)}}function me(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"Direccion"),e.qZA(),e.YNc(3,se,2,1,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function de(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.email)}}function pe(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"Email"),e.qZA(),e.YNc(3,de,2,1,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function ue(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.fechaNacimiento,"dd/MM/yyyy"))}}function ge(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2,"Fec. Nacimiento"),e.qZA(),e.YNc(3,ue,3,4,"span",25),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function _e(o,r){if(1&o){const t=e.EpF();e.ynx(0,31),e.TgZ(1,"span",30),e._uU(2,"Por Defecto"),e.qZA(),e.TgZ(3,"p-inputSwitch",32),e.NdJ("onChange",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw(),m=e.MAs(18);return s.changePorDefecto(a,m)})("ngModelChange",function(a){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw().$implicit[s.field]=a}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngModel",n[t.field])}}function fe(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[t.field]," ")}}function he(o,r){1&o&&(e.ynx(0),e.YNc(1,oe,2,1,"ng-container",27),e.YNc(2,ie,4,1,"ng-container",27),e.YNc(3,ae,4,1,"ng-container",27),e.YNc(4,ce,4,1,"ng-container",27),e.YNc(5,me,4,1,"ng-container",27),e.YNc(6,pe,4,1,"ng-container",27),e.YNc(7,ge,4,1,"ng-container",27),e.YNc(8,_e,4,1,"ng-container",28),e.YNc(9,fe,2,1,"ng-container",29),e.BQk()),2&o&&(e.xp6(1),e.Q6J("ngSwitchCase","puntoVenta"),e.xp6(1),e.Q6J("ngSwitchCase","tipoDocumento"),e.xp6(1),e.Q6J("ngSwitchCase","numeroDocumento"),e.xp6(1),e.Q6J("ngSwitchCase","razonSocial"),e.xp6(1),e.Q6J("ngSwitchCase","direccion"),e.xp6(1),e.Q6J("ngSwitchCase","email"),e.xp6(1),e.Q6J("ngSwitchCase","fechaNacimiento"),e.xp6(1),e.Q6J("ngSwitchCase","porDefecto"))}function ve(o,r){if(1&o){const t=e.EpF();e.ynx(0,31),e.TgZ(1,"span",30),e._uU(2,"Acciones"),e.qZA(),e.TgZ(3,"div",33),e.TgZ(4,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().openDialogCustomerProfile(a)}),e.qZA(),e._UZ(5,"button",35),e.TgZ(6,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().confirmDelete(a)}),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(5),e.Q6J("routerLink",n.linkUpdate(t.id))}}function Ce(o,r){if(1&o&&(e.TgZ(0,"td",24),e.YNc(1,he,10,8,"ng-container",25),e.YNc(2,ve,7,1,"ng-container",26),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function Ze(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ce,3,3,"td",23),e.qZA()),2&o){const t=r.columns;e.xp6(1),e.Q6J("ngForOf",t)}}function Te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",37),e.TgZ(1,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().new()}),e.qZA(),e.TgZ(2,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().openImport()}),e.qZA(),e._UZ(3,"app-actions",40),e.TgZ(4,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().events()}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("items",t.actionsExportData)}}function xe(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.AsE("",t.name," - ",t.size," bytes ")}}function be(o,r){if(1&o&&(e.TgZ(0,"ul"),e.YNc(1,xe,2,2,"li",42),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles)}}function De(o,r){if(1&o&&e.YNc(0,be,2,1,"ul",25),2&o){const t=e.oxw();e.Q6J("ngIf",t.uploadedFiles.length)}}const Ae=function(){return{width:"600px",minWidth:"300px"}};let ye=(()=>{class o{constructor(t,n,a,s,m,D,$,z,k,R,et){this.route=t,this.router=n,this.customerService=a,this.companyService=s,this.loginService=m,this.messageService=D,this.breadcrumbService=$,this.confirmationService=z,this.dialogService=k,this.datePipe=R,this.ls=et,this.perPage=10,this.actionsExportData=[],this.displayDialogImport=!1,this.uploadedFiles=[]}ngOnInit(){this.breadcrumbService.setItems((0,h.kn)(this.route)),this.cols=[{field:"tipoDocumento",header:"Tipo Documento"},{field:"numeroDocumento",header:"Nro. Documento"},{field:"razonSocial",header:"Raz\xf3n social"},{field:"genero",header:"G\xe9nero"},{field:"direccion",header:"Direcci\xf3n"},{field:"email",header:"Email"},{field:"telefono",header:"Telefono"},{field:"fechaNacimiento",header:"Fec. Nacimiento"},{field:"porDefecto",header:"Por defecto?"},{header:"Acciones",isActions:!0}]}ngOnDestroy(){this.refDialogProfile&&this.refDialogProfile.close()}resetAndRefreshTable(){this.tabla.clear()}new(){this.router.navigateByUrl("/clientes/nuevo")}events(){this.router.navigateByUrl("/clientes/eventos")}changePorDefecto(t,n){this.customerService.updatePorDefecto(t.id,t).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Cliente actualizado."}),n._filter()},a=>t.porDefecto=!t.porDefecto)}openImport(){this.displayDialogImport=!0}loadLazy(t){const a=["paginacion=true","pageNumber="+t.first/this.perPage,`perPage=${t.rows}`];t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),t.filters.global&&a.push(`filtro=${t.filters.global.value}`),this.telefono&&a.push(`telefono=${this.telefono}`),this.email&&a.push(`email=${this.email}`),this.setUrlsExport(a),this.customerService.findAllPageC(a.join("&")).subscribe(s=>{this.totalRecords=s.totalElements,this.customers=s.content,this.customers.forEach(m=>{m.porDefecto=m.porDefecto})})}linkUpdate(t){return`/clientes/editar/${t}`}setUrlsExport(t){const n=this.loginService.getUser().empresa.uuid,a=`${q.N.endpointApi}/public/export-data/${n}/customers`;this.actionsExportData=[{icon:"fa fa-file-excel-o",label:"Exportar a excel",url:`${a}.xlsx?${t.join("&")}`},{icon:"fa fa-file-pdf-o",label:"Exportar a pdf",url:`${a}.pdf?${t.join("&")}`}]}refreshTable(){this.tabla.reset(),this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}confirmDelete(t){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.customerService.deleteById(t.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.refreshTable()})},acceptLabel:"Si",rejectLabel:"No"})}openDialogCustomerProfile(t){this.refDialogProfile=this.dialogService.open(b,{data:{customer:t},header:"Perfil de cliente",width:"80%"})}onFileUpload(t){const n=new FormData,a=t.files[0];n.append("file",a,a.name),this.customerService.importFromExcel(n).subscribe(s=>{this.displayDialogImport=!1,this.messageService.add({severity:"success",summary:"Archivo importado correctamente",detail:""}),this.tabla._filter()})}downloadTemplate(){window.open("assets/plantilla-clientes.xlsx")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.gz),e.Y36(i.F0),e.Y36(N.v),e.Y36(w.J),e.Y36(u.r),e.Y36(f.ez),e.Y36(l.p),e.Y36(f.YP),e.Y36(C.xA),e.Y36(v.uU),e.Y36(p.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-clientes"]],viewQuery:function(t,n){if(1&t&&e.Gf(K,7),2&t){let a;e.iGM(a=e.CRH())&&(n.tabla=a.first)}},decls:27,vars:22,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-6","md:col-6","lg:col-4"],[1,"label-form"],["name","serie","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange","input"],[1,"col-6","md:col-4"],["name","telefono","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange","input"],["name","email","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange","input"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Importar clientes desde archivo excel",3,"visible","modal","responsive","minY","maximizable","baseZIndex","visibleChange"],["accept",".xlsx","chooseLabel","Selecciona un archivo excel","uploadLabel","Subir excel","cancelLabel","Cancelar","name","file","maxFileSize","1000000",3,"customUpload","multiple","uploadHandler"],["pTemplate","content"],[2,"text-align","center","margin-top","1rem"],["type","button","pButton","","icon","fa fa-download","label","Descargar plantilla",3,"click"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],["style","text-align: center;",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],[3,"ngModel","onChange","ngModelChange"],[1,"space-buttons"],["pButton","","type","button","icon","fa fa-address-card","pTooltip","Ver perfil",1,"m-1",3,"click"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar",1,"p-button-success","m-1",3,"routerLink"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger","m-1",2,"margin-right","0.4rem",3,"click"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",1,"m-1",3,"click"],["type","button","pButton","","icon","fa fa-file-excel-o","label","Importar de excel",1,"m-1","p-button-secondary",3,"click"],[1,"m-1",3,"items"],["type","button","pButton","","icon","fa fa-calendar","label","Cumplea\xf1os",1,"m-1",3,"click"],[4,"ngFor","ngForOf"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"label",4),e._uU(6,"Nombre / N\xfamero Doc."),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(m){return n.filtroGlobal=m})("input",function(m){return e.CHM(a),e.MAs(18).filterGlobal(m.target.value,"contains")}),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"label",4),e._uU(10,"Telefono"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(m){return n.telefono=m})("input",function(){return n.resetAndRefreshTable()}),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"label",4),e._uU(14,"Email"),e.qZA(),e.TgZ(15,"input",8),e.NdJ("ngModelChange",function(m){return n.email=m})("input",function(){return n.resetAndRefreshTable()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",1),e.TgZ(17,"p-table",9,10),e.NdJ("onLazyLoad",function(m){return n.loadLazy(m)}),e.YNc(19,ee,2,1,"ng-template",11),e.YNc(20,Ze,2,1,"ng-template",12),e.YNc(21,Te,5,1,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"p-dialog",14),e.NdJ("visibleChange",function(m){return n.displayDialogImport=m}),e.TgZ(23,"p-fileUpload",15),e.NdJ("uploadHandler",function(m){return n.onFileUpload(m)}),e.YNc(24,De,1,1,"ng-template",16),e.qZA(),e.TgZ(25,"div",17),e.TgZ(26,"button",18),e.NdJ("click",function(){return n.downloadTemplate()}),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(7),e.Q6J("ngModel",n.filtroGlobal),e.xp6(4),e.Q6J("ngModel",n.telefono),e.xp6(4),e.Q6J("ngModel",n.email),e.xp6(2),e.Q6J("columns",n.cols)("value",n.customers)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Akn(e.DdM(21,Ae)),e.Q6J("visible",n.displayDialogImport)("modal",!0)("responsive",!0)("minY",70)("maximizable",!0)("baseZIndex",1e4),e.xp6(1),e.Q6J("customUpload",!0)("multiple",!1))},directives:[y.Z,d.Fj,Z.o,d.JJ,d.On,x.iA,f.jx,v.sg,x.lQ,v.O5,x.fz,v.RF,v.n9,U.Ql,v.ED,I.Hq,_.u,i.rH,g.h,T.V,B.p],pipes:[G,v.uU],styles:[".derecha[_ngcontent-%COMP%]{float:right}"]}),o})();var S=c(54578),Fe=c(2385),Ie=c(14036),Ne=c(43724),we=c(17102),Ue=c(75652),Se=c(42783);function qe(o,r){1&o&&e._UZ(0,"p-message",37)}function Me(o,r){1&o&&e._UZ(0,"p-message",38)}function Je(o,r){1&o&&e._UZ(0,"p-message",39)}function Ee(o,r){1&o&&e._UZ(0,"p-message",40)}function Ye(o,r){1&o&&e._UZ(0,"p-message",41)}function Qe(o,r){1&o&&e._UZ(0,"p-message",42)}function Oe(o,r){if(1&o&&e._UZ(0,"button",43),2&o){const t=e.oxw();e.Q6J("routerLink",t.linkVolver)}}function Pe(o,r){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-direccion",44),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("modelForm",t.modelForm)}}const V=function(){return{width:"100%"}},Le=function(){return{width:"800px"}};let Be=(()=>{class o{constructor(t,n,a,s,m,D,$,z,k,R){this.customerService=t,this.companyService=n,this.messageService=a,this.loginService=s,this.confirmationService=m,this.fb=D,this.breadcrumbService=$,this.consultaDocumentosService=z,this.listas=k,this.datePipe=R,this.saved=new e.vpe,this.tiposDocumento=[],this.generos=[],this.dialogAddress=!1}ngOnInit(){this.builderForm(),this.isEdit||this.modelForm.patchValue({tipoDocumento:{codigo:"6",nombre:"RUC"}}),this.loadModel(),this.tiposDocumento=[{codigo:"6",nombre:"RUC"},{codigo:"1",nombre:"DNI"},{codigo:"0",nombre:"DOC NO DOM SIN RUC"},{codigo:"4",nombre:"CARNET EXT"},{codigo:"7",nombre:"PASAPORTE"},{codigo:"A",nombre:"CED DIPLOMATICA IDENTIDAD"}]}builderForm(){this.generos=[{label:"Masculino",value:"MASCULINO"},{label:"Femenino",value:"FEMENINO"},{label:"No definido",value:"NO_DEFINIDO"}],this.modelForm=this.fb.group({tipoDocumento:[{},[d.kI.required]],numeroDocumento:["",[d.kI.required]],razonSocial:["",[d.kI.required]],tipoDireccion:["CASA",[]],direccionCompleta:["",[]],direccion:["",[]],numero:["",[]],genero:[void 0,[]],numeroDepartamento:["",[]],referencia:["",[]],departamento:[void 0,[]],codigoDepartamento:[void 0,[]],provincia:[void 0,[]],codigoProvincia:[void 0,[]],distrito:[void 0,[]],codigoDistrito:[void 0,[]],latitud:["",[]],longitud:["",[]],email:["",[d.kI.email]],telefono:[""],giro:[void 0,[]],fechaNacimiento:[void 0,[]],referido:[void 0,[]],expediente:[void 0,[]]})}submitForm(){let t,n;this.formToModel(),this.isEdit?(t=this.customerService.update(this.model),n="Cliente actualizado correctamente."):(t=this.customerService.save(this.model),n="Cliente registrado correctamente."),t.subscribe(a=>{this.saved.emit(a),this.messageService.add({severity:"success",summary:"Mensaje",detail:n})})}formToModel(){this.model||(this.model={}),this.model.numeroDocumento=this.modelForm.value.numeroDocumento,this.model.tipoDocumento=this.modelForm.value.tipoDocumento.codigo,this.model.razonSocial=this.modelForm.value.razonSocial,this.model.genero=this.modelForm.value.genero,this.model.tipoDireccion=this.modelForm.value.tipoDireccion,this.model.direccionCompleta=this.modelForm.value.direccionCompleta,this.model.direccion=this.modelForm.value.direccion,this.model.numero=this.modelForm.value.numero,this.model.numeroDepartamento=this.modelForm.value.numeroDepartamento,this.model.referencia=this.modelForm.value.referencia,this.model.codigoDepartamento=this.modelForm.value.codigoDepartamento,this.model.codigoProvincia=this.modelForm.value.codigoProvincia,this.model.codigoDistrito=this.modelForm.value.codigoDistrito,this.model.latitud=this.modelForm.value.latitud,this.model.longitud=this.modelForm.value.longitud,this.model.email=this.modelForm.value.email,this.model.telefono=this.modelForm.value.telefono,this.model.giro=this.modelForm.value.giro,this.model.fechaNacimiento=this.modelForm.value.fechaNacimiento?new Date(this.modelForm.value.fechaNacimiento).getTime():null,this.model.referido=this.modelForm.value.referido,this.model.expediente=this.modelForm.value.expediente}modelToForm(t){this.modelForm.patchValue({numeroDocumento:t.numeroDocumento,tipoDocumento:this.tiposDocumento.find(n=>n.codigo===t.tipoDocumento),razonSocial:t.razonSocial,genero:t.genero,tipoDireccion:t.tipoDireccion,direccionCompleta:t.direccionCompleta,direccion:t.direccion,numero:t.numero,numeroDepartamento:t.numeroDepartamento,referencia:t.referencia,codigoDepartamento:t.codigoDepartamento,codigoProvincia:t.codigoProvincia,codigoDistrito:t.codigoDistrito,latitud:t.latitud,longitud:t.longitud,email:t.email,telefono:this.model.telefono,giro:this.model.giro,fechaNacimiento:this.model.fechaNacimiento?new Date(this.model.fechaNacimiento):null,referido:this.model.referido,expediente:this.model.expediente})}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get numeroDocumento(){return this.modelForm.get("numeroDocumento")}get tipoDocumento(){return this.modelForm.get("tipoDocumento")}get razonSocial(){return this.modelForm.get("razonSocial")}get direccion(){return this.modelForm.get("direccionCompleta")}get email(){return this.modelForm.get("email")}get telefono(){return this.modelForm.get("telefono")}get genero(){return this.modelForm.get("genero")}get giro(){return this.modelForm.get("giro")}get referido(){return this.modelForm.get("referido")}get expediente(){return this.modelForm.get("expediente")}get fechaNacimiento(){return this.modelForm.get("fechaNacimiento")}loadModel(){this.isEdit&&this.customerService.findById(this.idEdit).subscribe(t=>{t&&(t.direccionCompleta||(t.direccionCompleta=t.direccion),this.model=t,this.modelToForm(t))})}get linkVolver(){return"/clientes"}openModalEditDefaultAddress(){this.dialogAddress=!0}buscarRucODni(t,n){"6"===t?this.consultaDocumentosService.findDocument(n,!1).subscribe(a=>{this.patchValueForm("razonSocial",a.nombre_o_razon_social),this.patchValueForm("direccionCompleta",a.direccion_completa)}):this.consultaDocumentosService.findDocument(n,!0).subscribe(a=>{this.patchValueForm("razonSocial",a.nombre_completo)})}patchValueForm(t,n){const a={};a[t]=n,this.modelForm.patchValue(a)}getValueForm(t){return this.modelForm.get(t).value}keyUpNumeroDocumento(t){console.log(t);const n=this.getValueForm("tipoDocumento"),a=this.getValueForm("numeroDocumento"),s=n.codigo;if(s)switch(s){case"6":11===a.length?this.buscarRucODni(s,a):this.modelForm.patchValue({razonSocial:"",direccionCompleta:""});break;case"1":8===a.length?this.buscarRucODni(s,a):this.modelForm.patchValue({razonSocial:""})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.v),e.Y36(w.J),e.Y36(f.ez),e.Y36(u.r),e.Y36(f.YP),e.Y36(d.qu),e.Y36(l.p),e.Y36(Fe.W),e.Y36(p.E),e.Y36(v.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cliente-ru"]],inputs:{isEdit:"isEdit",idEdit:"idEdit",showBackButton:"showBackButton"},outputs:{saved:"saved"},decls:66,vars:29,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12"],["header","Datos principales","leftIcon","fa fa-asterisk"],[1,"col-12","md:col-6"],["for","tipoDocumento",1,"label-form"],["formControlName","tipoDocumento","placeholder","Seleccione...","optionLabel","nombre","id","tipoDocumento",3,"options","showClear"],["severity","error","text","Ingrese tipo de documento",4,"ngIf"],["for","numeroDocumento",1,"label-form"],["formControlName","numeroDocumento","id","numeroDocumento","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"keyup"],["severity","error","text","Ingrese n\xfamero de documento",4,"ngIf"],["for","razonSocial",1,"label-form"],["formControlName","razonSocial","id","razonSocial","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre o raz\xf3n social",4,"ngIf"],["for","direccion",1,"label-form"],[1,"p-inputgroup"],["formControlName","direccionCompleta","id","direccion","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese direcci\xf3n",4,"ngIf"],["for","email",1,"label-form"],["formControlName","email","id","email","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese email",4,"ngIf"],["for","telefono",1,"label-form"],["formControlName","telefono","id","telefono","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese tel\xe9fono",4,"ngIf"],["header","Datos adicionales","leftIcon","fa fa-info-circle"],[1,"label-form"],["formControlName","genero",3,"options"],["placeholder","Fecha de emisi\xf3n dd-mm-yy","formControlName","fechaNacimiento","yearRange","1930:2030","dateFormat","dd-mm-yy",3,"monthNavigator","yearNavigator","locale"],["formControlName","giro","id","giro","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","referido","id","referido","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","expediente","id","expediente","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Volver","class","p-button-secondary",3,"routerLink",4,"ngIf"],["appendTo","body","header","Direcci\xf3n",3,"visible","modal","responsive","visibleChange"],[4,"ngIf"],["pButton","","type","submit","label","Aceptar",2,"margin-right","0.4rem",3,"click"],["severity","error","text","Ingrese tipo de documento"],["severity","error","text","Ingrese n\xfamero de documento"],["severity","error","text","Ingrese nombre o raz\xf3n social"],["severity","error","text","Ingrese direcci\xf3n"],["severity","error","text","Ingrese email"],["severity","error","text","Ingrese tel\xe9fono"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],[3,"modelForm"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.NdJ("ngSubmit",function(){return n.submitForm()}),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"p-tabView"),e.TgZ(5,"p-tabPanel",3),e.TgZ(6,"div",1),e.TgZ(7,"div",4),e.TgZ(8,"label",5),e._uU(9,"Tipo de documento (*)"),e.qZA(),e._UZ(10,"p-dropdown",6),e.YNc(11,qe,1,0,"p-message",7),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"label",8),e._uU(14,"N\xfamero de documento (*)"),e.qZA(),e.TgZ(15,"input",9),e.NdJ("keyup",function(s){return n.keyUpNumeroDocumento(s)}),e.qZA(),e.YNc(16,Me,1,0,"p-message",10),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",11),e._uU(19,"Nombre / Raz\xf3n social (*)"),e.qZA(),e._UZ(20,"input",12),e.YNc(21,Je,1,0,"p-message",13),e.qZA(),e.TgZ(22,"div",4),e.TgZ(23,"label",14),e._uU(24,"Direcci\xf3n (*)"),e.qZA(),e.TgZ(25,"div",15),e._UZ(26,"input",16),e.qZA(),e.YNc(27,Ee,1,0,"p-message",17),e.qZA(),e.TgZ(28,"div",4),e.TgZ(29,"label",18),e._uU(30,"Email"),e.qZA(),e._UZ(31,"input",19),e.YNc(32,Ye,1,0,"p-message",20),e.qZA(),e.TgZ(33,"div",4),e.TgZ(34,"label",21),e._uU(35,"Tel\xe9fono"),e.qZA(),e._UZ(36,"input",22),e.YNc(37,Qe,1,0,"p-message",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"p-tabPanel",24),e.TgZ(39,"div",1),e.TgZ(40,"div",4),e.TgZ(41,"label",25),e._uU(42,"Genero"),e.qZA(),e._UZ(43,"p-selectButton",26),e.qZA(),e.TgZ(44,"div",4),e.TgZ(45,"label",25),e._uU(46,"Fecha de nacimiento"),e.qZA(),e._UZ(47,"p-calendar",27),e.qZA(),e.TgZ(48,"div",4),e.TgZ(49,"label",25),e._uU(50,"Giro de negocio"),e.qZA(),e._UZ(51,"input",28),e.qZA(),e.TgZ(52,"div",4),e.TgZ(53,"label",25),e._uU(54,"Referido"),e.qZA(),e._UZ(55,"input",29),e.qZA(),e.TgZ(56,"div",4),e.TgZ(57,"label",25),e._uU(58,"Expediente"),e.qZA(),e._UZ(59,"input",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",31),e._UZ(61,"button",32),e.YNc(62,Oe,1,1,"button",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"p-dialog",34),e.NdJ("visibleChange",function(s){return n.dialogAddress=s}),e.YNc(64,Pe,2,1,"div",35),e.TgZ(65,"button",36),e.NdJ("click",function(){return n.dialogAddress=!1}),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.modelForm),e.xp6(9),e.Akn(e.DdM(26,V)),e.Q6J("options",n.tiposDocumento)("showClear",!0),e.xp6(1),e.Q6J("ngIf",n.tipoDocumento.touched&&(null==n.tipoDocumento.errors?null:n.tipoDocumento.errors.required)),e.xp6(5),e.Q6J("ngIf",n.numeroDocumento.touched&&(null==n.numeroDocumento.errors?null:n.numeroDocumento.errors.required)),e.xp6(5),e.Q6J("ngIf",n.razonSocial.touched&&(null==n.razonSocial.errors?null:n.razonSocial.errors.required)),e.xp6(6),e.Q6J("ngIf",n.direccion.touched&&(null==n.direccion.errors?null:n.direccion.errors.required)),e.xp6(5),e.Q6J("ngIf",n.email.touched&&(null==n.email.errors?null:n.email.errors.required)),e.xp6(5),e.Q6J("ngIf",n.telefono.touched&&(null==n.telefono.errors?null:n.telefono.errors.required)),e.xp6(6),e.Q6J("options",n.generos),e.xp6(4),e.Akn(e.DdM(27,V)),e.Q6J("monthNavigator",!0)("yearNavigator",!0)("locale",n.listas.calendarEs),e.xp6(14),e.Q6J("disabled",!n.modelForm.valid)("label",n.textButtonAction),e.xp6(1),e.Q6J("ngIf",n.showBackButton),e.xp6(1),e.Akn(e.DdM(28,Le)),e.Q6J("visible",n.dialogAddress)("modal",!0)("responsive",!0),e.xp6(1),e.Q6J("ngIf",n.modelForm))},directives:[y.Z,d._Y,d.JL,d.sg,F.xf,F.x4,Ie.Lt,d.JJ,d.u,v.O5,Ne.q,d.Fj,Z.o,we.UN,Ue.f,I.Hq,i.rH,T.V,Se.K],encapsulation:2}),o})(),H=(()=>{class o{constructor(t,n,a){this.route=t,this.router=n,this.breadcrumbService=a}ngOnInit(){this.breadcrumbService.setItems((0,h.kn)(this.route)),this.isEdit=this.route.snapshot.data.isEdit,this.idEdit=this.route.snapshot.params.id}goToCustomers(){this.router.navigateByUrl("/clientes")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.gz),e.Y36(i.F0),e.Y36(l.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cliente"]],decls:1,vars:2,consts:[["showBackButton","true",3,"idEdit","isEdit","saved"]],template:function(t,n){1&t&&(e.TgZ(0,"app-cliente-ru",0),e.NdJ("saved",function(){return n.goToCustomers()}),e.qZA()),2&t&&e.Q6J("idEdit",n.idEdit)("isEdit",n.isEdit)},directives:[Be],encapsulation:2}),o})();var $e=c(32474),ze=c(4566);const ke=["calendar"],je=[{path:"",component:ye,canActivate:[S.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Clientes"}]}},{path:"editar/:id",component:H,data:{isEdit:!0,title:"Editar cliente",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar cliente"}]},canActivate:[S.P]},{path:"nuevo",component:H,data:{isEdit:!1,title:"Nuevo cliente",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nuevo cliente"}]},canActivate:[S.P]},{path:"eventos",component:(()=>{class o{constructor(t,n,a,s,m){this.customerService=t,this.route=n,this.datePipe=a,this.breadcrumbService=s,this.dialogService=m,this.customers=[]}ngOnInit(){this.breadcrumbService.setItems((0,h.kn)(this.route));const t=this;this.options={locale:$e.Z,initialView:"dayGridMonth",dateClick:this.handleDateClick.bind(this),eventClick:this.handleEventClick.bind(this),customButtons:{customPrev:{icon:"chevron-left",click(){t.clickPrev()}},customNext:{icon:"chevron-right",click(){t.clickNext()}}},headerToolbar:{left:"customPrev,customNext today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"}},this.options.events=[]}ngAfterViewInit(){this.loadBirthDays()}handleDateClick(t){console.log("date click! "+t.dateStr)}handleEventClick(t){console.log("event click! "+t),console.log(t),console.log(this.customers);const n=this.customers.find(a=>a.id===Number(t.event.id));this.openDialogCustomerProfile(n)}clickNext(){this.fc.getApi().next(),this.loadBirthDays()}clickPrev(){this.fc.getApi().prev(),this.loadBirthDays()}openDialogCustomerProfile(t){this.dialogService.open(b,{data:{customer:t},header:"Perfil de cliente",width:"80%"})}loadBirthDays(){const t=this.fc.getApi().getDate().getMonth()+1,n=this.fc.getApi().getDate().getFullYear();this.customerService.findAllCustomersByMonthBirth([`numberMonth=${t}`,`numberYear=${n}`].join("&")).subscribe(s=>{this.customers=s,console.log("cust",this.customers),this.options.events=s.map(m=>{const D=new Date(m.fechaNacimiento);return D.setFullYear(n),{id:m.id,title:m.razonSocial+" (Cumplea\xf1os)",date:this.datePipe.transform(D,"yyyy-MM-dd")}})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.v),e.Y36(i.gz),e.Y36(v.uU),e.Y36(l.p),e.Y36(C.xA))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cliente-calendario"]],viewQuery:function(t,n){if(1&t&&e.Gf(ke,5),2&t){let a;e.iGM(a=e.CRH())&&(n.fc=a.first)}},decls:7,vars:1,consts:[[1,"grid"],[1,"col-12"],[3,"options"],["calendar",""],[1,"col-12",2,"text-align","center"],["routerLink","/clientes","pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e._UZ(3,"full-calendar",2,3),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"button",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("options",n.options))},directives:[y.Z,ze.woE,i.rH,I.Hq],styles:[""]}),o})(),data:{isEdit:!1,title:"Cumplea\xf1os del mes",breadcrumb:[{label:"Administraci\xf3n"},{label:"Clientes"},{label:"Cumplea\xf1os del mes"}]},canActivate:[S.P]}];let Ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.Bz.forChild(je)],i.Bz]}),o})();var He=c(20958),Ge=c(55402),Ke=c(14354),We=c(34378);let Xe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[C.xA],imports:[[Ve,He.m,Ge.R,Ke.CuentasPorCobrarModule,We.MembresiasModule]]}),o})()}}]);