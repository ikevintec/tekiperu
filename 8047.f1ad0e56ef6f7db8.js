"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[8047],{58047:(T,b,i)=>{i.r(b),i.d(b,{EstacionVentaModule:()=>te});var u=i(74202),m=i(54578),_=i(82817),e=i(5e3),g=i(86529),h=i(96310),r=i(20207),s=i(47745),c=i(74297),l=i(98952),d=i(59783),E=i(69808),V=i(40845),x=i(4119);function U(n,a){if(1&n&&e._UZ(0,"p-sortIcon",10),2&n){const t=e.oxw().$implicit;e.Q6J("field",t.field)}}function P(n,a){if(1&n&&(e.TgZ(0,"th",8),e._uU(1),e.YNc(2,U,1,1,"p-sortIcon",9),e.qZA()),2&n){const t=a.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",!t.isActions)}}function F(n,a){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,P,3,3,"th",7),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function $(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.nombre)}}function N(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"Nombre"),e.qZA(),e.YNc(3,$,2,1,"span",13),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",o[t.field])}}function Y(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3).$implicit,o=e.oxw().$implicit;e.xp6(1),e.Oqu(o[t.field].nombre)}}function L(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"Punto de venta"),e.qZA(),e.YNc(3,Y,2,1,"span",13),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",o[t.field])}}function B(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o[t.field]," ")}}function J(n,a){1&n&&(e.ynx(0),e.YNc(1,N,4,1,"ng-container",15),e.YNc(2,L,4,1,"ng-container",15),e.YNc(3,B,2,1,"ng-container",16),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngSwitchCase","nombre"),e.xp6(1),e.Q6J("ngSwitchCase","puntoVenta"))}function M(n,a){if(1&n&&(e.ynx(0,18),e.TgZ(1,"span",17),e._uU(2,"Acciones"),e.qZA(),e._UZ(3,"button",19),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.xp6(3),e.Q6J("routerLink",o.linkUpdate(t.id))}}function w(n,a){if(1&n&&(e.TgZ(0,"td",12),e.YNc(1,J,4,2,"ng-container",13),e.YNc(2,M,4,1,"ng-container",14),e.qZA()),2&n){const t=a.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function D(n,a){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,w,3,3,"td",11),e.qZA()),2&n){const t=a.columns;e.xp6(1),e.Q6J("ngForOf",t)}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().new()}),e.qZA(),e.qZA()}}let R=(()=>{class n{constructor(t,o,p,v,A,C){this.route=t,this.router=o,this.saleStationService=p,this.companyService=v,this.loginService=A,this.breadcrumbService=C,this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,_.kn)(this.route)),this.cols=[{field:"nombre",header:"Nombre"},{field:"puntoVenta",header:"Punto de venta"},{header:"Acciones",isActions:!0}],this.loading=!0,this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(t=>{this.empresa=t})})}new(){this.router.navigateByUrl("/estaciones-venta/nuevo")}loadLazy(t){this.loading=!0;const v=["pageNumber="+t.first/this.perPage,`perPage=${t.rows}`,"paginacion=true"];t.sortOrder&&v.push(`sortOrder=${t.sortOrder}`),t.sortField&&v.push(`sortField=${t.sortField}`),this.saleStationService.findAllPage(v.join("&")).subscribe(A=>{this.totalRecords=A.totalElements,this.dataList=A.content,this.loading=!1})}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}linkUpdate(t){return`/estaciones-venta/editar/${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(g.i),e.Y36(h.J),e.Y36(r.r),e.Y36(s.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-estaciones-venta"]],decls:8,vars:8,consts:[[1,"grid"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"p-table",2,3),e.NdJ("onLazyLoad",function(v){return o.loadLazy(v)}),e.YNc(5,F,2,1,"ng-template",4),e.YNc(6,D,2,1,"ng-template",5),e.YNc(7,Q,2,0,"ng-template",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("columns",o.cols)("value",o.dataList)("lazy",!0)("paginator",!0)("rows",o.perPage)("totalRecords",o.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[c.Z,l.iA,d.jx,E.sg,l.lQ,E.O5,l.fz,E.RF,E.n9,E.ED,V.Hq,x.u,u.rH],styles:[""]}),n})();var f=i(93075),S=i(6969),O=i(87969),z=i(30361),y=i(33725),q=i(31424),K=i(43724),j=i(14036);function H(n,a){1&n&&e._UZ(0,"p-message",20)}function W(n,a){1&n&&e._UZ(0,"p-message",21)}function k(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmDelete()}),e.qZA()}}const Z=function(){return{width:"100%"}};let I=(()=>{class n{constructor(t,o,p,v,A,C,ne,oe,ie,ae,re,se,le){this.route=t,this.router=o,this.saleStationService=p,this.companyService=v,this.officeService=A,this.profileService=C,this.messageService=ne,this.loginService=oe,this.confirmationService=ie,this.puntoVentaService=ae,this.fb=re,this.breadcrumbService=se,this.printerService=le,this.puntosVenta=[],this.impresoras=[]}ngOnInit(){this.breadcrumbService.setItems((0,_.kn)(this.route)),this.loadPuntosVenta(),this.builderForm(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(t=>{this.empresa=t,this.loadModel()})})}get isEdit(){return this.route.snapshot.data.isEdit}builderForm(){this.modelForm=this.fb.group({nombre:["",[f.kI.required]],puntoVenta:["",[f.kI.required]],impresoraComprobante:[void 0,[]],impresoraCuentaRestaurante:[void 0,[]]}),this.isEdit&&this.modelForm.get("puntoVenta").disable()}submitForm(){let t,o;this.formToModel(),this.isEdit?(t=this.saleStationService.update(this.model),o="Estaci\xf3n de venta actualizada correctamente."):(t=this.saleStationService.save(this.model),o="Estaci\xf3n de venta registrada correctamente."),t.subscribe(p=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:o}),this.router.navigateByUrl(this.linkVolver)})}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.getRawValue().nombre,this.model.puntoVenta=this.modelForm.getRawValue().puntoVenta,this.model.impresoraComprobante=this.modelForm.getRawValue().impresoraComprobante,this.model.impresoraCuentaRestaurante=this.modelForm.getRawValue().impresoraCuentaRestaurante}modelToForm(t){this.modelForm.patchValue({nombre:t.nombre,puntoVenta:t.puntoVenta,impresoraComprobante:t.impresoraComprobante,impresoraCuentaRestaurante:t.impresoraCuentaRestaurante}),this.loadImpresoras()}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.route.snapshot.data.title}get nombre(){return this.modelForm.get("nombre")}get puntoVenta(){return this.modelForm.get("puntoVenta")}loadModel(){this.isEdit&&this.route.params.subscribe(t=>{this.saleStationService.findById(t.id).subscribe(p=>{p&&(this.model=p,this.modelToForm(p))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.saleStationService.deleteById(this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}get linkVolver(){return"/estaciones-venta"}loadPuntosVenta(){this.puntoVentaService.findAll("",this.idEmpresa,!1).subscribe(t=>{this.puntosVenta=t})}loadImpresoras(){this.printerService.findAllP(`idPuntoVenta=${this.modelForm.getRawValue().puntoVenta.id}`).subscribe(t=>{this.impresoras=t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(g.i),e.Y36(h.J),e.Y36(S.l),e.Y36(O.H),e.Y36(d.ez),e.Y36(r.r),e.Y36(d.YP),e.Y36(S.l),e.Y36(f.qu),e.Y36(s.p),e.Y36(z.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-estacion-venta"]],decls:31,vars:22,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12"],["header","Datos Principales"],[1,"grid","form-group"],[1,"col-12","md:col-6"],["for","nombre",1,"label-form"],["formControlName","nombre","id","nombre","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre",4,"ngIf"],["dataKey","id","formControlName","puntoVenta","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta",3,"showClear","options","onChange"],["severity","error","text","Ingrese punto de venta",4,"ngIf"],["header","Impresoras"],["for","impresoraComprobante",1,"label-form"],["dataKey","id","formControlName","impresoraComprobante","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta","id","impresoraComprobante",3,"showClear","options"],["for","idImpresoraCuentaRestaurante",1,"label-form"],["dataKey","id","formControlName","impresoraCuentaRestaurante","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta","id","idImpresoraCuentaRestaurante",3,"showClear","options"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["severity","error","text","Ingrese nombre"],["severity","error","text","Ingrese punto de venta"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.NdJ("ngSubmit",function(){return o.submitForm()}),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"p-tabView"),e.TgZ(5,"p-tabPanel",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Nombre (*)"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,H,1,0,"p-message",8),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"label",6),e._uU(14,"Punto de venta (*)"),e.qZA(),e.TgZ(15,"p-dropdown",9),e.NdJ("onChange",function(){return o.loadImpresoras()}),e.qZA(),e.YNc(16,W,1,0,"p-message",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"p-tabPanel",11),e.TgZ(18,"div",1),e.TgZ(19,"div",5),e.TgZ(20,"label",12),e._uU(21,"Impresora comprobante"),e.qZA(),e._UZ(22,"p-dropdown",13),e.qZA(),e.TgZ(23,"div",5),e.TgZ(24,"label",14),e._uU(25,"Impresora cuenta restaurante"),e.qZA(),e._UZ(26,"p-dropdown",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",16),e._UZ(28,"button",17),e.YNc(29,k,1,0,"button",18),e._UZ(30,"button",19),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.modelForm),e.xp6(10),e.Q6J("ngIf",o.nombre.touched&&(null==o.nombre.errors?null:o.nombre.errors.required)),e.xp6(4),e.Akn(e.DdM(19,Z)),e.Q6J("showClear",!0)("options",o.puntosVenta),e.xp6(1),e.Q6J("ngIf",o.puntoVenta.touched&&(null==o.puntoVenta.errors?null:o.puntoVenta.errors.required)),e.xp6(6),e.Akn(e.DdM(20,Z)),e.Q6J("showClear",!0)("options",o.impresoras),e.xp6(4),e.Akn(e.DdM(21,Z)),e.Q6J("showClear",!0)("options",o.impresoras),e.xp6(2),e.Q6J("disabled",!o.modelForm.valid)("label",o.textButtonAction),e.xp6(1),e.Q6J("ngIf",o.isEdit),e.xp6(1),e.Q6J("routerLink",o.linkVolver))},directives:[c.Z,f._Y,f.JL,f.sg,y.xf,y.x4,f.Fj,f.JJ,f.u,q.o,E.O5,K.q,j.Lt,V.Hq,u.rH],styles:[""]}),n})();const G=[{path:"",component:R,canActivate:[m.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Estaci\xf3n de venta"}]}},{path:"editar/:id",component:I,data:{isEdit:!0,title:"Editar estaci\xf3n de venta",breadcrumb:[{label:"Administraci\xf3n"},{label:"Editar estaci\xf3n de venta"}]},canActivate:[m.P]},{path:"nuevo",component:I,data:{isEdit:!1,title:"Nueva estaci\xf3n de venta",breadcrumb:[{label:"Administraci\xf3n"},{label:"Nueva estaci\xf3n de venta"}]},canActivate:[m.P]}];let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(G)],u.Bz]}),n})();var ee=i(20958);let te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[X,ee.m]]}),n})()},30361:(T,b,i)=>{i.d(b,{v:()=>e});var u=i(92340),m=i(5e3),_=i(40520);let e=(()=>{class g{constructor(r){this.http=r,this.baseUrl=u.N.endpointApi}save(r){return this.http.post(`${this.baseUrl}/printer`,r)}update(r){return this.http.put(`${this.baseUrl}/printer`,r)}findAllPageP(r){return this.findAllP(r)}findAllP(r){return this.http.get(`${this.baseUrl}/printers?${r}`)}findById(r){return this.http.get(`${this.baseUrl}/printer/${r}`)}deleteById(r){return this.http.delete(`${this.baseUrl}/printer/${r}`)}}return g.\u0275fac=function(r){return new(r||g)(m.LFG(_.eN))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},87969:(T,b,i)=>{i.d(b,{H:()=>g});var u=i(92340),m=i(36644),_=i(5e3),e=i(40520);let g=(()=>{class h{constructor(s){this.http=s,this.baseUrl=u.N.endpointApi}findAllPage(s,c,l){const d=(0,m.S)(s,l);return this.http.get(`${d}/profiles?${c}`)}findAll(s,c){const l=(0,m.S)(s,c);return this.http.get(`${l}/profiles/all`)}findById(s,c,l){const d=(0,m.S)(s,l);return this.http.get(`${d}/profiles/${c}`)}save(s,c,l){const d=(0,m.S)(s,l);return this.http.post(`${d}/profiles`,c)}update(s,c,l){const d=(0,m.S)(s,l);return this.http.put(`${d}/profiles`,c)}deleteById(s,c,l){const d=(0,m.S)(s,l);return this.http.delete(`${d}/profiles/${c}`)}findAllModulesAccess(s){return this.http.get(`${this.baseUrl}/modules-access?${s}`)}}return h.\u0275fac=function(s){return new(s||h)(_.LFG(e.eN))},h.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);