"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[182,7121],{70182:(D,h,s)=>{s.r(h),s.d(h,{MonitoreoModule:()=>Tt});var p=s(74202),u=s(82817),e=s(5e3),m=s(1203),_=s(96310),f=s(33379),C=s(20207),l=s(69808),b=s(24876),S=s(22313),d=s(59783),Q=s(2314),O=s(24394),P=s(47745),c=s(93075),N=s(74297),k=s(75652),z=s(17102),J=s(42841),M=s(98952),R=s(14036),U=s(31424),F=s(40845),Y=s(4119),H=s(48185),$=s(15315),L=s(20657),j=s(10930),G=s(77121);let V=(()=>{class o{transform(t,n){return"01"==t?"Registrado":"02"==t?"Aceptado":"03"==t?"Por verificar":"04"==t?"Advertencia":"05"==t?"Rechazado":"06"==t?"Error":"07"==t?"Enviando":"08"==t?"Anulado":"09"==t?"Anulando":""}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"estadoComprobante",type:o,pure:!0}),o})();var K=s(23582);const W=["dt"];function X(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}const T=function(){return{width:"100%"}};function ee(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",33),e.NdJ("onChange",function(a){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2),e.MAs(23).filter(a.value,i.field,"equals")}),e.qZA()}if(2&o){const t=e.oxw(3);e.Akn(e.DdM(3,T)),e.Q6J("options",t.ls.tiposComprobantes)}}function te(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function oe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function ne(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function ae(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function re(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function ie(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function se(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",34),e.NdJ("input",function(a){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2),e.MAs(23).filter(a.target.value,i.field,"equals")}),e.qZA()}}function ce(o,r){1&o&&(e.TgZ(0,"th",29),e.YNc(1,ee,1,4,"p-dropdown",30),e.YNc(2,te,2,0,"span",31),e.YNc(3,oe,2,0,"span",31),e.YNc(4,ne,2,0,"span",31),e.YNc(5,ae,2,0,"span",31),e.YNc(6,re,2,0,"span",31),e.YNc(7,ie,2,0,"span",31),e.YNc(8,se,2,0,"span",31),e.YNc(9,le,1,0,"input",32),e.qZA()),2&o&&(e.Q6J("ngSwitch",r.$implicit.field),e.xp6(1),e.Q6J("ngSwitchCase","tipoComprobante"),e.xp6(1),e.Q6J("ngSwitchCase","fechaEmision"),e.xp6(1),e.Q6J("ngSwitchCase","totalVenta"),e.xp6(1),e.Q6J("ngSwitchCase","anulado"),e.xp6(1),e.Q6J("ngSwitchCase","estado"),e.xp6(1),e.Q6J("ngSwitchCase","estadoSunat"),e.xp6(1),e.Q6J("ngSwitchCase","esProduccion"),e.xp6(1),e.Q6J("ngSwitchCase","acciones"))}function pe(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,X,2,1,"th",27),e.qZA(),e.TgZ(2,"tr"),e.YNc(3,ce,10,9,"th",28),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("ngForOf",t)}}function me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().refreshTable()}),e.qZA(),e.TgZ(2,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialogFormMonitoreo()}),e.qZA(),e.qZA()}}function de(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"tipoDocumento"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.tipoComprobante))}}function _e(o,r){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.ALo(2,"tipoDocumento"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("pTooltip",n.showTextTicketRelated(t)),e.xp6(1),e.Oqu(e.lcZ(2,2,t.tipoComprobante))}}function ge(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.serie)}}function ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().generateNewNumber(a)}),e.qZA()}}function fe(o,r){if(1&o&&e.YNc(0,ue,1,0,"button",56),2&o){const t=e.oxw().$implicit;e.Q6J("ngIf","06"===t.estado)}}function he(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.numero)}}function be(o,r){if(1&o&&e.YNc(0,he,2,1,"span",40),2&o){const t=e.oxw().$implicit;e.Q6J("ngIf",t.numero)}}function Ce(o,r){1&o&&(e.TgZ(0,"span",58),e._uU(1,"Si"),e.qZA())}function Me(o,r){1&o&&(e.TgZ(0,"span",59),e._uU(1,"No"),e.qZA())}function Te(o,r){if(1&o&&e._UZ(0,"i",60),2&o){const t=e.oxw().$implicit;e.Q6J("pTooltip","Nota de venta reemplazada por el comprobante "+t.comprobanteSustituto)}}const Ze=function(){return{height:"2px"}};function xe(o,r){1&o&&e._UZ(0,"p-progressBar",61),2&o&&e.Akn(e.DdM(2,Ze))}function Ae(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Producci\xf3n"),e.qZA())}function we(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Test"),e.qZA())}function ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().enviarSunat(a)}),e.qZA()}}function ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().getStatusCdt(a)}),e.qZA()}}function Se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().enviarBoletaSunat(a,"NEW")}),e.qZA()}}function Pe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().enviarBoletaSunat(a,"EDIT")}),e.qZA()}}function qe(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Se,1,0,"span",64),e.YNc(2,Pe,1,0,"span",65),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.isSendBill),e.xp6(1),e.Q6J("ngIf",!t.isSendBill)}}function Ee(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",69),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().enviarBoletaSunat(a,"VOIDED")}),e.qZA()}}function Oe(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Ee,1,0,"span",68),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.isSendBill)}}const Ne=function(o,r){return{"label-success":o,"label-important":r}};function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"span",38),e._uU(3,"Fecha"),e.qZA(),e.TgZ(4,"span",39),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"span",38),e._uU(8,"Tipo"),e.qZA(),e.YNc(9,de,3,3,"span",40),e.YNc(10,_e,3,4,"span",41),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",38),e._uU(13,"Serie"),e.qZA(),e.YNc(14,ge,2,1,"span",40),e.qZA(),e.TgZ(15,"td",42),e.TgZ(16,"span",38),e._uU(17,"N\xfamero"),e.qZA(),e._uU(18),e.TgZ(19,"div",43),e.TgZ(20,"p-cellEditor"),e.YNc(21,fe,1,1,"ng-template",44),e.YNc(22,be,1,1,"ng-template",45),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"span",38),e._uU(25,"Empresa"),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"td"),e.TgZ(29,"span",38),e._uU(30,"cliente"),e.qZA(),e.TgZ(31,"span"),e._uU(32),e.qZA(),e.qZA(),e.TgZ(33,"td"),e.TgZ(34,"span",38),e._uU(35,"Total"),e.qZA(),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"montoDinero"),e.qZA(),e.qZA(),e.TgZ(39,"td"),e.TgZ(40,"span",38),e._uU(41,"Anulado"),e.qZA(),e.TgZ(42,"span"),e.YNc(43,Ce,2,0,"span",46),e.YNc(44,Me,2,0,"span",47),e.YNc(45,Te,1,1,"i",48),e.qZA(),e.qZA(),e.TgZ(46,"td"),e.TgZ(47,"span",38),e._uU(48,"Est.Local"),e.qZA(),e.TgZ(49,"span"),e._uU(50),e.ALo(51,"estadoComprobante"),e.qZA(),e.YNc(52,xe,1,3,"p-progressBar",49),e.qZA(),e.TgZ(53,"td"),e.TgZ(54,"div",50),e.TgZ(55,"span",38),e._uU(56,"Est.Sunat"),e.qZA(),e.TgZ(57,"span",51),e._uU(58),e.ALo(59,"estadoSunat"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"td"),e.TgZ(61,"span",38),e._uU(62,"Ambiente"),e.qZA(),e.YNc(63,Ae,2,0,"span",40),e.YNc(64,we,2,0,"span",40),e.qZA(),e.TgZ(65,"td"),e.TgZ(66,"span",38),e._uU(67,"Canal"),e.qZA(),e._uU(68),e.qZA(),e.TgZ(69,"td"),e.TgZ(70,"span",38),e._uU(71,"Acciones"),e.qZA(),e.YNc(72,ye,1,0,"span",52),e.YNc(73,ve,1,0,"span",53),e.YNc(74,qe,3,2,"ng-container",40),e.YNc(75,Oe,2,1,"ng-container",40),e.TgZ(76,"span",54),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().changeStatus(i,"ACEPTAR")}),e.qZA(),e.TgZ(77,"span",55),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().changeStatus(i,"ANULAR")}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(4),e.Q6J("pTooltip",n.showToolTipFechaEmisionFormat(t.fechaRegistro)),e.xp6(1),e.Oqu(t.fechaEmision),e.xp6(4),e.Q6J("ngIf","01"===t.tipoComprobante||"03"===t.tipoComprobante),e.xp6(1),e.Q6J("ngIf","07"===t.tipoComprobante||"08"===t.tipoComprobante),e.xp6(4),e.Q6J("ngIf",t.serie),e.xp6(4),e.hij(" ",t.numero," "),e.xp6(9),e.AsE("",null==t.empresa?null:t.empresa.ruc," - ",null==t.empresa?null:t.empresa.razonSocial," "),e.xp6(5),e.AsE("",t.numeroDocumentoReceptor," - ",t.denominacionReceptor,""),e.xp6(5),e.Oqu(e.xi3(38,26,t.totalVenta,t.codigoMoneda)),e.xp6(6),e.Q6J("ngIf",t.anulado),e.xp6(1),e.Q6J("ngIf",!t.anulado),e.xp6(1),e.Q6J("ngIf",t.comprobanteSustituto),e.xp6(5),e.hij("",e.lcZ(51,29,t.estado)," "),e.xp6(2),e.Q6J("ngIf","07"===t.estado||"09"===t.estado),e.xp6(2),e.Q6J("pTooltip",t.mensajeRespuesta),e.xp6(3),e.Q6J("ngClass",e.WLB(33,Ne,"ACEPT"===t.estadoSunat,"ANULA"===t.estadoSunat)),e.xp6(1),e.Oqu(e.lcZ(59,31,t.estadoSunat)),e.xp6(5),e.Q6J("ngIf",t.esProduccion),e.xp6(1),e.Q6J("ngIf",!t.esProduccion),e.xp6(4),e.hij(" ",t.canal," "),e.xp6(4),e.Q6J("ngIf",t.isSendBill),e.xp6(1),e.Q6J("ngIf",t.isSendBill),e.xp6(1),e.Q6J("ngIf",!t.anulado),e.xp6(1),e.Q6J("ngIf",t.anulado)}}const Je=function(){return{width:"150px"}},Re=function(){return{width:"350px",minWidth:"200px"}};let Fe=(()=>{class o{constructor(t,n,a,i,g,Z,x,A,w,y,v,Zt,xt,At,wt){this.route=t,this.router=n,this.ticketService=a,this.companyService=i,this.userService=g,this.loginService=Z,this.datePipe=x,this.storageService=A,this.sanitizer=w,this.messageService=y,this.tdPipe=v,this.confirmationService=Zt,this.ls=xt,this.breadcrumbService=At,this.fb=wt,this.tickets=[],this.perPage=10,this.filterEsProduccion=!0,this.typeSend=!0,this.puntosVenta=[],this.tiposComprobantes=[],this.visibleModalMonitoreo=!1}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.tiposComprobantes=[{codigo:"01",nombre:"Factura"},{codigo:"03",nombre:"Boleta"},{codigo:"07",nombre:"Nota de cr\xe9dito"},{codigo:"08",nombre:"Nota de d\xe9bito"}],this.cols=[{field:"fechaEmision",header:"Fecha",width:"120px"},{field:"tipoComprobante",header:"Tipo",width:"15px"},{field:"serie",header:"Serie",width:"80px"},{field:"numero",header:"N\xfamero",width:"15px"},{field:"empresa",header:"Empresa",width:"450px"},{field:"cliente",header:"Cliente",width:"450px"},{field:"totalVenta",header:"Total",width:"110px"},{field:"anulado",header:"Anulado",width:"140px"},{field:"estado",header:"Est. Local",width:"140px"},{field:"estadoSunat",header:"Est. Sunat",width:"140px"},{field:"esProduccion",header:"Ambiente",width:"140px"},{field:"canal",header:"Canal",width:"140px"},{field:"acciones",header:"Acciones",isActions:!0,width:"160px"}],this.optionsTypeSend=[{label:"SendBill",value:!0},{label:"SendSummary",value:!1}],this.formMonitoreo=this.fb.group({desde:[void 0,[]],hasta:[void 0,[]],emisor:[void 0,[]],receptor:[void 0,[]],serie:[void 0,[]],numero:[void 0,[]],excluirBoletasRegistradas:[!0,[]]})}ngOnDestroy(){}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}loadLazy(t){this.lastLazyLoadEvent=t;const a=["pageNumber="+t.first/this.perPage,`perPage=${t.rows}`,`filtroIsSendBill=${this.typeSend}`,"filtroTipoComprobante=01","filtroTipoComprobante=03","filtroTipoComprobante=07","filtroTipoComprobante=08","filtroEstados=01","filtroEstados=06","filtroEstados=05","filtroEstados=09","filtroEstadosSunat=N_ENV","filtroEstadosSunat=RECHA"];this.filtroDesde&&a.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy")}`),this.filtroHasta&&a.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy")}`),t.filters.tipoComprobante&&a.push(`filtroTipoComprobante=${t.filters.tipoComprobante.value}`),null!==this.filterEsProduccion&&a.push(`filtroEsProduccion=${this.filterEsProduccion}`),t.filters.empresa&&a.push(`filtroEmisor=${t.filters.empresa.value}`),t.filters.cliente&&a.push(`filtroReceptor=${t.filters.cliente.value}`),t.filters.serie&&a.push(`filtroSerie=${t.filters.serie.value}`),t.filters.numero&&a.push(`filtroNumero=${t.filters.numero.value}`),t.filters.canal&&a.push(`filtroCanal=${t.filters.canal.value}`),t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),this.ticketService.findAllForMonitorPage(a.join("&")).subscribe(i=>{this.totalRecords=i.totalElements,this.tickets=i.content})}showToolTipFechaEmisionFormat(t){return`Registrado el d\xeda ${this.datePipe.transform(new Date(t),"dd-MM-yyyy")} a las ${this.datePipe.transform(new Date(t)," h:mm:ss a")}`}showTextTicketRelated(t){return`Comprobante relacionado: ${this.tdPipe.transform(t.tipoComprobanteAfectado)} ${t.serieAfectado}-${t.numeroAfectado}`}enviarSunat(t){this.ticketService.enviarSunatFromMonitor(t.id).subscribe(()=>{this.refreshTable(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante enviado correctamente"})})}enviarBoletaSunat(t,n){this.ticketService.createSummary(t.fechaEmision,{ruc:t.rucEmisor,isAttached:!1,tipoEnvio:n},{ruc:t.rucEmisor,tipo:t.tipoComprobante,serie:t.serie,numero:t.numero}).subscribe(a=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:`Resumen generado correctamente con ticket: ${a.ticket}`}),this.refreshTable()})}generateNewNumber(t){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de generar un nuevo n\xfamero para este comprobante ${t.serie}-${t.numero}?`,accept:()=>{this.ticketService.generateNewNumberFromMonitor({ruc:t.rucEmisor,tipo:t.tipoComprobante,serie:t.serie,numero:t.numero}).subscribe(()=>{this.refreshTable(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"N\xfamero generado"})})},acceptLabel:"Si",rejectLabel:"No"})}changeStatus(t,n){const a="ACEPTAR"===n?"aceptado":"anulado";this.confirmationService.confirm({message:`Seguro que desea marcar como ${a}, el comprobante ${t.identificadorDocumento}?`,accept:()=>{this.ticketService.changeStatusTicketManual(t.id,n).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:`Comprobante ${a} correctamente`}),this.refreshTable()})},acceptLabel:"Si",rejectLabel:"No"})}getStatusCdt(t){this.ticketService.getStatusCdr(t.id).subscribe(n=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante enviado correctamente"})})}runProcessAuto(){this.ticketService.runProccessMonitor(Object.assign(Object.assign({},this.formMonitoreo.getRawValue()),{desde:this.formMonitoreo.getRawValue().desde?this.formMonitoreo.getRawValue().desde.getTime():null,hasta:this.formMonitoreo.getRawValue().hasta?this.formMonitoreo.getRawValue().hasta.getTime():null})).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Proceso en ejecuci\xf3n"}),this.visibleModalMonitoreo=!1})}openDialogFormMonitoreo(){this.formMonitoreo.patchValue({}),this.visibleModalMonitoreo=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(m.w),e.Y36(_.J),e.Y36(f.i),e.Y36(C.r),e.Y36(l.uU),e.Y36(b.V),e.Y36(S.H7),e.Y36(d.ez),e.Y36(Q.B),e.Y36(d.YP),e.Y36(O.E),e.Y36(P.p),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-monitoreo"]],viewQuery:function(t,n){if(1&t&&e.Gf(W,7),2&t){let a;e.iGM(a=e.CRH())&&(n.tabla=a.first)}},decls:53,vars:43,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-12","md:col-3"],[2,"margin-bottom","0.5rem","margin-top","0"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[3,"options","ngModel","onChange","ngModelChange"],[1,"col-6","md:col-3"],["onLabel","Si","offLabel","No",3,"ngModel","onChange","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","summary"],["pTemplate","body"],["appendTo","body","header","Generar resumen diario",3,"visible","modal","responsive","minY","maximizable","baseZIndex","visibleChange"],[3,"formGroup"],["appendTo","body","formControlName","desde","name","fecha","dateFormat","dd/mm/yy",3,"locale"],["appendTo","body","formControlName","hasta","name","fecha","dateFormat","dd/mm/yy",3,"locale"],["formControlName","emisor","pKeyFilter","num","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","receptor","pKeyFilter","num","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","serie","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","numero","pKeyFilter","num","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","excluirBoletasRegistradas"],["type","button","pButton","","icon","pi pi-check","label","Aceptar",3,"disabled","click"],["type","button","pButton","","icon","pi pi-close","label","Cancelar",1,"p-button-secondary","m-1",3,"click"],[4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"options","style","onChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["style","width: 100%;","pInputText","","type","text",3,"input",4,"ngSwitchDefault"],[3,"options","onChange"],["pInputText","","type","text",2,"width","100%",3,"input"],[2,"text-align","left"],["type","button","pButton","","label","Actualizar",1,"m-1",3,"click"],["type","button","pButton","","label","Correr proceso autom\xe1tico",1,"m-1",3,"click"],[1,"p-column-title"],[3,"pTooltip"],[4,"ngIf"],[3,"pTooltip",4,"ngIf"],["pEditableColumn",""],[2,"display","none"],["pTemplate","input"],["pTemplate","output"],["class","p-tag p-tag-rounded p-tag-danger",4,"ngIf"],["class","p-tag p-tag-rounded",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","class","fa fa-info-circle",3,"pTooltip",4,"ngIf"],["mode","indeterminate",3,"style",4,"ngIf"],[2,"text-align","center",3,"pTooltip"],[1,"label","arrowed",3,"ngClass"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Enviar a sunat","class","fa fa-paper-plane-o",3,"click",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Get status Cdr","class","fa fa-external-link",3,"click",4,"ngIf"],["pTooltip","Marcar como aceptado",1,"fa","fa-thumbs-up",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Marcar como anulado",1,"fa","fa-thumbs-down",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["type","button","pButton","","label","Generar n\xfamero",3,"click",4,"ngIf"],["type","button","pButton","","label","Generar n\xfamero",3,"click"],[1,"p-tag","p-tag-rounded","p-tag-danger"],[1,"p-tag","p-tag-rounded"],[1,"fa","fa-info-circle",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"pTooltip"],["mode","indeterminate"],["pTooltip","Enviar a sunat",1,"fa","fa-paper-plane-o",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Get status Cdr",1,"fa","fa-external-link",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Enviar Boleta estado nuevo","class","fa fa-plus",3,"click",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Enviar Boleta estado editado","class","fa fa-plus-square-o",3,"click",4,"ngIf"],["pTooltip","Enviar Boleta estado nuevo",1,"fa","fa-plus",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Enviar Boleta estado editado",1,"fa","fa-plus-square-o",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Enviar Boleta estado Anulado","class","fa fa-minus-square",3,"click",4,"ngIf"],["pTooltip","Enviar Boleta estado Anulado",1,"fa","fa-minus-square",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"h4",4),e._uU(6,"Desde"),e.qZA(),e.TgZ(7,"p-calendar",5),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroDesde=i}),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"h4",4),e._uU(10,"Hasta"),e.qZA(),e.TgZ(11,"p-calendar",6),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroHasta=i}),e.qZA(),e.qZA(),e.TgZ(12,"div",3),e.TgZ(13,"h4",4),e._uU(14,"Tipo envio"),e.qZA(),e.TgZ(15,"p-selectButton",7),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.typeSend=i}),e.qZA(),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"h4",4),e._uU(18,"Producci\xf3n"),e.qZA(),e.TgZ(19,"p-toggleButton",9),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filterEsProduccion=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",0),e.TgZ(21,"div",10),e.TgZ(22,"p-table",11,12),e.NdJ("onLazyLoad",function(i){return n.loadLazy(i)}),e.YNc(24,pe,4,2,"ng-template",13),e.YNc(25,me,3,0,"ng-template",14),e.YNc(26,ke,78,36,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"p-dialog",16),e.NdJ("visibleChange",function(i){return n.visibleModalMonitoreo=i}),e.TgZ(28,"form",17),e.TgZ(29,"h4",4),e._uU(30,"Desde"),e.qZA(),e._UZ(31,"p-calendar",18),e.TgZ(32,"h4",4),e._uU(33,"Hasta"),e.qZA(),e._UZ(34,"p-calendar",19),e.TgZ(35,"h4",4),e._uU(36,"Emisor"),e.qZA(),e._UZ(37,"input",20),e.TgZ(38,"h4",4),e._uU(39,"Receptor"),e.qZA(),e._UZ(40,"input",21),e.TgZ(41,"h4",4),e._uU(42,"Serie"),e.qZA(),e._UZ(43,"input",22),e.TgZ(44,"h4",4),e._uU(45,"N\xfamero"),e.qZA(),e._UZ(46,"input",23),e.TgZ(47,"h4",4),e._uU(48,"Excluir boletas registradas"),e.qZA(),e._UZ(49,"p-inputSwitch",24),e.qZA(),e.TgZ(50,"p-footer"),e.TgZ(51,"button",25),e.NdJ("click",function(){return n.runProcessAuto()}),e.qZA(),e.TgZ(52,"button",26),e.NdJ("click",function(){return n.visibleModalMonitoreo=!1}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Akn(e.DdM(37,T)),e.Q6J("ngModel",n.filtroDesde)("locale",n.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(38,T)),e.Q6J("ngModel",n.filtroHasta)("locale",n.ls.calendarEs),e.xp6(4),e.Q6J("options",n.optionsTypeSend)("ngModel",n.typeSend),e.xp6(4),e.Akn(e.DdM(39,Je)),e.Q6J("ngModel",n.filterEsProduccion),e.xp6(3),e.Q6J("columns",n.cols)("value",n.tickets)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Akn(e.DdM(40,Re)),e.Q6J("visible",n.visibleModalMonitoreo)("modal",!0)("responsive",!0)("minY",70)("maximizable",!0)("baseZIndex",1e4),e.xp6(1),e.Q6J("formGroup",n.formMonitoreo),e.xp6(3),e.Akn(e.DdM(41,T)),e.Q6J("locale",n.ls.calendarEs),e.xp6(3),e.Akn(e.DdM(42,T)),e.Q6J("locale",n.ls.calendarEs),e.xp6(17),e.Q6J("disabled",n.formMonitoreo.invalid))},directives:[N.Z,k.f,c.JJ,c.On,z.UN,J.CO,M.iA,d.jx,l.sg,l.RF,l.n9,R.Lt,l.ED,U.o,F.Hq,Y.u,l.O5,M.Wq,M.YL,H.k,l.mk,$.V,c._Y,c.JL,c.sg,c.u,c.Fj,L.Fr,j.Ql,d.$_],pipes:[Q.B,G.Z,V,K.U],styles:['.label[_ngcontent-%COMP%]{border-radius:0;text-shadow:none;font-size:11px;font-weight:400;padding:3px 5px;background-color:#abbac3!important;color:#fff!important}.label[class*=span][class*=arrow][_ngcontent-%COMP%]{min-height:0}.badge[_ngcontent-%COMP%]{text-shadow:none;font-size:12px;padding:1px 15px;font-weight:400;line-height:15px;background-color:#abbac3!important;color:#fff!important}.label-transparent[_ngcontent-%COMP%], .badge-transparent[_ngcontent-%COMP%]{background-color:transparent!important}.label-grey[_ngcontent-%COMP%], .badge-grey[_ngcontent-%COMP%]{background-color:#a0a0a0!important}.label-info[_ngcontent-%COMP%], .badge-info[_ngcontent-%COMP%]{background-color:#3a87ad!important}.label-primary[_ngcontent-%COMP%], .badge-primary[_ngcontent-%COMP%]{background-color:#2283c5!important}.label-success[_ngcontent-%COMP%], .badge-success[_ngcontent-%COMP%]{background-color:#82af6f!important}.label-important[_ngcontent-%COMP%], .badge-important[_ngcontent-%COMP%]{background-color:#d15b47!important}.label-inverse[_ngcontent-%COMP%], .badge-inverse[_ngcontent-%COMP%]{background-color:#333!important}.label-warning[_ngcontent-%COMP%], .badge-warning[_ngcontent-%COMP%]{background-color:#f89406!important}.label-pink[_ngcontent-%COMP%], .badge-pink[_ngcontent-%COMP%]{background-color:#d6487e!important}.label-purple[_ngcontent-%COMP%], .badge-purple[_ngcontent-%COMP%]{background-color:#9585bf!important}.label-yellow[_ngcontent-%COMP%], .badge-yellow[_ngcontent-%COMP%]{background-color:#fee188!important}.label-light[_ngcontent-%COMP%], .badge-light[_ngcontent-%COMP%]{background-color:#e7e7e7!important}.badge-yellow[_ngcontent-%COMP%], .label-yellow[_ngcontent-%COMP%]{color:#963!important;border-color:#fee188}.badge-light[_ngcontent-%COMP%], .label-light[_ngcontent-%COMP%]{color:#888!important}.label.arrowed[_ngcontent-%COMP%], .label.arrowed-in[_ngcontent-%COMP%]{position:relative;margin-left:9px}.label.arrowed[_ngcontent-%COMP%]:before, .label.arrowed-in[_ngcontent-%COMP%]:before{display:inline-block;content:"";position:absolute;left:-14px;top:0;border:9px solid transparent;border-width:9px 7px;border-right-color:#abbac3}.label.arrowed-in[_ngcontent-%COMP%]:before{border-color:#abbac3;border-left-color:transparent!important;left:-9px}.label.arrowed-right[_ngcontent-%COMP%], .label.arrowed-in-right[_ngcontent-%COMP%]{position:relative;margin-right:9px}.label.arrowed-right[_ngcontent-%COMP%]:after, .label.arrowed-in-right[_ngcontent-%COMP%]:after{display:inline-block;content:"";position:absolute;right:-14px;top:0;border:9px solid transparent;border-width:9px 7px;border-left-color:#abbac3}.label.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#abbac3;border-right-color:transparent!important;right:-9px}.label-info.arrowed[_ngcontent-%COMP%]:before{border-right-color:#3a87ad}.label-info.arrowed-in[_ngcontent-%COMP%]:before{border-color:#3a87ad}.label-info.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#3a87ad}.label-info.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#3a87ad}.label-primary.arrowed[_ngcontent-%COMP%]:before{border-right-color:#2283c5}.label-primary.arrowed-in[_ngcontent-%COMP%]:before{border-color:#2283c5}.label-primary.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#2283c5}.label-primary.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#2283c5}.label-success.arrowed[_ngcontent-%COMP%]:before{border-right-color:#82af6f}.label-success.arrowed-in[_ngcontent-%COMP%]:before{border-color:#82af6f}.label-success.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#82af6f}.label-success.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#82af6f}.label-warning.arrowed[_ngcontent-%COMP%]:before{border-right-color:#f89406}.label-warning.arrowed-in[_ngcontent-%COMP%]:before{border-color:#f89406}.label-warning.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#f89406}.label-warning.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#f89406}.label-important.arrowed[_ngcontent-%COMP%]:before{border-right-color:#d15b47}.label-important.arrowed-in[_ngcontent-%COMP%]:before{border-color:#d15b47}.label-important.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#d15b47}.label-important.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#d15b47}.label-inverse.arrowed[_ngcontent-%COMP%]:before{border-right-color:#333}.label-inverse.arrowed-in[_ngcontent-%COMP%]:before{border-color:#333}.label-inverse.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#333}.label-inverse.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#333}.label-pink.arrowed[_ngcontent-%COMP%]:before{border-right-color:#d6487e}.label-pink.arrowed-in[_ngcontent-%COMP%]:before{border-color:#d6487e}.label-pink.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#d6487e}.label-pink.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#d6487e}.label-purple.arrowed[_ngcontent-%COMP%]:before{border-right-color:#9585bf}.label-purple.arrowed-in[_ngcontent-%COMP%]:before{border-color:#9585bf}.label-purple.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#9585bf}.label-purple.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#9585bf}.label-yellow.arrowed[_ngcontent-%COMP%]:before{border-right-color:#fee188}.label-yellow.arrowed-in[_ngcontent-%COMP%]:before{border-color:#fee188}.label-yellow.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#fee188}.label-yellow.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#fee188}.label-light.arrowed[_ngcontent-%COMP%]:before{border-right-color:#e7e7e7}.label-light.arrowed-in[_ngcontent-%COMP%]:before{border-color:#e7e7e7}.label-light.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#e7e7e7}.label-light.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#e7e7e7}.label-grey.arrowed[_ngcontent-%COMP%]:before{border-right-color:#a0a0a0}.label-grey.arrowed-in[_ngcontent-%COMP%]:before{border-color:#a0a0a0}.label-grey.arrowed-right[_ngcontent-%COMP%]:after{border-left-color:#a0a0a0}.label-grey.arrowed-in-right[_ngcontent-%COMP%]:after{border-color:#a0a0a0}.label-large[_ngcontent-%COMP%]{font-size:13px;padding:3px 8px 4px}.label-large.arrowed[_ngcontent-%COMP%], .label-large.arrowed-in[_ngcontent-%COMP%]{margin-left:12px}.label-large.arrowed[_ngcontent-%COMP%]:before, .label-large.arrowed-in[_ngcontent-%COMP%]:before{left:-16px;border-width:11px 8px}.label-large.arrowed-in[_ngcontent-%COMP%]:before{left:-12px}.label-large.arrowed-right[_ngcontent-%COMP%], .label-large.arrowed-in-right[_ngcontent-%COMP%]{margin-right:11px}.label-large.arrowed-right[_ngcontent-%COMP%]:after, .label-large.arrowed-in-right[_ngcontent-%COMP%]:after{right:-16px;border-width:11px 8px}.label-large.arrowed-in-right[_ngcontent-%COMP%]:after{right:-12px}']}),o})();var q=s(54578),Ye=s(33542);let Be=(()=>{class o{constructor(t,n){this.breadcrumbService=t,this.route=n}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.items=[{label:"Comprobantes",routerLink:"/monitoreo/comprobantes"},{label:"Resumen diario",routerLink:"/monitoreo/resumenes-diarios"},{label:"Comunicaci\xf3n Baja",routerLink:"/monitoreo/comunicaciones-bajas"}]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(P.p),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-monitoreo-menu"]],decls:3,vars:1,consts:[[1,"card"],[3,"model"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p-tabMenu",1),e._UZ(2,"router-outlet"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("model",n.items))},directives:[Ye.d,p.lC],styles:[""]}),o})();var I=s(92676);const De=["dt"];function Qe(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function Ue(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Qe,2,1,"th",23),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function $e(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().refreshTable()}),e.qZA(),e.TgZ(2,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialogGenerarResumen()}),e.qZA(),e.qZA()}}function Le(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,n[t.field],"yyyy-MM-dd hh:mm a")," ")}}function je(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"estadoSummary"),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n[t.field])," ")}}function Ie(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",33),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(2),e.hij(" ",n[t.field]," ")}}function ze(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[t.field]," ")}}function He(o,r){1&o&&(e.ynx(0),e.YNc(1,Le,3,4,"ng-container",31),e.YNc(2,je,3,3,"ng-container",31),e.YNc(3,Ie,3,1,"ng-container",31),e.YNc(4,ze,2,1,"ng-container",32),e.BQk()),2&o&&(e.xp6(1),e.Q6J("ngSwitchCase","fechaGeneracionResumen"),e.xp6(1),e.Q6J("ngSwitchCase","estado"),e.xp6(1),e.Q6J("ngSwitchCase","respuestaSunat"))}function Ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().getStatus(a.ticketSunat)}),e.qZA()}}function Ve(o,r){if(1&o&&(e.ynx(0,34),e.TgZ(1,"span",35),e._uU(2,"Acciones"),e.qZA(),e.YNc(3,Ge,1,0,"span",36),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(3),e.Q6J("ngIf","98"===t.estado||"99"===t.estado)}}function Ke(o,r){if(1&o&&(e.TgZ(0,"td",28),e.YNc(1,He,5,3,"ng-container",29),e.YNc(2,Ve,4,1,"ng-container",30),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function We(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ke,3,3,"td",27),e.qZA()),2&o){const t=r.columns;e.xp6(1),e.Q6J("ngForOf",t)}}const E=function(){return{width:"100%"}},Xe=function(){return{width:"150px"}},et=function(){return{width:"350px",minWidth:"200px"}},ot=["dt"];function nt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function at(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,nt,2,1,"th",16),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function rt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().refreshTable()}),e.qZA(),e.qZA()}}function it(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,n[t.field],"yyyy-MM-dd hh:mm a")," ")}}function st(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"estadoSummary"),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n[t.field])," ")}}function lt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(2),e.hij(" ",n[t.field]," ")}}function ct(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[t.field]," ")}}function pt(o,r){1&o&&(e.ynx(0),e.YNc(1,it,3,4,"ng-container",23),e.YNc(2,st,3,3,"ng-container",23),e.YNc(3,lt,3,1,"ng-container",23),e.YNc(4,ct,2,1,"ng-container",24),e.BQk()),2&o&&(e.xp6(1),e.Q6J("ngSwitchCase","fechaGeneracionBaja"),e.xp6(1),e.Q6J("ngSwitchCase","codigoRespuesta"),e.xp6(1),e.Q6J("ngSwitchCase","descripcionRespuesta"))}function mt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().getStatus(a.ticketSunat)}),e.qZA()}}function dt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().enviarSunat(a.id)}),e.qZA()}}function _t(o,r){if(1&o&&(e.ynx(0,26),e.TgZ(1,"span",27),e._uU(2,"Acciones"),e.qZA(),e.YNc(3,mt,1,0,"span",28),e.YNc(4,dt,1,0,"span",29),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(3),e.Q6J("ngIf","98"===t.codigoRespuesta||"99"===t.codigoRespuesta),e.xp6(1),e.Q6J("ngIf",!t.ticketSunat)}}function gt(o,r){if(1&o&&(e.TgZ(0,"td",20),e.YNc(1,pt,5,3,"ng-container",21),e.YNc(2,_t,5,2,"ng-container",22),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function ut(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,gt,3,3,"td",19),e.qZA()),2&o){const t=r.columns;e.xp6(1),e.Q6J("ngForOf",t)}}const B=function(){return{width:"100%"}},ft=function(){return{width:"150px"}},bt=[{path:"",component:Be,canActivate:[q.P],children:[{path:"",pathMatch:"full",redirectTo:"comprobantes"},{path:"comprobantes",component:Fe,canActivate:[q.P],data:{breadcrumb:[{label:"Super usuario"},{label:"Monitoreo"},{label:"Comprobantes"}]}},{path:"resumenes-diarios",component:(()=>{class o{constructor(t,n,a,i,g,Z,x,A,w,y,v){this.route=t,this.fb=n,this.router=a,this.ticketService=i,this.loginService=g,this.datePipe=Z,this.storageService=x,this.sanitizer=A,this.messageService=w,this.ls=y,this.breadcrumbService=v,this.dataList=[],this.perPage=10,this.filtroEsProduccion=!0,this.visibleResumenDiario=!1}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.cols=[{field:"razonSocial",header:"Empresa"},{field:"identificador",header:"Id"},{field:"fechaEmision",header:"Fecha"},{field:"estado",header:"Estado"},{field:"respuestaSunat",header:"Respuesta Sunat"},{field:"fechaGeneracionResumen",header:"Fecha generaci\xf3n"},{field:"ticketSunat",header:"Ticket sunat"},{field:"acciones",header:"Acciones",isActions:!0,width:"160px"}],this.estados=[{value:"0",label:"Aceptado"},{value:"98",label:"Pendiente"},{value:"99",label:"Error"}],this.envioResumenForm=this.fb.group({fecha:[void 0,c.kI.required],ruc:[void 0,c.kI.required],isAttached:[!1,c.kI.required]})}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}loadLazy(t){this.lastLazyLoadEvent=t;const a=[`filtroEsProduccion=${this.filtroEsProduccion}`,"pageNumber="+t.first/this.perPage,`perPage=${t.rows}`];this.filtroEstado&&a.push(`filtroEstado=${this.filtroEstado}`),this.filtroDesde&&a.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy")}`),this.filtroHasta&&a.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy")}`),t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),this.ticketService.findAllSearchSummaryForMonitor(a.join("&")).subscribe(i=>{this.totalRecords=i.totalElements,this.dataList=i.content,this.loading=!1})}getStatus(t){this.ticketService.getStatusSummary(t).subscribe(n=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:n.mensaje}),this.refreshTable()})}generarResumen(){const t=this.datePipe.transform(this.envioResumenForm.value.fecha,"yyyy-MM-dd");this.ticketService.createSummary(t,this.envioResumenForm.value).subscribe(n=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:`Resumen generado correctamente con ticket: ${n.ticket}`}),this.visibleResumenDiario=!1})}openDialogGenerarResumen(){this.visibleResumenDiario=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(c.qu),e.Y36(p.F0),e.Y36(m.w),e.Y36(C.r),e.Y36(l.uU),e.Y36(b.V),e.Y36(S.H7),e.Y36(d.ez),e.Y36(O.E),e.Y36(P.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-monitoreo-resumenes"]],viewQuery:function(t,n){if(1&t&&e.Gf(De,7),2&t){let a;e.iGM(a=e.CRH())&&(n.tabla=a.first)}},decls:41,vars:43,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-12","md:col-3"],[2,"margin-bottom","0.5rem","margin-top","0"],["placeholder","Seleccione...","name","estado",3,"ngModel","options","showClear","onChange","ngModelChange"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[1,"col-6","md:col-3"],["onLabel","Si","offLabel","No",3,"ngModel","onChange","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","summary"],["pTemplate","body"],["header","Generar resumen diario",3,"visible","modal","responsive","minY","maximizable","baseZIndex","visibleChange"],[3,"formGroup"],["appendTo","body","formControlName","fecha","name","fecha","dateFormat","dd/mm/yy",3,"locale"],["formControlName","ruc","pKeyFilter","num","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","isAttached"],["type","button","pButton","","icon","pi pi-check","label","Aceptar",3,"disabled","click"],["type","button","pButton","","icon","pi pi-close","label","Cancelar",1,"p-button-secondary","m-1",3,"click"],[4,"ngFor","ngForOf"],[2,"text-align","left"],["type","button","pButton","","label","Actualizar",3,"click"],["label","Generar resumen","type","button","pButton","","icon","fa fa-list-ol",1,"p-button-secondary",3,"click"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"width","300px"],[2,"text-align","center"],[1,"p-column-title"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Consulta estado en Sunat","class","fa fa-external-link",3,"click",4,"ngIf"],["pTooltip","Consulta estado en Sunat",1,"fa","fa-external-link",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"h4",4),e._uU(6,"Estado"),e.qZA(),e.TgZ(7,"p-dropdown",5),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroEstado=i}),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"h4",4),e._uU(10,"Desde"),e.qZA(),e.TgZ(11,"p-calendar",6),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroDesde=i}),e.qZA(),e.qZA(),e.TgZ(12,"div",3),e.TgZ(13,"h4",4),e._uU(14,"Hasta"),e.qZA(),e.TgZ(15,"p-calendar",7),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroHasta=i}),e.qZA(),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"h4",4),e._uU(18,"Producci\xf3n"),e.qZA(),e.TgZ(19,"p-toggleButton",9),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroEsProduccion=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",0),e.TgZ(21,"div",10),e.TgZ(22,"p-table",11,12),e.NdJ("onLazyLoad",function(i){return n.loadLazy(i)}),e.YNc(24,Ue,2,1,"ng-template",13),e.YNc(25,$e,3,0,"ng-template",14),e.YNc(26,We,2,1,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"p-dialog",16),e.NdJ("visibleChange",function(i){return n.visibleResumenDiario=i}),e.TgZ(28,"form",17),e.TgZ(29,"h4",4),e._uU(30,"Fecha de resumen (*)"),e.qZA(),e._UZ(31,"p-calendar",18),e.TgZ(32,"h4",4),e._uU(33,"Ruc (*)"),e.qZA(),e._UZ(34,"input",19),e.TgZ(35,"h4",4),e._uU(36,"Es adjunta? (*)"),e.qZA(),e._UZ(37,"p-inputSwitch",20),e.qZA(),e.TgZ(38,"p-footer"),e.TgZ(39,"button",21),e.NdJ("click",function(){return n.generarResumen()}),e.qZA(),e.TgZ(40,"button",22),e.NdJ("click",function(){return n.visibleResumenDiario=!1}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Akn(e.DdM(37,E)),e.Q6J("ngModel",n.filtroEstado)("options",n.estados)("showClear",!0),e.xp6(4),e.Akn(e.DdM(38,E)),e.Q6J("ngModel",n.filtroDesde)("locale",n.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(39,E)),e.Q6J("ngModel",n.filtroHasta)("locale",n.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(40,Xe)),e.Q6J("ngModel",n.filtroEsProduccion),e.xp6(3),e.Q6J("columns",n.cols)("value",n.dataList)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Akn(e.DdM(41,et)),e.Q6J("visible",n.visibleResumenDiario)("modal",!0)("responsive",!0)("minY",70)("maximizable",!0)("baseZIndex",1e4),e.xp6(1),e.Q6J("formGroup",n.envioResumenForm),e.xp6(3),e.Akn(e.DdM(42,E)),e.Q6J("locale",n.ls.calendarEs),e.xp6(8),e.Q6J("disabled",n.envioResumenForm.invalid))},directives:[N.Z,R.Lt,c.JJ,c.On,k.f,J.CO,M.iA,d.jx,l.sg,F.Hq,l.RF,l.O5,l.n9,l.ED,Y.u,$.V,c._Y,c.JL,c.sg,c.u,c.Fj,L.Fr,U.o,j.Ql,d.$_],pipes:[l.uU,I._],styles:[""]}),o})(),canActivate:[q.P],data:{breadcrumb:[{label:"Super usuario"},{label:"Monitoreo"},{label:"Res\xfamenes"}]}},{path:"comunicaciones-bajas",component:(()=>{class o{constructor(t,n,a,i,g,Z,x,A,w,y,v){this.route=t,this.fb=n,this.router=a,this.ticketService=i,this.loginService=g,this.datePipe=Z,this.storageService=x,this.sanitizer=A,this.messageService=w,this.ls=y,this.breadcrumbService=v,this.dataList=[],this.perPage=10,this.filtroEsProduccion=!0}ngOnInit(){this.breadcrumbService.setItems((0,u.kn)(this.route)),this.cols=[{field:"razonSocial",header:"Empresa"},{field:"identificador",header:"Id"},{field:"fechaEmision",header:"Fecha"},{field:"codigoRespuesta",header:"Estado"},{field:"descripcionRespuesta",header:"Respuesta Sunat"},{field:"fechaGeneracionBaja",header:"Fecha generaci\xf3n"},{field:"ticketSunat",header:"Ticket sunat"},{field:"acciones",header:"Acciones",isActions:!0,width:"160px"}],this.estados=[{value:"0",label:"Aceptado"},{value:"98",label:"Pendiente"},{value:"99",label:"Error"}]}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}loadLazy(t){this.lastLazyLoadEvent=t;const a=[`filtroEsProduccion=${this.filtroEsProduccion}`,"pageNumber="+t.first/this.perPage,`perPage=${t.rows}`];this.filtroEstado&&a.push(`filtroEstado=${this.filtroEstado}`),this.filtroDesde&&a.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy")}`),this.filtroHasta&&a.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy")}`),t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),this.ticketService.findAllSearchVoidedForMonitor(a.join("&")).subscribe(i=>{this.totalRecords=i.totalElements,this.dataList=i.content,this.loading=!1})}getStatus(t){this.ticketService.getStatusVoided(t).subscribe(n=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:n.mensaje}),this.refreshTable()})}enviarSunat(t){this.ticketService.sendSunatVoided(t).subscribe(()=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(c.qu),e.Y36(p.F0),e.Y36(m.w),e.Y36(C.r),e.Y36(l.uU),e.Y36(b.V),e.Y36(S.H7),e.Y36(d.ez),e.Y36(O.E),e.Y36(P.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-monitoreo-comunicaciones-bajas"]],viewQuery:function(t,n){if(1&t&&e.Gf(ot,7),2&t){let a;e.iGM(a=e.CRH())&&(n.tabla=a.first)}},decls:27,vars:28,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],[1,"col-12","md:col-3"],[2,"margin-bottom","0.5rem","margin-top","0"],["placeholder","Seleccione...","name","estado",3,"ngModel","options","showClear","onChange","ngModelChange"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[1,"col-6","md:col-3"],["onLabel","Si","offLabel","No",3,"ngModel","onChange","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","summary"],["pTemplate","body"],[4,"ngFor","ngForOf"],[2,"text-align","left"],["type","button","pButton","","label","Actualizar",3,"click"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"width","300px"],[2,"text-align","center"],[1,"p-column-title"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Consulta estado en Sunat","class","fa fa-external-link",3,"click",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Enviar baja a sunat","class","fa fa-paper-plane-o",3,"click",4,"ngIf"],["pTooltip","Consulta estado en Sunat",1,"fa","fa-external-link",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Enviar baja a sunat",1,"fa","fa-paper-plane-o",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"h4",4),e._uU(6,"Estado"),e.qZA(),e.TgZ(7,"p-dropdown",5),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroEstado=i}),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"h4",4),e._uU(10,"Desde"),e.qZA(),e.TgZ(11,"p-calendar",6),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroDesde=i}),e.qZA(),e.qZA(),e.TgZ(12,"div",3),e.TgZ(13,"h4",4),e._uU(14,"Hasta"),e.qZA(),e.TgZ(15,"p-calendar",7),e.NdJ("onSelect",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroHasta=i}),e.qZA(),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"h4",4),e._uU(18,"Producci\xf3n"),e.qZA(),e.TgZ(19,"p-toggleButton",9),e.NdJ("onChange",function(){return n.resetAndRefreshTable()})("ngModelChange",function(i){return n.filtroEsProduccion=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",0),e.TgZ(21,"div",10),e.TgZ(22,"p-table",11,12),e.NdJ("onLazyLoad",function(i){return n.loadLazy(i)}),e.YNc(24,at,2,1,"ng-template",13),e.YNc(25,rt,2,0,"ng-template",14),e.YNc(26,ut,2,1,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Akn(e.DdM(24,B)),e.Q6J("ngModel",n.filtroEstado)("options",n.estados)("showClear",!0),e.xp6(4),e.Akn(e.DdM(25,B)),e.Q6J("ngModel",n.filtroDesde)("locale",n.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(26,B)),e.Q6J("ngModel",n.filtroHasta)("locale",n.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(27,ft)),e.Q6J("ngModel",n.filtroEsProduccion),e.xp6(3),e.Q6J("columns",n.cols)("value",n.dataList)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[N.Z,R.Lt,c.JJ,c.On,k.f,J.CO,M.iA,d.jx,l.sg,F.Hq,l.RF,l.O5,l.n9,l.ED,Y.u],pipes:[l.uU,I._],styles:[""]}),o})(),canActivate:[q.P],data:{breadcrumb:[{label:"Super usuario"},{label:"Monitoreo"},{label:"Comunicaciones Bajas"}]}}]}];let Ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(bt)],p.Bz]}),o})();var Mt=s(20958);let Tt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[Ct,Mt.m]]}),o})()},23582:(D,h,s)=>{s.d(h,{U:()=>u});var p=s(5e3);let u=(()=>{class e{transform(_,f){return"ACEPT"==_?"Aceptado":"RECHA"==_?"Rechazado":"ANULA"==_?"Anulado":"N_ENV"==_?"No enviado":""}}return e.\u0275fac=function(_){return new(_||e)},e.\u0275pipe=p.Yjl({name:"estadoSunat",type:e,pure:!0}),e})()},77121:(D,h,s)=>{s.d(h,{Z:()=>e});var p=s(80267),u=s(5e3);let e=(()=>{class m{transform(f,C,l){f||(f=0),l?!l&&l>4&&(l=4):l=2;const b=p.Z.find(d=>d.codigoMoneda===C);return`${b?b.simbolo:"Desc."} ${parseFloat(f).toFixed(l)}`}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275pipe=u.Yjl({name:"montoDinero",type:m,pure:!0}),m})()}}]);