"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[5655],{45655:(se,f,i)=>{i.r(f),i.d(f,{ProveedoresModule:()=>ne});var l=i(74202),v=i(82817),e=i(5e3),h=i(10303),Z=i(96310),b=i(20207),x=i(47745),T=i(74297),p=i(98952),d=i(59783),m=i(69808),A=i(40845),S=i(4119);function C(o,r){if(1&o&&e._UZ(0,"p-sortIcon",10),2&o){const t=e.oxw().$implicit;e.Q6J("field",t.field)}}function P(o,r){if(1&o&&(e.TgZ(0,"th",8),e._uU(1),e.YNc(2,C,1,1,"p-sortIcon",9),e.qZA()),2&o){const t=r.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",!t.isActions)}}function I(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,P,3,3,"th",7),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function F(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(n[t.field].nombre)}}function N(o,r){if(1&o&&(e.ynx(0),e.YNc(1,F,2,1,"span",13),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n[t.field])}}function w(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.numeroDocumento)}}function Y(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"N\xfamero Documento"),e.qZA(),e.YNc(3,w,2,1,"span",13),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function q(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.razonSocial)}}function J(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"Razon Social"),e.qZA(),e.YNc(3,q,2,1,"span",13),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function D(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.direccion)}}function Q(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"Direccion"),e.qZA(),e.YNc(3,D,2,1,"span",13),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function z(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.email)}}function U(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2,"Email"),e.qZA(),e.YNc(3,z,2,1,"span",13),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function E(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[t.field]," ")}}function $(o,r){1&o&&(e.ynx(0),e.YNc(1,N,2,1,"ng-container",15),e.YNc(2,Y,4,1,"ng-container",15),e.YNc(3,J,4,1,"ng-container",15),e.YNc(4,Q,4,1,"ng-container",15),e.YNc(5,U,4,1,"ng-container",15),e.YNc(6,E,2,1,"ng-container",16),e.BQk()),2&o&&(e.xp6(1),e.Q6J("ngSwitchCase","puntoVenta"),e.xp6(1),e.Q6J("ngSwitchCase","numeroDocumento"),e.xp6(1),e.Q6J("ngSwitchCase","razonSocial"),e.xp6(1),e.Q6J("ngSwitchCase","direccion"),e.xp6(1),e.Q6J("ngSwitchCase","email"))}function B(o,r){if(1&o&&(e.ynx(0,18),e.TgZ(1,"span",17),e._uU(2,"Acciones"),e.qZA(),e._UZ(3,"button",19),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(3),e.Q6J("routerLink",n.linkUpdate(t.id))}}function L(o,r){if(1&o&&(e.TgZ(0,"td",12),e.YNc(1,$,7,5,"ng-container",13),e.YNc(2,B,4,1,"ng-container",14),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function k(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,L,3,3,"td",11),e.qZA()),2&o){const t=r.columns;e.xp6(1),e.Q6J("ngForOf",t)}}function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().new()}),e.qZA(),e.qZA()}}let O=(()=>{class o{constructor(t,n,a,c,g,_){this.route=t,this.router=n,this.supplierService=a,this.companyService=c,this.loginService=g,this.breadcrumbService=_,this.perPage=10}ngOnInit(){this.breadcrumbService.setItems((0,v.kn)(this.route)),this.cols=[{field:"numeroDocumento",header:"Nro. Documento"},{field:"razonSocial",header:"Raz\xf3n social"},{field:"direccion",header:"Direcci\xf3n"},{field:"email",header:"Email"},{header:"Acciones",isActions:!0}]}new(){this.router.navigateByUrl("/proveedores/nuevo")}loadLazy(t){this.loading=!0;const a=["pageNumber="+t.first/this.perPage,`perPage=${t.rows}`,"paginacion=true"];t.sortOrder&&a.push(`sortOrder=${t.sortOrder}`),t.sortField&&a.push(`sortField=${t.sortField}`),this.supplierService.findAllPage(a.join("&")).subscribe(c=>{this.totalRecords=c.totalElements,this.suppliers=c.content,this.loading=!1})}linkUpdate(t){return`/proveedores/editar/${t}`}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(h.p),e.Y36(Z.J),e.Y36(b.r),e.Y36(x.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-proveedores"]],decls:8,vars:8,consts:[[1,"grid"],[1,"col-12"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field",4,"ngIf"],["ariaLabel","Activa para ordenar","ariaLabelDesc","Activa para ordenar en orden descendente","ariaLabelAsc","Activa para ordenar en orden ascendente",3,"field"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Actualizar, Eliminar",1,"p-button-success",3,"routerLink"],[2,"text-align","left"],["type","button","pButton","","icon","fa fa-plus","label","Nuevo",2,"margin-right","0.2rem",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"p-table",2,3),e.NdJ("onLazyLoad",function(c){return n.loadLazy(c)}),e.YNc(5,I,2,1,"ng-template",4),e.YNc(6,k,2,1,"ng-template",5),e.YNc(7,M,2,0,"ng-template",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("columns",n.cols)("value",n.suppliers)("lazy",!0)("paginator",!0)("rows",n.perPage)("totalRecords",n.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[T.Z,p.iA,d.jx,m.sg,p.lQ,m.O5,p.fz,m.RF,m.n9,m.ED,A.Hq,S.u,l.rH],encapsulation:2}),o})();var u=i(54578),s=i(93075),R=i(31424),j=i(43724);function V(o,r){1&o&&e._UZ(0,"p-message",25)}function H(o,r){1&o&&e._UZ(0,"p-message",26)}function G(o,r){1&o&&e._UZ(0,"p-message",27)}function X(o,r){1&o&&e._UZ(0,"p-message",28)}function K(o,r){1&o&&e._UZ(0,"p-message",29)}function W(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmDelete()}),e.qZA()}}let y=(()=>{class o{constructor(t,n,a,c,g,_,re,ie,ae){this.route=t,this.router=n,this.supplierService=a,this.companyService=c,this.messageService=g,this.loginService=_,this.confirmationService=re,this.fb=ie,this.breadcrumbService=ae}ngOnInit(){this.breadcrumbService.setItems((0,v.kn)(this.route)),this.builderForm(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(t=>{this.empresa=t,this.loadModel()})})}builderForm(){this.modelForm=this.fb.group({numeroDocumento:["",[s.kI.required]],razonSocial:["",[s.kI.required]],direccion:["",[s.kI.required]],email:["",[s.kI.email]],telefono:[""]})}submitForm(){let t,n;this.formToModel(),this.isEdit?(t=this.supplierService.update(this.idEmpresa,this.model),n="Cliente actualizado correctamente."):(t=this.supplierService.save(this.idEmpresa,this.model),n="Cliente registrado correctamente."),t.subscribe(a=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:n}),this.router.navigateByUrl(this.linkVolver)})}formToModel(){this.model||(this.model={}),this.model.numeroDocumento=this.modelForm.value.numeroDocumento,this.model.razonSocial=this.modelForm.value.razonSocial,this.model.direccion=this.modelForm.value.direccion,this.model.email=this.modelForm.value.email,this.model.telefono=this.modelForm.value.telefono,this.model.empresa={id:this.idEmpresa}}modelToForm(t){this.modelForm.patchValue({numeroDocumento:t.numeroDocumento,razonSocial:t.razonSocial,direccion:t.direccion,email:t.email,telefono:this.model.telefono})}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.route.snapshot.data.title}get numeroDocumento(){return this.modelForm.get("numeroDocumento")}get razonSocial(){return this.modelForm.get("razonSocial")}get direccion(){return this.modelForm.get("direccion")}get email(){return this.modelForm.get("email")}get telefono(){return this.modelForm.get("telefono")}loadModel(){this.isEdit=this.route.snapshot.data.isEdit,this.isEdit&&this.route.params.subscribe(t=>{this.supplierService.findById(this.idEmpresa,t.id).subscribe(a=>{a&&(this.model=a,this.modelToForm(a))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.supplierService.deleteById(this.idEmpresa,this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}get linkVolver(){return"/proveedores"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(h.p),e.Y36(Z.J),e.Y36(d.ez),e.Y36(b.r),e.Y36(d.YP),e.Y36(s.qu),e.Y36(x.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-proveedor"]],decls:39,vars:10,consts:[[1,"grid"],[1,"col-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"grid","form-group"],[1,"col-12","md:col-2"],["for","numeroDocumento",1,"label-form"],[1,"col-12","md:col-4"],["formControlName","numeroDocumento","id","numeroDocumento","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero de documento",4,"ngIf"],["for","razonSocial",1,"label-form"],["formControlName","razonSocial","id","razonSocial","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre o raz\xf3n social",4,"ngIf"],["for","direccion",1,"label-form"],["formControlName","direccion","id","direccion","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese direcci\xf3n",4,"ngIf"],["for","email",1,"label-form"],["formControlName","email","id","email","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese email",4,"ngIf"],["for","telefono",1,"label-form"],["formControlName","telefono","id","telefono","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese tel\xe9fono",4,"ngIf"],[1,"col-12",2,"text-align","center"],["pButton","","type","submit",2,"margin-right","0.4rem",3,"disabled","label"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],["severity","error","text","Ingrese n\xfamero de documento"],["severity","error","text","Ingrese nombre o raz\xf3n social"],["severity","error","text","Ingrese direcci\xf3n"],["severity","error","text","Ingrese email"],["severity","error","text","Ingrese tel\xe9fono"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return n.submitForm()}),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"N\xfamero de documento (*)"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"input",7),e.YNc(10,V,1,0,"p-message",8),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"label",9),e._uU(13,"Nombre / Raz\xf3n social (*)"),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e._UZ(15,"input",10),e.YNc(16,H,1,0,"p-message",11),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",12),e._uU(19,"Direcci\xf3n (*)"),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e._UZ(21,"input",13),e.YNc(22,G,1,0,"p-message",14),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"label",15),e._uU(25,"Email"),e.qZA(),e.qZA(),e.TgZ(26,"div",6),e._UZ(27,"input",16),e.YNc(28,X,1,0,"p-message",17),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"label",18),e._uU(31,"Tel\xe9fono"),e.qZA(),e.qZA(),e.TgZ(32,"div",6),e._UZ(33,"input",19),e.YNc(34,K,1,0,"p-message",20),e.qZA(),e.TgZ(35,"div",21),e._UZ(36,"button",22),e.YNc(37,W,1,0,"button",23),e._UZ(38,"button",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.modelForm),e.xp6(7),e.Q6J("ngIf",n.numeroDocumento.touched&&(null==n.numeroDocumento.errors?null:n.numeroDocumento.errors.required)),e.xp6(6),e.Q6J("ngIf",n.razonSocial.touched&&(null==n.razonSocial.errors?null:n.razonSocial.errors.required)),e.xp6(6),e.Q6J("ngIf",n.direccion.touched&&(null==n.direccion.errors?null:n.direccion.errors.required)),e.xp6(6),e.Q6J("ngIf",n.email.touched&&(null==n.email.errors?null:n.email.errors.required)),e.xp6(6),e.Q6J("ngIf",n.telefono.touched&&(null==n.telefono.errors?null:n.telefono.errors.required)),e.xp6(2),e.Q6J("disabled",!n.modelForm.valid)("label",n.textButtonAction),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(1),e.Q6J("routerLink",n.linkVolver))},directives:[T.Z,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,R.o,m.O5,j.q,A.Hq,l.rH],encapsulation:2}),o})();const ee=[{path:"",component:O,canActivate:[u.P],data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Proveedores"}]}},{path:"editar/:id",component:y,data:{isEdit:!0,title:"Editar proveedor",breadcrumb:[{label:"Administraci\xf3n"},{label:"Proveedores"},{label:"Editar proveedor"}]},canActivate:[u.P]},{path:"nuevo",component:y,data:{isEdit:!1,title:"Nuevo proveedor",breadcrumb:[{label:"Administraci\xf3n"},{label:"Proveedores"},{label:"Nuevo proveedor"}]},canActivate:[u.P]}];let oe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.Bz.forChild(ee)],l.Bz]}),o})();var te=i(20958);let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[oe,te.m]]}),o})()}}]);