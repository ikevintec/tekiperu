(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[6283],{55402:(It,$,c)=>{"use strict";c.d($,{R:()=>g});var s=c(69808),u=c(20958),w=c(40019),I=c(5e3);let g=(()=>{class y{}return y.\u0275fac=function(i){return new(i||y)},y.\u0275mod=I.oAB({type:y}),y.\u0275inj=I.cJS({imports:[[s.ez,u.m,w.f]]}),y})()},84:(It,$,c)=>{"use strict";c.d($,{B:()=>Q});var s=c(70655),u=c(93075),w=c(85932),I=c(81575),g=c(8929),y=c(66239),v=c(82817),i=c(5e3),n=c(24394),a=c(2385),m=c(37590),p=c(74202),e=c(74297),t=c(69808),l=c(33725),h=c(12145),r=c(59783);function f(R,b){if(1&R&&i._uU(0),2&R){const O=b.$implicit;i.AsE(" ",O.numeroDocumento," - ",O.razonSocial," ")}}let Z=(()=>{class R{constructor(O){this.customerService=O,this.tiposDocumentoIdentidad=[],this.filteredCustomers=[],this.selectCustomer=new i.vpe,this.onChange=q=>{},this.onTouched=q=>{}}get nombre(){if(this.model)return"object"==typeof this.model?this.model.razonSocial:this.model}ngOnInit(){}filterCustomerByNumeroDocumento(O){const U=["paginacion=false",`filtro=${O.query}`,"limit=20"];this.tiposDocumentoIdentidad.filter(j=>!j.disabled).forEach(j=>{U.push(`tipoDocumento=${j.value}`)}),this.customerService.findAllC(U.join("&")).subscribe(j=>{this.filteredCustomers=j})}onSelectCustomer(O){this.propagateChange(),this.selectCustomer.emit(O)}propagateChange(){this.onChange(this.nombre),this.onTouched(this.nombre)}registerOnChange(O){this.onChange=O}registerOnTouched(O){this.onTouched=O}writeValue(O){this.model=O,O&&(this.model="object"==typeof O?O:{razonSocial:O})}}return R.\u0275fac=function(O){return new(O||R)(i.Y36(m.v))},R.\u0275cmp=i.Xpm({type:R,selectors:[["app-cliente-autocomplete-control"]],inputs:{tiposDocumentoIdentidad:"tiposDocumentoIdentidad",tipoDocumento:"tipoDocumento"},outputs:{selectCustomer:"selectCustomer"},features:[i._Bn([{provide:u.JU,useExisting:(0,i.Gpc)(()=>R),multi:!0}])],decls:2,vars:4,consts:[["field","razonSocial","placeholder","Nombre o Nro. documento",3,"ngModel","suggestions","size","minLength","onKeyUp","ngModelChange","onSelect","completeMethod"],["pTemplate","item"]],template:function(O,q){1&O&&(i.TgZ(0,"p-autoComplete",0),i.NdJ("onKeyUp",function(){return q.propagateChange()})("ngModelChange",function(j){return q.model=j})("onSelect",function(j){return q.onSelectCustomer(j)})("completeMethod",function(j){return q.filterCustomerByNumeroDocumento(j)}),i.YNc(1,f,1,2,"ng-template",1),i.qZA()),2&O&&i.Q6J("ngModel",q.model)("suggestions",q.filteredCustomers)("size",30)("minLength",1)},directives:[h.Qc,u.JJ,u.On,r.jx],styles:[""]}),R})();var C=c(43724),E=c(31424),M=c(14036),x=c(20657),_=c(17102),A=c(75652);function k(R,b){1&R&&i._UZ(0,"p-message",27)}function V(R,b){1&R&&i._UZ(0,"p-message",28)}function L(R,b){1&R&&i._UZ(0,"p-message",29)}function z(R,b){1&R&&i._UZ(0,"p-message",30)}const Y=function(){return{width:"100%"}};function it(R,b){if(1&R){const O=i.EpF();i.TgZ(0,"form",1),i.TgZ(1,"div",2),i.TgZ(2,"div",3),i.TgZ(3,"p-tabView"),i.TgZ(4,"p-tabPanel",4),i.TgZ(5,"div",5),i.TgZ(6,"div",6),i.TgZ(7,"label",7),i._uU(8,"Nombre "),i.TgZ(9,"span"),i._uU(10,"(*)"),i.qZA(),i.qZA(),i.TgZ(11,"app-cliente-autocomplete-control",8),i.NdJ("selectCustomer",function(U){return i.CHM(O),i.oxw().selectCustomer(U)}),i.qZA(),i.YNc(12,k,1,0,"p-message",9),i.qZA(),i.TgZ(13,"div",10),i.TgZ(14,"label",7),i._uU(15,"Num. Doc. (*)"),i.qZA(),i.TgZ(16,"input",11),i.NdJ("input",function(){return i.CHM(O),i.oxw().searchByNumber()}),i.qZA(),i.YNc(17,V,1,0,"p-message",12),i.qZA(),i.TgZ(18,"div",13),i.TgZ(19,"label",7),i._uU(20,"Tipo doc. "),i.TgZ(21,"span"),i._uU(22,"(*)"),i.qZA(),i.qZA(),i.TgZ(23,"p-dropdown",14),i.NdJ("onChange",function(){return i.CHM(O),i.oxw().validateDocumentNumber()}),i.qZA(),i.YNc(24,L,1,0,"p-message",15),i.qZA(),i.TgZ(25,"div",16),i.TgZ(26,"label",7),i._uU(27,"Direcci\xf3n fiscal"),i.TgZ(28,"span"),i._uU(29,"(*)"),i.qZA(),i.qZA(),i._UZ(30,"input",17),i.YNc(31,z,1,0,"p-message",18),i.qZA(),i.TgZ(32,"div",13),i.TgZ(33,"label",7),i._uU(34,"Email"),i.qZA(),i._UZ(35,"input",19),i.qZA(),i.TgZ(36,"div",13),i.TgZ(37,"label",7),i._uU(38,"Telefono"),i.qZA(),i._UZ(39,"input",20),i.qZA(),i.qZA(),i.qZA(),i.TgZ(40,"p-tabPanel",21),i.TgZ(41,"div",2),i.TgZ(42,"div",16),i.TgZ(43,"label",7),i._uU(44,"Genero"),i.qZA(),i._UZ(45,"p-selectButton",22),i.qZA(),i.TgZ(46,"div",16),i.TgZ(47,"label",7),i._uU(48,"Fecha de nacimiento"),i.qZA(),i._UZ(49,"p-calendar",23),i.qZA(),i.TgZ(50,"div",16),i.TgZ(51,"label",7),i._uU(52,"Giro de negocio"),i.qZA(),i._UZ(53,"input",24),i.qZA(),i.TgZ(54,"div",16),i.TgZ(55,"label",7),i._uU(56,"Referido"),i.qZA(),i._UZ(57,"input",25),i.qZA(),i.TgZ(58,"div",16),i.TgZ(59,"label",7),i._uU(60,"Expediente"),i.qZA(),i._UZ(61,"input",26),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&R){const O=i.oxw();i.Q6J("formGroup",O.parentForm),i.xp6(11),i.Q6J("tipoDocumento",O.parentForm.get("cliente").get("tipoDocumento").value)("tiposDocumentoIdentidad",O.tiposDocumentoIdentidad),i.xp6(1),i.Q6J("ngIf",O.parentForm.get("cliente").get("razonSocial").touched&&(null==O.parentForm.get("cliente").get("razonSocial").errors?null:O.parentForm.get("cliente").get("razonSocial").errors.required)),i.xp6(5),i.Q6J("ngIf",O.parentForm.get("cliente").get("numeroDocumento").touched&&((null==O.parentForm.get("cliente").get("numeroDocumento").errors?null:O.parentForm.get("cliente").get("numeroDocumento").errors.invalidDocument)||(null==O.parentForm.get("cliente").get("numeroDocumento").errors?null:O.parentForm.get("cliente").get("numeroDocumento").errors.required))),i.xp6(6),i.Akn(i.DdM(16,Y)),i.Q6J("options",O.tiposDocumentoIdentidad),i.xp6(1),i.Q6J("ngIf",O.parentForm.get("cliente").get("tipoDocumento").touched&&(null==O.parentForm.get("cliente").get("tipoDocumento").errors?null:O.parentForm.get("cliente").get("tipoDocumento").errors.required)),i.xp6(7),i.Q6J("ngIf",O.parentForm.get("cliente").get("direccionCompleta").touched&&(null==O.parentForm.get("cliente").get("direccionCompleta").errors?null:O.parentForm.get("cliente").get("direccionCompleta").errors.required)),i.xp6(14),i.Q6J("options",O.generos),i.xp6(4),i.Akn(i.DdM(17,Y)),i.Q6J("monthNavigator",!0)("yearNavigator",!0)("locale",O.listas.calendarEs)}}class Q{constructor(b,O,q,U,j){this.fb=b,this.listas=O,this.consultaDocumentosService=q,this.customerService=U,this.route=j,this.unsubscribe$=new g.xQ,this.generos=[],this.tiposDocumentoIdentidad=this.listas.tiposDocumentoIdentidad,this.configCompany={}}set tipoComprobante(b){this._tipoComprobante=b,this.updateStatusTipoDocumento(),this.selectTipoDocumentoByTipoComprobanteAndTipoOperacion(),this.validateDocumentNumber()}get tipoComprobante(){return this._tipoComprobante}set totalComprobante(b){this._totalComprobante=b,this.validateDocumentNumber()}get totalComprobante(){return this._totalComprobante}set codigoTipoOperacion(b){this._codigoTipoOperacion=b,this.updateStatusTipoDocumento(),this.selectTipoDocumentoByTipoComprobanteAndTipoOperacion()}get codigoTipoOperacion(){return this._codigoTipoOperacion}ngOnInit(){this.generos=[{label:"Masculino",value:"MASCULINO"},{label:"Femenino",value:"FEMENINO"},{label:"No definido",value:"NO_DEFINIDO"}],this.configCompany$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(b=>{this.configCompany=b,this.setClientePorDefecto()})}ngOnChanges(b){this.updateStatusTipoDocumento(),this.selectTipoDocumentoByTipoComprobanteAndTipoOperacion()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}get isQuotation(){return this.route.snapshot.data.isQuotation}validateDocumentNumber(){if(this.parentForm&&this.parentForm.get("cliente")){const b=this.tipoComprobante,O=this.parentForm.get("cliente").value.numeroDocumento,q=this.parentForm.get("cliente").value.tipoDocumento;this.parentForm.get("cliente").get("numeroDocumento").clearValidators(),this.parentForm.get("cliente").get("numeroDocumento").setValidators([u.kI.required]),this.parentForm.get("cliente").get("numeroDocumento").updateValueAndValidity(),O&&("1"===q&&8===O.length||"6"===q&&11===O.length)&&"NV"!==b&&this.consultaDocumentosService.findDocument(O,"1"===q).subscribe(U=>{let j="1"===q?U.dni:U.ruc;"00000000"===O&&(j=""),"6"===q&&this.parentForm.get("cliente").get("numeroDocumento").setValidators([(0,v.$N)(j)]),this.parentForm.get("cliente").get("numeroDocumento").updateValueAndValidity()})}}selectTipoDocumentoByTipoComprobanteAndTipoOperacion(){let b=["1"];("0101"===this.codigoTipoOperacion||"1001"===this.codigoTipoOperacion||"2001"===this.codigoTipoOperacion)&&("01"===this.tipoComprobante&&(b=["6"]),("03"===this.tipoComprobante||this.isQuotation)&&(b=["1","6","4","7","A"]),("07"===this.tipoComprobante||"08"===this.tipoComprobante)&&(b=this.parentForm.get("serieAfectado").value&&"F"===this.parentForm.get("serieAfectado").value.charAt(0)?["6"]:["1","6","4","7","A"])),"0200"===this.codigoTipoOperacion&&(b=["0"]),this.parentForm&&(-1===b.indexOf(this.parentForm.get("cliente").value.tipoDocumento)&&"NV"!==this.tipoComprobante&&this.parentForm.get("cliente").patchValue({tipoDocumento:b[0],numeroDocumento:void 0,razonSocial:void 0,direccionCompleta:void 0,email:void 0,telefono:void 0,id:void 0,giro:void 0,genero:void 0,expediente:void 0,fechaNacimiento:void 0,referido:void 0}),!this.parentForm.get("cliente").value.numeroDocumento&&("NV"===this.tipoComprobante||"03"===this.tipoComprobante)&&this.setClientePorDefecto())}updateStatusTipoDocumento(){this.tiposDocumentoIdentidad.forEach(b=>b.disabled=!1),"0101"===this.codigoTipoOperacion&&"01"===this.tipoComprobante&&this.tiposDocumentoIdentidad.filter(b=>"6"!==b.value).forEach(b=>b.disabled=!0),"0200"===this.codigoTipoOperacion&&"01"===this.tipoComprobante&&this.tiposDocumentoIdentidad.filter(b=>"0"!==b.value).forEach(b=>b.disabled=!0),"0401"===this.codigoTipoOperacion&&"01"===this.tipoComprobante&&this.tiposDocumentoIdentidad.filter(b=>"0"!==b.value&&"7"!==b.value&&"A"!==b.value).forEach(b=>b.disabled=!0)}setClientePorDefecto(){this.permiteClientePorDefecto&&this.configCompany.clientePorDefecto&&this.configCompany.clientePorDefectoData&&("03"===this.tipoComprobante||"NV"===this.tipoComprobante)&&(console.log(this.configCompany.clientePorDefectoData),this.parentForm.get("cliente").patchValue(Object.assign(Object.assign({},this.configCompany.clientePorDefectoData),{giro:"",expediente:"",fechaNacimiento:"",referido:"",genero:void 0})))}selectCustomer(b){this.parentForm.get("cliente").patchValue(Object.assign(Object.assign({},b),{fechaNacimiento:b.fechaNacimiento?new Date(b.fechaNacimiento):void 0})),this.validateDocumentNumber()}searchByNumber(){const b=this.parentForm.get("cliente").value.numeroDocumento,O=["paginacion=false",`filtro=${b}`,"limit=20"];this.tiposDocumentoIdentidad.filter(q=>!q.disabled).forEach(q=>{O.push(`tipoDocumento=${q.value}`)}),(8===b.length||11===b.length)&&this.customerService.findAllC(O.join("&")).subscribe(q=>{const U=q.find(j=>j.numeroDocumento===b);U&&this.parentForm.get("cliente").patchValue({id:void 0,razonSocial:U.razonSocial,direccionCompleta:U.direccionCompleta,numeroDocumento:b,tipoDocumento:U.tipoDocumento,email:U.email,telefono:U.telefono,giro:U.giro,expediente:U.expediente,fechaNacimiento:U.fechaNacimiento?new Date(U.fechaNacimiento):void 0,referido:U.referido,genero:U.genero})}),this.validateDocumentNumber()}}Q.\u0275fac=function(b){return new(b||Q)(i.Y36(u.qu),i.Y36(n.E),i.Y36(a.W),i.Y36(m.v),i.Y36(p.gz))},Q.\u0275cmp=i.Xpm({type:Q,selectors:[["app-cliente-form"]],inputs:{parentForm:"parentForm",tipoComprobante:"tipoComprobante",totalComprobante:"totalComprobante",codigoTipoOperacion:"codigoTipoOperacion",permiteClientePorDefecto:"permiteClientePorDefecto"},features:[i.TTD],decls:2,vars:1,consts:[["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"grid"],["formGroupName","cliente",1,"col-12"],["header","Datos principales","leftIcon","fa fa-asterisk"],[1,"grid","p-fluid"],[1,"col-6","md:col-5"],[1,"label-form"],["formControlName","razonSocial",3,"tipoDocumento","tiposDocumentoIdentidad","selectCustomer"],["severity","error","text","Ingrese raz\xf3n social",4,"ngIf"],[1,"col-6","md:col-4"],["formControlName","numeroDocumento","type","text","placeholder","N. documento","pInputText","",2,"width","100%",3,"input"],["severity","error","text","Ingrese un n\xfamero de documento v\xe1lido",4,"ngIf"],[1,"col-6","md:col-3"],["formControlName","tipoDocumento","placeholder","Seleccione tipo doc.",3,"options","onChange"],["severity","error","text","Ingrese tipo de documento",4,"ngIf"],[1,"col-12","md:col-6"],["formControlName","direccionCompleta","type","text","placeholder","Direcci\xf3n","pInputText","",2,"width","100%"],["severity","error","text","Ingrese direcci\xf3n del receptor",4,"ngIf"],["formControlName","email","placeholder","Email","type","text","pInputText","",2,"width","100%"],["formControlName","telefono","pKeyFilter","num","placeholder","Telefono","type","text","pInputText","",2,"width","100%"],["header","Datos adicionales","leftIcon","fa fa-info-circle"],["formControlName","genero",3,"options"],["placeholder","Fecha de emisi\xf3n dd-mm-yy","formControlName","fechaNacimiento","yearRange","1930:2030","dateFormat","dd-mm-yy",3,"monthNavigator","yearNavigator","locale"],["formControlName","giro","id","giro","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","referido","id","referido","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["formControlName","expediente","id","expediente","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese raz\xf3n social"],["severity","error","text","Ingrese un n\xfamero de documento v\xe1lido"],["severity","error","text","Ingrese tipo de documento"],["severity","error","text","Ingrese direcci\xf3n del receptor"]],template:function(b,O){1&b&&(i.TgZ(0,"p-card"),i.YNc(1,it,62,18,"form",0),i.qZA()),2&b&&(i.xp6(1),i.Q6J("ngIf",O.parentForm))},directives:[e.Z,t.O5,u._Y,u.JL,u.sg,u.x0,l.xf,l.x4,Z,u.JJ,u.u,C.q,u.Fj,E.o,M.Lt,x.Fr,_.UN,A.f],styles:[""]}),(0,s.gn)([(0,w.Ph)(I.Z.getConfig)],Q.prototype,"configCompany$",void 0)},40019:(It,$,c)=>{"use strict";c.d($,{f:()=>g});var s=c(69808),u=c(20958),w=c(45330),I=c(5e3);let g=(()=>{class y{}return y.\u0275fac=function(i){return new(i||y)},y.\u0275mod=I.oAB({type:y}),y.\u0275inj=I.cJS({providers:[w.xA],imports:[[s.ez,u.m]]}),y})()},87814:(It,$,c)=>{"use strict";function s(q,U,j,D,B,G,W){try{var ot=q[G](W),lt=ot.value}catch(ft){return void j(ft)}ot.done?U(lt):Promise.resolve(lt).then(D,B)}function u(q){return function(){var U=this,j=arguments;return new Promise(function(D,B){var G=q.apply(U,j);function W(lt){s(G,D,B,W,ot,"next",lt)}function ot(lt){s(G,D,B,W,ot,"throw",lt)}W(void 0)})}}c.d($,{D:()=>O});var w=c(70655),I=c(82817),g=c(85932),y=c(81575),v=c(8929),i=c(66239),n=c(5e3),a=c(1203),m=c(13591),p=c(50377),e=c(59783),t=c(20207),l=c(45330),h=c(74297),r=c(69808),f=c(93075),Z=c(31424),C=c(43724),E=c(18872),M=c(42939),x=c(16016),_=c(88205),A=c(40845);const k=["fileUploadEmail"];function V(q,U){if(1&q){const j=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"div",6),n.TgZ(2,"label",7),n._uU(3,"Celular:"),n.qZA(),n.TgZ(4,"input",8),n.NdJ("ngModelChange",function(B){return n.CHM(j),n.oxw(2).dataSend.number=B}),n.qZA(),n.qZA(),n.qZA()}if(2&q){const j=n.oxw(2);n.xp6(4),n.Q6J("ngModel",j.dataSend.number)}}function L(q,U){if(1&q&&(n.TgZ(0,"div"),n.YNc(1,V,5,1,"div",4),n.qZA()),2&q){const j=n.oxw();n.xp6(1),n.Q6J("ngIf",j.dataSend)}}const z=function(){return{height:"180px"}};function Y(q,U){if(1&q){const j=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div",5),n.TgZ(2,"div",6),n.TgZ(3,"label",7),n._uU(4,"Para: (*)"),n.qZA(),n.TgZ(5,"div"),n.TgZ(6,"p-chips",11),n.NdJ("onAdd",function(){return n.CHM(j),n.oxw(2).validateEmail()})("ngModelChange",function(B){return n.CHM(j),n.oxw(2).dataSend.emails=B}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"label",7),n._uU(9,"Asunto:"),n.qZA(),n.TgZ(10,"input",8),n.NdJ("ngModelChange",function(B){return n.CHM(j),n.oxw(2).dataSend.asunto=B}),n.qZA(),n.qZA(),n.TgZ(11,"div",6),n.TgZ(12,"label",7),n._uU(13,"Contenido:"),n.qZA(),n.TgZ(14,"p-editor",12),n.NdJ("ngModelChange",function(B){return n.CHM(j),n.oxw(2).dataSend.texto=B}),n.qZA(),n.qZA(),n.TgZ(15,"div",6),n.TgZ(16,"label",7),n._uU(17,"Archivos adjuntos adicionales:"),n.qZA(),n._UZ(18,"p-fileUpload",13,14),n.qZA(),n.qZA(),n.qZA()}if(2&q){const j=n.oxw(2);n.xp6(6),n.Q6J("addOnBlur",!0)("styleClass","chip-style")("ngModel",j.dataSend.emails),n.xp6(4),n.Q6J("ngModel",j.dataSend.asunto),n.xp6(4),n.Akn(n.DdM(9,z)),n.Q6J("ngModel",j.dataSend.texto),n.xp6(4),n.Q6J("showCancelButton",!1)("showUploadButton",!1)}}const it=function(){return{width:"100%",minHeight:"300px",height:"450px"}};function Q(q,U){if(1&q&&(n.TgZ(0,"div"),n.TgZ(1,"div",9),n._UZ(2,"p-message",10),n.qZA(),n.TgZ(3,"p-scrollPanel"),n.YNc(4,Y,20,10,"div",0),n.qZA(),n.qZA()),2&q){const j=n.oxw();n.xp6(3),n.Akn(n.DdM(3,it)),n.xp6(1),n.Q6J("ngIf",j.dataSend)}}function R(q,U){if(1&q){const j=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(j),n.oxw().goSendEmail()}),n.qZA()}}function b(q,U){if(1&q){const j=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(){return n.CHM(j),n.oxw().goSendWhatsapp()}),n.qZA()}}class O{constructor(U,j,D,B,G,W,ot){this.ticketService=U,this.whatsappService=j,this.quotationService=D,this.messageService=B,this.loginService=G,this.ref=W,this.config=ot,this.unsubscribe$=new v.xQ,this.configCompany={}}ngOnInit(){this.configCompany$.pipe((0,i.Rs)(this.unsubscribe$)).subscribe(U=>{this.configCompany=U})}get sendType(){return this.config.data.sendType}get dataSend(){return this.config.data.dataSend}validateEmail(){const U=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.dataSend.emails=this.dataSend.emails.filter(D=>U.test(String(D).toLowerCase()))}goSendEmail(){var U=this;return u(function*(){const j=[];yield U.fileUploadEmail.files.forEach(function(){var B=u(function*(G){const W=yield(0,I.s3)(G);j.push({archivo:W,nombre:G.name})});return function(G){return B.apply(this,arguments)}}()),U.dataSend.archivos=j;const D={idTicket:U.dataSend.id,emailSend:U.dataSend};setTimeout(()=>{("ticket"===U.dataSend.type?U.ticketService.sendEmail(D):U.quotationService.sendEmail(D)).subscribe(()=>{U.messageService.add({severity:"success",summary:"Mensaje",detail:"Email enviado correctamente."}),U.fileUploadEmail.files=[],U.ref.close({email:U.dataSend.emails[0]})})},200)})()}goSendWhatsapp(){/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/.test(this.dataSend.number)?(this.configCompany.usaWhatsappApi?this.whatsappService.sendWhatsappMessage(this.dataSend.number,this.dataSend.textMessage,this.dataSend.nameMessage,this.dataSend.url).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Whatsapp enviado correctamente."})}):window.open(encodeURI(`https://api.whatsapp.com/send?phone=${this.dataSend.number}&text=${this.dataSend.messageWhatsappWeb}`),"_blank"),this.ref.close({numberPhone:this.dataSend.number})):this.messageService.add({severity:"error",summary:"Error",detail:"N\xfamero de tel\xe9fono inv\xe1lido."})}}O.\u0275fac=function(U){return new(U||O)(n.Y36(a.w),n.Y36(m.C),n.Y36(p.G),n.Y36(e.ez),n.Y36(t.r),n.Y36(l.E7),n.Y36(l.S))},O.\u0275cmp=n.Xpm({type:O,selectors:[["app-envio-comprobante"]],viewQuery:function(U,j){if(1&U&&n.Gf(k,5),2&U){let D;n.iGM(D=n.CRH())&&(j.fileUploadEmail=D.first)}},decls:6,vars:4,consts:[[4,"ngIf"],[1,"mt-3","right"],["pButton","","type","button","label","Enviar","class","p-button-primary mr-2",3,"click",4,"ngIf"],["pButton","","type","button","label","Enviar","icon","pi pi-whatsapp","class","p-button-success mr-2",3,"click",4,"ngIf"],["class","grid p-fluid",4,"ngIf"],[1,"grid","p-fluid"],[1,"col-12"],[1,"label-form"],["name","asunto","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange"],[2,"margin-bottom","0.3rem"],["severity","warn","text","Nota: El pdf y xml ser\xe1n adjuntados automaticamente."],[3,"addOnBlur","styleClass","ngModel","onAdd","ngModelChange"],[3,"ngModel","ngModelChange"],["chooseLabel","Seleccionar archivos","name","files[]","multiple","multiple","accept","application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint,\ntext/plain, application/pdf, image/*","maxFileSize","1000000",3,"showCancelButton","showUploadButton"],["fileUploadEmail",""],["pButton","","type","button","label","Enviar",1,"p-button-primary","mr-2",3,"click"],["pButton","","type","button","label","Enviar","icon","pi pi-whatsapp",1,"p-button-success","mr-2",3,"click"]],template:function(U,j){1&U&&(n.TgZ(0,"p-card"),n.YNc(1,L,2,1,"div",0),n.YNc(2,Q,5,4,"div",0),n.qZA(),n.TgZ(3,"div",1),n.YNc(4,R,1,0,"button",2),n.YNc(5,b,1,0,"button",3),n.qZA()),2&U&&(n.xp6(1),n.Q6J("ngIf","whatsapp"===j.sendType),n.xp6(1),n.Q6J("ngIf","email"===j.sendType),n.xp6(2),n.Q6J("ngIf","email"===j.sendType),n.xp6(1),n.Q6J("ngIf","whatsapp"===j.sendType))},directives:[h.Z,r.O5,f.Fj,Z.o,f.JJ,f.On,C.q,E.P,M.cL,x.ML,_.p,A.Hq],styles:[""]}),(0,w.gn)([(0,g.Ph)(y.Z.getConfig)],O.prototype,"configCompany$",void 0)},51420:(It,$,c)=>{"use strict";c.d($,{Z:()=>a});var s=c(82817),u=c(5e3),w=c(45330),I=c(96039),g=c(69808),y=c(40845);function v(m,p){if(1&m){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"div",0),u.TgZ(2,"div",3),u._UZ(3,"a",4),u.TgZ(4,"button",5),u.NdJ("click",function(){const h=u.CHM(e).$implicit;return u.oxw().print(h)}),u.qZA(),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"iframe",6),u.qZA(),u.qZA(),u.qZA()}if(2&m){const e=p.$implicit,t=u.oxw();u.xp6(3),u.Q6J("href",null==e.pdfPrint?null:e.pdfPrint.urlSafe,u.LSH),u.xp6(3),u.Q6J("src",t.isMobileDevice?null==e.pdfPrint?null:e.pdfPrint.urlViewer:null==e.pdfPrint?null:e.pdfPrint.urlSafe,u.uOi)}}function i(m,p){if(1&m){const e=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(e).$implicit.method()}),u.qZA()}if(2&m){const e=p.$implicit;u.Q6J("icon",e.icon)("label",e.name)}}function n(m,p){if(1&m&&(u.TgZ(0,"div",3),u.TgZ(1,"div",7),u.YNc(2,i,1,2,"button",8),u.qZA(),u.qZA()),2&m){const e=u.oxw();u.xp6(2),u.Q6J("ngForOf",e.actions)}}let a=(()=>{class m{constructor(e,t){this.config=e,this.qzTrayService=t,this.statusQz=!1}ngOnInit(){this.ordersPrint=this.config.data.ordersPrint,this.actions=this.config.data.actions}get isMobileDevice(){return(0,s.s2)()}ngAfterViewInit(){this.statusQz=this.qzTrayService.getStatus()}print(e){this.statusQz&&e.fnPrintQz?e.fnPrintQz():(0,s.TW)(e.pdfPrint.url)}}return m.\u0275fac=function(e){return new(e||m)(u.Y36(w.S),u.Y36(I.k))},m.\u0275cmp=u.Xpm({type:m,selectors:[["app-modal-pdf"]],decls:3,vars:2,consts:[[1,"grid"],["class","col-12",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12"],["target","_blank","pButton","","icon","pi pi-clone","label","Abrir en navegador",1,"p-button-sm","mr-2",3,"href"],["pButton","","icon","pi pi-print","label","Imprimir",1,"p-button-sm","mr-2",3,"click"],["name","PDF.pdf","title","MyPdf","id","pdftoprint","type","application/pdf","width","100%","height","400px",3,"src"],[1,"flex","justify-content-end"],["class","p-button-sm mr-2 p-button-success m-1","pButton","",3,"icon","label","click",4,"ngFor","ngForOf"],["pButton","",1,"p-button-sm","mr-2","p-button-success","m-1",3,"icon","label","click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,v,7,2,"div",1),u.YNc(2,n,3,1,"div",2),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngForOf",t.ordersPrint),u.xp6(1),u.Q6J("ngIf",t.actions))},directives:[g.sg,y.Hq,g.O5],styles:[""]}),m})()},89400:(It,$,c)=>{"use strict";c.d($,{z:()=>w});var s=c(20958),u=c(5e3);let w=(()=>{class I{}return I.\u0275fac=function(y){return new(y||I)},I.\u0275mod=u.oAB({type:I}),I.\u0275inj=u.cJS({imports:[[s.m]]}),I})()},94855:(It,$,c)=>{"use strict";c.d($,{j:()=>v});var s=c(5e3),u=c(45330),w=c(35308);let I=(()=>{class i{constructor(a,m){this.config=a,this.ref=m}ngOnInit(){}productSaved(a){this.ref.close(a)}}return i.\u0275fac=function(a){return new(a||i)(s.Y36(u.S),s.Y36(u.E7))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-modal-producto"]],decls:1,vars:1,consts:[[3,"isModal","saveProduct"]],template:function(a,m){1&a&&(s.TgZ(0,"app-producto",0),s.NdJ("saveProduct",function(e){return m.productSaved(e)}),s.qZA()),2&a&&s.Q6J("isModal",!0)},directives:[w.g],styles:[""]}),i})();var g=c(4119),y=c(40845);let v=(()=>{class i{constructor(a){this.dialogService=a,this.selectProduct=new s.vpe}ngOnInit(){}openModalRegisterProduct(){this.dialogService.open(I,{header:"Registrar producto",width:"80%"}).onClose.subscribe(m=>{m&&this.selectProduct.emit(m)})}}return i.\u0275fac=function(a){return new(a||i)(s.Y36(u.xA))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-button-new-product"]],outputs:{selectProduct:"selectProduct"},decls:1,vars:0,consts:[["tooltipPosition","top","pTooltip","Nuevo producto","pButton","","type","button","icon","pi pi-plus-circle",1,"p-button-success",3,"click"]],template:function(a,m){1&a&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return m.openModalRegisterProduct()}),s.qZA())},directives:[g.u,y.Hq],styles:[""]}),i})()},29729:(It,$,c)=>{"use strict";c.d($,{v:()=>b});var s=c(70655),u=c(5e3),w=c(82817),I=c(85932),g=c(81575),y=c(8929),v=c(7625),i=c(12216),n=c(20207),a=c(40845),m=c(4119),p=c(15315),e=c(69808),t=c(74297),l=c(9757),h=c(93036),r=c(59783),f=c(55361),Z=c(77121);function C(O,q){if(1&O&&(u.TgZ(0,"div",20),u.TgZ(1,"p-card"),u._UZ(2,"img",21),u.qZA(),u.qZA()),2&O){const U=u.oxw(2);u.xp6(2),u.Q6J("src",U.product.imagenUrl,u.LSH)}}function E(O,q){if(1&O&&(u.TgZ(0,"div",8),u.TgZ(1,"label",9),u._uU(2,"Stock"),u.qZA(),u.TgZ(3,"p",10),u._UZ(4,"app-mostrar-stock",22),u.qZA(),u.qZA()),2&O){const U=u.oxw(2);u.xp6(4),u.Q6J("producto",U.product)}}function M(O,q){1&O&&(u.TgZ(0,"span"),u._uU(1,"Si"),u.qZA())}function x(O,q){1&O&&u._uU(0,"No")}function _(O,q){1&O&&(u.TgZ(0,"span"),u._uU(1,"Si"),u.qZA())}function A(O,q){1&O&&u._uU(0,"No")}function k(O,q){if(1&O&&(u.TgZ(0,"label",9),u._uU(1,"Punto de venta"),u.qZA(),u.TgZ(2,"p",10),u._uU(3),u.qZA()),2&O){const U=u.oxw().$implicit;u.xp6(3),u.Oqu(null==U.puntoVenta?null:U.puntoVenta.nombre)}}function V(O,q){if(1&O&&(u.TgZ(0,"h2",27),u._uU(1),u.qZA()),2&O){const U=u.oxw().$implicit;u.xp6(1),u.Oqu(U.nombre)}}function L(O,q){if(1&O){const U=u.EpF();u.TgZ(0,"div",29),u.TgZ(1,"button",30),u.NdJ("click",function(){u.CHM(U);const D=u.oxw(2).$implicit;return u.oxw(2).emitSelectPrice(D.precio)}),u.qZA(),u.qZA()}}function z(O,q){if(1&O&&(u.TgZ(0,"div"),u.YNc(1,L,2,0,"div",28),u.qZA()),2&O){const U=u.oxw().$implicit;u.xp6(1),u.Q6J("ngIf","POR_DEFECTO"===U.tipoPrecio||"ESPECIAL"===U.tipoPrecio)}}function Y(O,q){if(1&O&&(u.TgZ(0,"div",6),u.TgZ(1,"p-card"),u.YNc(2,k,4,1,"ng-template",23),u.YNc(3,V,2,1,"h2",24),u.TgZ(4,"label",9),u._uU(5,"Tipo"),u.qZA(),u.TgZ(6,"p",10),u._uU(7),u.ALo(8,"tipoPrecio"),u.qZA(),u.TgZ(9,"label",9),u._uU(10,"Precio"),u.qZA(),u.TgZ(11,"p",25),u._uU(12),u.ALo(13,"montoDinero"),u.qZA(),u.YNc(14,z,2,1,"div",26),u.qZA(),u.qZA()),2&O){const U=q.$implicit,j=u.oxw(2);u.xp6(2),u.Q6J("ngIf",U.puntoVenta),u.xp6(1),u.Q6J("ngIf",U.nombre),u.xp6(4),u.hij("(",u.lcZ(8,5,U.tipoPrecio),")"),u.xp6(5),u.Oqu(u.xi3(13,7,U.precio,null==j.product?null:j.product.moneda)),u.xp6(2),u.Q6J("appPermission","VENTAS_SELECCIONAR_PRECIO_ESPECIAL")}}function it(O,q){if(1&O&&(u.TgZ(0,"div"),u.TgZ(1,"div",4),u.YNc(2,C,3,1,"div",5),u.TgZ(3,"div",6),u.TgZ(4,"div",7),u.TgZ(5,"div",8),u.TgZ(6,"label",9),u._uU(7,"C\xf3digo barra"),u.qZA(),u.TgZ(8,"p",10),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"div",8),u.TgZ(11,"label",9),u._uU(12,"C\xf3digo"),u.qZA(),u.TgZ(13,"p",10),u._uU(14),u.qZA(),u.qZA(),u.TgZ(15,"div",11),u.TgZ(16,"label",9),u._uU(17,"Descripci\xf3n"),u.qZA(),u.TgZ(18,"p",10),u._uU(19),u.qZA(),u.qZA(),u.YNc(20,E,5,1,"div",12),u.TgZ(21,"div",13),u.TgZ(22,"label",9),u._uU(23,"Unidad de venta"),u.qZA(),u.TgZ(24,"p",10),u._uU(25),u.qZA(),u.qZA(),u.TgZ(26,"div",8),u.TgZ(27,"label",9),u._uU(28,"Moneda"),u.qZA(),u.TgZ(29,"p",10),u._uU(30),u.qZA(),u.qZA(),u.TgZ(31,"div",8),u.TgZ(32,"label",9),u._uU(33,"Igv"),u.qZA(),u.TgZ(34,"p",10),u.YNc(35,M,2,0,"span",14),u.YNc(36,x,1,0,"ng-template",null,15,u.W1O),u.qZA(),u.qZA(),u.TgZ(38,"div",16),u.TgZ(39,"label",9),u._uU(40,"Precios por punto de venta"),u.qZA(),u.TgZ(41,"p",10),u.YNc(42,_,2,0,"span",14),u.YNc(43,A,1,0,"ng-template",null,17,u.W1O),u.qZA(),u.qZA(),u.TgZ(45,"div",18),u.TgZ(46,"label",9),u._uU(47,"Precios de venta"),u.qZA(),u.TgZ(48,"p-card"),u.TgZ(49,"div",4),u.YNc(50,Y,15,10,"div",19),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&O){const U=u.MAs(37),j=u.MAs(44),D=u.oxw();u.xp6(2),u.Q6J("ngIf",D.product.imagenUrl),u.xp6(7),u.Oqu(null==D.product?null:D.product.codigoBarra),u.xp6(5),u.Oqu(null==D.product?null:D.product.codigo),u.xp6(5),u.Oqu(null==D.product?null:D.product.nombre),u.xp6(1),u.Q6J("ngIf",D.configCompany.inventario),u.xp6(5),u.Oqu(null==D.product||null==D.product.unidad?null:D.product.unidad.descripcion),u.xp6(5),u.Oqu(null==D.product?null:D.product.moneda),u.xp6(5),u.Q6J("ngIf",null==D.product?null:D.product.igv)("ngIfElse",U),u.xp6(7),u.Q6J("ngIf",null==D.product?null:D.product.preciosPorPuntoVenta)("ngIfElse",j),u.xp6(8),u.Q6J("ngForOf",D.preciosVentaActuales)}}function Q(O,q){1&O&&(u.TgZ(0,"div"),u.TgZ(1,"h3",31),u._uU(2,"Sin informaci\xf3n que mostrar."),u.qZA(),u.qZA())}const R=function(){return{width:"80%",minWidth:"80%"}};class b{constructor(q,U){this.productService=q,this.loginService=U,this.unsubscribe$=new y.xQ,this.optionsViewProduct=!1,this.configCompany={},this.selectPrice=new u.vpe,this.puntosVenta=[]}get preciosVentaActuales(){return this.product&&this.product.preciosVenta?this.product.preciosVenta.filter(q=>(0,w.Ak)(q,this.product.preciosPorPuntoVenta)).filter(q=>!q.puntoVenta||this.puntosVenta.map(U=>U.id).includes(q.puntoVenta.id)):[]}ngOnInit(){this.puntosVenta=this.loginService.getPuntosVentaUsuario(),this.configCompany$.pipe((0,v.R)(this.unsubscribe$)).subscribe(q=>{this.configCompany=q})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openModal(){this.productService.findById(this.idProduct).subscribe(q=>{this.product=q,this.optionsViewProduct=!0})}emitSelectPrice(q){this.selectPrice.emit(q),this.optionsViewProduct=!1}}b.\u0275fac=function(q){return new(q||b)(u.Y36(i.M),u.Y36(n.r))},b.\u0275cmp=u.Xpm({type:b,selectors:[["app-detalle-producto-item"]],inputs:{idProduct:"idProduct"},outputs:{selectPrice:"selectPrice"},decls:6,vars:10,consts:[["pButton","","type","button","icon","fa fa-eye","pTooltip","Detalles de producto",1,"p-button-primary",3,"disabled","click"],["appendTo","body","header","Detalle de producto",3,"visible","modal","responsive","minY","visibleChange"],[4,"ngIf"],["type","button","pButton","","label","Cerrar",1,"p-button-secondary",3,"click"],[1,"grid","p-fluid"],["class","col-fixed","style","width: 35%",4,"ngIf"],[1,"col"],[1,"grid"],[1,"col-6","md:col-2"],[1,"label-form","text-bold"],[1,"mt-0"],[1,"col-6","md:col-6"],["class","col-6 md:col-2",4,"ngIf"],[1,"col-6","md:col-4"],[4,"ngIf","ngIfElse"],["noIgv",""],[1,"col-6","md:col-3"],["noPreciosPorPuntoVenta",""],[1,"col-12"],["class","col",4,"ngFor","ngForOf"],[1,"col-fixed",2,"width","35%"],[2,"width","100%",3,"src"],["mostrar","button",3,"producto"],[3,"ngIf"],["class","text-bold","style","color: #1c7430",4,"ngIf"],[1,"mt-0","mb-0"],[4,"appPermission"],[1,"text-bold",2,"color","#1c7430"],["class","mt-2 flex-center-x",4,"ngIf"],[1,"mt-2","flex-center-x"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar precio",3,"click"],[2,"padding-left","100px"]],template:function(q,U){1&q&&(u.TgZ(0,"button",0),u.NdJ("click",function(){return U.openModal()}),u.qZA(),u.TgZ(1,"p-dialog",1),u.NdJ("visibleChange",function(D){return U.optionsViewProduct=D}),u.YNc(2,it,51,12,"div",2),u.YNc(3,Q,3,0,"div",2),u.TgZ(4,"p-footer"),u.TgZ(5,"button",3),u.NdJ("click",function(){return U.optionsViewProduct=!1}),u.qZA(),u.qZA(),u.qZA()),2&q&&(u.Q6J("disabled",!U.idProduct),u.xp6(1),u.Akn(u.DdM(9,R)),u.Q6J("visible",U.optionsViewProduct)("modal",!0)("responsive",!0)("minY",500),u.xp6(1),u.Q6J("ngIf",U.product&&U.product.id),u.xp6(1),u.Q6J("ngIf",!U.product))},directives:[a.Hq,m.u,p.V,e.O5,t.Z,l.d,e.sg,h.l,r.$_],pipes:[f.l,Z.Z],styles:[""]}),(0,s.gn)([(0,I.Ph)(g.Z.getConfig)],b.prototype,"configCompany$",void 0)},57446:(It,$,c)=>{"use strict";c.d($,{f:()=>Dt});var s=c(70655),u=c(8929),w=c(61715),I=c(30567),g=c(93075),y=c(66239),v=c(82817),i=c(85932),n=c(81575),a=c(29067),m=c(51420),p=c(52446),e=c(87814),t=c(5e3),l=c(74202),h=c(6969),r=c(23763),f=c(20207),Z=c(1203),C=c(13591),E=c(2314),M=c(33379),x=c(50377),_=c(59783),A=c(37590),k=c(24394),V=c(2385),L=c(96310),z=c(85450),Y=c(69808),it=c(12216),Q=c(47745),R=c(21602),b=c(45330),O=c(30643),q=c(95227),U=c(74297),j=c(80422),D=c(17102),B=c(14036),G=c(31424),W=c(43724),ot=c(65987),lt=c(75652),ft=c(20657),pt=c(40845),ht=c(15315),vt=c(4119);function At(T,d){1&T&&t._UZ(0,"p-message",21)}function xt(T,d){1&T&&t._UZ(0,"p-message",22)}const X=function(){return{width:"100%"}};function et(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.TgZ(2,"div",2),t.TgZ(3,"div",14),t._UZ(4,"input",15),t.YNc(5,At,1,0,"p-message",16),t.qZA(),t.TgZ(6,"div",14),t._UZ(7,"p-dropdown",17),t.YNc(8,xt,1,0,"p-message",18),t.qZA(),t.TgZ(9,"div",19),t.TgZ(10,"button",20),t.NdJ("click",function(){const at=t.CHM(o).index;return t.oxw(2).deleteGuiasRelacionadas(at)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=d.$implicit,N=d.index,F=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",N),t.xp6(4),t.Q6J("ngIf",o.get("serieNumeroGuia").touched&&(null==o.get("serieNumeroGuia").errors?null:o.get("serieNumeroGuia").errors.required)),t.xp6(2),t.Akn(t.DdM(6,X)),t.Q6J("options",F.listas.tiposGuias),t.xp6(1),t.Q6J("ngIf",o.get("codigoTipoGuia").touched&&(null==o.get("codigoTipoGuia").errors?null:o.get("codigoTipoGuia").errors.required))}}function st(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"p-card"),t.TgZ(2,"form",5),t.TgZ(3,"label",6),t._uU(4,"Gu\xedas de remisi\xf3n"),t.qZA(),t.YNc(5,et,11,7,"div",10),t.TgZ(6,"button",11),t.NdJ("click",function(){return t.CHM(o),t.oxw().addGuiasRelacionadas()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=t.oxw();t.xp6(2),t.Q6J("formGroup",o.modelForm),t.xp6(3),t.Q6J("ngForOf",o.modelFormGuiasRelacionadas.controls)}}function ct(T,d){1&T&&t._UZ(0,"p-message",28)}function rt(T,d){1&T&&t._UZ(0,"p-message",29)}function mt(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",23),t.TgZ(1,"div",13),t.TgZ(2,"div",2),t.TgZ(3,"div",14),t._UZ(4,"input",24),t.YNc(5,ct,1,0,"p-message",25),t.qZA(),t.TgZ(6,"div",14),t._UZ(7,"input",26),t.YNc(8,rt,1,0,"p-message",27),t.qZA(),t.TgZ(9,"div",19),t.TgZ(10,"button",20),t.NdJ("click",function(){const at=t.CHM(o).index;return t.oxw().deleteOtrosDatos(at)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=d.$implicit,N=d.index;t.xp6(1),t.Q6J("formGroupName",N),t.xp6(4),t.Q6J("ngIf",o.get("nombreCampo").touched&&(null==o.get("nombreCampo").errors?null:o.get("nombreCampo").errors.required)),t.xp6(3),t.Q6J("ngIf",o.get("valorCampo").touched&&(null==o.get("valorCampo").errors?null:o.get("valorCampo").errors.required))}}function gt(T,d){1&T&&(t.TgZ(0,"div",33),t.TgZ(1,"label",6),t._uU(2,"Otros tributos"),t.qZA(),t._UZ(3,"input",34),t.qZA())}function dt(T,d){1&T&&(t.TgZ(0,"div",33),t.TgZ(1,"label",6),t._uU(2,"N. Cotizaci\xf3n"),t.qZA(),t._UZ(3,"input",35),t.qZA())}function Ot(T,d){if(1&T&&(t.TgZ(0,"div",4),t.TgZ(1,"p-card"),t.TgZ(2,"form",5),t.TgZ(3,"div",2),t.TgZ(4,"div",30),t.TgZ(5,"label",6),t._uU(6,"Observaci\xf3n"),t.qZA(),t._UZ(7,"input",31),t.qZA(),t.YNc(8,gt,4,0,"div",32),t.YNc(9,dt,4,0,"div",32),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(2),t.Q6J("formGroup",o.modelForm),t.xp6(6),t.Q6J("ngIf",!o.isQuotation),t.xp6(1),t.Q6J("ngIf",!o.isQuotation)}}const Nt=function(){return{width:"500px",minWidth:"300px"}};let Ct=(()=>{class T{constructor(o,N){this.listas=o,this.fb=N,this.addInfoModal=!1}ngOnInit(){}createOtrosDatosForm(o){let N="",F="";return o&&(N=o.nombreCampo,F=o.valorCampo),this.fb.group({nombreCampo:[N,[g.kI.required]],valorCampo:[F,[g.kI.required]]})}get modelFormOtrosDatos(){return this.modelForm.get("camposAdicionales")}addOtrosDatos(o){this.modelForm.get("camposAdicionales").push(o?this.createOtrosDatosForm(o):this.createOtrosDatosForm())}createGuiasRelacionadasForm(o){let N="09",F="";return o&&(N=o.codigoTipoGuia,F=o.serieNumeroGuia),this.fb.group({codigoTipoGuia:[N,[]],serieNumeroGuia:[F,[]]})}addGuiasRelacionadas(o){this.modelForm.get("guiasRelacionadas").push(o?this.createGuiasRelacionadasForm(o):this.createGuiasRelacionadasForm())}get modelFormGuiasRelacionadas(){return this.modelForm.get("guiasRelacionadas")}deleteOtrosDatos(o){const N=this.modelForm.get("camposAdicionales");N.length>0&&N.removeAt(o)}deleteGuiasRelacionadas(o){const N=this.modelForm.get("guiasRelacionadas");N.length>0&&N.removeAt(o)}openDialog(){this.addInfoModal=!0}closeDialog(){this.modelFormOtrosDatos.controls.map(o=>{const N=o;return(0,v.c2)(N),N.valid}).filter(o=>!o).length||(this.addInfoModal=!1)}}return T.\u0275fac=function(o){return new(o||T)(t.Y36(k.E),t.Y36(g.qu))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-otros-datos-comprobante"]],inputs:{modelForm:"modelForm",isQuotation:"isQuotation",tipoComprobante:"tipoComprobante"},decls:15,vars:12,consts:[["pButton","","type","button","icon","pi pi-ellipsis-h",1,"p-button-rounded","p-button-secondary",3,"click"],["header","Otros datos",3,"visible","modal","responsive","minY","baseZIndex","visibleChange"],[1,"grid"],["class","col-12",4,"ngIf"],[1,"col-12"],["novalidate","",3,"formGroup"],[1,"label-form"],["formArrayName","camposAdicionales",4,"ngFor","ngForOf"],["type","button","pButton","","icon","fa fa-plus","pTooltip","Agregar otro",1,"p-button-rounded","p-button-secondary",2,"margin","0.4em",3,"click"],["type","button","pButton","","icon","pi pi-check","label","Aceptar",3,"click"],["formArrayName","guiasRelacionadas",4,"ngFor","ngForOf"],["type","button","pButton","","icon","fa fa-plus","pTooltip","Agregar gu\xeda",1,"p-button-rounded","p-button-secondary",2,"margin","0.4em",3,"click"],["formArrayName","guiasRelacionadas"],[3,"formGroupName"],[1,"col-5"],["placeholder","","formControlName","serieNumeroGuia","type","text","ngDefaultControl","","pInputText","",2,"width","100%"],["severity","error","text","Ingrese serie/n\xfamero",4,"ngIf"],["placeholder","Seleccione tipo","formControlName","codigoTipoGuia",3,"options"],["severity","error","text","Ingrese tipo de gu\xeda",4,"ngIf"],[1,"col-2",2,"text-align","center"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger",3,"click"],["severity","error","text","Ingrese serie/n\xfamero"],["severity","error","text","Ingrese tipo de gu\xeda"],["formArrayName","camposAdicionales"],["placeholder","Nombre","formControlName","nombreCampo","type","text","ngDefaultControl","","pInputText","",2,"width","100%"],["severity","error","text","Ingrese nombre del campo",4,"ngIf"],["placeholder","Descripci\xf3n","formControlName","valorCampo","type","text","ngDefaultControl","","pInputText","",2,"width","100%"],["severity","error","text","Ingrese valor del campo",4,"ngIf"],["severity","error","text","Ingrese nombre del campo"],["severity","error","text","Ingrese valor del campo"],[1,"col-8"],["formControlName","observacion","type","text","pInputText","",2,"width","100%"],["class","col-12 md:col-4",4,"ngIf"],[1,"col-12","md:col-4"],["pKeyFilter","num","formControlName","otrosTributos","type","text","pInputText","",2,"width","100%"],["formControlName","numeroCotizacion","type","text","pInputText","",2,"width","100%"]],template:function(o,N){1&o&&(t.TgZ(0,"div"),t.TgZ(1,"button",0),t.NdJ("click",function(){return N.openDialog()}),t.qZA(),t.qZA(),t.TgZ(2,"p-dialog",1),t.NdJ("visibleChange",function(at){return N.addInfoModal=at}),t.TgZ(3,"div",2),t.YNc(4,st,7,2,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"p-card"),t.TgZ(7,"form",5),t.TgZ(8,"label",6),t._uU(9,"Otros"),t.qZA(),t.YNc(10,mt,11,3,"div",7),t.TgZ(11,"button",8),t.NdJ("click",function(){return N.addOtrosDatos()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,Ot,10,3,"div",3),t.qZA(),t.TgZ(13,"p-footer"),t.TgZ(14,"button",9),t.NdJ("click",function(){return N.closeDialog()}),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Akn(t.DdM(11,Nt)),t.Q6J("visible",N.addInfoModal)("modal",!0)("responsive",!0)("minY",500)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!N.isQuotation),t.xp6(3),t.Q6J("formGroup",N.modelForm),t.xp6(3),t.Q6J("ngForOf",N.modelFormOtrosDatos.controls),t.xp6(2),t.Q6J("ngIf","01"===N.tipoComprobante||"03"===N.tipoComprobante||"NV"===N.tipoComprobante||"CO"===N.tipoComprobante))},directives:[pt.Hq,ht.V,Y.O5,U.Z,g._Y,g.JL,g.sg,Y.sg,g.CE,g.x0,g.Fj,g.JJ,g.u,G.o,W.q,B.Lt,vt.u,ft.Fr,_.$_],styles:[""]}),T})();var Ft=c(10930),Tt=c(84);function Pt(T,d){1&T&&t._UZ(0,"p-message",15)}function oe(T,d){1&T&&t._UZ(0,"p-message",16)}const ne=function(){return{width:"100%"}};function ie(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"div",0),t.TgZ(3,"div",7),t.TgZ(4,"label",8),t._uU(5,"Fecha cuota (*)"),t.qZA(),t._UZ(6,"p-calendar",9),t.YNc(7,Pt,1,0,"p-message",10),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"label",8),t._uU(10,"Monto (*)"),t.qZA(),t._UZ(11,"input",11),t.YNc(12,oe,1,0,"p-message",12),t.qZA(),t.TgZ(13,"div",13),t.TgZ(14,"button",14),t.NdJ("click",function(){const at=t.CHM(o).index;return t.oxw().deleteCuota(at)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=d.$implicit,N=d.index,F=t.oxw();t.xp6(1),t.Q6J("formGroupName",N),t.xp6(5),t.Akn(t.DdM(7,ne)),t.Q6J("locale",F.listas.calendarEs)("minDate",F.minFechaEmision),t.xp6(1),t.Q6J("ngIf",o.get("fecha").touched&&(null==o.get("fecha").errors?null:o.get("fecha").errors.required)),t.xp6(5),t.Q6J("ngIf",o.get("monto").touched&&(null==o.get("monto").errors?null:o.get("monto").errors.required))}}let re=(()=>{class T{constructor(o,N,F){this.listas=o,this.fb=N,this.currencyService=F,this.minFechaEmision=new Date}ngOnInit(){if("1001"===this.modelForm.get("codigoTipoOperacion").value&&this.montoDetraccion){let o;o="PEN"===this.modelForm.value.codigoMoneda?this.montoDetraccion:this.currencyService.exchange({codigoMonedaOrigen:"PEN",codigoMonedaDestino:this.modelForm.value.codigoMoneda,montoOrigen:this.montoDetraccion}),this.addCuota((this.totalVenta-o).toFixed(2))}this.montoRetencion&&this.addCuota((this.totalVenta-this.montoRetencion).toFixed(2))}createCuotaForm(o){let N=new Date,F="";return o&&(N=o.fecha,F=o.monto),this.fb.group({fecha:[N,[g.kI.required]],monto:[F,[g.kI.required]]})}get modelFormCuotas(){return this.modelForm.get("cuotas")}addCuota(o){o&&(o=Number(o));const N=this.modelForm.get("cuotas");let F;F=N.length?N.at(N.length-1).value.fecha:this.modelForm.get("fechaEmision").value;const at=new Date(F);at.setMonth(at.getMonth()+1),N.push(this.createCuotaForm({fecha:at,monto:o}))}clear(){this.modelForm.get("cuotas").clear()}deleteCuota(o){const N=this.modelForm.get("cuotas");N.length>0&&N.removeAt(o)}}return T.\u0275fac=function(o){return new(o||T)(t.Y36(k.E),t.Y36(g.qu),t.Y36(R.i))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-cuotas-comprobante"]],inputs:{modelForm:"modelForm",totalVenta:"totalVenta",montoDetraccion:"montoDetraccion",montoRetencion:"montoRetencion"},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12"],["novalidate","",3,"formGroup"],["formArrayName","cuotas",4,"ngFor","ngForOf"],["type","button","pButton","","icon","fa fa-plus","pTooltip","Agregar cuota",1,"p-button-rounded","p-button-secondary",2,"margin","0.4em",3,"click"],["formArrayName","cuotas"],[3,"formGroupName"],[1,"col-5"],[1,"label-form"],["appendTo","body","placeholder","Fecha","formControlName","fecha","dateFormat","dd/mm/yy",3,"locale","minDate"],["severity","error","text","Ingrese fecha",4,"ngIf"],["placeholder","Monto","formControlName","monto","type","text","ngDefaultControl","","pInputText","",2,"width","100%"],["severity","error","text","Ingrese monto",4,"ngIf"],[1,"col-2",2,"text-align","center"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger",3,"click"],["severity","error","text","Ingrese fecha"],["severity","error","text","Ingrese monto"]],template:function(o,N){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"p-card"),t.TgZ(3,"form",2),t.YNc(4,ie,15,8,"div",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return N.addCuota()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Q6J("formGroup",N.modelForm),t.xp6(1),t.Q6J("ngForOf",N.modelFormCuotas.controls))},directives:[U.Z,g._Y,g.JL,g.sg,Y.sg,g.CE,g.x0,lt.f,g.JJ,g.u,Y.O5,W.q,g.Fj,G.o,pt.Hq,vt.u],styles:[""]}),T})();var ae=c(75875),le=c(94855),Kt=c(98952),se=c(9757),ce=c(12145);const ue=["inputTotalEdit"];function fe(T,d){if(1&T&&t._UZ(0,"input",6),2&T){const o=t.oxw();t.Q6J("value",o.total)}}function pe(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().openModalEditTotal()}),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("label",o.total)}}const de=function(){return{width:"30vw"}};let me=(()=>{class T{constructor(){this.changeTotal=new t.vpe,this.displayModalEditTotal=!1}ngOnInit(){this.totalEdit=Number(this.total)}openModalEditTotal(){this.totalEdit=Number(this.total),this.displayModalEditTotal=!0,setTimeout(()=>{this.inputTotalEdit.nativeElement.focus(),this.inputTotalEdit.nativeElement.select()},30)}doChangeTotal(){this.changeTotal.emit(Number(this.totalEdit)),this.displayModalEditTotal=!1}enterInput(o){"Enter"===o.code&&this.doChangeTotal()}}return T.\u0275fac=function(o){return new(o||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-total-item"]],viewQuery:function(o,N){if(1&o&&t.Gf(ue,5),2&o){let F;t.iGM(F=t.CRH())&&(N.inputTotalEdit=F.first)}},inputs:{total:"total",esGasolinera:"esGasolinera"},outputs:{changeTotal:"changeTotal"},decls:7,vars:11,consts:[["disabled","","style","width: 100%;","type","text","pInputText","",3,"value",4,"ngIf"],["pButton","","type","button","class","p-button-secondary",3,"label","click",4,"ngIf"],["appendTo","body","header","Total producto",3,"visible","modal","baseZIndex","draggable","resizable","visibleChange"],["pKeyFilter","num","type","text","pInputText","",3,"ngModel","keypress","ngModelChange"],["inputTotalEdit",""],["type","button","pButton","","icon","pi pi-check","label","Aceptar",3,"click"],["disabled","","type","text","pInputText","",2,"width","100%",3,"value"],["pButton","","type","button",1,"p-button-secondary",3,"label","click"]],template:function(o,N){1&o&&(t.YNc(0,fe,1,1,"input",0),t.YNc(1,pe,1,1,"button",1),t.TgZ(2,"p-dialog",2),t.NdJ("visibleChange",function(at){return N.displayModalEditTotal=at}),t.TgZ(3,"input",3,4),t.NdJ("keypress",function(at){return N.enterInput(at)})("ngModelChange",function(at){return N.totalEdit=at}),t.qZA(),t.TgZ(5,"p-footer"),t.TgZ(6,"button",5),t.NdJ("click",function(){return N.doChangeTotal()}),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.Q6J("ngIf",!N.esGasolinera),t.xp6(1),t.Q6J("ngIf",N.esGasolinera),t.xp6(1),t.Akn(t.DdM(10,de)),t.Q6J("visible",N.displayModalEditTotal)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1),t.xp6(1),t.Q6J("ngModel",N.totalEdit))},directives:[Y.O5,G.o,pt.Hq,ht.V,g.Fj,ft.Fr,g.JJ,g.On,_.$_],styles:[""]}),T})();var he=c(29729),Ut=c(49256),ge=c(73407),Wt=c(93036);function ve(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(o),t.oxw().calculoPorPorcentaje=!1}),t.qZA()}}function _e(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(o),t.oxw().calculoPorPorcentaje=!0}),t.qZA()}}function ye(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"input",7),t.NdJ("input",function(){return t.CHM(o),t.oxw().changePorcentaje()})("ngModelChange",function(F){return t.CHM(o),t.oxw().porcentaje=F}),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("ngModel",o.porcentaje)}}function be(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"input",8),t.NdJ("input",function(){return t.CHM(o),t.oxw().changeValor()})("ngModelChange",function(F){return t.CHM(o),t.oxw().valor=F}),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("ngModel",o.valor)}}let Ce=(()=>{class T{constructor(){this.calculoPorPorcentaje=!1,this.onChange=o=>{},this.onTouched=o=>{}}ngOnInit(){}propagateChange(){this.onChange(this.valor),this.onTouched(this.valor)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}changePorcentaje(){this.valor=this.porcentaje?this.total*(this.porcentaje/100):0,this.propagateChange()}changeValor(){this.porcentaje=this.valor?100*this.valor/this.total:0,this.propagateChange()}writeValue(o){o&&(this.valor=Number(o),this.changeValor(),this.propagateChange())}}return T.\u0275fac=function(o){return new(o||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-porcentaje"]],inputs:{total:"total",calculoPorPorcentaje:"calculoPorPorcentaje"},features:[t._Bn([{provide:g.JU,useExisting:(0,t.Gpc)(()=>T),multi:!0}])],decls:5,vars:4,consts:[[1,"p-inputgroup"],["pTooltip","Cambiar a valor","pButton","","type","button","icon","fa fa-percent",3,"click",4,"ngIf"],["pTooltip","Cambiar a porcentaje","pButton","","type","button","icon","fa fa-exchange",3,"click",4,"ngIf"],["pKeyFilter","num","placeholder","Porcentaje","style","width: 100%;","type","text","pInputText","",3,"ngModel","input","ngModelChange",4,"ngIf"],["pKeyFilter","num","placeholder","Valor","style","width: 100%;","type","text","pInputText","",3,"ngModel","input","ngModelChange",4,"ngIf"],["pTooltip","Cambiar a valor","pButton","","type","button","icon","fa fa-percent",3,"click"],["pTooltip","Cambiar a porcentaje","pButton","","type","button","icon","fa fa-exchange",3,"click"],["pKeyFilter","num","placeholder","Porcentaje","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["pKeyFilter","num","placeholder","Valor","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"]],template:function(o,N){1&o&&(t.TgZ(0,"div",0),t.YNc(1,ve,1,0,"button",1),t.YNc(2,_e,1,0,"button",2),t.YNc(3,ye,1,1,"input",3),t.YNc(4,be,1,1,"input",4),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",N.calculoPorPorcentaje),t.xp6(1),t.Q6J("ngIf",!N.calculoPorPorcentaje),t.xp6(1),t.Q6J("ngIf",N.calculoPorPorcentaje),t.xp6(1),t.Q6J("ngIf",!N.calculoPorPorcentaje))},directives:[Y.O5,vt.u,pt.Hq,g.Fj,ft.Fr,G.o,g.JJ,g.On],styles:[""]}),T})();const Te=["textAreaDetalle"];function xe(T,d){1&T&&t._UZ(0,"p-message",34)}const Xt=function(){return{width:"100%"}};function Ae(T,d){if(1&T&&(t.TgZ(0,"div",31),t.TgZ(1,"label",7),t._uU(2,"Fecha inicio plan (*)"),t.qZA(),t._UZ(3,"p-calendar",32),t.YNc(4,xe,1,0,"p-message",33),t.qZA()),2&T){const o=t.oxw(2);t.xp6(3),t.Akn(t.DdM(4,Xt)),t.Q6J("locale",o.listas.calendarEs),t.xp6(1),t.Q6J("ngIf",o.modelForm.get("fechaInicioPlan").touched&&(null==o.modelForm.get("fechaInicioPlan").errors?null:o.modelForm.get("fechaInicioPlan").errors.required))}}function Ze(T,d){1&T&&t._UZ(0,"p-message",38)}function Ee(T,d){if(1&T&&(t.TgZ(0,"div"),t.TgZ(1,"label",7),t._uU(2,"Descuento"),t.qZA(),t._UZ(3,"app-porcentaje",36),t.YNc(4,Ze,1,0,"p-message",37),t.qZA()),2&T){const o=t.oxw(3);t.xp6(3),t.Q6J("total",o.modelForm.get("montoBaseDescuento").value)("calculoPorPorcentaje",!0),t.xp6(1),t.Q6J("ngIf",o.modelForm.get("descuento").touched&&(null==o.modelForm.get("descuento").errors?null:o.modelForm.get("descuento").errors.max))}}function Oe(T,d){if(1&T&&(t.TgZ(0,"div",17),t.YNc(1,Ee,5,3,"div",35),t.qZA()),2&T){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.modelForm.get("montoBaseDescuento").value)}}function Ie(T,d){1&T&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Lote"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Stock"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Caducidad"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Empresa"),t.qZA(),t.qZA())}function Ne(T,d){1&T&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Serie"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Cantidad"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Empresa"),t.qZA(),t.qZA())}function Pe(T,d){if(1&T&&(t.YNc(0,Ie,11,0,"tr",35),t.YNc(1,Ne,7,0,"tr",35)),2&T){const o=t.oxw(3);t.Q6J("ngIf","LOTE"===o.producto.tipoLote),t.xp6(1),t.Q6J("ngIf","SERIE"===o.producto.tipoLote)}}function ke(T,d){1&T&&t._UZ(0,"p-message",51)}function we(T,d){1&T&&t._UZ(0,"p-message",52)}function De(T,d){1&T&&t._UZ(0,"p-message",53)}function qe(T,d){if(1&T&&(t.TgZ(0,"tr",45),t.TgZ(1,"td"),t.TgZ(2,"span",46),t._uU(3,"Lote"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"span",46),t._uU(7,"Stock"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"span",46),t._uU(11,"Caducidad"),t.qZA(),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td"),t.TgZ(15,"span",46),t._uU(16,"Cantidad"),t.qZA(),t._UZ(17,"input",47),t.YNc(18,ke,1,0,"p-message",48),t.YNc(19,we,1,0,"p-message",49),t.YNc(20,De,1,0,"p-message",50),t.qZA(),t.TgZ(21,"td"),t.TgZ(22,"span",46),t._uU(23,"Empresa"),t.qZA(),t._uU(24),t.qZA(),t.qZA()),2&T){const o=t.oxw(),F=o.$implicit;let at,K,nt,_t;t.Q6J("formGroupName",o.rowIndex),t.xp6(4),t.hij(" ",null==(at=F.get("lote"))||null==at.value?null:at.value.serie," "),t.xp6(4),t.hij(" ",null==(K=F.get("lote"))||null==K.value?null:K.value.cantidad," "),t.xp6(4),t.hij(" ",t.xi3(13,8,null==(nt=F.get("lote"))||null==nt.value?null:nt.value.fechaVencimiento,"dd/MM/yyyy")," "),t.xp6(6),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.required)),t.xp6(1),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.min)),t.xp6(1),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.max)),t.xp6(4),t.hij(" ",null==(_t=F.get("lote"))||null==_t.value||null==_t.value.empresaAdjunta?null:_t.value.empresaAdjunta.razonSocial," ")}}function Me(T,d){1&T&&t._UZ(0,"p-message",51)}function Se(T,d){1&T&&t._UZ(0,"p-message",52)}function Ve(T,d){1&T&&t._UZ(0,"p-message",52)}function Ue(T,d){if(1&T&&(t.TgZ(0,"tr",45),t.TgZ(1,"td"),t.TgZ(2,"span",46),t._uU(3,"Serie"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"span",46),t._uU(7,"Cantidad"),t.qZA(),t._UZ(8,"input",47),t.YNc(9,Me,1,0,"p-message",48),t.YNc(10,Se,1,0,"p-message",49),t.YNc(11,Ve,1,0,"p-message",49),t.qZA(),t.TgZ(12,"td"),t.TgZ(13,"span",46),t._uU(14,"Empresa"),t.qZA(),t._uU(15),t.qZA(),t.qZA()),2&T){const o=t.oxw(),F=o.$implicit;let at,K;t.Q6J("formGroupName",o.rowIndex),t.xp6(4),t.hij(" ",null==(at=F.get("lote"))||null==at.value?null:at.value.serie," "),t.xp6(5),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.required)),t.xp6(1),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.min)),t.xp6(1),t.Q6J("ngIf",F.get("cantidad").touched&&(null==F.get("cantidad").errors?null:F.get("cantidad").errors.max)),t.xp6(4),t.hij(" ",null==(K=F.get("lote"))||null==K.value||null==K.value.empresaAdjunta?null:K.value.empresaAdjunta.razonSocial," ")}}function Re(T,d){if(1&T&&(t.YNc(0,qe,25,11,"tr",44),t.YNc(1,Ue,16,6,"tr",44)),2&T){const o=t.oxw(3);t.Q6J("ngIf","LOTE"===o.producto.tipoLote),t.xp6(1),t.Q6J("ngIf","SERIE"===o.producto.tipoLote)}}function Fe(T,d){if(1&T&&(t.TgZ(0,"div",4),t.TgZ(1,"div",15),t._uU(2),t.qZA(),t.qZA()),2&T){const o=t.oxw(3);t.xp6(2),t.hij(" Restante: ",o.faltantes," ")}}function je(T,d){1&T&&t._UZ(0,"p-message",54)}function wt(T,d){if(1&T&&(t.TgZ(0,"div",12),t.TgZ(1,"label",7),t._uU(2,"Lotes/Series"),t.qZA(),t.TgZ(3,"p-table",39),t.YNc(4,Pe,2,2,"ng-template",40),t.YNc(5,Re,2,2,"ng-template",41),t.YNc(6,Fe,3,1,"ng-template",42),t.qZA(),t.YNc(7,je,1,0,"p-message",43),t.qZA()),2&T){const o=t.oxw(2);t.xp6(3),t.Q6J("value",o.modelFormLotes.controls)("responsive",!0),t.xp6(4),t.Q6J("ngIf",o.modelForm.get("lotes").touched&&(null==o.modelForm.get("lotes").errors?null:o.modelForm.get("lotes").errors.qtyLotes))}}function Zt(T,d){1&T&&t._UZ(0,"p-message",55)}function Le(T,d){1&T&&t._UZ(0,"p-message",56)}function Be(T,d){1&T&&t._UZ(0,"p-message",57)}function Je(T,d){1&T&&t._UZ(0,"p-message",57)}function Qe(T,d){1&T&&t._UZ(0,"p-message",58)}function Ye(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"form",3),t.TgZ(1,"div",4),t.YNc(2,Ae,5,5,"div",5),t.TgZ(3,"div",6),t.TgZ(4,"label",7),t._uU(5,"Detalle"),t.qZA(),t.TgZ(6,"textarea",8,9),t._uU(8,"                                                      "),t.qZA(),t.qZA(),t.YNc(9,Oe,2,1,"div",10),t.YNc(10,wt,8,3,"div",11),t.TgZ(11,"div",12),t.TgZ(12,"p-fieldset",13),t.NdJ("collapsedChange",function(F){return t.CHM(o),t.oxw().collapsedImpuestosAdicionales=F}),t.TgZ(13,"div",4),t.TgZ(14,"div",12),t.TgZ(15,"label",7),t._uU(16,"ICBPER"),t.qZA(),t.TgZ(17,"p-card"),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t.TgZ(20,"label",7),t._uU(21,"Impuesto bolsas plasticas"),t.qZA(),t._UZ(22,"p-selectButton",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",12),t.TgZ(24,"label",7),t._uU(25,"Isc"),t.qZA(),t.TgZ(26,"p-card"),t.TgZ(27,"div",14),t.TgZ(28,"div",17),t.TgZ(29,"label",7),t._uU(30,"Tipo c\xe1lculo"),t.qZA(),t._UZ(31,"p-dropdown",18),t.YNc(32,Zt,1,0,"p-message",19),t.qZA(),t.TgZ(33,"div",17),t.TgZ(34,"label",7),t._uU(35,"Porcentaje Isc"),t.qZA(),t.TgZ(36,"div",20),t.TgZ(37,"span",21),t._UZ(38,"span",22),t.qZA(),t._UZ(39,"input",23),t.qZA(),t.YNc(40,Le,1,0,"p-message",24),t.YNc(41,Be,1,0,"p-message",25),t.YNc(42,Je,1,0,"p-message",25),t.qZA(),t.TgZ(43,"div",17),t.TgZ(44,"label",7),t._uU(45,"Monto Isc"),t.qZA(),t._UZ(46,"input",26),t.YNc(47,Qe,1,0,"p-message",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",28),t.TgZ(49,"button",29),t.NdJ("click",function(){return t.CHM(o),t.oxw().dialogOptions=!1}),t.qZA(),t.TgZ(50,"button",30),t.NdJ("click",function(){return t.CHM(o),t.oxw().saveDetail()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("formGroup",o.modelForm),t.xp6(2),t.Q6J("ngIf",o.existPlanOnItems),t.xp6(7),t.Q6J("appPermission","VENTAS_AGREGAR_DESCUENTO"),t.xp6(1),t.Q6J("ngIf",o.serieLote),t.xp6(2),t.Q6J("toggleable",!0)("collapsed",o.collapsedImpuestosAdicionales),t.xp6(10),t.Q6J("options",o.listas.tiposBooleanTexto),t.xp6(9),t.Akn(t.DdM(15,Xt)),t.Q6J("options",o.listas.tiposCalculoIsc),t.xp6(1),t.Q6J("ngIf",o.modelForm.get("codigoTipoCalculoIsc").touched&&(null==o.modelForm.get("codigoTipoCalculoIsc").errors?null:o.modelForm.get("codigoTipoCalculoIsc").errors.required)),t.xp6(8),t.Q6J("ngIf",o.modelForm.get("porcentajeIsc").touched&&(null==o.modelForm.get("porcentajeIsc").errors?null:o.modelForm.get("porcentajeIsc").errors.required)),t.xp6(1),t.Q6J("ngIf",o.modelForm.get("porcentajeIsc").touched&&(null==o.modelForm.get("porcentajeIsc").errors?null:o.modelForm.get("porcentajeIsc").errors.min)),t.xp6(1),t.Q6J("ngIf",o.modelForm.get("porcentajeIsc").touched&&(null==o.modelForm.get("porcentajeIsc").errors?null:o.modelForm.get("porcentajeIsc").errors.max)),t.xp6(5),t.Q6J("ngIf",o.modelForm.get("isc").touched&&(null==o.modelForm.get("isc").errors?null:o.modelForm.get("isc").errors.required))}}const $e=function(){return{width:"800px"}};class Mt{constructor(d,o,N){this.fb=d,this.listas=o,this.messageService=N,this.unsubscribe$=new u.xQ,this.saveForm=new t.vpe,this.collapsedImpuestosAdicionales=!0,this.configCompany={},this.dialogOptions=!1}ngOnInit(){this.configCompany$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>{this.configCompany=d,this.initObs()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}get existPlanOnItems(){return this.modelForm&&this.modelForm.getRawValue().producto&&"PLAN"===this.modelForm.getRawValue().producto.tipoProducto||this.modelForm&&this.modelForm.getRawValue().producto&&"PAQUETE"===this.modelForm.getRawValue().producto.tipoProducto&&this.modelForm.getRawValue().producto.paqueteItems&&this.modelForm.getRawValue().producto.paqueteItems.map(d=>d.productoItem).find(d=>"PLAN"===d.tipoProducto)}get validForm(){return this.modelForm.valid}openOptionsDetail(){this.dialogOptions=!0;const d=this.modelForm.get("montoBaseDescuento").value;this.modelForm.patchValue({codigoTipoCalculoIsc:this.modelForm.get("codigoTipoCalculoIsc").value?this.modelForm.get("codigoTipoCalculoIsc").value:"01",montoBaseDescuento:d}),this.modelForm.get("isc").disable(),this.modelForm.get("tributoBolsa").disable(),this.modelForm.get("descuento").setValidators([v.vd,g.kI.max(d)]),setTimeout(()=>this.textAreaDetalle.nativeElement.focus(),50)}get modelFormLotes(){return this.modelForm.get("lotes")}get serieLote(){const d=this.modelForm.get("producto").value;return d&&"object"==typeof d&&d.loteSerie}get producto(){return this.modelForm.get("producto").value}get faltantes(){return Number(this.modelForm.get("cantidad").value)-this.modelFormLotes.getRawValue().map(d=>d.cantidad).reduce(v.IH,0)}initObs(){this.modelForm.valueChanges.pipe((0,y.Rs)(this.unsubscribe$)).pipe((0,Ut.distinctUntilChanged)((d,o)=>d.isc===o.isc&&d.porcentajeIsc===o.porcentajeIsc)).subscribe(d=>{const o=this.modelForm.get("cantidad").value?this.modelForm.get("cantidad").value:0,N=(this.modelForm.get("valorUnitario").value?this.modelForm.get("valorUnitario").value:0)*o;d.isc||d.porcentajeIsc?(this.modelForm.get("isc").setValidators([g.kI.required,g.kI.min(0),g.kI.max(N)]),this.modelForm.get("porcentajeIsc").setValidators([g.kI.required,g.kI.min(0),g.kI.max(100)])):!d.isc&&!d.porcentajeIsc&&(this.modelForm.get("isc").clearValidators(),this.modelForm.get("porcentajeIsc").clearValidators()),this.modelForm.get("isc").updateValueAndValidity(),this.modelForm.get("porcentajeIsc").updateValueAndValidity()}),this.modelForm.get("porcentajeIsc").valueChanges.pipe((0,y.Rs)(this.unsubscribe$)).pipe((0,Ut.distinctUntilChanged)()).subscribe(d=>{const o=Number(d)/100,N=this.modelForm.get("cantidad").value?this.modelForm.get("cantidad").value:0,F=(this.modelForm.get("valorUnitario").value?this.modelForm.get("valorUnitario").value:0)*N;this.modelForm.get("porcentajeIsc").valid&&this.modelForm.get("porcentajeIsc").value?this.modelForm.patchValue({isc:(F*o).toFixed(this.configCompany.cantDecimales)}):this.modelForm.patchValue({isc:null})}),this.modelForm.get("descuento").valueChanges.pipe((0,y.Rs)(this.unsubscribe$)).pipe((0,Ut.distinctUntilChanged)()).subscribe(d=>{const o=this.modelForm.get("montoBaseDescuento").value?this.modelForm.get("montoBaseDescuento").value:0;let N;const F=Number(this.modelForm.get("descuento").value);console.log("Calculando % descuento",F,o),F&&(N=F/o,console.log("Calculando % descuento",N),this.modelForm.patchValue({porcentajeDescuento:N}))}),this.modelForm.get("producto").valueChanges.pipe((0,y.Rs)(this.unsubscribe$)).pipe((0,Ut.distinctUntilChanged)()).subscribe(d=>{this.setValidationsPlan()}),this.setValidationsPlan()}saveDetail(){(0,v.c2)(this.modelForm),this.saveForm.emit(),this.dialogOptions=!1}setValidationsPlan(){this.existPlanOnItems?(this.modelForm.get("fechaInicioPlan").setValue(new Date),this.modelForm.get("fechaInicioPlan").setValidators([g.kI.required]),this.modelForm.get("fechaInicioPlan").updateValueAndValidity()):(this.modelForm.get("fechaInicioPlan").setValue(void 0),this.modelForm.get("fechaInicioPlan").clearValidators(),this.modelForm.get("fechaInicioPlan").updateValueAndValidity())}}Mt.\u0275fac=function(d){return new(d||Mt)(t.Y36(g.qu),t.Y36(k.E),t.Y36(_.ez))},Mt.\u0275cmp=t.Xpm({type:Mt,selectors:[["app-opciones-producto-item"]],viewQuery:function(d,o){if(1&d&&t.Gf(Te,5),2&d){let N;t.iGM(N=t.CRH())&&(o.textAreaDetalle=N.first)}},inputs:{disabled:"disabled",modelForm:"modelForm"},outputs:{saveForm:"saveForm"},decls:3,vars:8,consts:[["pButton","","type","button","icon","fa fa-cog","pTooltip","Opciones",1,"p-button-primary",2,"margin-left","0.1em","margin-right","0.1em",3,"disabled","click"],["appendTo","body","header","Opciones de producto",3,"visible","modal","responsive","visibleChange"],["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"grid"],["class","col-12 md:col-6",4,"ngIf"],[1,"col-8"],[1,"label-form"],["placeholder","Art\xedculo","formControlName","detalle","rows","3","pInputTextarea","","autoResize","autoResize",1,"form-control",2,"width","100%","margin-bottom","0.2em"],["textAreaDetalle",""],["class","col-4",4,"appPermission"],["class","col-12",4,"ngIf"],[1,"col-12"],["legend","Impuestos adicionales",3,"toggleable","collapsed","collapsedChange"],[1,"grid","p-fluid"],[1,"col-6"],["formControlName","tieneImpuestoBolsas",3,"options"],[1,"col-4"],["appendTo","body","formControlName","codigoTipoCalculoIsc","placeholder","Seleccione tipo isc",3,"options"],["severity","error","text","Ingrese tipo c\xe1lculo Isc",4,"ngIf"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa","fa-percent"],["pKeyFilter","num","formControlName","porcentajeIsc","placeholder","Porcentaje Isc","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese porcentaje isc",4,"ngIf"],["severity","error","text","Porcentaje inv\xe1lido",4,"ngIf"],["pKeyFilter","num","formControlName","isc","placeholder","Monto Isc","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese monto isc",4,"ngIf"],[1,"col-12","p-text-center"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary","m-1",3,"click"],["pButton","","type","button","label","Aceptar",1,"p-button-primary","m-1",3,"click"],[1,"col-12","md:col-6"],["appendTo","body","placeholder","Fecha de inicio membresia","formControlName","fechaInicioPlan","dateFormat","dd/mm/yy",3,"locale"],["severity","error","text","Ingrese fecha",4,"ngIf"],["severity","error","text","Ingrese fecha"],[4,"ngIf"],["formControlName","descuento",3,"total","calculoPorPorcentaje"],["severity","error","text","El monto de descuento no debe superar el total del producto",4,"ngIf"],["severity","error","text","El monto de descuento no debe superar el total del producto"],["formArrayName","lotes",3,"value","responsive"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["severity","error","text","Cantidad de lotes/series no corresponde al stock.",4,"ngIf"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],[1,"p-column-title"],["type","text","pInputText","","formControlName","cantidad","pKeyFilter","num"],["severity","error","text","Ingrese cantidad",4,"ngIf"],["severity","error","text","Valor incorrecto",4,"ngIf"],["severity","error","text","No se debe superar el stock del lote",4,"ngIf"],["severity","error","text","Ingrese cantidad"],["severity","error","text","Valor incorrecto"],["severity","error","text","No se debe superar el stock del lote"],["severity","error","text","Cantidad de lotes/series no corresponde al stock."],["severity","error","text","Ingrese tipo c\xe1lculo Isc"],["severity","error","text","Ingrese porcentaje isc"],["severity","error","text","Porcentaje inv\xe1lido"],["severity","error","text","Ingrese monto isc"]],template:function(d,o){1&d&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.openOptionsDetail()}),t.qZA(),t.TgZ(1,"p-dialog",1),t.NdJ("visibleChange",function(F){return o.dialogOptions=F}),t.YNc(2,Ye,51,16,"form",2),t.qZA()),2&d&&(t.Q6J("disabled",o.disabled),t.xp6(1),t.Akn(t.DdM(7,$e)),t.Q6J("visible",o.dialogOptions)("modal",!0)("responsive",!0),t.xp6(1),t.Q6J("ngIf",o.modelForm))},directives:[pt.Hq,vt.u,ht.V,Y.O5,g._Y,g.JL,g.sg,lt.f,g.JJ,g.u,W.q,g.Fj,ge.g,Wt.l,Ce,Kt.iA,g.CE,_.jx,g.x0,G.o,ft.Fr,j.p,U.Z,D.UN,B.Lt],pipes:[Y.uU],styles:[""]}),(0,s.gn)([(0,i.Ph)(n.Z.getConfig)],Mt.prototype,"configCompany$",void 0);var ze=c(68297),Ge=c(80267),He=c(77121);const Ke=["agregarProductoComponent"],We=["otrosDatosComprobanteComponent"],Xe=["cuotasComprobanteComponent"],to=["descripcionProducto"],eo=["totalItemComponent"],oo=["optionsItemProduct"];function no(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"p-selectButton",74),t.NdJ("onChange",function(){return t.CHM(o),t.oxw(2).changeTipoComprobanteVenta()}),t.qZA()}if(2&T){const o=t.oxw(2);t.Q6J("options",o.listas.tiposComprobanteVenta)}}const Et=function(){return{width:"100%"}};function io(T,d){if(1&T&&t._UZ(0,"p-dropdown",75),2&T){const o=t.oxw(2);t.Akn(t.DdM(3,Et)),t.Q6J("options",o.listas.tiposComprobantesNotaCredito)}}function ro(T,d){if(1&T&&t._UZ(0,"p-dropdown",75),2&T){const o=t.oxw(2);t.Akn(t.DdM(3,Et)),t.Q6J("options",o.listas.tiposComprobantesNotaDebito)}}function jt(T,d){if(1&T&&(t.TgZ(0,"div",2),t.TgZ(1,"label",7),t._uU(2,"Tipo (*)"),t.qZA(),t.YNc(3,no,1,1,"p-selectButton",72),t.YNc(4,io,1,4,"p-dropdown",73),t.YNc(5,ro,1,4,"p-dropdown",73),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Q6J("ngIf","03"===o.mf.get("tipoComprobante").value||"01"===o.mf.get("tipoComprobante").value||"NV"===o.mf.get("tipoComprobante").value),t.xp6(1),t.Q6J("ngIf","07"===o.mf.get("tipoComprobante").value),t.xp6(1),t.Q6J("ngIf","08"===o.mf.get("tipoComprobante").value)}}function qt(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"p-dropdown",76),t.NdJ("onChange",function(){return t.CHM(o),t.oxw().onSelectSerie()}),t.qZA()}if(2&T){const o=t.oxw();t.Akn(t.DdM(3,Et)),t.Q6J("options",o.series)}}function ao(T,d){1&T&&t._UZ(0,"input",77)}function lo(T,d){1&T&&t._UZ(0,"p-message",78)}function Lt(T,d){1&T&&t._UZ(0,"p-message",79)}function te(T,d){1&T&&t._UZ(0,"p-message",83)}function ee(T,d){if(1&T&&(t.TgZ(0,"div",80),t.TgZ(1,"label",7),t._uU(2,"Fecha (*)"),t.qZA(),t._UZ(3,"p-calendar",81),t.YNc(4,te,1,0,"p-message",82),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Akn(t.DdM(6,Et)),t.Q6J("locale",o.listas.calendarEs)("minDate",o.minFechaEmision)("maxDate",o.maxFechaEmision),t.xp6(1),t.Q6J("ngIf",o.mf.get("fechaEmision").touched&&(null==o.mf.get("fechaEmision").errors?null:o.mf.get("fechaEmision").errors.required))}}function so(T,d){1&T&&t._UZ(0,"p-message",83)}function co(T,d){if(1&T&&(t.TgZ(0,"div",80),t.TgZ(1,"label",7),t._uU(2,"Vencimiento"),t.qZA(),t._UZ(3,"p-calendar",84),t.YNc(4,so,1,0,"p-message",82),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Akn(t.DdM(4,Et)),t.Q6J("locale",o.listas.calendarEs),t.xp6(1),t.Q6J("ngIf",o.mf.get("fechaVencimiento").touched&&(null==o.mf.get("fechaVencimiento").errors?null:o.mf.get("fechaVencimiento").errors.required))}}function uo(T,d){if(1&T&&(t.TgZ(0,"span",85),t._uU(1),t.ALo(2,"moneda"),t.qZA()),2&T){const o=d.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.label,"moneda"))}}function fo(T,d){1&T&&(t._uU(0),t.ALo(1,"moneda")),2&T&&t.hij(" ",t.xi3(1,1,d.$implicit.label,"moneda")," ")}function po(T,d){1&T&&t._UZ(0,"p-message",86)}function mo(T,d){1&T&&t._UZ(0,"p-message",90)}function ho(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"label",7),t._uU(2,"Tipo operaci\xf3n (*)"),t.qZA(),t.TgZ(3,"p-dropdown",88),t.NdJ("onChange",function(){return t.CHM(o),t.oxw().changeTipoOperacion()}),t.qZA(),t.YNc(4,mo,1,0,"p-message",89),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("hidden","03"!==o.mf.get("tipoComprobante").value&&"01"!==o.mf.get("tipoComprobante").value),t.xp6(3),t.Akn(t.DdM(5,Et)),t.Q6J("options",o.listas.tiposOperacion),t.xp6(1),t.Q6J("ngIf",o.mf.get("codigoTipoOperacion").touched&&(null==o.mf.get("codigoTipoOperacion").errors?null:o.mf.get("codigoTipoOperacion").errors.required))}}function go(T,d){1&T&&t._UZ(0,"p-message",93)}function J(T,d){if(1&T&&(t.TgZ(0,"div",87),t.TgZ(1,"label",7),t._uU(2,"Tipo detracci\xf3n (*)"),t.qZA(),t._UZ(3,"p-dropdown",91),t.YNc(4,go,1,0,"p-message",92),t.qZA()),2&T){const o=t.oxw();t.Q6J("hidden","1001"!==o.mf.get("codigoTipoOperacion").value),t.xp6(3),t.Akn(t.DdM(7,Et)),t.Q6J("filter",!0)("showClear",!0)("options",o.listas.tiposDetraccion),t.xp6(1),t.Q6J("ngIf",o.mf.get("codigoDetraccion").touched&&(null==o.mf.get("codigoDetraccion").errors?null:o.mf.get("codigoDetraccion").errors.required))}}function S(T,d){1&T&&t._UZ(0,"p-message",96)}function P(T,d){if(1&T&&(t.TgZ(0,"div",87),t.TgZ(1,"label",7),t._uU(2,"Medio de pago (*)"),t.qZA(),t._UZ(3,"p-dropdown",94),t.YNc(4,S,1,0,"p-message",95),t.qZA()),2&T){const o=t.oxw();t.Q6J("hidden","1001"!==o.mf.get("codigoTipoOperacion").value),t.xp6(3),t.Akn(t.DdM(7,Et)),t.Q6J("filter",!0)("showClear",!0)("options",o.listas.mediosPago),t.xp6(1),t.Q6J("ngIf",o.mf.get("codigoMedioPago").touched&&(null==o.mf.get("codigoMedioPago").errors?null:o.mf.get("codigoMedioPago").errors.required))}}function H(T,d){1&T&&t._UZ(0,"p-message",99)}function tt(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"label",7),t._uU(2,"Porcentaje detracci\xf3n (*)"),t.qZA(),t.TgZ(3,"input",97),t.NdJ("input",function(){return t.CHM(o),t.oxw().calculoTotal()}),t.qZA(),t.YNc(4,H,1,0,"p-message",98),t.qZA()}if(2&T){const o=t.oxw();t.Q6J("hidden","1001"!==o.mf.get("codigoTipoOperacion").value),t.xp6(4),t.Q6J("ngIf",o.mf.get("porcentajeDetraccion").touched&&(null==o.mf.get("porcentajeDetraccion").errors?null:o.mf.get("porcentajeDetraccion").errors.required))}}function ut(T,d){1&T&&(t.TgZ(0,"div",20),t.TgZ(1,"label",7),t._uU(2,"Percepci\xf3n"),t.qZA(),t.TgZ(3,"div"),t._UZ(4,"p-inputSwitch",100),t.qZA(),t.qZA())}function yt(T,d){1&T&&t._UZ(0,"p-message",104)}function Bt(T,d){if(1&T&&(t.TgZ(0,"div",101),t.TgZ(1,"label",7),t._uU(2,"% Percepci\xf3n"),t.qZA(),t._UZ(3,"p-dropdown",102),t.YNc(4,yt,1,0,"p-message",103),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Akn(t.DdM(4,Et)),t.Q6J("options",o.listas.porcentajesPercepcion),t.xp6(1),t.Q6J("ngIf",o.mf.get("porcentajePercepcion").touched&&(null==o.mf.get("porcentajePercepcion").errors?null:o.mf.get("porcentajePercepcion").errors.required))}}function Jt(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"label",7),t._uU(2,"Retenci\xf3n"),t.qZA(),t.TgZ(3,"div"),t.TgZ(4,"p-inputSwitch",105),t.NdJ("onChange",function(){return t.CHM(o),t.oxw().calculoTotal()}),t.qZA(),t.qZA(),t.qZA()}}function Qt(T,d){1&T&&t._UZ(0,"p-message",108)}function Yt(T,d){if(1&T&&(t.TgZ(0,"div",101),t.TgZ(1,"label",7),t._uU(2,"% Retenci\xf3n"),t.qZA(),t._UZ(3,"p-dropdown",106),t.YNc(4,Qt,1,0,"p-message",107),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Akn(t.DdM(4,Et)),t.Q6J("options",o.listas.porcentajesRetencion),t.xp6(1),t.Q6J("ngIf",o.mf.get("porcentajeRetencion").touched&&(null==o.mf.get("porcentajeRetencion").errors?null:o.mf.get("porcentajeRetencion").errors.required))}}function $t(T,d){1&T&&(t.TgZ(0,"div",20),t.TgZ(1,"label",7),t._uU(2,"Inc. Igv"),t.qZA(),t.TgZ(3,"div"),t._UZ(4,"p-inputSwitch",109),t.qZA(),t.qZA())}function zt(T,d){1&T&&(t.TgZ(0,"div",110),t.TgZ(1,"label",7),t._uU(2,"Oferta v\xe1lida"),t.qZA(),t._UZ(3,"input",111),t.qZA())}function vo(T,d){1&T&&(t.TgZ(0,"div",110),t.TgZ(1,"label",7),t._uU(2,"Tiempo entrega"),t.qZA(),t._UZ(3,"input",112),t.qZA())}function _o(T,d){if(1&T&&(t.TgZ(0,"div",113),t.TgZ(1,"label",7),t._uU(2,"N. Orden"),t.qZA(),t._UZ(3,"input",114),t.qZA()),2&T){const o=t.oxw();t.Q6J("hidden","03"!==o.mf.get("tipoComprobante").value&&"01"!==o.mf.get("tipoComprobante").value&&"NV"!==o.mf.get("tipoComprobante").value)}}function yo(T,d){if(1&T&&(t.TgZ(0,"div",115),t.TgZ(1,"label",7),t._uU(2,"Vendedor"),t.qZA(),t._UZ(3,"p-dropdown",116),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Akn(t.DdM(4,Et)),t.Q6J("disabled",!o.permissionChangeVendedor)("options",o.usuarios)}}function bo(T,d){1&T&&t._UZ(0,"p-message",117)}function Co(T,d){1&T&&t._UZ(0,"p-message",118)}function To(T,d){1&T&&t._UZ(0,"p-message",79)}function xo(T,d){1&T&&t._UZ(0,"p-message",119)}function Zo(T,d){1&T&&t._UZ(0,"p-message",119)}function Eo(T,d){1&T&&t._UZ(0,"p-message",120)}function Oo(T,d){1&T&&t._UZ(0,"p-message",125)}function Io(T,d){1&T&&t._UZ(0,"p-message",126)}function No(T,d){if(1&T&&(t.TgZ(0,"div",52),t.TgZ(1,"label",7),t._uU(2,"Cuotas"),t.qZA(),t._UZ(3,"app-cuotas-comprobante",121,122),t.YNc(5,Oo,1,0,"p-message",123),t.YNc(6,Io,1,0,"p-message",124),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Q6J("modelForm",o.mf)("montoDetraccion",o.ticketAfected.montoDetraccion)("totalVenta",o.ticketAfected.totalVenta),t.xp6(2),t.Q6J("ngIf",o.mf.get("cuotas").touched&&(null==o.mf.get("cuotas").errors?null:o.mf.get("cuotas").errors.totalCuotas)),t.xp6(1),t.Q6J("ngIf",o.mf.get("cuotas").touched&&(null==o.mf.get("cuotas").errors?null:o.mf.get("cuotas").errors.minLengthArray))}}function Po(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",52),t.TgZ(1,"app-agregar-producto",127,128),t.NdJ("selectProduct",function(F){return t.CHM(o),t.oxw().selectProductBarCode(F)})("addItem",function(){return t.CHM(o),t.oxw().addNewItem()}),t.TgZ(3,"app-button-new-product",129),t.NdJ("selectProduct",function(F){return t.CHM(o),t.oxw().selectProductBarCode(F)}),t.qZA(),t.qZA(),t.qZA()}2&T&&(t.xp6(1),t.Q6J("visibleAddItem",!0))}function ko(T,d){1&T&&(t.TgZ(0,"th"),t._uU(1,"Stock"),t.qZA())}function wo(T,d){1&T&&(t.TgZ(0,"span"),t._uU(1,"Valor unit."),t.qZA())}function Do(T,d){1&T&&(t.TgZ(0,"span"),t._uU(1,"Precio unit."),t.qZA())}function qo(T,d){if(1&T&&(t.TgZ(0,"tr"),t.YNc(1,ko,2,0,"th",130),t.TgZ(2,"th"),t._uU(3,"C\xf3digo"),t.qZA(),t.TgZ(4,"th",131),t._uU(5,"Art\xedculo"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Unidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Tipo igv"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Cantidad"),t.qZA(),t.TgZ(12,"th"),t.YNc(13,wo,2,0,"span",130),t.YNc(14,Do,2,0,"span",130),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Subtotal"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Total"),t.qZA(),t.TgZ(19,"th",132),t._uU(20,"Acciones"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.configCompany.inventario),t.xp6(12),t.Q6J("ngIf",!o.preciosIncluidoIgv),t.xp6(1),t.Q6J("ngIf",o.preciosIncluidoIgv)}}function Mo(T,d){if(1&T&&(t.TgZ(0,"span",163),t._UZ(1,"app-mostrar-stock",164),t.qZA()),2&T){const o=t.oxw(2).$implicit;t.xp6(1),t.Q6J("producto",o.get("producto").value)}}function So(T,d){if(1&T&&(t.TgZ(0,"td"),t.TgZ(1,"span",134),t._uU(2,"Stock"),t.qZA(),t.YNc(3,Mo,2,1,"span",162),t.qZA()),2&T){const o=t.oxw().$implicit,N=t.oxw();t.xp6(3),t.Q6J("ngIf",N.isProductObject(o.get("producto").value))}}function Vo(T,d){if(1&T&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&T){const o=t.oxw().$implicit;t.xp6(1),t.hij("",o.codigo," - ")}}function Uo(T,d){if(1&T&&(t.TgZ(0,"span",163),t._UZ(1,"app-mostrar-stock",164),t.qZA()),2&T){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("producto",o)}}function Ro(T,d){if(1&T&&(t.YNc(0,Vo,2,1,"span",130),t._uU(1),t.YNc(2,Uo,2,1,"span",162)),2&T){const o=d.$implicit,N=t.oxw(2);t.Q6J("ngIf",o.codigo),t.xp6(1),t.hij("",o.nombre," "),t.xp6(1),t.Q6J("ngIf",N.configCompany.inventario&&N.isProductObject(o))}}function Fo(T,d){1&T&&t._UZ(0,"p-message",165)}function jo(T,d){1&T&&t._UZ(0,"p-message",166)}function Lo(T,d){1&T&&t._UZ(0,"p-message",167)}function Bo(T,d){1&T&&t._UZ(0,"p-message",168)}function Jo(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"input",169),t.NdJ("dblclick",function(){t.CHM(o);const F=t.oxw().$implicit;return t.oxw().setWeightInQty(F)})("blur",function(){return t.CHM(o),t.oxw(2).recalcular()})("input",function(){t.CHM(o);const F=t.oxw().rowIndex;return t.oxw().changeQtyItem(F)}),t.qZA()}}function Qo(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"input",170),t.NdJ("blur",function(){return t.CHM(o),t.oxw(2).recalcular()})("input",function(){t.CHM(o);const F=t.oxw().rowIndex;return t.oxw().changeQtyItem(F)}),t.qZA()}}function Yo(T,d){1&T&&t._UZ(0,"p-message",171)}function $o(T,d){1&T&&t._UZ(0,"p-message",172)}function zo(T,d){if(1&T&&t._UZ(0,"p-message",173),2&T){const o=t.oxw().$implicit,N=t.oxw();t.Q6J("text",N.getMessageValidationMaxQuantity(o))}}function Go(T,d){1&T&&(t.TgZ(0,"span",134),t._uU(1,"Valor unitario"),t.qZA())}function Ho(T,d){1&T&&(t.TgZ(0,"span",134),t._uU(1,"Precio unitario"),t.qZA())}function Ko(T,d){1&T&&t._UZ(0,"p-message",176)}function Wo(T,d){1&T&&t._UZ(0,"p-message",172)}function Xo(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"input",174),t.NdJ("input",function(){t.CHM(o);const F=t.oxw().rowIndex;return t.oxw().inputMontoProducto(F)})("blur",function(){return t.CHM(o),t.oxw(2).recalcular()}),t.qZA(),t.YNc(2,Ko,1,0,"p-message",175),t.YNc(3,Wo,1,0,"p-message",148),t.qZA()}if(2&T){const o=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",o.get("valorUnitario").touched&&(null==o.get("valorUnitario").errors?null:o.get("valorUnitario").errors.required)),t.xp6(1),t.Q6J("ngIf",o.get("valorUnitario").touched&&(null==o.get("valorUnitario").errors?null:o.get("valorUnitario").errors.min))}}function tn(T,d){1&T&&t._UZ(0,"p-message",179)}function en(T,d){1&T&&t._UZ(0,"p-message",172)}function on(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"input",177),t.NdJ("input",function(){t.CHM(o);const F=t.oxw().rowIndex;return t.oxw().inputMontoProducto(F)})("blur",function(){return t.CHM(o),t.oxw(2).recalcular()}),t.qZA(),t.YNc(2,tn,1,0,"p-message",178),t.YNc(3,en,1,0,"p-message",148),t.qZA()}if(2&T){const o=t.oxw().$implicit,N=t.oxw();t.xp6(1),t.Q6J("readOnly",N.readOnlyPrice(o)),t.xp6(1),t.Q6J("ngIf",o.get("precioVentaUnitario").touched&&(null==o.get("precioVentaUnitario").errors?null:o.get("precioVentaUnitario").errors.required)),t.xp6(1),t.Q6J("ngIf",o.get("precioVentaUnitario").touched&&(null==o.get("precioVentaUnitario").errors?null:o.get("precioVentaUnitario").errors.min))}}function nn(T,d){1&T&&t._UZ(0,"p-message",180)}function rn(T,d){1&T&&t._UZ(0,"p-message",181)}const an=function(){return{width:"120px"}};function ln(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"tr",133),t.YNc(1,So,4,1,"td",130),t.TgZ(2,"td"),t.TgZ(3,"span",134),t._uU(4,"C\xf3digo"),t.qZA(),t._UZ(5,"input",135),t.qZA(),t.TgZ(6,"td"),t.ynx(7),t.TgZ(8,"span",134),t._uU(9,"Art\xedculo"),t.qZA(),t.TgZ(10,"div",136),t.TgZ(11,"p-autoComplete",137,138),t.NdJ("onSelect",function(F){const K=t.CHM(o).rowIndex;return t.oxw().setProductLine(F,K)})("onUnselect",function(F){const K=t.CHM(o).rowIndex;return t.oxw().onClearProducto(F,K)})("onClear",function(F){const K=t.CHM(o).rowIndex;return t.oxw().onClearProducto(F,K)})("onKeyUp",function(F){const K=t.CHM(o).rowIndex;return t.oxw().onChangeProducto(F,K)})("completeMethod",function(F){return t.CHM(o),t.oxw().filterProductByCodigoAndNombre(F)}),t.YNc(13,Ro,3,3,"ng-template",17),t.qZA(),t.qZA(),t.BQk(),t.YNc(14,Fo,1,0,"p-message",139),t.YNc(15,jo,1,0,"p-message",140),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"span",134),t._uU(18,"Unidad"),t.qZA(),t._UZ(19,"p-dropdown",141),t.YNc(20,Lo,1,0,"p-message",142),t.qZA(),t.TgZ(21,"td"),t.TgZ(22,"span",134),t._uU(23,"Tipo igv"),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"p-dropdown",143),t.NdJ("onChange",function(){return t.CHM(o),t.oxw().recalcular()}),t.qZA(),t.qZA(),t.YNc(26,Bo,1,0,"p-message",144),t.qZA(),t.TgZ(27,"td"),t.TgZ(28,"span",134),t._uU(29,"Cantidad"),t.qZA(),t.YNc(30,Jo,1,0,"input",145),t.YNc(31,Qo,1,0,"input",146),t.YNc(32,Yo,1,0,"p-message",147),t.YNc(33,$o,1,0,"p-message",148),t.YNc(34,zo,1,1,"p-message",149),t.qZA(),t.TgZ(35,"td"),t.YNc(36,Go,2,0,"span",150),t.YNc(37,Ho,2,0,"span",150),t.YNc(38,Xo,4,2,"div",130),t.YNc(39,on,4,3,"div",130),t.qZA(),t.TgZ(40,"td"),t.TgZ(41,"span",134),t._uU(42,"Subtotal"),t.qZA(),t._UZ(43,"input",151),t._UZ(44,"input",152),t.YNc(45,nn,1,0,"p-message",153),t.qZA(),t.TgZ(46,"td"),t.TgZ(47,"span",134),t._uU(48,"Total"),t.qZA(),t.TgZ(49,"app-total-item",154,155),t.NdJ("changeTotal",function(F){const K=t.CHM(o).$implicit;return t.oxw().changeTotalItem(F,K)}),t.qZA(),t.YNc(51,rn,1,0,"p-message",156),t.qZA(),t.TgZ(52,"td"),t.TgZ(53,"span",134),t._uU(54,"Acciones"),t.qZA(),t.TgZ(55,"div",157),t.TgZ(56,"app-detalle-producto-item",158),t.NdJ("selectPrice",function(F){const K=t.CHM(o).rowIndex;return t.oxw().selectPriceProduct(K,F)}),t.qZA(),t.TgZ(57,"app-opciones-producto-item",159,160),t.NdJ("saveForm",function(){return t.CHM(o),t.oxw().calculoTotal()}),t.qZA(),t.TgZ(59,"button",161),t.NdJ("click",function(){const at=t.CHM(o).rowIndex;return t.oxw().deleteItem(at)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=d.rowIndex,N=d.$implicit,F=t.oxw();let at;t.Q6J("formGroupName",o),t.xp6(1),t.Q6J("ngIf",F.configCompany.inventario),t.xp6(10),t.Q6J("suggestions",F.filteredProducts)("minLength",1),t.xp6(3),t.Q6J("ngIf",N.get("descripcion").touched&&(null==N.get("descripcion").errors?null:N.get("descripcion").errors.required)),t.xp6(1),t.Q6J("ngIf",N.get("producto").touched&&(null==N.get("producto").errors?null:N.get("producto").errors.productRequired)),t.xp6(4),t.Akn(t.DdM(32,Et)),t.Q6J("options",F.unidades),t.xp6(1),t.Q6J("ngIf",N.get("codigoUnidadMedida").touched&&(null==N.get("codigoUnidadMedida").errors?null:N.get("codigoUnidadMedida").errors.required)),t.xp6(5),t.Akn(t.DdM(33,an)),t.Q6J("options",F.listas.tiposAfectacionIgv),t.xp6(1),t.Q6J("ngIf",N.get("codigoTipoAfectacionIgv").touched&&(null==N.get("codigoTipoAfectacionIgv").errors?null:N.get("codigoTipoAfectacionIgv").errors.required)),t.xp6(4),t.Q6J("ngIf",F.isWeightItem(N)),t.xp6(1),t.Q6J("ngIf",!F.isWeightItem(N)),t.xp6(1),t.Q6J("ngIf",N.get("cantidad").touched&&(null==N.get("cantidad").errors?null:N.get("cantidad").errors.required)),t.xp6(1),t.Q6J("ngIf",N.get("cantidad").touched&&(null==N.get("cantidad").errors?null:N.get("cantidad").errors.min)),t.xp6(1),t.Q6J("ngIf",N.get("cantidad").touched&&(null==N.get("cantidad").errors?null:N.get("cantidad").errors.max)),t.xp6(2),t.Q6J("ngIf",!F.preciosIncluidoIgv),t.xp6(1),t.Q6J("ngIf",F.preciosIncluidoIgv),t.xp6(1),t.Q6J("ngIf",!F.preciosIncluidoIgv),t.xp6(1),t.Q6J("ngIf",F.preciosIncluidoIgv),t.xp6(5),t.Q6J("value",N.get("valorVenta").value.toFixed(F.configCompany.cantDecimales)),t.xp6(1),t.Q6J("ngIf",N.get("valorVenta").touched&&(null==N.get("valorVenta").errors?null:N.get("valorVenta").errors.required)),t.xp6(4),t.Q6J("esGasolinera",F.configCompany.esGasolinera)("total",N.get("precioTotal").value.toFixed(F.configCompany.cantDecimales)),t.xp6(2),t.Q6J("ngIf",N.get("precioTotal").touched&&(null==N.get("precioTotal").errors?null:N.get("precioTotal").errors.required)),t.xp6(5),t.Q6J("idProduct",null==(at=N.get("producto"))||null==at.value?null:at.value.id),t.xp6(1),t.Q6J("modelForm",N)("disabled","07"==F.tipoComprobante||"08"==F.tipoComprobante),t.xp6(2),t.Q6J("disabled",N.get("producto").disabled)}}function sn(T,d){1&T&&t._UZ(0,"p-message",182)}function cn(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",183),t.TgZ(1,"div",52),t.TgZ(2,"app-agregar-producto",184,128),t.NdJ("selectProduct",function(F){return t.CHM(o),t.oxw().selectProductBarCode(F)})("addItem",function(){return t.CHM(o),t.oxw().addNewItem()}),t.qZA(),t.qZA(),t.qZA()}if(2&T){const o=t.oxw();t.xp6(2),t.Q6J("visibleAddItem",!0)("disableAddItem","07"==o.tipoComprobante||"08"==o.tipoComprobante)}}function un(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"EXPORTACI\xd3N"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalValorVentaExportacion,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function fn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"EXONERADA"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalValorVentaExonerada,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function pn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"INAFECTA"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalValorVentaInafecta,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function dn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"GRATUITA"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalValorVentaGratuita,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function mn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"DESCUENTO GLOBAL"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.hij("- ",t.Dn7(5,1,o.ticket.descuentoGlobal,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales),"")}}function hn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"DESCUENTO POR ITEM"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.hij("- ",t.Dn7(5,1,o.ticket.descuentoPorItem,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales),"")}}function gn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"DESCUENTO TOTAL"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.hij("- ",t.Dn7(5,1,o.ticket.totalDescuento,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales),"")}}function vn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"ICBPER"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalTributosBolsas,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function _n(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"ISC"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.totalIsc,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function yn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"OTROS TRIBUTOS"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.otrosTributos,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function bn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"OTROS CARGOS"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.otrosCargos,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function Cn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"RETENCI\xd3N"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.montoRetencion,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales))}}function Tn(T,d){if(1&T&&(t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"DETRACCI\xd3N"),t.qZA(),t.TgZ(3,"p",63),t._uU(4),t.ALo(5,"montoDinero"),t.qZA(),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Oqu(t.Dn7(5,1,o.ticket.montoDetraccion,"PEN",o.configCompany.cantDecimales))}}function xn(T,d){1&T&&t._UZ(0,"p-message",190)}function An(T,d){1&T&&t._UZ(0,"p-message",191)}function Zn(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"% Descuento global"),t.qZA(),t.TgZ(3,"div",38),t.TgZ(4,"span",185),t._UZ(5,"i",186),t.qZA(),t.TgZ(6,"input",187),t.NdJ("input",function(){return t.CHM(o),t.oxw().calculoTotal()}),t.qZA(),t.qZA(),t.YNc(7,xn,1,0,"p-message",188),t.YNc(8,An,1,0,"p-message",189),t.qZA()}if(2&T){const o=t.oxw();t.xp6(7),t.Q6J("ngIf",o.mf.get("porcentajeDescuentoGlobal").touched&&(null==o.mf.get("porcentajeDescuentoGlobal").errors?null:o.mf.get("porcentajeDescuentoGlobal").errors.min)),t.xp6(1),t.Q6J("ngIf",o.mf.get("porcentajeDescuentoGlobal").touched&&(null==o.mf.get("porcentajeDescuentoGlobal").errors?null:o.mf.get("porcentajeDescuentoGlobal").errors.max))}}function En(T,d){1&T&&t._UZ(0,"p-message",190)}function On(T,d){1&T&&t._UZ(0,"p-message",194)}function In(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",61),t.TgZ(1,"label",62),t._uU(2,"% Recargo consumo"),t.qZA(),t.TgZ(3,"div",38),t.TgZ(4,"span",185),t._UZ(5,"i",186),t.qZA(),t.TgZ(6,"input",192),t.NdJ("input",function(){return t.CHM(o),t.oxw().calculoTotal()}),t.qZA(),t.qZA(),t.YNc(7,En,1,0,"p-message",188),t.YNc(8,On,1,0,"p-message",193),t.qZA()}if(2&T){const o=t.oxw();t.xp6(7),t.Q6J("ngIf",o.mf.get("porcentajeOtrosCargos").touched&&(null==o.mf.get("porcentajeOtrosCargos").errors?null:o.mf.get("porcentajeOtrosCargos").errors.min)),t.xp6(1),t.Q6J("ngIf",o.mf.get("porcentajeOtrosCargos").touched&&(null==o.mf.get("porcentajeOtrosCargos").errors?null:o.mf.get("porcentajeOtrosCargos").errors.max))}}function Nn(T,d){if(1&T&&(t.TgZ(0,"h1",195),t._uU(1),t.ALo(2,"montoDinero"),t.qZA()),2&T){const o=t.oxw();t.xp6(1),t.hij("Cambio: ",t.xi3(2,1,o.cambioFormaPago,o.mf.get("codigoMoneda").value),"")}}function Pn(T,d){1&T&&t._UZ(0,"p-message",198)}function kn(T,d){if(1&T){const o=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"p-selectButton",196),t.NdJ("onChange",function(){return t.CHM(o),t.oxw().onChangeTipoVenta()}),t.qZA(),t.YNc(2,Pn,1,0,"p-message",197),t.qZA()}if(2&T){const o=t.oxw();t.xp6(1),t.Q6J("options",o.listas.tiposVenta),t.xp6(1),t.Q6J("ngIf",o.mf.get("tipoVenta").touched&&(null==o.mf.get("tipoVenta").errors?null:o.mf.get("tipoVenta").errors.required))}}function wn(T,d){1&T&&(t.TgZ(0,"div",52),t.TgZ(1,"label",7),t._uU(2,"Agrupar items?"),t.qZA(),t.TgZ(3,"div"),t._UZ(4,"p-inputSwitch",199),t.qZA(),t.qZA())}function Dn(T,d){1&T&&t._UZ(0,"p-message",202)}function qn(T,d){if(1&T&&(t.TgZ(0,"div",2),t.TgZ(1,"label",7),t._uU(2,"N\xba D\xedas cr\xe9dito (*)"),t.qZA(),t._UZ(3,"input",200),t.YNc(4,Dn,1,0,"p-message",201),t.qZA()),2&T){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",o.mf.get("diasCredito").touched&&(null==o.mf.get("diasCredito").errors?null:o.mf.get("diasCredito").errors.required))}}function Mn(T,d){1&T&&t._UZ(0,"p-message",205)}function Sn(T,d){if(1&T&&(t.TgZ(0,"div",52),t._UZ(1,"app-forma-pago-venta",203),t.YNc(2,Mn,1,0,"p-message",204),t.qZA()),2&T){const o=t.oxw();t.xp6(1),t.Q6J("total",o.ticket.totalVenta)("moneda",o.mf.get("codigoMoneda").value),t.xp6(1),t.Q6J("ngIf",o.mf.get("pagos").touched&&(null==o.mf.get("pagos").errors?null:o.mf.get("pagos").errors.totalFormaPago))}}function Vn(T,d){1&T&&t._UZ(0,"p-message",125)}function Un(T,d){1&T&&t._UZ(0,"p-message",126)}function Rn(T,d){if(1&T&&(t.TgZ(0,"div",52),t.TgZ(1,"label",7),t._uU(2,"Cuotas"),t.qZA(),t._UZ(3,"app-cuotas-comprobante",206,122),t.YNc(5,Vn,1,0,"p-message",123),t.YNc(6,Un,1,0,"p-message",124),t.qZA()),2&T){const o=t.oxw();t.xp6(3),t.Q6J("modelForm",o.mf)("montoDetraccion",o.ticket.montoDetraccion)("montoRetencion",o.ticket.montoRetencion)("totalVenta",o.ticket.totalVenta),t.xp6(2),t.Q6J("ngIf",o.mf.get("cuotas").touched&&(null==o.mf.get("cuotas").errors?null:o.mf.get("cuotas").errors.totalCuotas)),t.xp6(1),t.Q6J("ngIf",o.mf.get("cuotas").touched&&(null==o.mf.get("cuotas").errors?null:o.mf.get("cuotas").errors.minLengthArray))}}const Fn=function(){return{width:"600px",minWidth:"350px"}};class Dt{constructor(d,o,N,F,at,K,nt,_t,bt,kt,Rt,Gt,St,Vt,Ht,Ao,jn,Ln,Bn,Jn,Qn,Yn,$n,zn,Gn,Hn,Kn){this.route=d,this.router=o,this.store=N,this.officeService=F,this.serieService=at,this.loginService=K,this.ticketService=nt,this.whatsappService=_t,this.tipoDocumentoPipe=bt,this.userService=kt,this.quotationService=Rt,this.messageService=Gt,this.customerService=St,this.listas=Vt,this.consultaDocumentosService=Ht,this.companyService=Ao,this.unitService=jn,this.datePipe=Ln,this.fb=Bn,this.productService=Jn,this.tdPipe=Qn,this.confirmationService=Yn,this.breadcrumbService=$n,this.currencyService=zn,this.dialogService=Gn,this.checkService=Hn,this.membershipService=Kn,this.unsubscribe$=new u.xQ,this.liteInterface=!1,this.ticket={items:[],guiasRelacionadas:[],camposAdicionales:[],cuotas:[]},this.configCompany={},this.tiposDocumentoIdentidad=this.listas.tiposDocumentoIdentidad,this.series=[],this.usuarios=[],this.monedas=[],this.filteredCustomers=[],this.optionsItemModal=!1,this.dialogRegisterTicket=!1,this.filteredProducts=[],this.maxFechaEmision=new Date,this.minFechaEmision=new Date,this.barBottomTotalFixed=!1}ngOnInit(){this.configCompany$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>{this.configCompany=d,this.unidades=d.unidades.map(o=>({label:o.descripcion,value:o.codigo})),this.builderForm(),this.storeSubscripcion(),this.loadData()}),this.companySelected$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>this.companySelected=d),this.company$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>this.company=d),this.breadcrumbService.setItems((0,v.kn)(this.route)),this.intervalFocusBarCode(),this.setTipoVentaCredito()}get principalCompany(){return console.log("this.companySelected",this.companySelected),this.companySelected.id===this.company.id}ngAfterViewInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}setTipoVentaCredito(){this.mf.get("fechaVencimiento").valueChanges.subscribe(d=>{d&&(this.mf.get("tipoVenta").setValue("CREDITO"),this.onChangeTipoVenta())})}intervalFocusBarCode(){const d=(0,w.F)(1e3);this.configCompany.usaCodigoBarras&&d.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(()=>{document.activeElement.classList.contains("p-inputtext")||(console.log("Poniendo focus en barcode"),this.agregarProductoComponent.setFocusInput())})}builderForm(){this.mf=this.fb.group({preciosIncluidoIgv:[this.configCompany.preciosIncluidoIgv,[]],tipoComprobante:[this.tipoComprobante,[g.kI.required]],serie:[void 0,[g.kI.required,g.kI.minLength(4),g.kI.maxLength(4)]],numero:[void 0,[g.kI.required]],fechaEmision:[new Date,[g.kI.required]],codigoMoneda:[void 0,[g.kI.required]],fechaVencimiento:[void 0,[]],codigoTipoOperacion:["0101",[g.kI.required]],cliente:this.fb.group({id:[void 0,[]],tipoDocumento:["1",[g.kI.required]],numeroDocumento:[void 0,[g.kI.required]],razonSocial:[void 0,[g.kI.required]],direccionCompleta:[void 0,[]],email:[void 0,[g.kI.email]],telefono:[void 0,[]],giro:[void 0,[]],genero:[void 0,[]],expediente:[void 0,[]],referido:[void 0,[]],fechaNacimiento:[void 0,[]]}),numeroCotizacion:[void 0,[]],tipoVenta:["CONTADO",[g.kI.required]],diasCredito:[void 0,[]],pagos:[[],[]],ordenCompra:[void 0,[]],observacion:[void 0,[]],vendedor:[null,[g.kI.required]],items:this.fb.array([],(0,v.eK)(1)),emitirGuia:!1,agruparItems:[!1,[]],porcentajeOtrosCargos:[0,[g.kI.max(13),g.kI.min(0)]],otrosTributos:[void 0,[]],camposAdicionales:this.fb.array([]),cuotas:this.fb.array([]),guiasRelacionadas:this.fb.array([]),flagPercepcion:[!1,[]],flagRetencion:[!1,[]],porcentajePercepcion:[void 0,[]],porcentajeRetencion:[.03,[]],codigoMedioPago:[void 0,[]],codigoDetraccion:[void 0,[]],porcentajeDetraccion:[void 0,[]],montoDetraccion:[void 0,[]],cuentaFinancieraBeneficiario:[void 0,[]],porcentajeDescuentoGlobal:[0,[g.kI.max(99),g.kI.min(0)]],tipoComprobanteAfectado:[void 0,[]],serieAfectado:[void 0,[]],numeroAfectado:[void 0,[]],motivoNota:[void 0,[]],codigoTipoNotaCredito:[void 0,[]],codigoTipoNotaDebito:[void 0,[]],ofertaValido:["",[]],tiempoEntrega:["",[]]}),"07"===this.tipoComprobante&&(this.mf.patchValue({codigoTipoNotaCredito:"01",motivoNota:this.listas.tiposNotaCredito[0].label}),this.mf.controls.codigoTipoNotaCredito.setValidators([g.kI.required])),"08"===this.tipoComprobante&&(this.mf.patchValue({codigoTipoNotaDebito:"01",motivoNota:this.listas.tiposNotaDebito[0].label}),this.mf.controls.codigoTipoNotaDebito.setValidators([g.kI.required])),("07"===this.tipoComprobante||"08"===this.tipoComprobante)&&(this.mf.patchValue({tipoComprobanteAfectado:"01"}),this.mf.controls.tipoComprobanteAfectado.setValidators([g.kI.required]),this.mf.controls.serieAfectado.setValidators([g.kI.required]),this.mf.controls.numeroAfectado.setValidators([g.kI.required]),this.mf.controls.motivoNota.setValidators([g.kI.required])),this.isEdit&&("01"===this.tipoComprobante||"03"===this.tipoComprobante||"NV"===this.tipoComprobante)&&this.mf.controls.tipoComprobante.disable(),this.mf.controls.otrosTributos.valueChanges.subscribe(d=>{this.calculoTotal()}),this.mf.controls.flagPercepcion.valueChanges.subscribe(d=>{d?this.mf.controls.porcentajePercepcion.setValidators([g.kI.required]):this.mf.controls.porcentajePercepcion.clearValidators(),this.mf.controls.porcentajePercepcion.updateValueAndValidity()}),this.setMinFechaEmision()}setMinFechaEmision(){if(this.loginService.hasPermission("VENTAS_EDITAR_FECHA")){let d=30;"01"===this.mf.getRawValue().tipoComprobante&&(d=1);const o=new Date;o.setDate(o.getDate()-d),this.minFechaEmision=o,this.mf.patchValue({fechaEmision:new Date})}else this.minFechaEmision=new Date}get permissionChangeVendedor(){return this.loginService.hasPermission("VENTAS_EDITAR_VENDEDOR")}get preciosIncluidoIgv(){return this.mf.value.preciosIncluidoIgv}get readOnlyNumeracion(){return!this.loginService.hasPermission("VENTAS_EDITAR_CORRELATIVO")}createItemForm(d){d||(d={});const o=this.loginService.hasPermission("VENTAS_VALIDAR_PRODUCTO_EXISTENTE");return this.fb.group({codigoProducto:[d.codigoProducto,[]],descripcion:[d.descripcion,[g.kI.required]],detalle:[d.detalle,[]],codigoUnidadMedida:[d.codigoUnidadMedida?d.codigoUnidadMedida:"NIU",[g.kI.required]],codigoTipoAfectacionIgv:[d.codigoTipoAfectacionIgv?d.codigoTipoAfectacionIgv:"10",[g.kI.required]],cantidad:[d.cantidad?d.cantidad:1,[g.kI.required,g.kI.min(.01)]],cantidadOriginal:[d.id?d.cantidad:void 0,[]],valorUnitario:[d.valorUnitario?d.valorUnitario:0,[g.kI.required,g.kI.min(.01)]],precioCompraUnitario:[d.precioCompraUnitario,[]],precioVentaUnitario:[d.precioVentaUnitario,[g.kI.required,g.kI.min(.01)]],valorVenta:[0,[g.kI.required,g.kI.min(.01)]],precioTotal:[0,[g.kI.required,g.kI.min(.01)]],lotes:this.fb.array([],[]),comandaDetalle:[d.comandaDetalle,[]],montoBaseDescuento:[void 0,[]],porcentajeDescuento:[d.porcentajeDescuento,[]],codigoDescuento:[void 0,[]],descuento:[d.descuento,[]],producto:[d.producto,[...o?[v.L3]:[]]],igv:[d.igv?d.igv:0,[]],valorReferencialUnitario:"",montoBaseIgv:d.montoBaseIgv,montoBaseExportacion:d.montoBaseExportacion,montoBaseExonerado:d.montoBaseExonerado,montoBaseInafecto:d.montoBaseInafecto,montoBaseGratuito:d.montoBaseGratuito,montoBaseIsc:d.montoBaseIsc,tributoVentaGratuita:d.tributoVentaGratuita,tributoBolsa:d.tributoBolsa,tieneImpuestoBolsas:!!d.tributoBolsa,isc:[d.isc,[]],codigoTipoCalculoIsc:[d.codigoTipoCalculoIsc,[]],porcentajeIsc:d.porcentajeIsc,porcentajeIgv:d.porcentajeIgv,porcentajeTributoVentaGratuita:d.porcentajeTributoVentaGratuita,montoOriginal:void 0,monedaOriginal:this.mf.value.codigoMoneda,fechaInicioPlan:[void 0,[]]})}formToModel(){this.isEdit?(this.ticket.serie=this.ticketEdit.serie,this.ticket.numero=this.ticketEdit.numero):(this.ticket.serie=this.mf.value.serie,this.ticket.numero=this.mf.value.numero),this.ticket.tipoComprobante=this.isEdit?this.tipoComprobante:this.mf.value.tipoComprobante,this.ticket.fechaEmision=this.datePipe.transform(this.mf.value.fechaEmision,"yyyy-MM-dd");let d=this.datePipe.transform(new Date,"H:mm:ss");7===d.length&&(d="0"+d),this.ticket.horaEmision=d,this.ticket.codigoMoneda=this.mf.value.codigoMoneda,this.mf.value.fechaVencimiento&&(this.ticket.fechaVencimiento=this.datePipe.transform(this.mf.value.fechaVencimiento,"yyyy-MM-dd")),this.ticket.codigoTipoOperacion=this.mf.value.codigoTipoOperacion,this.ticket.cliente=this.mf.value.cliente,this.ticket.tipoDocumentoReceptor=this.mf.value.cliente.tipoDocumento,this.ticket.numeroDocumentoReceptor=this.mf.value.cliente.numeroDocumento,this.ticket.denominacionReceptor=this.mf.value.cliente.razonSocial,this.ticket.direccionReceptor=this.mf.value.cliente.direccionCompleta,this.ticket.emailReceptor=this.mf.value.cliente.email,this.ticket.telefonoReceptor=this.mf.value.cliente.telefono,this.ticket.numeroCotizacion=this.mf.value.numeroCotizacion,this.ticket.tipoVenta=this.mf.value.tipoVenta,this.ticket.diasCredito=this.mf.value.diasCredito,this.ticket.vendedor={id:this.mf.value.vendedor},this.ticket.ordenCompra=this.mf.value.ordenCompra,this.ticket.observacion=this.mf.value.observacion,this.ticket.otrosTributos=this.mf.value.otrosTributos,this.ticket.ofertaValido=this.mf.value.ofertaValido,this.ticket.tiempoEntrega=this.mf.value.tiempoEntrega,this.ticket.agruparItems=this.mf.value.agruparItems,this.ticket.cambio=this.cambioFormaPago,this.ticket.efectivo=this.efectivoFormaPago,console.log("efectivoFormaPago",this.efectivoFormaPago),"CONTADO"===this.ticket.tipoVenta&&(this.ticket.movimientoCaja={pagos:this.mf.value.pagos}),this.ticket.tipoComprobanteAfectado=this.mf.value.tipoComprobanteAfectado,this.ticket.serieAfectado=this.mf.value.serieAfectado,this.ticket.numeroAfectado=this.mf.value.numeroAfectado,this.ticket.motivoNota=this.mf.value.motivoNota,this.ticket.codigoTipoNotaCredito=this.mf.value.codigoTipoNotaCredito,this.ticket.codigoTipoNotaDebito=this.mf.value.codigoTipoNotaDebito,this.mf.controls.flagPercepcion.value&&(this.ticket.porcentajePercepcion=Number(this.mf.value.porcentajePercepcion),this.ticket.montoPercepcion=Number(this.mf.value.porcentajePercepcion)*Number(this.ticket.totalVenta),this.ticket.totalVentaPercepcion=this.ticket.montoPercepcion+this.ticket.totalVenta,.005===this.ticket.porcentajePercepcion&&(this.ticket.regimenPercepcion="03"),.01===this.ticket.porcentajePercepcion&&(this.ticket.regimenPercepcion="02"),.02===this.ticket.porcentajePercepcion&&(this.ticket.regimenPercepcion="01")),this.mf.controls.flagRetencion.value||(this.ticket.montoBaseRetencion=void 0,this.ticket.porcentajeRetencion=void 0,this.ticket.montoRetencion=void 0),"1001"===this.mf.controls.codigoTipoOperacion.value?(this.ticket.codigoMedioPago=this.mf.value.codigoMedioPago,this.ticket.codigoDetraccion=this.mf.value.codigoDetraccion,this.ticket.porcentajeDetraccion=Number(this.mf.value.porcentajeDetraccion)):(this.ticket.codigoMedioPago=void 0,this.ticket.codigoDetraccion=void 0,this.ticket.porcentajeDetraccion=void 0),this.mf.value.porcentajeDescuentoGlobal&&(this.ticket.porcentajeDescuentoGlobal=this.mf.value.porcentajeDescuentoGlobal),this.mf.value.porcentajeOtrosCargos&&(this.ticket.porcentajeOtrosCargos=this.mf.value.porcentajeOtrosCargos),this.ticket.totalDescuento&&(this.ticket.codigoDescuento="02"),this.ticket.items=[];let o=0;this.mf.get("items").controls.map(nt=>nt.getRawValue()).forEach(nt=>{let _t;nt.producto&&this.isProductObject(nt.producto)&&nt.producto.id&&(_t=nt.producto);const bt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({numeroOrden:++o,cantidad:nt.cantidad,codigoUnidadMedida:nt.codigoUnidadMedida,codigoTipoAfectacionIgv:nt.codigoTipoAfectacionIgv,descripcion:nt.descripcion,detalle:nt.detalle,producto:_t,codigoProducto:nt.codigoProducto,valorUnitario:nt.valorUnitario,precioCompraUnitario:nt.precioCompraUnitario,precioVentaUnitario:nt.precioVentaUnitario,valorReferencialUnitario:nt.valorReferencialUnitario,igv:nt.igv,montoBaseIgv:nt.montoBaseIgv,montoBaseExportacion:nt.montoBaseExportacion,montoBaseExonerado:nt.montoBaseExonerado,montoBaseInafecto:nt.montoBaseInafecto,montoBaseGratuito:nt.montoBaseGratuito,montoBaseIsc:nt.montoBaseIsc,isc:nt.isc,codigoTipoCalculoIsc:nt.isc?nt.codigoTipoCalculoIsc:null,porcentajeIsc:nt.porcentajeIsc,tributoVentaGratuita:nt.tributoVentaGratuita,porcentajeIgv:nt.porcentajeIgv,porcentajeTributoVentaGratuita:nt.porcentajeTributoVentaGratuita,valorVenta:nt.valorVenta,precioTotal:nt.precioTotal,tributoBolsa:nt.tributoBolsa?nt.tributoBolsa:null},nt.descuento&&{descuento:nt.descuento}),nt.descuento&&{montoBaseDescuento:nt.montoBaseDescuento}),nt.descuento&&{porcentajeDescuento:nt.porcentajeDescuento}),nt.descuento&&{codigoDescuento:"00"}),nt.comandaDetalle&&{comandaDetalle:nt.comandaDetalle}),{lotes:nt.lotes.filter(kt=>kt.cantidad),fechaInicioPlan:nt.fechaInicioPlan});this.ticket.items.push(bt)}),this.ticket.camposAdicionales=[],this.ticket.cuotas=[],this.mf.get("camposAdicionales").controls.forEach(nt=>{this.ticket.camposAdicionales.push({nombreCampo:nt.value.nombreCampo,valorCampo:nt.value.valorCampo})}),this.mf.get("cuotas").controls.forEach(nt=>{const _t={fecha:nt.value.fecha.getTime(),monto:nt.value.monto};this.ticket.cuotas.push(_t)}),this.ticket.guiasRelacionadas=[],this.mf.get("guiasRelacionadas").controls.forEach(nt=>{this.ticket.guiasRelacionadas.push({codigoTipoGuia:nt.value.codigoTipoGuia,serieNumeroGuia:nt.value.serieNumeroGuia})}),this.ticket.totalValorVentaExonerada||(this.ticket.totalValorVentaExonerada=null),this.ticket.totalValorVentaInafecta||(this.ticket.totalValorVentaInafecta=null),this.ticket.totalValorVentaGratuita||(this.ticket.totalValorVentaGratuita=null),this.ticket.totalValorVentaExportacion||(this.ticket.totalValorVentaExportacion=null),this.ticket.totalDescuento||(this.ticket.totalDescuento=null,this.ticket.montoBaseDescuento=null,this.ticket.porcentajeDescuento=null,this.ticket.codigoDescuento=null),this.ticket.totalIsc||(this.ticket.totalIsc=null),this.ticket.totalValorBaseIsc||(this.ticket.totalValorBaseIsc=null),this.ticket.totalValorBaseIgv||(this.ticket.totalValorBaseIgv=null),this.ticket.otrosCargos||(this.ticket.otrosCargos=null),this.ticket.otrosTributos||(this.ticket.otrosTributos=null),this.ticket.totalTributosBolsas||(this.ticket.totalTributosBolsas=null),!this.ticket.totalValorVentaGravada&&!this.ticket.totalIgv&&(this.ticket.totalValorVentaGravada=null,this.ticket.totalIgv=null),this.ticket.incIgv=this.preciosIncluidoIgv}isProductObject(d){return d&&"object"==typeof d}patchValueForm(d,o){const N={};N[d]=o,this.mf.patchValue(N)}getValueForm(d){return this.mf.get(d).value}addNewItem(){this.addItem(),this.focusDescripcionProducto()}addItem(d){this.mf.get("items").push(this.createItemForm(d)),this.alternatePositionBottomTotalBar(!0),this.setValidationsMaxQuantityProducts()}focusDescripcionProducto(){setTimeout(()=>{if(this.descripcionProductoItems){const d=this.descripcionProductoItems.toArray().length-1;this.descripcionProductoItems.toArray()[d].focusInput()}})}alternatePositionBottomTotalBar(d){if(!(0,v.s2)()){const o=document.getElementById("container-products").getBoundingClientRect(),N=window,F=document,at=F.documentElement,K=F.getElementsByTagName("body")[0];this.barBottomTotalFixed=100*o.height/(N.innerHeight||at.clientHeight||K.clientHeight)>40,d&&window.scrollTo(0,document.body.scrollHeight)}}get modelFormItems(){return this.mf.get("items")}recalcular(){this.calculoTotal()}get isEdit(){return this.route.snapshot.data.isEdit}get isQuotation(){return this.route.snapshot.data.isQuotation}get tipoComprobante(){return this.isQuotation?"CO":this.route.snapshot.data.tipoComprobante?this.route.snapshot.data.tipoComprobante:this.isEdit?this.route.snapshot.params.tipoComprobante:this.configCompany.tipoComprobantePorDefecto}get idCotizacion(){return this.route.snapshot.params.idCotizacion}get idMembresia(){return this.route.snapshot.params.idMembresia}get idNotaVentaReemplazar(){return this.route.snapshot.params.idNotaVenta}get idCuentaRestaurante(){return this.route.snapshot.params.idCuenta}get user(){return`${this.loginService.getUser().name}`}get existPlanOnItems(){return!!this.modelFormItems.getRawValue().map(d=>d.producto).find(d=>d&&"PLAN"===d.tipoProducto)}loadData(){const d=N=>{this.monedaPorDefecto=N.find(F=>F.monedaPorDefecto).codigoMoneda,this.mf.getRawValue().codigoMoneda||this.mf.patchValue({codigoMoneda:this.monedaPorDefecto})},o=[this.userService.findAll(null,!1).pipe((0,y.UI)(N=>N.map(F=>({label:`${F.nombres} ${F.apellidos}`,value:F.id})))),this.currencyService.findAll().pipe((0,y.bw)(N=>d(N)),(0,y.UI)(N=>N.map(F=>({label:F.codigoMoneda,value:F.codigoMoneda}))))];(0,I.D)(o).subscribe(N=>{this.usuarios=N[0],this.monedas=N[1],this.setVendedor(),this.loadTicketForNoteParamId(),this.loadTicketIsEdit(),this.loadQuotationIsEdit(),this.loadTicketFromCotizacion(),this.loadTicketFromMembresia(),this.loadTicketFromCuentaRestaurante(),this.loadTicketFromNotaVenta(),!this.isEdit&&!this.idCotizacion&&!this.idNotaVentaReemplazar&&!this.idCuentaRestaurante&&this.agregarProductoComponent&&this.agregarProductoComponent.setFocusInput()})}setVendedor(){const d=this.loginService.getUser().id;this.mf.patchValue({vendedor:d})}storeSubscripcion(){this.puntoVenta$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>{this.puntoVenta=d,this.ticket.puntoVenta={id:d.id},this.getSeries(),this.setValidationsMaxQuantityProducts()}),this.estacionVenta$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(d=>{this.estacionVenta=d,this.ticket.estacionVenta={id:d.id}})}changeTipoComprobanteVenta(){this.mf.patchValue({codigoTipoOperacion:"0101"}),this.getSeries(),this.setMinFechaEmision(),this.agregarProductoComponent.setFocusInput()}changeTipoOperacion(){"1001"===this.mf.value.codigoTipoOperacion?(this.mf.get("codigoMedioPago").setValidators([g.kI.required]),this.mf.get("codigoDetraccion").setValidators([g.kI.required]),this.mf.get("porcentajeDetraccion").setValidators([g.kI.required,g.kI.min(1),g.kI.max(100)]),this.mf.get("codigoMedioPago").updateValueAndValidity(),this.mf.get("codigoDetraccion").updateValueAndValidity(),this.mf.get("porcentajeDetraccion").updateValueAndValidity()):(this.mf.patchValue({codigoMedioPago:void 0,codigoDetraccion:void 0,porcentajeDetraccion:void 0,montoDetraccion:void 0}),this.mf.get("codigoMedioPago").clearValidators(),this.mf.get("codigoDetraccion").clearValidators(),this.mf.get("porcentajeDetraccion").clearValidators(),this.mf.get("codigoMedioPago").updateValueAndValidity(),this.mf.get("codigoDetraccion").updateValueAndValidity(),this.mf.get("porcentajeDetraccion").updateValueAndValidity()),this.calculoTotal()}getSeries(){const d=this.mf.get("tipoComprobante").value;this.serieService.findAllByPuntoVentaAndTipoComprobante(this.puntoVenta.id,d).subscribe(o=>{if(this.series=[],o.forEach(N=>{this.series.push({label:N.numero,value:N.numero})}),this.series.length>0){const N=this.series[0].value;this.isEdit||(this.patchValueForm("serie",N),this.getNextNumber(N))}})}onSelectSerie(){this.getNextNumber(this.getValueForm("serie"))}getNextNumber(d){const N=[`tipoDocumento=${this.mf.get("tipoComprobante").value}`,`serie=${d}`];this.isQuotation?this.quotationService.getNextNumber(N.join("&")).subscribe(F=>{this.patchValueForm("numero",F)}):this.ticketService.getNextNumber(N.join("&")).subscribe(F=>{this.patchValueForm("numero",F)})}inputMontoProducto(d){const N=this.mf.get("items").controls[d];let F=0;F=this.preciosIncluidoIgv?N.get("precioVentaUnitario").value:N.get("valorUnitario").value,N.patchValue({montoOriginal:F,monedaOriginal:this.mf.get("codigoMoneda").value}),this.recalcular()}readOnlyPrice(d){return!this.loginService.hasPermission("VENTAS_EDITAR_PRECIO")&&d.value.producto&&d.value.producto.id}calculoTotal(){const d=this.mf.get("tipoComprobante").value,o=this.mf.get("porcentajeDescuentoGlobal").value,N=this.mf.get("porcentajeOtrosCargos").value;this.ticket.totalValorVentaExonerada=0,this.ticket.totalValorVentaExportacion=0,this.ticket.totalValorVentaGravada=0,this.ticket.totalValorVentaInafecta=0,this.ticket.totalValorVentaGratuita=0,this.ticket.totalValorBaseIsc=0,this.ticket.totalValorBaseIgv=0,this.ticket.totalValorVenta=0,this.ticket.totalIsc=0,this.ticket.totalIgv=0,this.ticket.totalVenta=0,this.ticket.totalDescuento=0,this.ticket.descuentoPorItem=0,this.ticket.descuentoGlobal=0,this.ticket.montoBaseDescuento=0,this.ticket.totalTributosBolsas=0,this.ticket.otrosCargos=0,this.ticket.montoBaseRetencion=0,this.ticket.montoRetencion=0,this.ticket.montoDetraccion=0,this.ticket.totalTributosOperacionGratuita=null,this.mf.get("items").controls.forEach(K=>{K.patchValue({tributoVentaGratuita:null}),K.patchValue({porcentajeTributoVentaGratuita:null});const nt=this.listas.catalogo07.find(Ao=>Ao.codigo===K.get("codigoTipoAfectacionIgv").value),_t=K.get("cantidad").value?Number(K.get("cantidad").value):0;let bt,kt=0,Rt=null,Gt=null,St=null,Vt=null;const Ht=K.get("producto").value;K.get("isc").value&&(St=Number(K.get("isc").value)),K.get("tributoBolsa").value&&(Vt=Number(K.get("tributoBolsa").value)),K.get("tieneImpuestoBolsas").value&&(Vt=.3*_t,K.patchValue({tributoBolsa:Vt}),this.ticket.totalTributosBolsas=this.ticket.totalTributosBolsas+Vt),"1001"===nt.codigoRelacionado?(K.patchValue(this.preciosIncluidoIgv?{valorUnitario:Number(K.get("precioVentaUnitario").value)/(this.configCompany.igv+1)}:{precioVentaUnitario:Number(K.get("valorUnitario").value)*(this.configCompany.igv+1)}),bt=Number(K.get("valorUnitario").value)*_t,K.patchValue({montoBaseDescuento:bt}),K.get("descuento").value&&(kt=Number(K.get("descuento").value),bt-=kt,this.ticket.descuentoPorItem=this.ticket.descuentoPorItem+kt),K.patchValue({valorVenta:bt}),Rt=bt+St,Gt=Rt*this.configCompany.igv,K.patchValue({montoBaseIgv:Rt}),K.patchValue({porcentajeIgv:100*this.configCompany.igv}),K.patchValue({igv:Gt}),K.patchValue({precioTotal:bt+Gt+St+Vt})):(K.patchValue(this.preciosIncluidoIgv?{valorUnitario:Number(K.get("precioVentaUnitario").value)}:{precioVentaUnitario:Number(K.get("valorUnitario").value)}),bt=Number(K.get("precioVentaUnitario").value)*_t,K.patchValue({montoBaseDescuento:bt}),K.get("descuento").value&&(kt=Number(K.get("descuento").value),bt-=kt,this.ticket.descuentoPorItem=this.ticket.descuentoPorItem+kt),K.patchValue({valorVenta:bt}),K.patchValue({precioTotal:bt}),K.patchValue({igv:null}),K.patchValue({montoBaseIgv:null}),K.patchValue({porcentajeIgv:null})),Ht&&Ht.recargoConsumo&&"1001"===nt.codigoRelacionado&&(this.ticket.otrosCargos=this.ticket.otrosCargos+bt*(Ht.recargoConsumo/100)),K.patchValue({montoBaseInafecto:null}),K.patchValue({montoBaseExonerado:null}),K.patchValue({montoBaseGratuito:null}),K.patchValue({montoBaseExportacion:null}),K.patchValue({valorReferencialUnitario:null}),K.patchValue({tributoVentaGratuita:null}),this.ticket.totalDescuento=this.ticket.totalDescuento+kt,"1001"===nt.codigoRelacionado?(this.ticket.totalValorVentaGravada=this.ticket.totalValorVentaGravada+K.get("valorVenta").value,this.ticket.totalValorBaseIgv=this.ticket.totalValorBaseIgv+Rt,this.ticket.totalIgv=this.ticket.totalIgv+K.get("igv").value,K.patchValue({porcentajeTributoVentaGratuita:null})):"1002"===nt.codigoRelacionado?(this.ticket.totalValorVentaInafecta=this.ticket.totalValorVentaInafecta+K.get("valorVenta").value,K.patchValue({montoBaseInafecto:K.get("valorVenta").value}),K.patchValue({porcentajeTributoVentaGratuita:null})):"1003"===nt.codigoRelacionado?(this.ticket.totalValorVentaExonerada=this.ticket.totalValorVentaExonerada+K.get("valorVenta").value,K.patchValue({montoBaseExonerado:K.get("valorVenta").value}),K.patchValue({porcentajeTributoVentaGratuita:null})):"1000"===nt.codigoRelacionado?(this.ticket.totalValorVentaExportacion=this.ticket.totalValorVentaExportacion+K.get("valorVenta").value,K.patchValue({montoBaseExportacion:K.get("valorVenta").value}),K.patchValue({porcentajeTributoVentaGratuita:null})):"1004"===nt.codigoRelacionado&&("11"===K.get("codigoTipoAfectacionIgv").value||"12"===K.get("codigoTipoAfectacionIgv").value||"13"===K.get("codigoTipoAfectacionIgv").value||"14"===K.get("codigoTipoAfectacionIgv").value||"15"===K.get("codigoTipoAfectacionIgv").value||"16"===K.get("codigoTipoAfectacionIgv").value||"17"===K.get("codigoTipoAfectacionIgv").value?(K.patchValue({porcentajeTributoVentaGratuita:100*this.configCompany.igv}),K.patchValue({tributoVentaGratuita:K.get("valorVenta").value*this.configCompany.igv})):(K.patchValue({tributoVentaGratuita:0}),K.patchValue({porcentajeTributoVentaGratuita:0})),this.ticket.totalValorVentaGratuita=this.ticket.totalValorVentaGratuita+K.get("valorVenta").value,K.patchValue({montoBaseGratuito:K.get("valorVenta").value}),K.patchValue({valorReferencialUnitario:K.get("precioVentaUnitario").value}),this.ticket.totalTributosOperacionGratuita=this.ticket.totalTributosOperacionGratuita+K.get("tributoVentaGratuita").value),St?(this.ticket.totalIsc=this.ticket.totalIsc+St,this.ticket.totalValorBaseIsc=this.ticket.totalValorBaseIsc+K.get("valorVenta").value,K.patchValue({montoBaseIsc:K.get("valorVenta").value})):K.patchValue({montoBaseIsc:null}),"17"===K.get("codigoTipoAfectacionIgv").value&&"07"===d&&(this.ticket.codigoTipoNotaCredito="12")});const at=this.mf.get("otrosTributos").value?Number(this.mf.get("otrosTributos").value):0;if(this.ticket.otrosTributos=at,o){const K=o/100;if(this.ticket.totalValorVentaGravada){this.ticket.montoBaseDescuento=this.ticket.totalValorVentaGravada;const nt=this.ticket.totalValorVentaGravada*K;this.ticket.totalValorVentaGravada=this.ticket.totalValorVentaGravada-nt,this.ticket.totalDescuento=this.ticket.totalDescuento+nt,this.ticket.descuentoGlobal=this.ticket.descuentoGlobal+nt}if(this.ticket.totalValorVentaInafecta){this.ticket.montoBaseDescuento=this.ticket.totalValorVentaInafecta;const nt=this.ticket.totalValorVentaInafecta*K;this.ticket.totalValorVentaInafecta=this.ticket.totalValorVentaInafecta-nt,this.ticket.totalDescuento=this.ticket.totalDescuento+nt,this.ticket.descuentoGlobal=this.ticket.descuentoGlobal+nt}if(this.ticket.totalValorVentaExonerada){this.ticket.montoBaseDescuento=this.ticket.totalValorVentaExonerada;const nt=this.ticket.totalValorVentaExonerada*K;this.ticket.totalValorVentaExonerada=this.ticket.totalValorVentaExonerada-nt,this.ticket.totalDescuento=this.ticket.totalDescuento+nt,this.ticket.descuentoGlobal=this.ticket.descuentoGlobal+nt}this.ticket.totalValorBaseIgv&&(this.ticket.totalValorBaseIgv=this.ticket.totalValorBaseIgv-this.ticket.totalValorBaseIgv*K),this.ticket.totalIgv&&(this.ticket.totalIgv=this.ticket.totalIgv-this.ticket.totalIgv*K),this.ticket.totalValorBaseIsc&&(this.ticket.totalValorBaseIsc=this.ticket.totalValorBaseIsc-this.ticket.totalValorBaseIsc*K),this.ticket.totalIsc&&(this.ticket.totalIsc=this.ticket.totalIsc-this.ticket.totalIsc*K),this.ticket.porcentajeDescuento=K}if(this.ticket.totalValorVenta=this.ticket.totalValorVentaGravada+this.ticket.totalValorVentaInafecta+this.ticket.totalValorVentaExonerada+this.ticket.totalValorVentaExportacion,N&&(this.ticket.otrosCargos=this.ticket.totalValorVenta*(N/100)),this.ticket.totalVenta=this.ticket.totalValorVentaGravada+this.ticket.totalValorVentaInafecta+this.ticket.totalValorVentaExonerada+this.ticket.totalValorVentaExportacion+this.ticket.totalIsc+this.ticket.totalIgv+this.ticket.totalTributosBolsas+this.ticket.otrosCargos+at,this.mf.controls.flagRetencion.value&&(this.ticket.montoBaseRetencion=this.ticket.totalVenta,this.ticket.porcentajeRetencion=Number(this.mf.value.porcentajeRetencion),this.ticket.montoRetencion=Number(this.mf.value.porcentajeRetencion)*this.ticket.totalVenta),"1001"===this.mf.controls.codigoTipoOperacion.value){const K=Number(this.ticket.totalVenta)*(Number(this.mf.value.porcentajeDetraccion)/100);this.ticket.montoDetraccion=this.currencyService.exchange({codigoMonedaOrigen:this.mf.value.codigoMoneda,codigoMonedaDestino:"PEN",montoOrigen:K})}}showDialogFinalizar(){(0,v.c2)(this.mf);try{const d=this.optionsItemProduct.toArray().find(o=>!o.validForm);d&&d.openOptionsDetail()}catch(d){console.error(d)}this.mf.valid&&(this.setValidationsPays(),this.dialogRegisterTicket=!0)}get cambioFormaPago(){return this.getEfectivoFormaPago("cambio")}get efectivoFormaPago(){return this.getEfectivoFormaPago("efectivo")}getEfectivoFormaPago(d){if(!this.mf||!this.mf.getRawValue().pagos)return 0;{const o=this.mf.getRawValue().pagos.find(N=>"EFECTIVO"===N.formaPago);return o&&o.cambio>0&&"cambio"===d?o.cambio:o&&o.montoPagado>0&&"efectivo"===d?o.montoPagado:0}}onHideDialogFinalizar(){this.mf.get("pagos").clearValidators(),this.mf.get("pagos").updateValueAndValidity(),this.mf.get("diasCredito").clearValidators(),this.mf.get("diasCredito").updateValueAndValidity(),this.mf.get("cuotas").clearValidators(),this.mf.get("cuotas").updateValueAndValidity()}registrar(){this.idCuentaRestaurante?this.registrarPagoCuentaRestaurante():this.isQuotation?this.registrarCotizacion():this.registrarComprobante()}registrarComprobante(){(0,v.c2)(this.mf),this.mf.valid?(this.formToModel(),this.isEdit?this.ticketService.update(this.ticket).subscribe(d=>{this.router.navigate(["/redirect"]),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante actualizado correctamente."}),this.openPdf(d)},d=>this.getNextNumber(this.mf.get("serie").value)):this.ticketService.save(this.ticket).subscribe(d=>{if(this.configCompany.usaWhatsappApi&&d.telefonoReceptor){const N=`Hola! *${this.loginService.getLogin().user.empresa.nombreComercial}* adjunta su comprobante electr\xf3nico con n\xfamero *${d.serie}-${d.numero}*, muchas gracias por su preferencia.`,F=`${this.ticketService.getUrlPdf(d,"A4")}&time=${(new Date).getTime()}`;this.whatsappService.sendWhatsappMessage(d.telefonoReceptor,N,`${d.serie}-${d.numero}`,F).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Whatsapp enviado correctamente."})})}this.router.navigate(["/redirect"]),this.dialogRegisterTicket=!1,this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante registrado correctamente."}),this.openPdf(d),this.getValueForm("emitirGuia")&&this.router.navigateByUrl(`/guia-remision/emitir-guia/${d.id}`)},d=>this.getNextNumber(this.mf.get("serie").value))):this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}registrarCotizacion(){(0,v.c2)(this.mf),this.mf.valid?(this.formToModel(),this.isEdit?this.quotationService.update(this.ticket).subscribe(d=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Cotizaci\xf3n actualizado correctamente."}),this.router.navigateByUrl("/ventas/ver-cotizaciones")}):this.quotationService.save(this.ticket).subscribe(d=>{if(this.configCompany.usaWhatsappApi&&d.telefonoReceptor){const o=`Hola! *${this.loginService.getLogin().user.empresa.nombreComercial}* adjunta su cotizaci\xf3n electr\xf3nica, muchas gracias por su preferencia.`,N=`${this.quotationService.getUrlPdf(d)}?time=${(new Date).getTime()}`;this.whatsappService.sendWhatsappMessage(d.telefonoReceptor,o,`${d.serie}-${d.numero}`,N).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Whatsapp enviado correctamente."})})}this.openPdfQuotation(d),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Cotizaci\xf3n registrada correctamente."}),this.router.navigateByUrl("/ventas/ver-cotizaciones")})):this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}registrarPagoCuentaRestaurante(){if((0,v.c2)(this.mf),this.mf.valid){this.formToModel();const d={cliente:this.cuentaRestaurante.cliente?this.cuentaRestaurante.cliente:this.getValueForm("cliente"),pagado:!0,items:this.cuentaRestaurante.items,comprobante:this.ticket};this.checkService.update(this.cuentaRestaurante.id,d).subscribe(o=>{this.router.navigateByUrl("LOCAL"===this.cuentaRestaurante.pedido.tipo?"/restaurante/cobrador/cuentas":"/restaurante/pedidos"),this.openPdf(o.comprobante)})}else this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}openPdf(d){this.ticketService.openPdf(d,{type:this.configCompany.tipoImpresion,escPos:this.configCompany.imprimeTicketsEscPos,paperWidth:this.estacionVenta.impresoraComprobante?this.estacionVenta.impresoraComprobante.anchoPapel:void 0,imprimirLogoTicket:this.estacionVenta.impresoraComprobante?this.estacionVenta.impresoraComprobante.imprimirLogoTicket:void 0}).subscribe(F=>{const at=()=>{this.ticketService.printInQz(this.configCompany.imprimeTicketsEscPos&&"TICKET"===this.configCompany.tipoImpresion?F.escPos:F.base64,this.estacionVenta.impresoraComprobante,this.configCompany.imprimeTicketsEscPos&&"TICKET"===this.configCompany.tipoImpresion)};if(this.configCompany.impresionAutomatica&&at(),this.configCompany.previsualizarPostVenta){const K=this.dialogService.open(m.Z,{data:{ordersPrint:[{pdfPrint:F,fnPrintQz:at}],actions:[{name:"Nueva venta",method:()=>{K.destroy()}},{name:"Ver comprobantes",method:()=>{K.destroy(),this.router.navigateByUrl("/ventas/ver-comprobantes")}},{name:"Enviar",icon:"pi pi-whatsapp",method:()=>{K.destroy();const nt=this.ticketService.getDataSend(d);this.dialogService.open(e.D,{data:{dataSend:nt,sendType:"whatsapp"},header:"Enviar comprobante",width:"80%"}).onClose.subscribe(bt=>{bt&&!d.telefonoReceptor&&bt.numberPhone&&d.cliente.numeroDocumento!==this.configCompany.clientePorDefectoData.numeroDocumento&&this.confirmationService.confirm({message:`\xbfDesea registrar el n\xfamero ${bt.numberPhone} en el cliente ${d.denominacionReceptor}?`,accept:()=>{this.ticketService.editContactById(d.id,{number:bt.numberPhone}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Tel\xe9fono registrado correctamente."})})},acceptLabel:"Si",rejectLabel:"No"})})}}]},header:"Comprobante electr\xf3nico",width:"800px"})}})}openPdfQuotation(d){this.quotationService.openPdf(d).subscribe(o=>{if(this.configCompany.previsualizarPostVenta){const N=this.dialogService.open(m.Z,{data:{ordersPrint:[{pdfPrint:o}],actions:[{name:"Nueva cotizaci\xf3n",method:()=>{N.destroy(),this.router.navigateByUrl("/ventas/nueva-cotizacion")}},{name:"Ver cotizaciones",method:()=>{N.destroy(),this.router.navigateByUrl("/ventas/ver-cotizaciones")}}]},header:"Cotizaci\xf3n electr\xf3nica",width:"800px"})}})}deleteItem(d){const o=this.mf.get("items");o.length>0&&(o.removeAt(d),this.calculoTotal(),this.alternatePositionBottomTotalBar())}filterProductByCodigoAndNombre(d){const o=[`filterGlobal=${d.query.replace("&","%26")}`,"paginacion=false","limit=50"];this.productService.findAllList(o.join("&")).subscribe(N=>{this.filteredProducts=N})}selectProductBarCode(d){const N=this.modelFormItems.getRawValue().findIndex(F=>F.producto&&F.producto.id===d.id);if(N>=0){const F=this.modelFormItems.at(N).get("cantidad").value;this.selectProduct(d,N,F+1)}else this.addItem(),this.selectProduct(d,this.modelFormItems.length-1);setTimeout(()=>this.agregarProductoComponent.setFocusInput(),20)}setPriceExchange(d,o,N,F){const K=this.currencyService.exchange({codigoMonedaOrigen:o,codigoMonedaDestino:N,montoOrigen:F});d.patchValue(Object.assign(Object.assign({},this.preciosIncluidoIgv&&{precioVentaUnitario:K}),!this.preciosIncluidoIgv&&{valorUnitario:K}))}setPurchasePriceExchange(d,o,N,F){const K=this.currencyService.exchange({codigoMonedaOrigen:o,codigoMonedaDestino:N,montoOrigen:F});d.patchValue({precioCompraUnitario:K})}setProductLine(d,o){this.selectProduct(d,o),this.agregarProductoComponent.setFocusInput()}selectProduct(d,o,N,F,at){console.log("Select pro"),d.moneda||(d.moneda=this.monedaPorDefecto),at||(at={});const K=this.mf.get("items"),nt=F||Number((0,v.KL)(d,this.puntoVenta,{qty:N,igv:this.configCompany.igv})),_t=K.at(o);if(_t.patchValue(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({producto:d,montoOriginal:nt,monedaOriginal:d.moneda,descripcion:d.nombre,detalle:d.detalle},N&&{cantidad:N}),d.codigo&&{codigoProducto:d.codigo}),d.unidad&&{codigoUnidadMedida:d.unidad.codigo}),d.tipoAfectacion&&{codigoTipoAfectacionIgv:d.tipoAfectacion}),d.tieneImpuestoBolsas&&{tieneImpuestoBolsas:!0}),at)),at&&at.bloqueoItem&&(_t.get("cantidad").disable(),_t.get("producto").disable(),_t.get("codigoProducto").disable()),d&&d.loteSerie&&("SERIE"===d.tipoLote&&_t.get("cantidad").disable(),this.setLotesForm(_t)),this.setPriceExchange(K.at(o),d.moneda,this.mf.get("codigoMoneda").value,nt),this.setPurchasePriceExchange(K.at(o),d.moneda,this.mf.get("codigoMoneda").value,d.precioCompraUnidad),this.setWeightInQty(_t),this.recalcular(),this.configCompany.esGasolinera&&!this.configCompany.usaCodigoBarras){const bt=this.totalItemComponents.toArray()[o];setTimeout(()=>bt.openModalEditTotal(),30)}this.setValidationsMaxQuantityProducts(),"PLAN"===d.tipoProducto&&(d.diasCreditoPlan&&this.mf.patchValue({tipoVenta:"CREDITO",diasCredito:d.diasCreditoPlan}),d.planCampos&&d.planCampos.length&&!this.idMembresia&&(d.planCampos.forEach(bt=>{this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:bt.nombre,valorCampo:void 0})}),this.otrosDatosComprobanteComponent.openDialog()))}setLotesForm(d){if(!this.isQuotation){const o=d.get("producto").value.inventarios.find(at=>at.puntoVenta.id===this.puntoVenta.id),N=Number(d.get("cantidad").value);let F=N;if(o&&o.lotes){const at=d.get("lotes");at.clear(),o.lotes.sort((K,nt)=>{const _t=K.fechaVencimiento?new Date(K.fechaVencimiento):K.id,bt=nt.fechaVencimiento?new Date(nt.fechaVencimiento):nt.id;return _t<bt?-1:_t>bt?1:0}).map(K=>({lote:K,cantidad:void 0})).filter(K=>K.lote.cantidad).forEach(K=>{let nt=0;this.configCompany.seleccionLoteAutomatica&&(this.principalCompany||!this.principalCompany&&K.lote.empresaAdjunta&&K.lote.empresaAdjunta.id===this.companySelected.id)&&(nt=K.lote.cantidad<F?K.lote.cantidad:F,F-=nt),at.push(this.fb.group({cantidad:[nt,[g.kI.required,g.kI.min(0),g.kI.max(K.lote.cantidad)]],lote:[K.lote,[g.kI.required]]}))}),at.setValidators([(0,v.Lw)(N)])}}}setWeightInQty(d){this.isWeightItem(d)&&this.unitService.getActualValueWeightScale().pipe((0,y.UI)(o=>Number(o.weight))).subscribe(o=>{if(o){let N;switch(d.value.codigoUnidadMedida){case"KGM":N=o;break;case"GRM":N=1e3*o;break;case"MGM":N=1e6*o}d.patchValue({cantidad:N}),this.recalcular()}})}isWeightItem(d){return d.value.codigoUnidadMedida&&("KGM"===d.value.codigoUnidadMedida||"GRM"===d.value.codigoUnidadMedida||"MGM"===d.value.codigoUnidadMedida)&&this.configCompany.usoBalanza}setValidationsMaxQuantityProducts(){this.modelFormItems.controls.forEach(d=>{if(!(this.configCompany.validacionInventario&&d.get("producto").value&&d.get("producto").value.id)||d.get("producto").value.servicio||"ARTICULO"!==d.get("producto").value.tipoProducto&&"INSUMO"!==d.get("producto").value.tipoProducto||this.isQuotation)d.get("cantidad").clearValidators(),d.get("cantidad").setValidators([g.kI.required,g.kI.min(.01)]);else{const N=d.get("producto").value.inventarios.find(at=>at.puntoVenta.id===this.puntoVenta.id);let F=N?N.stock:0;d.value.cantidadOriginal&&this.isEdit&&(F+=d.value.cantidadOriginal),d.get("cantidad").clearValidators(),d.get("cantidad").setValidators([g.kI.required,g.kI.min(.01),g.kI.max(F)])}d.get("cantidad").updateValueAndValidity()})}getMessageValidationMaxQuantity(d){const o=d.get("producto").value;if(o&&o.id){const N=o.inventarios.find(at=>at.puntoVenta.id===this.puntoVenta.id);return`Se tienen ${N&&N.stock?N.stock:0} existencias en stock`}return""}selectPriceProduct(d,o){const N=this.mf.get("items");N.at(d).patchValue({montoOriginal:o}),this.setPriceExchange(N.at(d),N.at(d).value.monedaOriginal,this.mf.get("codigoMoneda").value,o),this.recalcular()}changeQtyItem(d){const N=this.mf.get("items").at(d),F=this.isProductObject(N.get("producto").value)?N.get("producto").value:void 0,at=N.get("cantidad").value;if(F&&F.id&&F.preciosVenta){const K=Number((0,v.KL)(F,this.puntoVenta,{qty:at,igv:this.configCompany.igv}));this.setPriceExchange(N,F.moneda,this.mf.get("codigoMoneda").value,K)}F&&F.loteSerie&&this.setLotesForm(N),this.recalcular()}onClearProducto(d,o){this.mf.get("items").at(o).patchValue({descripcion:void 0,detalle:void 0}),this.setValidationsMaxQuantityProducts()}onChangeProducto(d,o){const N=this.mf.get("items"),F=N.at(o).get("producto").value;let at;F&&this.isProductObject(F)&&F.nombre?at=F.nombre:(at=F,N.at(o).patchValue({precioCompraUnitario:void 0})),N.at(o).patchValue({descripcion:at,detalle:""}),this.setValidationsMaxQuantityProducts()}loadTicketForNoteParamId(){const d=this.route.snapshot.params.idTicket;d&&this.loadTicketForNote(d)}searchTicketForNote(){const d=this.mf.get("tipoComprobanteAfectado").value,o=this.mf.get("serieAfectado").value,N=this.mf.get("numeroAfectado").value;d&&o&&N?this.ticketService.findAllList([`filtroTipoComprobante=${d}`,`filtroSerie=${o}`,`filtroNumero=${N}`].join("&")).subscribe(at=>{const K=at.find(nt=>nt.tipoComprobante===d&&nt.serie===o&&Number(nt.numero)===Number(N));console.log(K),K?this.loadTicketForNote(K.id):this.messageService.add({severity:"warn",summary:"Error",detail:`Comprobante ${this.tipoDocumentoPipe.transform(d)} ${o}-${N} no encontrado.`})}):this.messageService.add({severity:"warn",summary:"Error",detail:"Debe seleccionar tipo, serie y n\xfamero de comprobante afectado."})}loadTicketForNote(d){this.ticketService.findById(d).subscribe(o=>{this.ticketAfected=o,console.log(o),this.mf.patchValue({tipoComprobanteAfectado:o.tipoComprobante,serieAfectado:o.serie,numeroAfectado:o.numero,cliente:o.cliente?Object.assign(Object.assign({},o.cliente),{fechaNacimiento:o.cliente.fechaNacimiento?new Date(o.cliente.fechaNacimiento):void 0}):{numeroDocumento:o.numeroDocumentoReceptor,tipoDocumento:o.tipoDocumentoReceptor,razonSocial:o.denominacionReceptor,email:o.emailReceptor,telefono:o.telefonoReceptor,giro:void 0,genero:void 0,expediente:void 0,fechaNacimiento:void 0,referido:void 0},codigoMoneda:o.codigoMoneda,diasCredito:o.diasCredito,flagPercepcion:void 0!==o.porcentajePercepcion,porcentajePercepcion:o.porcentajePercepcion?o.porcentajePercepcion:void 0,porcentajeDescuentoGlobal:o.porcentajeDescuentoGlobal?o.porcentajeDescuentoGlobal:void 0,porcentajeOtrosCargos:o.porcentajeOtrosCargos?o.porcentajeOtrosCargos:void 0}),this.series.forEach(N=>{"01"===o.tipoComprobante&&"F"===N.label.charAt(0)&&this.mf.patchValue({serie:N.label}),"03"===o.tipoComprobante&&"B"===N.label.charAt(0)&&this.mf.patchValue({serie:N.label})}),this.getNextNumber(this.mf.controls.serie.value),this.loadItemsFromTicketAfected()})}loadItemsFromTicketAfected(){if(this.ticketAfected){const d=this.mf.get("codigoTipoNotaCredito").value,o=`${this.tdPipe.transform(this.ticketAfected.tipoComprobante)} ${this.ticketAfected.serie}-${this.ticketAfected.numero}`,N=this.listas.tiposNotaCredito.find(K=>K.value===d).label;this.mf.patchValue({motivoNota:N}),"13"===d?(this.mf.patchValue({tipoVenta:"CREDITO"}),this.modelFormItems.clear(),this.calculoTotal(),this.mf.get("items").setValidators([]),this.mf.get("items").updateValueAndValidity()):(this.mf.patchValue({tipoVenta:"CONTADO"}),this.mf.get("items").setValidators([(0,v.eK)(1)])),this.setValidationsPays();const F=()=>{this.modelFormItems.clear(),this.addNewItem(),this.mf.get("items").controls.forEach(nt=>{nt.patchValue({valorUnitario:this.ticketAfected.totalValorVentaGravada,precioVentaUnitario:this.ticketAfected.totalVenta,descripcion:o,producto:{nombre:o}})}),this.calculoTotal()},at=()=>{this.modelFormItems.clear(),this.ticketAfected.items.forEach(K=>{K.producto||(K.producto={nombre:K.descripcion}),this.addItem(K)}),this.calculoTotal()};"07"===this.tipoComprobante&&["01","02","03","05","06","07","09"].includes(d)&&at(),("07"===this.tipoComprobante&&["04","08","10"].includes(d)||"08"===this.tipoComprobante)&&F()}}loadTicketIsEdit(){const d=this.route.snapshot.params.idTicketEdit;d&&this.ticketService.findById(d).subscribe(o=>{const N=o.vendedor?o.vendedor.id:this.loginService.getUser().id;this.mf.patchValue({serie:o.serie,numero:o.numero,fechaEmision:new Date(new Date(o.fechaEmision).getTime()+864e5),fechaVencimiento:o.fechaVencimiento?new Date(o.fechaVencimiento):null,cliente:o.cliente?Object.assign(Object.assign({},o.cliente),{fechaNacimiento:o.cliente.fechaNacimiento?new Date(o.cliente.fechaNacimiento):void 0}):{numeroDocumento:o.numeroDocumentoReceptor,tipoDocumento:o.tipoDocumentoReceptor,razonSocial:o.denominacionReceptor,email:o.emailReceptor,telefono:o.telefonoReceptor,giro:void 0,genero:void 0,expediente:void 0,fechaNacimiento:void 0,referido:void 0},tipoVenta:o.tipoVenta,diasCredito:o.diasCredito,vendedor:N,codigoMoneda:o.codigoMoneda,tipoComprobanteAfectado:o.tipoComprobanteAfectado,serieAfectado:o.serieAfectado,numeroAfectado:o.numeroAfectado,motivoNota:o.motivoNota,codigoTipoNotaCredito:o.codigoTipoNotaCredito,codigoTipoNotaDebito:o.codigoTipoNotaDebito,ordenCompra:o.ordenCompra,observacion:o.observacion,otrosCargos:o.otrosCargos?o.otrosCargos:void 0,otrosTributos:o.otrosTributos?o.otrosTributos:void 0,numeroCotizacion:o.numeroCotizacion,flagPercepcion:void 0!==o.porcentajePercepcion,porcentajePercepcion:o.porcentajePercepcion?o.porcentajePercepcion:void 0,montoRetencion:o.montoRetencion?o.montoRetencion:void 0,montoBaseRetencion:o.montoBaseRetencion?o.montoBaseRetencion:void 0,porcentajeDescuentoGlobal:o.porcentajeDescuentoGlobal?o.porcentajeDescuentoGlobal:void 0,porcentajeOtrosCargos:o.porcentajeOtrosCargos?o.porcentajeOtrosCargos:void 0,descuentoGlobal:o.descuentoGlobal,descuentoPorItem:o.descuentoPorItem,codigoMedioPago:o.codigoMedioPago,codigoDetraccion:o.codigoDetraccion,porcentajeDetraccion:o.porcentajeDetraccion,codigoTipoOperacion:o.codigoTipoOperacion,agruparItems:o.agruparItems}),o.camposAdicionales.forEach(F=>{this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:F.nombreCampo,valorCampo:F.valorCampo})}),o.guiasRelacionadas.forEach(F=>{this.otrosDatosComprobanteComponent.addGuiasRelacionadas({codigoTipoGuia:F.codigoTipoGuia,serieNumeroGuia:F.serieNumeroGuia})}),o.items.forEach(F=>{F.producto||(F.producto={nombre:F.descripcion}),this.addItem(F)}),this.mf.controls.serie.disable(),this.mf.controls.numero.disable(),this.ticketEdit=o,this.calculoTotal()})}loadQuotationIsEdit(){const d=this.route.snapshot.params.idCotizacionEdit;d&&this.quotationService.findById(d).subscribe(o=>{this.ticket=Object.assign(Object.assign({},this.ticket),o);const N=o.vendedor?o.vendedor.id:this.loginService.getUser().id;this.mf.patchValue({serie:o.serie,numero:o.numero,fechaEmision:new Date(new Date(o.fechaEmision).getTime()+864e5),fechaVencimiento:o.fechaVencimiento?new Date(o.fechaVencimiento):null,cliente:Object.assign(Object.assign({},o.cliente),{fechaNacimiento:o.cliente.fechaNacimiento?new Date(o.cliente.fechaNacimiento):void 0}),tipoVenta:o.tipoVenta,diasCredito:o.diasCredito,vendedor:N,codigoMoneda:o.codigoMoneda,tipoComprobanteAfectado:o.tipoComprobanteAfectado,serieAfectado:o.serieAfectado,numeroAfectado:o.numeroAfectado,motivoNota:o.motivoNota,codigoTipoNotaCredito:o.codigoTipoNotaCredito,codigoTipoNotaDebito:o.codigoTipoNotaDebito,observacion:o.observacion,otrosCargos:o.otrosCargos?o.otrosCargos:void 0,ofertaValido:o.ofertaValido,tiempoEntrega:o.tiempoEntrega}),o.items.forEach(F=>{F.producto||(F.producto={nombre:F.descripcion}),this.addItem(F)}),this.mf.controls.serie.disable(),this.mf.controls.numero.disable(),this.ticketEdit=o,this.calculoTotal()})}loadTicketFromNotaVenta(){this.idNotaVentaReemplazar&&this.ticketService.findById(this.idNotaVentaReemplazar).subscribe(d=>{let o="01";"1"===d.tipoDocumentoReceptor&&(o="03"),this.ticket.idNotaVentaAnulada=d.identificadorDocumento,this.mf.patchValue({tipoComprobante:o,cliente:Object.assign(Object.assign({},d.cliente),{fechaNacimiento:d.cliente.fechaNacimiento?new Date(d.cliente.fechaNacimiento):void 0}),idNotaVentaAnulada:d.identificadorDocumento,tipoVenta:d.tipoVenta,codigoMoneda:d.codigoMoneda,diasCredito:d.diasCredito,observacion:d.observacion,otrosCargos:void 0!==d.otrosCargos?d.otrosCargos:void 0,otrosTributos:void 0!==d.otrosTributos?d.otrosTributos:void 0,numeroCotizacion:d.numeroCotizacion,flagPercepcion:void 0!==d.porcentajePercepcion,porcentajePercepcion:void 0!==d.porcentajePercepcion?d.porcentajePercepcion:void 0,porcentajeDescuentoGlobal:d.porcentajeDescuentoGlobal?d.porcentajeDescuentoGlobal:void 0,porcentajeOtrosCargos:d.porcentajeOtrosCargos?d.porcentajeOtrosCargos:void 0}),d.camposAdicionales.forEach(N=>{this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:N.nombreCampo,valorCampo:N.valorCampo})}),d.guiasRelacionadas.forEach(N=>{this.otrosDatosComprobanteComponent.addGuiasRelacionadas({codigoTipoGuia:N.codigoTipoGuia,serieNumeroGuia:N.serieNumeroGuia})}),d.items.forEach(N=>{N.producto||(N.producto={nombre:N.descripcion}),this.addItem(N)}),this.calculoTotal(),this.getSeries()})}loadTicketFromMembresia(){this.idMembresia&&this.membershipService.findById(this.idMembresia).subscribe(d=>{this.addItem(),this.selectProduct(d.plan,this.modelFormItems.length-1,1,d.detalleComprobante.ticket.totalVenta),this.mf.patchValue({cliente:Object.assign(Object.assign({},d.cliente),{fechaNacimiento:d.cliente.fechaNacimiento?new Date(d.cliente.fechaNacimiento):void 0}),codigoMoneda:d.detalleComprobante.ticket.codigoMoneda}),d.detalleComprobante.ticket.camposAdicionales.forEach(o=>{this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:o.nombreCampo,valorCampo:o.valorCampo})})})}loadTicketFromCotizacion(){this.idCotizacion&&this.quotationService.findById(this.idCotizacion).subscribe(d=>{const o=d.vendedor?d.vendedor.id:this.loginService.getUser().id;this.ticket.cotizacion={id:d.id},d.items.forEach(F=>{F.producto||(F.producto={nombre:F.descripcion}),this.addItem(F)}),this.calculoTotal(),this.mf.patchValue({tipoComprobante:"6"===d.tipoDocumentoReceptor?"01":"03",cliente:Object.assign(Object.assign({},d.cliente),{fechaNacimiento:d.cliente.fechaNacimiento?new Date(d.cliente.fechaNacimiento):void 0}),tipoVenta:"CONTADO",vendedor:o,codigoMoneda:d.codigoMoneda,numeroCotizacion:d.numero}),this.getSeries()})}loadTicketFromCuentaRestaurante(){this.idCuentaRestaurante&&this.checkService.findById(this.idCuentaRestaurante).subscribe(d=>{if(d.pagado)this.messageService.add({severity:"error",summary:"Error",detail:"La cuenta ya se encuentra pagada"}),this.router.navigateByUrl("/restaurante/cobrador/cuentas");else{let o;if(this.store.dispatch(new p.N(d)),this.cuentaRestaurante=d,d.cliente&&(o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d.cliente),d.cliente.porDefecto&&d.pedido.denominacionReceptor&&{razonSocial:d.pedido.denominacionReceptor}),d.cliente.porDefecto&&d.pedido.direccionReceptor&&{direccionCompleta:d.pedido.direccionReceptor}),d.cliente.porDefecto&&d.pedido.telefonoReceptor&&{telefono:d.pedido.telefonoReceptor}),d.cliente.porDefecto&&d.pedido.emailReceptor&&{email:d.pedido.emailReceptor}),d.cliente.porDefecto&&d.pedido.numeroDocumentoReceptor&&{numeroDocumento:d.pedido.numeroDocumentoReceptor})),this.mf.patchValue(Object.assign({tipoVenta:"CONTADO"},o&&{cliente:o})),d.pedido&&d.pedido.mesa&&this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:"Mesa",valorCampo:d.pedido.mesa.numero}),d.pedido&&d.pedido.usuario&&this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:"Camarero",valorCampo:d.pedido.usuario.nombreCompleto}),d.pedido&&d.pedido.telefonoReceptor&&this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:"Telefono",valorCampo:d.pedido.telefonoReceptor}),d.items.filter(N=>"CANCELADO"!==N.estadoComandaDetalle).forEach(N=>{this.addItem(),this.selectProduct(N.producto,this.modelFormItems.length-1,N.cantidad,N.precioVenta,{bloqueoItem:!0,comandaDetalle:N})}),d.pedido&&d.pedido.montoDelivery){const N="Servicio delivery";this.addItem({producto:{nombre:N},descripcion:N,cantidad:1,precioVentaUnitario:d.pedido.montoDelivery})}d.pedido&&d.pedido.direccionCompleta&&this.otrosDatosComprobanteComponent.addOtrosDatos({nombreCampo:"Direcci\xf3n delivery",valorCampo:d.pedido.direccionCompleta}),this.calculoTotal(),this.getSeries(),"LOCAL"!==d.pedido.tipo&&this.showDialogFinalizar()}})}onChangeTipoVenta(){this.setValidationsPays()}setValidationsPays(){if("CONTADO"===this.mf.get("tipoVenta").value){if(this.mf.controls.diasCredito.clearValidators(),this.mf.controls.diasCredito.updateValueAndValidity(),this.mf.controls.diasCredito.setValue(null),["01","03","NV"].includes(this.tipoComprobante)){this.mf.get("pagos").clearValidators(),this.mf.get("pagos").setValidators([(0,v.Kv)(this.ticket.totalVenta)]);const d=this.configCompany.formasPago.find(N=>"EFECTIVO"===N.formaPago),o=[];d&&this.totalVenta&&o.push({monto:Number(this.ticket.totalVenta.toFixed(2)),nombre:"Efectivo",formaPago:a.XB.EFECTIVO,metodoPago:d,montoPagado:Number(this.ticket.totalVenta.toFixed(2))}),this.mf.patchValue({pagos:o})}this.cuotasComprobanteComponent&&this.cuotasComprobanteComponent.clear(),this.mf.get("cuotas").clearValidators()}else this.mf.controls.diasCredito.setValidators([g.kI.required]),this.mf.controls.diasCredito.updateValueAndValidity(),this.mf.patchValue({diasCredito:30}),this.mf.get("pagos").clearValidators(),this.mf.get("pagos").updateValueAndValidity(),("01"===this.tipoComprobante||"03"===this.tipoComprobante)&&this.cuotasComprobanteComponent&&(this.cuotasComprobanteComponent.addCuota(this.totalVenta),this.mf.get("cuotas").setValidators([(0,v.F_)(this.totalVenta),(0,v.eK)(1)]));this.mf.get("cuotas").updateValueAndValidity()}get totalVenta(){return this.ticket.totalVenta}changeCodigoMoneda(){const d=this.mf.value.codigoMoneda;this.mf.get("items").controls.forEach(N=>{const F=this.preciosIncluidoIgv?N.get("precioVentaUnitario").value:N.get("valorUnitario").value;let at=N.get("montoOriginal").value;const K=N.get("monedaOriginal").value;at||(at=F,N.patchValue({montoOriginal:at})),this.setPriceExchange(N,K,d,at);const nt=N.get("producto").value;this.isProductObject(nt)&&this.setPurchasePriceExchange(N,K,d,nt.precioCompraUnidad)}),this.calculoTotal()}changeTotalItem(d,o){const N=Number(o.value.precioVentaUnitario);N&&d&&(o.patchValue({cantidad:d/N}),this.calculoTotal())}}Dt.\u0275fac=function(d){return new(d||Dt)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(i.yh),t.Y36(h.l),t.Y36(r.E),t.Y36(f.r),t.Y36(Z.w),t.Y36(C.C),t.Y36(E.B),t.Y36(M.i),t.Y36(x.G),t.Y36(_.ez),t.Y36(A.v),t.Y36(k.E),t.Y36(V.W),t.Y36(L.J),t.Y36(z.t),t.Y36(Y.uU),t.Y36(g.qu),t.Y36(it.M),t.Y36(E.B),t.Y36(_.YP),t.Y36(Q.p),t.Y36(R.i),t.Y36(b.xA),t.Y36(O._),t.Y36(q.v))},Dt.\u0275cmp=t.Xpm({type:Dt,selectors:[["app-emitir-comprobante"]],viewQuery:function(d,o){if(1&d&&(t.Gf(Ke,5),t.Gf(We,5),t.Gf(Xe,5),t.Gf(to,5),t.Gf(eo,5),t.Gf(oo,5)),2&d){let N;t.iGM(N=t.CRH())&&(o.agregarProductoComponent=N.first),t.iGM(N=t.CRH())&&(o.otrosDatosComprobanteComponent=N.first),t.iGM(N=t.CRH())&&(o.cuotasComprobanteComponent=N.first),t.iGM(N=t.CRH())&&(o.descripcionProductoItems=N),t.iGM(N=t.CRH())&&(o.totalItemComponents=N),t.iGM(N=t.CRH())&&(o.optionsItemProduct=N)}},inputs:{liteInterface:"liteInterface"},decls:153,vars:114,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-12","md:col-6"],["legend","Datos comprobante"],[1,"grid","p-fluid"],["class","col-12 md:col-6",4,"ngIf"],[1,"col-12","md:col-3"],[1,"label-form"],["formControlName","serie",3,"style","options","onChange",4,"ngIf"],["placeholder","Serie","formControlName","serie","style","width: 100%;","type","text","pInputText","",4,"ngIf"],["severity","error","text","Ingrese Serie",4,"ngIf"],["placeholder","N\xfamero","formControlName","numero","type","text","pInputText","",2,"width","100%",3,"readonly"],["severity","error","text","Ingrese n\xfamero",4,"ngIf"],["class","col-12 md:col-4 xl:col-3",4,"ngIf"],[1,"col-6","md:col-4","sm:col-6","xl:col-3"],["formControlName","codigoMoneda","placeholder","Seleccione","name","moneda",3,"options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["severity","error","text","Ingrese moneda",4,"ngIf"],["class","col-6 md:col-4 sm:col-6 xl:col-3",3,"hidden",4,"ngIf"],[1,"col-4","md:col-3","xl:col-2"],[3,"modelForm","isQuotation","tipoComprobante"],["otrosDatosComprobanteComponent",""],["class","col-4 md:col-3 xl:col-2",4,"ngIf"],["class","col-12 md:col-4 sm:col-6 xl:col-3",4,"ngIf"],["class","col-4 md:col-3",4,"ngIf"],["class","col-6 md:col-3 sm:col-4 xl:col-2",3,"hidden",4,"ngIf"],["class","col-6 md:col-3 sm:col-4 xl:col-2",4,"ngIf"],["legend","Cliente"],[3,"parentForm","codigoTipoOperacion","tipoComprobante","totalComprobante","permiteClientePorDefecto"],[1,"col-12",3,"hidden"],["legend","Comprobante afectado"],[1,"col-6","sm:col-4","md:col-3","xl:col-2"],["formControlName","tipoComprobanteAfectado","placeholder","Seleccione tipo comprobante",3,"options"],["severity","error","text","Seleccione tipo comprobante",4,"ngIf"],[1,"col-6","sm:col-3","md:col-2","xl:col-1"],["formControlName","serieAfectado","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese serie",4,"ngIf"],[1,"p-inputgroup"],["formControlName","numeroAfectado","type","text","pInputText","",2,"width","100%"],["pButton","","type","button","icon","pi pi-search",3,"disabled","click"],[1,"col-6","sm:col-4","md:col-3","xl:col-2",3,"hidden"],["formControlName","codigoTipoNotaCredito","placeholder","Seleccione tipo nota",3,"options","onChange"],["severity","error","text","Seleccione tipo nota",4,"ngIf"],["formControlName","codigoTipoNotaDebito","placeholder","Seleccione tipo nota",3,"options"],[1,"col-6","md:col-6"],["formControlName","motivoNota","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese motivo",4,"ngIf"],["class","col-12",4,"ngIf"],["id","container-products",1,"col-12"],[3,"ngClass"],["legend","Productos / Servicios"],[1,"col-12"],["formArrayName","items","styleClass","p-datatable-sm",3,"value","rows","responsive"],["pTemplate","header"],["pTemplate","body"],["severity","error","text","Agregue productos/servicios",4,"ngIf"],["class","grid mb-2",4,"ngIf"],["legend","Totales"],[1,"col-12","md:col-8"],["class","col",4,"ngIf"],[1,"col"],[1,"label-form","text-bold"],[1,"m-0"],["class","col",4,"appPermission"],[1,"col-12","md:col-4","flex","justify-content-end","flex-wrap"],["id","buttonRc","icon","pi pi-save","pButton","","type","button","label","Registrar",1,"p-button-rounded","p-button-success",2,"width","auto","padding","8px 15px","font-size","20px",3,"click"],["appendTo","body","header","Finalizar",3,"visible","modal","responsive","onHide","visibleChange"],[1,"mt-0","mb-0"],["style","color: #a03838","class","mt-0 mb-0",4,"ngIf"],[1,"col-12","flex-center-x"],["pButton","","type","submit","label","Confirmar",1,"p-button-rounded","p-button-success",2,"width","auto","padding","8px 15px","font-size","20px",3,"click"],["formControlName","tipoComprobante",3,"options","onChange",4,"ngIf"],["formControlName","tipoComprobante",3,"style","options",4,"ngIf"],["formControlName","tipoComprobante",3,"options","onChange"],["formControlName","tipoComprobante",3,"options"],["formControlName","serie",3,"options","onChange"],["placeholder","Serie","formControlName","serie","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese Serie"],["severity","error","text","Ingrese n\xfamero"],[1,"col-12","md:col-4","xl:col-3"],["placeholder","Fecha de emisi\xf3n","formControlName","fechaEmision","dateFormat","dd/mm/yy",3,"locale","minDate","maxDate"],["severity","error","text","Ingrese fecha",4,"ngIf"],["severity","error","text","Ingrese fecha"],["showButtonBar","true","placeholder","Fecha de vencimiento","formControlName","fechaVencimiento","dateFormat","dd/mm/yy",3,"locale"],[2,"vertical-align","middle"],["severity","error","text","Ingrese moneda"],[1,"col-6","md:col-4","sm:col-6","xl:col-3",3,"hidden"],["formControlName","codigoTipoOperacion",3,"options","onChange"],["severity","error","text","Ingrese tipo de operaci\xf3n",4,"ngIf"],["severity","error","text","Ingrese tipo de operaci\xf3n"],["formControlName","codigoDetraccion","placeholder","Seleccione tipo",3,"filter","showClear","options"],["severity","error","text","Ingrese tipo detracci\xf3n",4,"ngIf"],["severity","error","text","Ingrese tipo detracci\xf3n"],["formControlName","codigoMedioPago","placeholder","Seleccione medio",3,"filter","showClear","options"],["severity","error","text","Ingrese medio de pago",4,"ngIf"],["severity","error","text","Ingrese medio de pago"],["placeholder","% detracci\xf3n","formControlName","porcentajeDetraccion","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"input"],["severity","error","text","Ingrese % detracci\xf3n",4,"ngIf"],["severity","error","text","Ingrese % detracci\xf3n"],["formControlName","flagPercepcion"],[1,"col-12","md:col-4","sm:col-6","xl:col-3"],["formControlName","porcentajePercepcion","placeholder","Seleccione porcentaje",3,"options"],["severity","error","text","Ingrese porcentaje de percepci\xf3n",4,"ngIf"],["severity","error","text","Ingrese porcentaje de percepci\xf3n"],["formControlName","flagRetencion",3,"onChange"],["formControlName","porcentajeRetencion","placeholder","Seleccione porcentaje",3,"options"],["severity","error","text","Ingrese porcentaje de retenci\xf3n",4,"ngIf"],["severity","error","text","Ingrese porcentaje de retenci\xf3n"],["formControlName","preciosIncluidoIgv"],[1,"col-4","md:col-3"],["formControlName","ofertaValido","placeholder","Dias","type","text","pInputText","",2,"width","100%"],["formControlName","tiempoEntrega","placeholder","Dias","type","text","pInputText","",2,"width","100%"],[1,"col-6","md:col-3","sm:col-4","xl:col-2",3,"hidden"],["formControlName","ordenCompra","type","text","pInputText","",2,"width","100%"],[1,"col-6","md:col-3","sm:col-4","xl:col-2"],["filter","true","formControlName","vendedor","placeholder","Seleccione vendedor",3,"disabled","options"],["severity","error","text","Seleccione tipo comprobante"],["severity","error","text","Ingrese serie"],["severity","error","text","Seleccione tipo nota"],["severity","error","text","Ingrese motivo"],[3,"modelForm","montoDetraccion","totalVenta"],["cuotasComprobanteComponent",""],["severity","error","text","Ingrese valor de cuotas correctas",4,"ngIf"],["severity","error","text","Ingrese al menos una cuota",4,"ngIf"],["severity","error","text","Ingrese valor de cuotas correctas"],["severity","error","text","Ingrese al menos una cuota"],[3,"visibleAddItem","selectProduct","addItem"],["agregarProductoComponent",""],[3,"selectProduct"],[4,"ngIf"],[2,"width","25%"],[2,"width","140px"],[3,"formGroupName"],[1,"p-column-title"],["placeholder","C\xf3digo","formControlName","codigoProducto","type","text","pInputText","",2,"width","100%"],[1,"p-fluid"],["field","nombre","formControlName","producto","placeholder","Art\xedculo",3,"suggestions","minLength","onSelect","onUnselect","onClear","onKeyUp","completeMethod"],["descripcionProducto",""],["severity","error","text","Ingrese descripci\xf3n",4,"ngIf"],["severity","error","text","Debe ingresar un producto registrado en la base de datos",4,"ngIf"],["formControlName","codigoUnidadMedida",3,"options"],["severity","error","text","Ingrese unidad de medida",4,"ngIf"],["formControlName","codigoTipoAfectacionIgv",3,"options","onChange"],["severity","error","text","Ingrese c\xf3digo de Igv",4,"ngIf"],["pTooltip","Da doble click para traer el peso actual de la balanza","placeholder","Cantidad","formControlName","cantidad","style","width: 100%;","type","text","pKeyFilter","num","pInputText","",3,"dblclick","blur","input",4,"ngIf"],["placeholder","Cantidad","formControlName","cantidad","style","width: 100%;","type","text","pKeyFilter","num","pInputText","",3,"blur","input",4,"ngIf"],["severity","error","text","Ingrese cantidad",4,"ngIf"],["severity","error","text","M\xednimo inv\xe1lido",4,"ngIf"],["severity","error",3,"text",4,"ngIf"],["class","p-column-title",4,"ngIf"],["formControlName","valorVenta","type","text",2,"display","none"],["disabled","","type","text","pInputText","",2,"width","100%",3,"value"],["severity","error","text","Ingrese valor de venta",4,"ngIf"],[3,"esGasolinera","total","changeTotal"],["totalItemComponent",""],["severity","error","text","Ingrese precio total",4,"ngIf"],[1,"space-buttons"],[3,"idProduct","selectPrice"],[3,"modelForm","disabled","saveForm"],["optionsItemProduct",""],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar",1,"p-button-danger",2,"margin-left","0.1em","margin-right","0.1em",3,"disabled","click"],["class","ml-3",4,"ngIf"],[1,"ml-3"],["mostrar","tag",3,"producto"],["severity","error","text","Ingrese descripci\xf3n"],["severity","error","text","Debe ingresar un producto registrado en la base de datos"],["severity","error","text","Ingrese unidad de medida"],["severity","error","text","Ingrese c\xf3digo de Igv"],["pTooltip","Da doble click para traer el peso actual de la balanza","placeholder","Cantidad","formControlName","cantidad","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"dblclick","blur","input"],["placeholder","Cantidad","formControlName","cantidad","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"blur","input"],["severity","error","text","Ingrese cantidad"],["severity","error","text","M\xednimo inv\xe1lido"],["severity","error",3,"text"],["placeholder","Valor unitario","formControlName","valorUnitario","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"input","blur"],["severity","error","text","Ingrese valor unitario",4,"ngIf"],["severity","error","text","Ingrese valor unitario"],["placeholder","Precio unitario","formControlName","precioVentaUnitario","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"readOnly","input","blur"],["severity","error","text","Ingrese precio unitario",4,"ngIf"],["severity","error","text","Ingrese precio unitario"],["severity","error","text","Ingrese valor de venta"],["severity","error","text","Ingrese precio total"],["severity","error","text","Agregue productos/servicios"],[1,"grid","mb-2"],[3,"visibleAddItem","disableAddItem","selectProduct","addItem"],[1,"p-inputgroup-addon"],[1,"pi","pi-percentage"],["pKeyFilter","num","formControlName","porcentajeDescuentoGlobal","placeholder","Porcentaje descuento global","type","text","pInputText","",2,"width","100%",3,"input"],["severity","error","text","Porcentaje inv\xe1lido",4,"ngIf"],["severity","error","text","L\xedmite superado",4,"ngIf"],["severity","error","text","Porcentaje inv\xe1lido"],["severity","error","text","L\xedmite superado"],["pKeyFilter","num","formControlName","porcentajeOtrosCargos","placeholder","Porcentaje recargo al consumo","type","text","pInputText","",2,"width","100%",3,"input"],["severity","error","text","L\xedmite m\xe1ximo debe ser 13%, INFORME N.\xb0 191-2019-SUNAT/7T0000",4,"ngIf"],["severity","error","text","L\xedmite m\xe1ximo debe ser 13%, INFORME N.\xb0 191-2019-SUNAT/7T0000"],[1,"mt-0","mb-0",2,"color","#a03838"],["formControlName","tipoVenta",3,"options","onChange"],["severity","error","text","Ingrese tipo venta",4,"ngIf"],["severity","error","text","Ingrese tipo venta"],["formControlName","agruparItems"],["pKeyFilter","num","formControlName","diasCredito","placeholder","D\xedas cr\xe9dito","type","number","pInputText","",2,"width","100%"],["severity","error","text","Ingrese N\xba de d\xedas cr\xe9dito",4,"ngIf"],["severity","error","text","Ingrese N\xba de d\xedas cr\xe9dito"],["formControlName","pagos","tipo","INGRESO",3,"total","moneda"],["severity","error","text","Pago incorrecto",4,"ngIf"],["severity","error","text","Pago incorrecto"],[3,"modelForm","montoDetraccion","montoRetencion","totalVenta"]],template:function(d,o){1&d&&(t.TgZ(0,"p-card"),t.TgZ(1,"form",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"p-fieldset",3),t.TgZ(5,"div",4),t.YNc(6,jt,6,3,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"label",7),t._uU(9,"Serie (*)"),t.qZA(),t.YNc(10,qt,1,4,"p-dropdown",8),t.YNc(11,ao,1,0,"input",9),t.YNc(12,lo,1,0,"p-message",10),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"label",7),t._uU(15,"Numero (*)"),t.qZA(),t._UZ(16,"input",11),t.YNc(17,Lt,1,0,"p-message",12),t.qZA(),t.YNc(18,ee,5,7,"div",13),t.YNc(19,co,5,5,"div",13),t.TgZ(20,"div",14),t.TgZ(21,"label",7),t._uU(22,"Moneda (*)"),t.qZA(),t.TgZ(23,"p-dropdown",15),t.NdJ("onChange",function(){return o.changeCodigoMoneda()}),t.YNc(24,uo,3,4,"ng-template",16),t.YNc(25,fo,2,4,"ng-template",17),t.qZA(),t.YNc(26,po,1,0,"p-message",18),t.qZA(),t.YNc(27,ho,5,6,"div",19),t.YNc(28,J,5,8,"div",19),t.YNc(29,P,5,8,"div",19),t.YNc(30,tt,5,2,"div",19),t.TgZ(31,"div",20),t.TgZ(32,"label",7),t._uU(33,"Otros datos"),t.qZA(),t._UZ(34,"app-otros-datos-comprobante",21,22),t.qZA(),t.YNc(36,ut,5,0,"div",23),t.YNc(37,Bt,5,5,"div",24),t.YNc(38,Jt,5,0,"div",23),t.YNc(39,Yt,5,5,"div",24),t.YNc(40,$t,5,0,"div",23),t.YNc(41,zt,4,0,"div",25),t.YNc(42,vo,4,0,"div",25),t.YNc(43,_o,4,1,"div",26),t.YNc(44,yo,4,5,"div",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",2),t.TgZ(46,"p-fieldset",28),t._UZ(47,"app-cliente-form",29),t.qZA(),t.qZA(),t.TgZ(48,"div",30),t.TgZ(49,"p-fieldset",31),t.TgZ(50,"div",1),t.TgZ(51,"div",32),t.TgZ(52,"label",7),t._uU(53,"Tipo (*)"),t.qZA(),t._UZ(54,"p-dropdown",33),t.YNc(55,bo,1,0,"p-message",34),t.qZA(),t.TgZ(56,"div",35),t.TgZ(57,"label",7),t._uU(58,"Serie (*)"),t.qZA(),t._UZ(59,"input",36),t.YNc(60,Co,1,0,"p-message",37),t.qZA(),t.TgZ(61,"div",35),t.TgZ(62,"label",7),t._uU(63,"N\xfamero (*)"),t.qZA(),t.TgZ(64,"div",38),t._UZ(65,"input",39),t.TgZ(66,"button",40),t.NdJ("click",function(){return o.searchTicketForNote()}),t.qZA(),t.qZA(),t.YNc(67,To,1,0,"p-message",12),t.qZA(),t.TgZ(68,"div",41),t.TgZ(69,"label",7),t._uU(70,"Tipo nota de cr\xe9dito (*)"),t.qZA(),t.TgZ(71,"p-dropdown",42),t.NdJ("onChange",function(){return o.loadItemsFromTicketAfected()}),t.qZA(),t.YNc(72,xo,1,0,"p-message",43),t.qZA(),t.TgZ(73,"div",41),t.TgZ(74,"label",7),t._uU(75,"Tipo nota de d\xe9bito (*)"),t.qZA(),t._UZ(76,"p-dropdown",44),t.YNc(77,Zo,1,0,"p-message",43),t.qZA(),t.TgZ(78,"div",45),t.TgZ(79,"label",7),t._uU(80,"Motivo nota (*)"),t.qZA(),t._UZ(81,"input",46),t.YNc(82,Eo,1,0,"p-message",47),t.qZA(),t.YNc(83,No,7,5,"div",48),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",49),t.TgZ(85,"div",50),t.TgZ(86,"p-fieldset",51),t.TgZ(87,"div",1),t.YNc(88,Po,4,1,"div",48),t.TgZ(89,"div",52),t.TgZ(90,"p-table",53),t.YNc(91,qo,21,3,"ng-template",54),t.YNc(92,ln,60,34,"ng-template",55),t.qZA(),t.qZA(),t.qZA(),t.YNc(93,sn,1,0,"p-message",56),t.qZA(),t.qZA(),t.qZA(),t.TgZ(94,"div",50),t.YNc(95,cn,4,2,"div",57),t.TgZ(96,"p-fieldset",58),t.TgZ(97,"div",4),t.TgZ(98,"div",59),t.TgZ(99,"div",4),t.YNc(100,un,6,5,"div",60),t.YNc(101,fn,6,5,"div",60),t.YNc(102,pn,6,5,"div",60),t.YNc(103,dn,6,5,"div",60),t.YNc(104,mn,6,5,"div",60),t.YNc(105,hn,6,5,"div",60),t.YNc(106,gn,6,5,"div",60),t.TgZ(107,"div",61),t.TgZ(108,"label",62),t._uU(109,"GRAVADA"),t.qZA(),t.TgZ(110,"p",63),t._uU(111),t.ALo(112,"montoDinero"),t.qZA(),t.qZA(),t.TgZ(113,"div",61),t.TgZ(114,"label",62),t._uU(115),t.qZA(),t.TgZ(116,"p",63),t._uU(117),t.ALo(118,"montoDinero"),t.qZA(),t.qZA(),t.YNc(119,vn,6,5,"div",60),t.YNc(120,_n,6,5,"div",60),t.YNc(121,yn,6,5,"div",60),t.YNc(122,bn,6,5,"div",60),t.TgZ(123,"div",61),t.TgZ(124,"label",62),t._uU(125,"TOTAL"),t.qZA(),t.TgZ(126,"p",63),t._uU(127),t.ALo(128,"montoDinero"),t.qZA(),t.qZA(),t.YNc(129,Cn,6,5,"div",60),t.YNc(130,Tn,6,5,"div",60),t.YNc(131,Zn,9,2,"div",64),t.YNc(132,In,9,2,"div",60),t.qZA(),t.qZA(),t.TgZ(133,"div",65),t.TgZ(134,"button",66),t.NdJ("click",function(){return o.showDialogFinalizar()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(135,"p-dialog",67),t.NdJ("onHide",function(){return o.onHideDialogFinalizar()})("visibleChange",function(F){return o.dialogRegisterTicket=F}),t.TgZ(136,"form",0),t.TgZ(137,"div",1),t.TgZ(138,"div",52),t.TgZ(139,"p-card"),t.TgZ(140,"div",1),t.TgZ(141,"div",2),t.TgZ(142,"h1",68),t._uU(143),t.ALo(144,"montoDinero"),t.qZA(),t.YNc(145,Nn,3,4,"h1",69),t.qZA(),t.YNc(146,kn,3,2,"div",5),t.qZA(),t.qZA(),t.qZA(),t.YNc(147,wn,5,0,"div",48),t.YNc(148,qn,5,1,"div",5),t.YNc(149,Sn,3,3,"div",48),t.YNc(150,Rn,7,6,"div",48),t.TgZ(151,"div",70),t.TgZ(152,"button",71),t.NdJ("click",function(){return o.registrar()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(1),t.Q6J("formGroup",o.mf),t.xp6(5),t.Q6J("ngIf",!o.isQuotation),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(1),t.Q6J("ngIf",o.mf.get("serie").touched&&(null==o.mf.get("serie").errors?null:o.mf.get("serie").errors.required)),t.xp6(4),t.Q6J("readonly",o.readOnlyNumeracion),t.xp6(1),t.Q6J("ngIf",o.mf.get("numero").touched&&(null==o.mf.get("numero").errors?null:o.mf.get("numero").errors.required)),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.isQuotation&&!o.liteInterface),t.xp6(4),t.Akn(t.DdM(109,Et)),t.Q6J("options",o.monedas),t.xp6(3),t.Q6J("ngIf",o.mf.get("codigoMoneda").touched&&(null==o.mf.get("codigoMoneda").errors?null:o.mf.get("codigoMoneda").errors.required)),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(4),t.Q6J("modelForm",o.mf)("isQuotation",o.isQuotation)("tipoComprobante",o.tipoComprobante),t.xp6(2),t.Q6J("ngIf",!o.isQuotation&&!o.liteInterface&&"01"===o.mf.get("tipoComprobante").value),t.xp6(1),t.Q6J("ngIf",o.mf.controls.flagPercepcion.value&&!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.isQuotation&&!o.liteInterface&&"01"===o.mf.get("tipoComprobante").value),t.xp6(1),t.Q6J("ngIf",o.mf.controls.flagRetencion.value&&!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",o.isQuotation&&!o.liteInterface),t.xp6(1),t.Q6J("ngIf",o.isQuotation&&!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(1),t.Q6J("ngIf",!o.liteInterface),t.xp6(3),t.Q6J("parentForm",o.mf)("codigoTipoOperacion",o.mf.get("codigoTipoOperacion").value)("tipoComprobante",o.mf.get("tipoComprobante").value)("totalComprobante",o.ticket.totalVenta)("permiteClientePorDefecto",!o.isEdit&&!o.idCotizacion),t.xp6(1),t.Q6J("hidden","07"!==o.tipoComprobante&&"08"!==o.tipoComprobante),t.xp6(6),t.Akn(t.DdM(110,Et)),t.Q6J("options",o.listas.tipoComprobantesVentaForNote),t.xp6(1),t.Q6J("ngIf",o.mf.get("tipoComprobanteAfectado").touched&&(null==o.mf.get("tipoComprobanteAfectado").errors?null:o.mf.get("tipoComprobanteAfectado").errors.required)),t.xp6(5),t.Q6J("ngIf",o.mf.get("serieAfectado").touched&&(null==o.mf.get("serieAfectado").errors?null:o.mf.get("serieAfectado").errors.required)),t.xp6(6),t.Q6J("disabled",!o.mf.get("numeroAfectado").value),t.xp6(1),t.Q6J("ngIf",o.mf.get("numeroAfectado").touched&&(null==o.mf.get("numeroAfectado").errors?null:o.mf.get("numeroAfectado").errors.required)),t.xp6(1),t.Q6J("hidden","08"==o.tipoComprobante),t.xp6(3),t.Akn(t.DdM(111,Et)),t.Q6J("options",o.listas.tiposNotaCredito),t.xp6(1),t.Q6J("ngIf",o.mf.get("codigoTipoNotaCredito").touched&&(null==o.mf.get("codigoTipoNotaCredito").errors?null:o.mf.get("codigoTipoNotaCredito").errors.required)),t.xp6(1),t.Q6J("hidden","07"==o.tipoComprobante),t.xp6(3),t.Akn(t.DdM(112,Et)),t.Q6J("options",o.listas.tiposNotaDebito),t.xp6(1),t.Q6J("ngIf",o.mf.get("codigoTipoNotaDebito").touched&&(null==o.mf.get("codigoTipoNotaDebito").errors?null:o.mf.get("codigoTipoNotaDebito").errors.required)),t.xp6(5),t.Q6J("ngIf",o.mf.get("motivoNota").touched&&(null==o.mf.get("motivoNota").errors?null:o.mf.get("motivoNota").errors.required)),t.xp6(1),t.Q6J("ngIf","13"===o.mf.get("codigoTipoNotaCredito").value&&"CREDITO"===o.ticketAfected.tipoVenta),t.xp6(2),t.Q6J("ngClass",o.barBottomTotalFixed?"mb-6 pb-4":""),t.xp6(3),t.Q6J("ngIf",!o.barBottomTotalFixed),t.xp6(2),t.Q6J("value",o.modelFormItems.controls)("rows",10)("responsive",!0),t.xp6(3),t.Q6J("ngIf",o.mf.get("items").touched&&(null==o.mf.get("items").errors?null:o.mf.get("items").errors.minLengthArray)),t.xp6(1),t.Q6J("ngClass",o.barBottomTotalFixed?"bar-total-fixed-bottom":"col-12"),t.xp6(1),t.Q6J("ngIf",o.barBottomTotalFixed),t.xp6(5),t.Q6J("ngIf",o.ticket.totalValorVentaExportacion),t.xp6(1),t.Q6J("ngIf",o.ticket.totalValorVentaExonerada),t.xp6(1),t.Q6J("ngIf",o.ticket.totalValorVentaInafecta),t.xp6(1),t.Q6J("ngIf",o.ticket.totalValorVentaGratuita),t.xp6(1),t.Q6J("ngIf",o.ticket.descuentoGlobal),t.xp6(1),t.Q6J("ngIf",o.ticket.descuentoPorItem),t.xp6(1),t.Q6J("ngIf",o.ticket.totalDescuento),t.xp6(5),t.Oqu(t.Dn7(112,94,o.ticket.totalValorVentaGravada,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales)),t.xp6(4),t.hij("IGV ",(100*o.configCompany.igv).toFixed(2),"%"),t.xp6(2),t.Oqu(t.Dn7(118,98,o.ticket.totalIgv,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales)),t.xp6(2),t.Q6J("ngIf",o.ticket.totalTributosBolsas),t.xp6(1),t.Q6J("ngIf",o.ticket.totalIsc),t.xp6(1),t.Q6J("ngIf",o.ticket.otrosTributos),t.xp6(1),t.Q6J("ngIf",o.ticket.otrosCargos),t.xp6(5),t.Oqu(t.Dn7(128,102,o.ticket.totalVenta,o.mf.get("codigoMoneda").value,o.configCompany.cantDecimales)),t.xp6(2),t.Q6J("ngIf",o.ticket.montoRetencion),t.xp6(1),t.Q6J("ngIf",o.ticket.montoDetraccion),t.xp6(1),t.Q6J("appPermission","VENTAS_AGREGAR_DESCUENTO"),t.xp6(1),t.Q6J("ngIf",!o.configCompany.recargoPorItem),t.xp6(3),t.Akn(t.DdM(113,Fn)),t.Q6J("visible",o.dialogRegisterTicket)("modal",!0)("responsive",!0),t.xp6(1),t.Q6J("formGroup",o.mf),t.xp6(7),t.hij("Total: ",t.xi3(144,106,o.totalVenta,o.mf.get("codigoMoneda").value),""),t.xp6(2),t.Q6J("ngIf",o.cambioFormaPago&&o.cambioFormaPago>0),t.xp6(1),t.Q6J("ngIf","03"===o.mf.get("tipoComprobante").value||"01"===o.mf.get("tipoComprobante").value||"NV"===o.mf.get("tipoComprobante").value),t.xp6(1),t.Q6J("ngIf",o.configCompany.agruparItemsVenta),t.xp6(1),t.Q6J("ngIf",("03"===o.mf.get("tipoComprobante").value||"01"===o.mf.get("tipoComprobante").value||"NV"===o.mf.get("tipoComprobante").value||"07"===o.mf.get("tipoComprobante").value)&&"CREDITO"===o.mf.value.tipoVenta&&o.dialogRegisterTicket),t.xp6(1),t.Q6J("ngIf",("03"===o.mf.get("tipoComprobante").value||"01"===o.mf.get("tipoComprobante").value||"NV"===o.mf.get("tipoComprobante").value)&&"CONTADO"===o.mf.value.tipoVenta&&o.dialogRegisterTicket),t.xp6(1),t.Q6J("ngIf",("03"===o.mf.get("tipoComprobante").value||"01"===o.mf.get("tipoComprobante").value||"NV"===o.mf.get("tipoComprobante").value||"07"===o.mf.get("tipoComprobante").value)&&"CREDITO"===o.mf.value.tipoVenta&&o.dialogRegisterTicket))},directives:[U.Z,g._Y,g.JL,g.sg,j.p,Y.O5,D.UN,g.JJ,g.u,B.Lt,g.Fj,G.o,W.q,ot.H,lt.f,_.jx,ft.Fr,Ct,Ft.Ql,Tt.B,pt.Hq,re,Y.mk,ae.d,le.j,Kt.iA,g.CE,g.x0,se.d,ce.Qc,vt.u,me,he.v,Mt,Wt.l,ht.V,g.wV,ze.M],pipes:[Ge.s,He.Z],styles:[".label-total[_ngcontent-%COMP%]{color:#163acb;font-weight:700}.hidden[_ngcontent-%COMP%]{display:none!important}.affix[_ngcontent-%COMP%]{position:fixed}.text-hide[_ngcontent-%COMP%]{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.center-block[_ngcontent-%COMP%]{display:block;margin-right:auto;margin-left:auto}.pull-right[_ngcontent-%COMP%]{float:right!important}.pull-left[_ngcontent-%COMP%]{float:left!important}.hide[_ngcontent-%COMP%]{display:none!important}.show[_ngcontent-%COMP%]{display:block!important}.invisible[_ngcontent-%COMP%]{visibility:hidden}.head-items[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:stretch;align-content:stretch}.bar-total-fixed-bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;left:0;z-index:1000;background:white;box-shadow:-1px -3px 5px #6b6b6b40;padding:15px}"]}),(0,s.gn)([(0,i.Ph)(n.Z.getConfig)],Dt.prototype,"configCompany$",void 0),(0,s.gn)([(0,i.Ph)(n.Z.getCompanySelected)],Dt.prototype,"companySelected$",void 0),(0,s.gn)([(0,i.Ph)(n.Z.getCompany)],Dt.prototype,"company$",void 0),(0,s.gn)([(0,i.Ph)(n.Z.getOffice)],Dt.prototype,"puntoVenta$",void 0),(0,s.gn)([(0,i.Ph)(n.Z.getSaleStation)],Dt.prototype,"estacionVenta$",void 0)},36283:(It,$,c)=>{"use strict";c.r($),c.d($,{VentasModule:()=>go});var s=c(74202),u=c(57446),w=c(70655),I=c(8929),g=c(30567),y=c(66239),v=c(82817),i=c(85932),n=c(81575),a=c(92340),m=c(51420),p=c(87814),e=c(5e3),t=c(1203),l=c(96310),h=c(33379),r=c(20207),f=c(69808),Z=c(24876),C=c(59783),E=c(2314),M=c(24394),x=c(47745),_=c(21602),A=c(45330),k=c(86529),V=c(96039),L=c(74297),z=c(17102),Y=c(93075),it=c(14036),Q=c(75652),R=c(86526),b=c(31424),O=c(20657),q=c(79142),U=c(98952),j=c(4119),D=c(40845),B=c(93036),G=c(77121);function W(J,S){if(1&J&&(e.TgZ(0,"div",3),e.TgZ(1,"h3",4),e._uU(2,"Fecha de caja"),e.qZA(),e.TgZ(3,"p",5),e._uU(4),e.ALo(5,"date"),e.qZA(),e.qZA()),2&J){const P=e.oxw(2);e.xp6(4),e.hij(" ",e.xi3(5,1,null==P.ticket||null==P.ticket.movimientoCaja||null==P.ticket.movimientoCaja.cashRegister?null:P.ticket.movimientoCaja.cashRegister.fecha,"dd/MM/yyyy")," ")}}function ot(J,S){if(1&J&&(e.TgZ(0,"div",3),e.TgZ(1,"h3",4),e._uU(2,"Turno"),e.qZA(),e.TgZ(3,"p",5),e._uU(4),e.qZA(),e.qZA()),2&J){const P=e.oxw(2);e.xp6(4),e.hij(" ",null==P.ticket||null==P.ticket.movimientoCaja||null==P.ticket.movimientoCaja.cashRegister?null:P.ticket.movimientoCaja.cashRegister.turno," ")}}function lt(J,S){if(1&J&&(e.TgZ(0,"p",5),e._uU(1),e.ALo(2,"montoDinero"),e.qZA()),2&J){const P=S.$implicit,H=e.oxw(3);e.xp6(1),e.AsE(" ",P.metodoPago.nombre,": ",e.xi3(2,2,P.monto,H.ticket.codigoMoneda)," ")}}function ft(J,S){if(1&J&&(e.TgZ(0,"div",3),e.TgZ(1,"h3",4),e._uU(2,"Pagos"),e.qZA(),e.YNc(3,lt,3,5,"p",6),e.qZA()),2&J){const P=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",null==P.ticket||null==P.ticket.movimientoCaja?null:P.ticket.movimientoCaja.pagos)}}function pt(J,S){if(1&J&&(e.TgZ(0,"div",1),e.YNc(1,W,6,4,"div",2),e.YNc(2,ot,5,1,"div",2),e.YNc(3,ft,4,1,"div",2),e.qZA()),2&J){const P=e.oxw();e.xp6(1),e.Q6J("ngIf",null==P.ticket?null:P.ticket.movimientoCaja),e.xp6(1),e.Q6J("ngIf",null==P.ticket?null:P.ticket.movimientoCaja),e.xp6(1),e.Q6J("ngIf",null==P.ticket||null==P.ticket.movimientoCaja?null:P.ticket.movimientoCaja.pagos)}}let ht=(()=>{class J{constructor(P){this.ticketService=P}ngOnInit(){this.ticketService.findById(this.idTicket).subscribe(P=>{this.ticket=P,console.log(P)})}}return J.\u0275fac=function(P){return new(P||J)(e.Y36(t.w))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-ver-detalle-ticket"]],inputs:{idTicket:"idTicket"},decls:1,vars:1,consts:[["class","grid",4,"ngIf"],[1,"grid"],["class","col",4,"ngIf"],[1,"col"],[1,"mb-0"],[1,"mt-1"],["class","mt-1",4,"ngFor","ngForOf"]],template:function(P,H){1&P&&e.YNc(0,pt,4,3,"div",0),2&P&&e.Q6J("ngIf",H.ticket)},directives:[f.O5,f.sg],pipes:[f.uU,G.Z],styles:[""]}),J})();var vt=c(5766),At=c(15315),xt=c(73407),X=c(23582);const et=["fileUploadEmail"],st=["dt"],ct=function(){return{label:"Web",value:"PLATFORM"}},rt=function(){return{label:"Api",value:"API"}},mt=function(J,S){return[J,S]};function gt(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"label",5),e._uU(2,"Plataforma"),e.qZA(),e.TgZ(3,"p-selectButton",36),e.NdJ("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroCanal=tt})("onChange",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Q6J("options",e.WLB(4,mt,e.DdM(2,ct),e.DdM(3,rt)))("ngModel",P.filtroCanal)}}const dt=function(){return{width:"100%"}};function Ot(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"label",5),e._uU(2,"Punto de venta"),e.qZA(),e.TgZ(3,"p-dropdown",37),e.NdJ("onChange",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()})("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroPuntoVenta=tt}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Akn(e.DdM(5,dt)),e.Q6J("showClear",!0)("ngModel",P.filtroPuntoVenta)("options",P.puntosVenta)}}function Nt(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",5),e._uU(2,"Desde"),e.qZA(),e.TgZ(3,"p-calendar",38),e.NdJ("onSelect",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()})("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroDesde=tt}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Akn(e.DdM(5,dt)),e.Q6J("ngModel",P.filtroDesde)("showTime",!0)("locale",P.ls.calendarEs)}}function Ct(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",5),e._uU(2,"Hasta"),e.qZA(),e.TgZ(3,"p-calendar",39),e.NdJ("onSelect",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()})("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroHasta=tt}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Akn(e.DdM(5,dt)),e.Q6J("ngModel",P.filtroHasta)("showTime",!0)("locale",P.ls.calendarEs)}}function Ft(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"label",5),e._uU(2,"Est. caja"),e.qZA(),e.TgZ(3,"p-dropdown",40),e.NdJ("onChange",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()})("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroEstacionVenta=tt}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Akn(e.DdM(5,dt)),e.Q6J("showClear",!0)("ngModel",P.filtroEstacionVenta)("options",P.estacionesVenta)}}const Tt=function(){return{label:"Todos",value:"all"}},Pt=function(){return{label:"Mesa",value:"LOCAL"}},oe=function(){return{label:"Llevar",value:"PEDIDO_LOCAL"}},ne=function(){return{label:"Delivery",value:"PEDIDO_FORANEO"}},ie=function(J,S,P,H){return[J,S,P,H]};function re(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"label",5),e._uU(2,"Tipo pedido"),e.qZA(),e.TgZ(3,"p-selectButton",42),e.NdJ("onChange",function(){return e.CHM(P),e.oxw().resetAndRefreshTable()})("ngModelChange",function(tt){return e.CHM(P),e.oxw().filtroTipoPedido=tt}),e.qZA(),e.qZA()}if(2&J){const P=e.oxw();e.xp6(3),e.Q6J("options",e.l5B(6,ie,e.DdM(2,Tt),e.DdM(3,Pt),e.DdM(4,oe),e.DdM(5,ne)))("ngModel",P.filtroTipoPedido)}}function ae(J,S){if(1&J&&(e.TgZ(0,"div",44),e.TgZ(1,"div",45),e.TgZ(2,"h2",46),e._uU(3),e.ALo(4,"montoDinero"),e.qZA(),e.qZA(),e.TgZ(5,"div",47),e._UZ(6,"p-tag",48),e.ALo(7,"montoDinero"),e._UZ(8,"p-tag",49),e.ALo(9,"montoDinero"),e._UZ(10,"p-tag",49),e.ALo(11,"montoDinero"),e._UZ(12,"p-tag",49),e.ALo(13,"montoDinero"),e._UZ(14,"p-tag",50),e.ALo(15,"montoDinero"),e._UZ(16,"p-tag",49),e.ALo(17,"montoDinero"),e.qZA(),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(3),e.hij("Total: ",e.xi3(4,7,P.totalCalculado,P.codigoMoneda),""),e.xp6(3),e.MGl("value","Igv: ",e.xi3(7,10,P.totalIgv,P.codigoMoneda),""),e.xp6(2),e.MGl("value","Facturas: ",e.xi3(9,13,P.totalFacturas,P.codigoMoneda),""),e.xp6(2),e.MGl("value","Boletas: ",e.xi3(11,16,P.totalBoletas,P.codigoMoneda),""),e.xp6(2),e.MGl("value","Notas de venta: ",e.xi3(13,19,P.totalNotasVenta,P.codigoMoneda),""),e.xp6(2),e.MGl("value","Notas de cr\xe9dito: ",e.xi3(15,22,P.totalNotasCredito,P.codigoMoneda),""),e.xp6(2),e.MGl("value","Notas de d\xe9bito: ",e.xi3(17,25,P.totalNotasDebito,P.codigoMoneda),"")}}function le(J,S){if(1&J&&(e.ynx(0),e.YNc(1,ae,18,28,"div",43),e.BQk()),2&J){const P=S.$implicit;e.xp6(1),e.Q6J("ngIf",P.totalCalculado)}}function Kt(J,S){1&J&&(e.TgZ(0,"th",64),e._uU(1,"Emisor"),e.qZA())}function se(J,S){if(1&J&&(e.TgZ(0,"tr"),e._UZ(1,"th",51),e.TgZ(2,"th",52),e._uU(3,"Fecha "),e._UZ(4,"p-sortIcon",53),e.qZA(),e.TgZ(5,"th",54),e._uU(6,"Comprobante "),e._UZ(7,"p-sortIcon",55),e.qZA(),e.YNc(8,Kt,2,0,"th",56),e.TgZ(9,"th",57),e._uU(10,"Cliente"),e.qZA(),e.TgZ(11,"th",58),e._uU(12,"Total "),e._UZ(13,"p-sortIcon",59),e.qZA(),e.TgZ(14,"th",60),e._uU(15,"Anulado "),e._UZ(16,"p-sortIcon",61),e.qZA(),e.TgZ(17,"th",62),e._uU(18,"Est. Sunat "),e._UZ(19,"p-sortIcon",63),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Imprimir"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Acciones"),e.qZA(),e.qZA()),2&J){const P=e.oxw();e.xp6(8),e.Q6J("ngIf",P.hasCompanies)}}function ce(J,S){if(1&J&&(e.TgZ(0,"p",92),e._uU(1),e.ALo(2,"tipoDocumento"),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,P.tipoComprobante)," ")}}function ue(J,S){if(1&J&&(e.TgZ(0,"p",68),e._uU(1),e.ALo(2,"tipoDocumento"),e.qZA()),2&J){const P=e.oxw().$implicit,H=e.oxw();e.Q6J("pTooltip",H.showTextTicketRelated(P)),e.xp6(1),e.hij(" ",e.lcZ(2,2,P.tipoComprobante)," ")}}function fe(J,S){if(1&J&&(e.TgZ(0,"td"),e.TgZ(1,"span",67),e._uU(2,"Emisor"),e.qZA(),e.TgZ(3,"p",74),e._uU(4),e.qZA(),e.TgZ(5,"p",93),e._uU(6),e.qZA(),e.qZA()),2&J){const P=e.oxw().$implicit,H=e.oxw();e.xp6(4),e.Oqu(P.numeroDocumentoIdentidadRemitente),e.xp6(1),e.Q6J("pTooltip",H.showNameCompany(P)),e.xp6(1),e.Oqu(H.showNameCompany(P))}}function pe(J,S){if(1&J&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"montoDinero"),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,P.totalVenta,P.codigoMoneda))}}function de(J,S){if(1&J&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"montoDinero"),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.hij(" (Gratuita: ",e.xi3(2,1,P.totalValorVentaGratuita,P.codigoMoneda)," )")}}function me(J,S){if(1&J&&(e._uU(0),e.ALo(1,"montoDinero")),2&J){const P=e.oxw().$implicit;e.Oqu(e.xi3(1,1,0,P.codigoMoneda))}}function he(J,S){1&J&&(e.TgZ(0,"span",94),e._uU(1,"Si"),e.qZA())}function Ut(J,S){1&J&&(e.TgZ(0,"span",95),e._uU(1,"No"),e.qZA())}function ge(J,S){if(1&J&&e._UZ(0,"span",96),2&J){const P=e.oxw().$implicit;e.Q6J("pTooltip","Nota de venta reemplazada por el comprobante "+P.comprobanteSustituto)}}const Wt=function(J,S){return{"p-tag-success":J,"p-tag-danger":S}};function ve(J,S){if(1&J&&(e.TgZ(0,"span",97),e._uU(1),e.ALo(2,"estadoSunat"),e.qZA()),2&J){const P=e.oxw().$implicit;e.Q6J("pTooltip",P.mensajeRespuesta)("ngClass",e.WLB(5,Wt,"ACEPT"===P.estadoSunat,"ANULA"===P.estadoSunat)),e.xp6(1),e.Oqu(e.lcZ(2,3,P.estadoSunat))}}function _e(J,S){1&J&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function ye(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",98),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw().$implicit;return e.oxw().sendSunat(tt)}),e.qZA()}}function be(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",99),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw().$implicit;return e.oxw().downloadFile(tt,"CDR")}),e.qZA()}}function Ce(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",101),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().goEditTicket(tt)}),e.qZA()}}function Te(J,S){if(1&J&&(e.TgZ(0,"span"),e.YNc(1,Ce,1,0,"button",100),e.qZA()),2&J){const P=e.oxw().$implicit,H=e.oxw();e.xp6(1),e.Q6J("ngIf",H.canEdit(P))}}function xe(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",103),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().goNotaCredito(tt)}),e.qZA()}}function Xt(J,S){if(1&J&&(e.TgZ(0,"span"),e.YNc(1,xe,1,0,"button",102),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",("01"===P.tipoComprobante||"03"===P.tipoComprobante)&&"ACEPT"===P.estadoSunat)}}function Ae(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",105),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().goNotaDebito(tt)}),e.qZA()}}function Ze(J,S){if(1&J&&(e.TgZ(0,"span"),e.YNc(1,Ae,1,0,"button",104),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",("01"===P.tipoComprobante||"03"===P.tipoComprobante)&&"ACEPT"===P.estadoSunat)}}function Ee(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",107),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().showModalAnular(tt)}),e.qZA()}}function Oe(J,S){if(1&J&&(e.TgZ(0,"span"),e.YNc(1,Ee,1,0,"button",106),e.qZA()),2&J){const P=e.oxw().$implicit,H=e.oxw();e.xp6(1),e.Q6J("ngIf",H.canAnular(P))}}function Ie(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",109),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().goGuiaRemision(tt)}),e.qZA()}}function Ne(J,S){if(1&J&&(e.TgZ(0,"span"),e.YNc(1,Ie,1,0,"button",108),e.qZA()),2&J){const P=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","01"===P.tipoComprobante||"03"===P.tipoComprobante||"NV"===P.tipoComprobante)}}function Pe(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",110),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw().$implicit;return e.oxw().goGenerateBoletaOrFactura(tt)}),e.qZA()}}function ke(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",65),e._UZ(3,"i",66),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"span",67),e._uU(6,"Fecha"),e.qZA(),e.TgZ(7,"span",68),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"span",67),e._uU(12,"Comprobante"),e.qZA(),e.TgZ(13,"span"),e.YNc(14,ce,3,3,"p",69),e.YNc(15,ue,3,4,"p",70),e.TgZ(16,"p",71),e._uU(17),e.qZA(),e.TgZ(18,"p",72),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,fe,7,3,"td",33),e.TgZ(21,"td"),e.TgZ(22,"span",67),e._uU(23,"Cliente"),e.qZA(),e.TgZ(24,"div",44),e.TgZ(25,"div",73),e.TgZ(26,"p",74),e._uU(27),e.qZA(),e.TgZ(28,"p",75),e._uU(29),e.qZA(),e.qZA(),e.TgZ(30,"div",76),e.TgZ(31,"button",77),e.NdJ("click",function(){const ut=e.CHM(P).$implicit;return e.oxw().showModalSend(ut,"email")}),e.qZA(),e.TgZ(32,"button",78),e.NdJ("click",function(){const ut=e.CHM(P).$implicit;return e.oxw().showModalSend(ut,"whatsapp")}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"td"),e.TgZ(34,"span",67),e._uU(35,"Total"),e.qZA(),e.YNc(36,pe,3,4,"span",79),e.YNc(37,de,3,4,"span",33),e.YNc(38,me,2,4,"ng-template",null,80,e.W1O),e.qZA(),e.TgZ(40,"td"),e.TgZ(41,"span",67),e._uU(42,"Anulado"),e.qZA(),e.TgZ(43,"span"),e.YNc(44,he,2,0,"span",81),e.YNc(45,Ut,2,0,"span",82),e.YNc(46,ge,1,1,"span",83),e.qZA(),e.qZA(),e.TgZ(47,"td"),e.TgZ(48,"span",67),e._uU(49,"Est. Sunat"),e.qZA(),e.YNc(50,ve,3,8,"span",84),e.YNc(51,_e,2,0,"span",33),e.qZA(),e.TgZ(52,"td"),e.TgZ(53,"span",67),e._uU(54,"Imprimir"),e.qZA(),e.TgZ(55,"button",85),e.NdJ("click",function(){const ut=e.CHM(P).$implicit;return e.oxw().openPdf(ut,"A4")}),e.qZA(),e.TgZ(56,"button",86),e.NdJ("click",function(){const ut=e.CHM(P).$implicit;return e.oxw().openPdf(ut,"TICKET")}),e.qZA(),e.qZA(),e.TgZ(57,"td"),e.TgZ(58,"span",67),e._uU(59,"Acciones"),e.qZA(),e.YNc(60,ye,1,0,"button",87),e.TgZ(61,"button",88),e.NdJ("click",function(){const ut=e.CHM(P).$implicit;return e.oxw().downloadFile(ut,"XML")}),e.qZA(),e.YNc(62,be,1,0,"button",89),e.YNc(63,Te,2,1,"span",90),e.YNc(64,Xt,2,1,"span",90),e.YNc(65,Ze,2,1,"span",90),e.YNc(66,Oe,2,1,"span",90),e.YNc(67,Ne,2,1,"span",90),e.YNc(68,Pe,1,0,"button",91),e.qZA(),e.qZA()}if(2&J){const P=S.expanded,H=S.$implicit,tt=e.MAs(39),ut=e.oxw();e.xp6(2),e.Q6J("pRowToggler",H),e.xp6(1),e.Q6J("ngClass",P?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(4),e.Q6J("pTooltip",ut.showToolTipFechaEmisionFormat(H.fechaRegistro)),e.xp6(1),e.Oqu(e.xi3(9,28,H.fechaEmisionDate,"dd-MM-yyyy hh:mm a")),e.xp6(6),e.Q6J("ngIf","01"===H.tipoComprobante||"03"===H.tipoComprobante||"NV"===H.tipoComprobante),e.xp6(1),e.Q6J("ngIf","07"===H.tipoComprobante||"08"===H.tipoComprobante),e.xp6(2),e.AsE("",H.serie,"-",H.numero,""),e.xp6(2),e.Oqu(H.comprobanteAnterior),e.xp6(1),e.Q6J("ngIf",ut.hasCompanies),e.xp6(7),e.Oqu(H.numeroDocumentoReceptor),e.xp6(2),e.Oqu(H.denominacionReceptor),e.xp6(7),e.Q6J("ngIf",H.totalVenta)("ngIfElse",tt),e.xp6(1),e.Q6J("ngIf",H.totalValorVentaGratuita),e.xp6(7),e.Q6J("ngIf",H.anulado),e.xp6(1),e.Q6J("ngIf",!H.anulado),e.xp6(1),e.Q6J("ngIf",H.comprobanteSustituto),e.xp6(4),e.Q6J("ngIf","NV"!==H.tipoComprobante),e.xp6(1),e.Q6J("ngIf","NV"===H.tipoComprobante),e.xp6(9),e.Q6J("ngIf",ut.canSendSunat(H)),e.xp6(2),e.Q6J("ngIf","ACEPT"===H.estadoSunat||"ANULA"===H.estadoSunat),e.xp6(1),e.Q6J("appPermission","VENTAS_EDITAR"),e.xp6(1),e.Q6J("appPermission","VENTAS_CREAR"),e.xp6(1),e.Q6J("appPermission","VENTAS_CREAR"),e.xp6(1),e.Q6J("appPermission","VENTAS_ANULAR"),e.xp6(1),e.Q6J("appPermission","GUIA_REMISION_CREAR"),e.xp6(1),e.Q6J("ngIf","NV"===H.tipoComprobante&&null==H.comprobanteSustituto)}}function we(J,S){if(1&J&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"app-ver-detalle-ticket",111),e.qZA(),e.qZA()),2&J){const P=S.$implicit;e.xp6(1),e.uIk("colspan",18),e.xp6(1),e.Q6J("idTicket",P.id)}}function De(J,S){if(1&J&&(e.TgZ(0,"div",112),e.TgZ(1,"div"),e.TgZ(2,"span",113),e._UZ(3,"button",114),e.qZA(),e.TgZ(4,"span",113),e._UZ(5,"app-actions",115),e.qZA(),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"b"),e._uU(8,"Num. comprobantes:"),e.qZA(),e._uU(9),e.qZA(),e.qZA()),2&J){const P=e.oxw();e.xp6(5),e.Q6J("items",P.actionsExportData),e.xp6(4),e.hij(" ",P.totalRecords," ")}}function qe(J,S){1&J&&(e.TgZ(0,"p"),e.TgZ(1,"strong"),e._uU(2,"Nota:"),e.qZA(),e._uU(3," El comprobante se anular\xe1 por comunicaci\xf3n de baja."),e.qZA())}function Me(J,S){1&J&&(e.TgZ(0,"p"),e.TgZ(1,"strong"),e._uU(2,"Nota:"),e.qZA(),e._uU(3," El comprobante se anular\xe1 por resumen diario. "),e.qZA())}const Se=function(){return{label:"Si",value:!0}},Ve=function(){return{label:"No",value:!1}},Ue=function(){return{label:"Activos",value:!1}},Re=function(){return{label:"Anulados",value:!0}},Fe=function(J,S,P){return[J,S,P]},je=function(){return{width:"450px",minWidth:"200px"}};class wt{constructor(S,P,H,tt,ut,yt,Bt,Jt,Qt,Yt,$t,zt,vo,_o,yo,bo,Co,To,xo){this.route=S,this.router=P,this.ticketService=H,this.companyService=tt,this.userService=ut,this.loginService=yt,this.datePipe=Bt,this.storageService=Jt,this.messageService=Qt,this.tdPipe=Yt,this.confirmationService=$t,this.tipoDocumentoPipe=zt,this.store=vo,this.ls=_o,this.breadcrumbService=yo,this.currencyService=bo,this.dialogService=Co,this.saleStationService=To,this.qzTrayService=xo,this.unsubscribe$=new I.xQ,this.configCompany={},this.tickets=[],this.perPage=10,this.modoFiltroRangoFechas=!0,this.filtroCanal="PLATFORM",this.filtroTipoComprobante=[],this.filtroTipoPedido="all",this.hideLoader=!1,this.puntosVenta=[],this.estacionesVenta=[],this.tiposComprobantes=[],this.totales=[],this.visibleAnular=!1,this.metodosPago=[],this.metodosPagoSelect=[]}ngOnInit(){this.filtroEstadoAnulacion="all",this.breadcrumbService.setItems((0,v.kn)(this.route)),this.configCompany$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(P=>{this.configCompany=P,this.loadPaymentsMethods()}),this.tiposComprobantes=[{value:"01",label:"Factura"},{value:"03",label:"Boleta"},{value:"07",label:"Nota de cr\xe9dito"},{value:"08",label:"Nota de d\xe9bito"},{value:"NV",label:"Nota de venta"}];const S=new Date;this.filtroDesde=new Date(S.getFullYear(),S.getMonth(),1,0,0,0),this.filtroHasta=new Date(S.getFullYear(),S.getMonth()+1,0,23,59,59),this.integracionApi=this.loginService.getUser().empresa.integracionApi,this.loadData(),this.validarPuntoVenta(),this.changeModoFiltroRangoFechas(),this.loadSaleStation()}get hasCompanies(){return this.loginService.getUser().empresasAdjuntas&&this.loginService.getUser().empresasAdjuntas.length}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadSaleStation(){this.filtroEstacionVenta=void 0;const S=["paginacion=false"];this.filtroPuntoVenta&&S.push(`idPuntoVenta=${this.filtroPuntoVenta.id}`),this.saleStationService.findAll(S.join("&")).subscribe(P=>this.estacionesVenta=P)}openPdf(S,P){this.ticketService.openPdf(S,{type:P,escPos:this.configCompany.imprimeTicketsEscPos,paperWidth:this.estacionVenta.impresoraComprobante?this.estacionVenta.impresoraComprobante.anchoPapel:void 0,imprimirLogoTicket:this.estacionVenta.impresoraComprobante?this.estacionVenta.impresoraComprobante.imprimirLogoTicket:void 0}).subscribe(ut=>{console.log(ut),this.dialogService.open(m.Z,{data:{ordersPrint:[{pdfPrint:ut,fnPrintQz:()=>{this.ticketService.printInQz(this.configCompany.imprimeTicketsEscPos&&"TICKET"===P?ut.escPos:ut.base64,this.estacionVenta.impresoraComprobante,this.configCompany.imprimeTicketsEscPos&&"TICKET"===P)}}]},header:"Comprobante electr\xf3nico",width:"60%"})})}resetAndRefreshTable(){this.tabla.clear()}changeModoFiltroRangoFechas(){if(this.modoFiltroRangoFechas){const S=new Date;this.filtroDesde=new Date(S.getFullYear(),S.getMonth(),1,0,0,0),this.filtroHasta=new Date(S.getFullYear(),S.getMonth()+1,0,23,59,59)}else this.filtroDesde=null,this.filtroHasta=null;this.resetAndRefreshTable()}validarPuntoVenta(){this.puntoVenta$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(S=>{this.filtroPuntoVenta=S,this.resetAndRefreshTable()}),this.estacionVenta$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(S=>{this.estacionVenta=S})}loadLazy(S){const H=[`filtroCanal=${this.filtroCanal}`,"pageNumber="+S.first/this.perPage,`perPage=${S.rows}`];"all"!==this.filtroEstadoAnulacion&&H.push(`filtroEstadoAnulacion=${this.filtroEstadoAnulacion}`),this.filtroDesde&&H.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy H:mm:ss")}`),this.filtroHasta&&H.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy H:mm:ss")}`),this.filtroTipoComprobante&&this.filtroTipoComprobante.forEach(tt=>{H.push(`filtroTipoComprobante=${tt}`)}),this.filtroRuc&&H.push(`filtroRuc=${this.filtroRuc}`),this.filtroSerie&&H.push(`filtroSerie=${this.filtroSerie}`),this.filtroNumero&&H.push(`filtroNumero=${this.filtroNumero}`),this.filtroPuntoVenta&&"PLATFORM"===this.filtroCanal&&H.push(`idPuntoVenta=${this.filtroPuntoVenta.id}`),this.filtroEstacionVenta&&"PLATFORM"===this.filtroCanal&&H.push(`idEstacionVenta=${this.filtroEstacionVenta.id}`),this.filtroTurnoCaja&&H.push(`filtroTurnoCaja=${this.filtroTurnoCaja}`),this.filtroFechaCaja&&H.push(`filtroFechaCaja=${this.datePipe.transform(this.filtroFechaCaja,"dd-MM-yyyy")}`),"all"!==this.filtroTipoPedido&&H.push(`filtroTipoPedido=${this.filtroTipoPedido}`),S.sortOrder&&H.push(`sortOrder=${S.sortOrder}`),S.sortField&&H.push(`sortField=${S.sortField}`),this.metodosPagoSelect.forEach(tt=>H.push(`idMetodoPago=${tt}`)),this.setUrlsExport(H),this.ticketService.findAllPage(H.join("&")).subscribe(tt=>{this.totalRecords=tt.totalElements,this.tickets=tt.content}),this.loadTotales(H)}loadTotales(S){this.currencyService.findAll().subscribe(P=>{const H=P.map(tt=>{const ut=[...S,`filtroMoneda=${tt.codigoMoneda}`,"porDetalle=false"];return this.ticketService.totales(ut.join("&")).pipe((0,y.UI)(yt=>Object.assign(Object.assign({},yt),{totalCalculado:yt.totalBoletas+yt.totalFacturas+yt.totalNotasVenta+yt.totalNotasDebito-yt.totalNotasCredito})))});(0,g.D)(H).subscribe(tt=>{this.totales=tt.filter(ut=>ut.codigoMoneda)})})}showToolTipFechaEmisionFormat(S){const P=new Date(S);return`Registrado el d\xeda ${this.datePipe.transform(P,"dd-MM-yyyy")} a las ${this.datePipe.transform(P," h:mm:ss a")}`}showTextTicketRelated(S){return`Comprobante relacionado: ${this.tdPipe.transform(S.tipoComprobanteAfectado)}\n         ${S.serieAfectado}-${S.numeroAfectado}`}showNameCompany(S){return this.loginService.getUser().empresa.ruc===S.rucEmisor?this.loginService.getUser().empresa.razonSocial:this.loginService.getUser().empresasAdjuntas.find(P=>P.ruc===S.rucEmisor).razonSocial}canEdit(S){if("ANULA"===S.estadoSunat||"07"===S.estado||"09"===S.estado||"01"===S.tipoComprobante&&"ACEPT"===S.estadoSunat||"07"===S.tipoComprobante&&"ACEPT"===S.estadoSunat&&"01"===S.tipoComprobanteAfectado||"08"===S.tipoComprobante&&"ACEPT"===S.estadoSunat&&"01"===S.tipoComprobanteAfectado)return!1;if("07"===S.tipoComprobante&&"03"===S.tipoComprobanteAfectado||"08"===S.tipoComprobante&&"03"===S.tipoComprobanteAfectado)return!0;const P=this.datePipe.transform(new Date,"yyyy-MM-dd");return!(!this.loginService.hasPermission("VENTAS_MAYOR_TIEMPO_EDITAR")&&S.fechaEmision!==P||!this.loginService.hasPermission("VENTAS_EDITAR_FACTURAS")&&"01"===S.tipoComprobante)}canSendSunat(S){return"01"===S.tipoComprobante&&"N_ENV"===S.estadoSunat||"07"===S.tipoComprobante&&"01"===S.tipoComprobanteAfectado&&"N_ENV"===S.estadoSunat||"08"===S.tipoComprobante&&"01"===S.tipoComprobanteAfectado&&"N_ENV"===S.estadoSunat}canAnular(S){return!("ANULA"===S.estadoSunat||"01"===S.tipoComprobante&&"ACEPT"!==S.estadoSunat||"07"===S.tipoComprobante&&"ACEPT"!==S.estadoSunat&&"01"===S.tipoComprobanteAfectado||"08"===S.tipoComprobante&&"ACEPT"!==S.estadoSunat&&"01"===S.tipoComprobanteAfectado||("03"!==S.tipoComprobante||"01"!==S.estado&&"02"!==S.estado)&&("07"!==S.tipoComprobante||"03"!==S.tipoComprobanteAfectado||"01"!==S.estado&&"02"!==S.estado)&&("08"!==S.tipoComprobante||"03"!==S.tipoComprobanteAfectado||"01"!==S.estado&&"02"!==S.estado)&&("03"===S.tipoComprobante&&("07"===S.estado||"09"===S.estado)||"NV"===S.tipoComprobante&&"08"===S.estado))}setUrlsExport(S){const P=this.loginService.getUser().empresa.uuid,H=`${a.N.endpointApi}/public/export-data/${P}/tickets`,tt=[...S,"tipoReporte=NORMAL"],ut=[...S,"tipoReporte=DETALLADO"],yt=[...S,"tipoReporte=DETALLADO_CLIENTE"];this.actionsExportData=[{icon:"fa fa-file-excel-o",label:"Exportar a excel",url:`${H}.xlsx?${tt.join("&")}`},{icon:"fa fa-file-pdf-o",label:"Exportar a pdf",url:`${H}.pdf?${tt.join("&")}`},{icon:"fa fa-file-excel-o",label:"Exportar a excel detallado",url:`${H}.xlsx?${ut.join("&")}`},{icon:"fa fa-file-excel-o",label:"Exportar a excel detallado (Cliente)",url:`${H}.xlsx?${yt.join("&")}`}]}showModalSend(S,P){const H=this.ticketService.getDataSend(S);this.dialogService.open(p.D,{data:{dataSend:H,sendType:P},header:"Enviar comprobante",width:"80%"}).onClose.subscribe(ut=>{ut&&(!S.telefonoReceptor&&ut.numberPhone&&S.cliente.numeroDocumento!==this.configCompany.clientePorDefectoData.numeroDocumento&&this.confirmationService.confirm({message:`\xbfDesea registrar el n\xfamero ${ut.numberPhone} en el cliente ${S.denominacionReceptor}?`,accept:()=>{this.ticketService.editContactById(S.id,{number:ut.numberPhone}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Tel\xe9fono registrado correctamente."}),this.resetAndRefreshTable()})},acceptLabel:"Si",rejectLabel:"No"}),!S.emailReceptor&&ut.email&&this.confirmationService.confirm({message:`\xbfDesea registrar el email ${ut.email} en el cliente ${S.denominacionReceptor}?`,accept:()=>{this.ticketService.editContactById(S.id,{email:ut.email}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Email registrado correctamente."}),this.resetAndRefreshTable()})},acceptLabel:"Si",rejectLabel:"No"}))})}loadData(){this.puntosVenta=this.loginService.getPuntosVentaUsuario(),console.log("Listando puntos de venta",this.puntosVenta)}sendSunat(S){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de enviar el comprobante ${this.tdPipe.transform(S.tipoComprobante)} ${S.serie}-${S.numero}?`,accept:()=>{this.ticketService.enviarSunat(S.id).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante enviado correctamente"}),this.tabla._filter()})},acceptLabel:"Si",rejectLabel:"No"})}goAnularComprobante(){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de anular el comprobante: ${this.tdPipe.transform(this.ticketAnular.tipoComprobante)} (${this.ticketAnular.serie}-${this.ticketAnular.numero})?`,accept:()=>{this.ticketService.anularComprobante(this.ticketAnular.identificadorDocumento,{motivo:this.motivoAnular}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante anulado correctamente."}),this.visibleAnular=!1,this.tabla._filter()})},acceptLabel:"Si",rejectLabel:"No"})}goGenerateBoletaOrFactura(S){this.router.navigateByUrl(`/ventas/nueva-venta/notaventa/${S.id}`)}showModalAnular(S){this.motivoAnular="",this.ticketAnular=S,this.visibleAnular=!0}goNotaCredito(S){this.router.navigateByUrl(`/ventas/emitir-nota-credito/${S.id}`)}goNotaDebito(S){this.router.navigateByUrl(`/ventas/emitir-nota-debito/${S.id}`)}goGuiaRemision(S){this.router.navigateByUrl(`/guia-remision/emitir-guia/venta/${S.id}`)}goEditTicket(S){("01"===S.tipoComprobante||"03"===S.tipoComprobante||"NV"===S.tipoComprobante)&&this.router.navigateByUrl(`/ventas/editar-venta/${S.tipoComprobante}/${S.id}`),"07"===S.tipoComprobante&&this.router.navigateByUrl(`/ventas/editar-nota-credito/${S.id}`),"08"===S.tipoComprobante&&this.router.navigateByUrl(`/ventas/editar-nota-debito/${S.id}`)}downloadFile(S,P){const H=S.archivos.find(tt=>tt.tipoArchivo===P&&"ACTIVO"===tt.estadoArchivo);this.storageService.downloadFile(H.fileStorage)}loadPaymentsMethods(){this.configCompany&&(this.metodosPago=this.configCompany.formasPago.filter(S=>"EFECTIVO"===S.formaPago||"INGRESO"===S.tipoMovimiento).map(S=>({label:S.nombre,value:S.id})))}}wt.\u0275fac=function(S){return new(S||wt)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(t.w),e.Y36(l.J),e.Y36(h.i),e.Y36(r.r),e.Y36(f.uU),e.Y36(Z.V),e.Y36(C.ez),e.Y36(E.B),e.Y36(C.YP),e.Y36(E.B),e.Y36(i.yh),e.Y36(M.E),e.Y36(x.p),e.Y36(_.i),e.Y36(A.xA),e.Y36(k.i),e.Y36(V.k))},wt.\u0275cmp=e.Xpm({type:wt,selectors:[["app-ver-comprobantes"]],viewQuery:function(S,P){if(1&S&&(e.Gf(et,5),e.Gf(st,7)),2&S){let H;e.iGM(H=e.CRH())&&(P.fileUploadEmail=H.first),e.iGM(H=e.CRH())&&(P.tabla=H.first)}},decls:68,vars:56,consts:[[1,"grid"],[1,"col-12"],[1,"grid","p-fluid"],["class","col-6 md:col-2 lg:col-1",4,"ngIf"],[1,"col-6","md:col-2","lg:col-1"],[1,"label-form"],["name","filtroModoFecha",3,"options","ngModel","ngModelChange","onChange"],["class","col-6 md:col-3 lg:col-2",4,"ngIf"],[1,"col-6","md:col-2","lg:col-2"],["defaultLabel","Seleccione tipo de comprobante",3,"options","ngModel","onChange","ngModelChange"],[1,"col-6","md:col-3","lg:col-2"],["name","numeroDocumento","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["name","serie","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["name","numero","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],[1,"col-6","md:col-5","lg:col-3"],["name","filtroAnulados",3,"options","ngModel","onChange","ngModelChange"],[1,"col-6","md:col-2"],["defaultLabel","Seleccione metodo de pago","maxSelectedLabels","5",3,"options","ngModel","onChange","ngModelChange"],["class","col-6 md:col-3 sm:col-4",4,"ngIf"],[1,"col-6","md:col-3","sm:col-4"],["name","filtroFechaCaja","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[1,"col-6","md:col-2","sm:col-3"],["name","numero","type","text","pKeyFilter","num","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["class","col-6 md:col-3 sm:col-6",4,"ngIf"],[4,"ngFor","ngForOf"],["dataKey","id",3,"value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","summary"],["header","Anulaci\xf3n de comprobante",3,"visible","modal","responsive","minY","visibleChange"],["placeholder","Motivo de anulaci\xf3n","rows","5","cols","30","pInputTextarea","",3,"ngModel","ngModelChange"],[4,"ngIf"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Anular",1,"p-button-warning",3,"disabled","click"],["name","filtroCanal",3,"options","ngModel","ngModelChange","onChange"],["dataKey","id","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta",3,"showClear","ngModel","options","onChange","ngModelChange"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","showTime","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","showTime","locale","onSelect","ngModelChange"],["dataKey","id","placeholder","Seleccione estaci\xf3n","optionLabel","nombre","name","estacionVenta",3,"showClear","ngModel","options","onChange","ngModelChange"],[1,"col-6","md:col-3","sm:col-6"],["name","filtroTipoPedido",3,"options","ngModel","onChange","ngModelChange"],["class","grid p-nogutter",4,"ngIf"],[1,"grid","p-nogutter"],[1,"col-fixed",2,"width","200px"],[1,"m-0"],[1,"col","pb-0","flex","justify-content-end","flex-wrap"],["styleClass","ml-2","severity","success",3,"value"],["styleClass","ml-2","severity","info",3,"value"],["styleClass","ml-2","severity","danger",3,"value"],[2,"width","3em"],["pSortableColumn","fechaEmision"],["field","fechaEmision"],["pSortableColumn","identificadorDocumento"],["field","identificadorDocumento"],["pSortableColumn","numeroDocumentoReceptor",4,"ngIf"],["pSortableColumn","denominacionReceptor"],["pSortableColumn","totalVenta"],["field","totalVenta"],["pSortableColumn","anulado"],["field","anulado"],["pSortableColumn","estadoSunat"],["field","estadoSunat"],["pSortableColumn","numeroDocumentoReceptor"],["href","#",3,"pRowToggler"],[3,"ngClass"],[1,"p-column-title"],[1,"text-xs","m-0",2,"text-transform","uppercase",3,"pTooltip"],["style","text-transform: uppercase;","class","text-xs m-0",4,"ngIf"],["style","text-transform: uppercase;","class","text-xs m-0",3,"pTooltip",4,"ngIf"],[1,"text-bold","text-sm","m-0",2,"color","#0041dc"],[1,"text-xs","m-0",2,"text-decoration","line-through"],[1,"col"],[1,"m-0","text-xs","font-bold"],[1,"m-0","text-sm"],[1,"col-fixed",2,"width","115px"],["type","button","pButton","","icon","fa fa-envelope","pTooltip","Enviar por correo",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["type","button","pButton","","icon","pi pi-whatsapp","pTooltip","Enviar por whatsapp",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],[4,"ngIf","ngIfElse"],["noTotal",""],["class","p-tag p-tag-rounded p-tag-danger",4,"ngIf"],["class","p-tag p-tag-rounded",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","class","fa fa-info-circle",3,"pTooltip",4,"ngIf"],["class","p-tag p-tag-rounded",3,"pTooltip","ngClass",4,"ngIf"],["pTooltip","Imprimir A4","type","button","pButton","","icon","fa fa-file-pdf-o",1,"p-button-secondary",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Imprimir en Ticket","type","button","pButton","","icon","fa fa-ticket",1,"p-button-secondary",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2rem; margin-left: 0.2rem; margin-bottom: 4px;","type","button","pButton","","icon","fa fa-paper-plane-o","pTooltip","Enviar a Sunat",3,"click",4,"ngIf"],["type","button","pButton","","icon","fa fa-code","pTooltip","XML",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;margin-bottom: 4px;","pButton","","icon","pi pi-check","class","p-button-success","pTooltip","CDR",3,"click",4,"ngIf"],[4,"appPermission"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pTooltip","GENERA BOL. O FACT.","pButton","","icon","fa fa-cart-arrow-down","class","",3,"click",4,"ngIf"],[1,"text-xs","m-0",2,"text-transform","uppercase"],[1,"m-0","text-sm","txtOverflow",2,"max-width","130px",3,"pTooltip"],[1,"p-tag","p-tag-rounded","p-tag-danger"],[1,"p-tag","p-tag-rounded"],[1,"fa","fa-info-circle",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"pTooltip"],[1,"p-tag","p-tag-rounded",3,"pTooltip","ngClass"],["type","button","pButton","","icon","fa fa-paper-plane-o","pTooltip","Enviar a Sunat",2,"margin-right","0.2rem","margin-left","0.2rem","margin-bottom","4px",3,"click"],["pButton","","icon","pi pi-check","pTooltip","CDR",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pButton","","icon","pi pi-pencil","pTooltip","EDITAR","class","p-button-warning",3,"click",4,"ngIf"],["pButton","","icon","pi pi-pencil","pTooltip","EDITAR",1,"p-button-warning",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pTooltip","NOTA DE CR\xc9DITO","pButton","","icon","fa fa-minus-circle","class","",3,"click",4,"ngIf"],["pTooltip","NOTA DE CR\xc9DITO","pButton","","icon","fa fa-minus-circle",1,"",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pTooltip","NOTA DE D\xc9BITO","pButton","","icon","fa fa-plus-circle","class","",3,"click",4,"ngIf"],["pTooltip","NOTA DE D\xc9BITO","pButton","","icon","fa fa-plus-circle",1,"",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pButton","","icon","fa fa-ban","pTooltip","ANULAR","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","icon","fa fa-ban","pTooltip","ANULAR",1,"p-button-danger",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer; margin-bottom: 4px;","pButton","","icon","fa fa-truck","pTooltip","Guia Remision","class","",3,"click",4,"ngIf"],["pButton","","icon","fa fa-truck","pTooltip","Guia Remision",1,"",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["pTooltip","GENERA BOL. O FACT.","pButton","","icon","fa fa-cart-arrow-down",1,"",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],[3,"idTicket"],[1,"flex","justify-content-between"],[1,"m-1"],["type","button","pButton","","icon","fa fa-plus","routerLink","/ventas/nueva-venta","label","Nueva venta"],[3,"items"]],template:function(S,P){1&S&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.YNc(4,gt,4,7,"div",3),e.YNc(5,Ot,4,6,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"label",5),e._uU(8,"Por Fecha"),e.qZA(),e.TgZ(9,"p-selectButton",6),e.NdJ("ngModelChange",function(tt){return P.modoFiltroRangoFechas=tt})("onChange",function(){return P.changeModoFiltroRangoFechas()}),e.qZA(),e.qZA(),e.YNc(10,Nt,4,6,"div",7),e.YNc(11,Ct,4,6,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"label",5),e._uU(14,"Tipo"),e.qZA(),e.TgZ(15,"p-multiSelect",9),e.NdJ("onChange",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroTipoComprobante=tt}),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"label",5),e._uU(18,"Cliente"),e.qZA(),e.TgZ(19,"input",11),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroRuc=tt}),e.qZA(),e.qZA(),e.TgZ(20,"div",4),e.TgZ(21,"label",5),e._uU(22,"Serie"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroSerie=tt}),e.qZA(),e.qZA(),e.TgZ(24,"div",4),e.TgZ(25,"label",5),e._uU(26,"N\xfamero"),e.qZA(),e.TgZ(27,"input",13),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroNumero=tt}),e.qZA(),e.qZA(),e.TgZ(28,"div",14),e.TgZ(29,"label",5),e._uU(30,"Estado"),e.qZA(),e.TgZ(31,"p-selectButton",15),e.NdJ("onChange",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroEstadoAnulacion=tt}),e.qZA(),e.qZA(),e.TgZ(32,"div",16),e.TgZ(33,"label",5),e._uU(34,"Metodo de pago"),e.qZA(),e.TgZ(35,"p-multiSelect",17),e.NdJ("onChange",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.metodosPagoSelect=tt}),e.qZA(),e.qZA(),e.YNc(36,Ft,4,6,"div",18),e.TgZ(37,"div",19),e.TgZ(38,"label",5),e._uU(39,"Fecha caja"),e.qZA(),e.TgZ(40,"p-calendar",20),e.NdJ("onSelect",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroFechaCaja=tt}),e.qZA(),e.qZA(),e.TgZ(41,"div",21),e.TgZ(42,"label",5),e._uU(43,"Turno caja"),e.qZA(),e.TgZ(44,"input",22),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroTurnoCaja=tt}),e.qZA(),e.qZA(),e.YNc(45,re,4,11,"div",23),e.qZA(),e.qZA(),e.TgZ(46,"div",1),e.TgZ(47,"p-card"),e.YNc(48,le,2,1,"ng-container",24),e.qZA(),e.qZA(),e.TgZ(49,"div",1),e.TgZ(50,"p-table",25,26),e.NdJ("onLazyLoad",function(tt){return P.loadLazy(tt)}),e.YNc(52,se,24,1,"ng-template",27),e.YNc(53,ke,69,31,"ng-template",28),e.YNc(54,we,3,2,"ng-template",29),e.YNc(55,De,10,2,"ng-template",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"p-dialog",31),e.NdJ("visibleChange",function(tt){return P.visibleAnular=tt}),e.TgZ(57,"div",2),e.TgZ(58,"div",1),e.TgZ(59,"label",5),e._uU(60),e.qZA(),e.TgZ(61,"textarea",32),e.NdJ("ngModelChange",function(tt){return P.motivoAnular=tt}),e.qZA(),e.qZA(),e.TgZ(62,"div",1),e.YNc(63,qe,4,0,"p",33),e.YNc(64,Me,4,0,"p",33),e.qZA(),e.qZA(),e.TgZ(65,"p-footer"),e.TgZ(66,"button",34),e.NdJ("click",function(){return P.visibleAnular=!1}),e.qZA(),e.TgZ(67,"button",35),e.NdJ("click",function(){return P.goAnularComprobante()}),e.qZA(),e.qZA(),e.qZA()),2&S&&(e.xp6(4),e.Q6J("ngIf",P.integracionApi),e.xp6(1),e.Q6J("ngIf","PLATFORM"===P.filtroCanal),e.xp6(4),e.Q6J("options",e.WLB(44,mt,e.DdM(42,Se),e.DdM(43,Ve)))("ngModel",P.modoFiltroRangoFechas),e.xp6(1),e.Q6J("ngIf",P.modoFiltroRangoFechas),e.xp6(1),e.Q6J("ngIf",P.modoFiltroRangoFechas),e.xp6(4),e.Q6J("options",P.tiposComprobantes)("ngModel",P.filtroTipoComprobante),e.xp6(4),e.Q6J("ngModel",P.filtroRuc),e.xp6(4),e.Q6J("ngModel",P.filtroSerie),e.xp6(4),e.Q6J("ngModel",P.filtroNumero),e.xp6(4),e.Q6J("options",e.kEZ(50,Fe,e.DdM(47,Tt),e.DdM(48,Ue),e.DdM(49,Re)))("ngModel",P.filtroEstadoAnulacion),e.xp6(4),e.Q6J("options",P.metodosPago)("ngModel",P.metodosPagoSelect),e.xp6(1),e.Q6J("ngIf","PLATFORM"===P.filtroCanal),e.xp6(4),e.Akn(e.DdM(54,dt)),e.Q6J("ngModel",P.filtroFechaCaja)("locale",P.ls.calendarEs),e.xp6(4),e.Q6J("ngModel",P.filtroTurnoCaja),e.xp6(1),e.Q6J("ngIf",P.configCompany.esRestaurante),e.xp6(3),e.Q6J("ngForOf",P.totales),e.xp6(2),e.Q6J("value",P.tickets)("lazy",!0)("paginator",!0)("rows",P.perPage)("totalRecords",P.totalRecords)("responsive",!0)("autoLayout",!0),e.xp6(6),e.Akn(e.DdM(55,je)),e.Q6J("visible",P.visibleAnular)("modal",!0)("responsive",!0)("minY",70),e.xp6(4),e.AsE("Motivo de anulaci\xf3n (",null==P.ticketAnular?null:P.ticketAnular.serie,"-",null==P.ticketAnular?null:P.ticketAnular.numero,")"),e.xp6(1),e.Q6J("ngModel",P.motivoAnular),e.xp6(2),e.Q6J("ngIf",null==P.ticketAnular?null:P.ticketAnular.isSendBill),e.xp6(1),e.Q6J("ngIf",!(null!=P.ticketAnular&&P.ticketAnular.isSendBill)),e.xp6(3),e.Q6J("disabled",!P.motivoAnular))},directives:[L.Z,f.O5,z.UN,Y.JJ,Y.On,it.Lt,Q.f,R.NU,Y.Fj,b.o,O.Fr,f.sg,q.V,U.iA,C.jx,U.lQ,U.fz,U.jB,f.mk,j.u,D.Hq,B.l,ht,s.rH,vt.h,At.V,xt.g,C.$_],pipes:[G.Z,f.uU,E.B,X.U],styles:[""]}),(0,w.gn)([(0,i.Ph)(n.Z.getConfig)],wt.prototype,"configCompany$",void 0),(0,w.gn)([(0,i.Ph)(n.Z.getOffice)],wt.prototype,"puntoVenta$",void 0),(0,w.gn)([(0,i.Ph)(n.Z.getSaleStation)],wt.prototype,"estacionVenta$",void 0);var Zt=c(54578),Le=c(50377);const Be=["fileUploadEmail"],Je=["dt"];function Qe(J,S){if(1&J&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&J){const P=S.$implicit;e.xp6(1),e.hij(" ",P.header," ")}}function Ye(J,S){if(1&J&&(e.TgZ(0,"tr"),e.YNc(1,Qe,2,1,"th",17),e.qZA()),2&J){const P=S.$implicit;e.xp6(1),e.Q6J("ngForOf",P)}}function $e(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"Fecha"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.BQk()),2&J){const P=e.oxw(2).$implicit,H=e.oxw().$implicit;e.xp6(4),e.Oqu(H[P.field])}}function Mt(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"Total"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"montoDinero"),e.qZA(),e.BQk()),2&J){const P=e.oxw(2).$implicit,H=e.oxw().$implicit;e.xp6(4),e.Oqu(e.xi3(5,1,H[P.field],H.codigoMoneda))}}function ze(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"N\xfamero"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.BQk()),2&J){const P=e.oxw(3).$implicit;e.xp6(4),e.Oqu(P.numero)}}function Ge(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"Tel\xe9fono"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.BQk()),2&J){const P=e.oxw(3).$implicit;e.xp6(4),e.Oqu(P.telefonoReceptor)}}function He(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"RUC,DNI"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.BQk()),2&J){const P=e.oxw(3).$implicit;e.xp6(4),e.Oqu(P.numeroDocumentoReceptor)}}function Ke(J,S){if(1&J&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"Estado"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.BQk()),2&J){const P=e.oxw(3).$implicit;e.xp6(4),e.Oqu(P.estadoCotizacion)}}function We(J,S){if(1&J){const P=e.EpF();e.ynx(0),e.TgZ(1,"span",24),e._uU(2,"Nombre, Rz. social"),e.qZA(),e.TgZ(3,"div",25),e.TgZ(4,"div",26),e.TgZ(5,"p",27),e._uU(6),e.qZA(),e.TgZ(7,"p",28),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",29),e.TgZ(10,"button",30),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(3).$implicit;return e.oxw().showModalSend(tt,"email")}),e.qZA(),e.TgZ(11,"button",31),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(3).$implicit;return e.oxw().showModalSend(tt,"whatsapp")}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&J){const P=e.oxw(3).$implicit;e.xp6(6),e.Oqu(P.numeroDocumentoReceptor),e.xp6(2),e.Oqu(P.denominacionReceptor)}}function Xe(J,S){if(1&J&&(e.ynx(0),e._uU(1),e.BQk()),2&J){const P=e.oxw(2).$implicit,H=e.oxw().$implicit;e.xp6(1),e.hij(" ",H[P.field]," ")}}function to(J,S){1&J&&(e.ynx(0),e.YNc(1,$e,5,1,"ng-container",22),e.YNc(2,Mt,6,4,"ng-container",22),e.YNc(3,ze,5,1,"ng-container",22),e.YNc(4,Ge,5,1,"ng-container",22),e.YNc(5,He,5,1,"ng-container",22),e.YNc(6,Ke,5,1,"ng-container",22),e.YNc(7,We,12,2,"ng-container",22),e.YNc(8,Xe,2,1,"ng-container",23),e.BQk()),2&J&&(e.xp6(1),e.Q6J("ngSwitchCase","fechaEmision"),e.xp6(1),e.Q6J("ngSwitchCase","totalVenta"),e.xp6(1),e.Q6J("ngSwitchCase","numero"),e.xp6(1),e.Q6J("ngSwitchCase","telefonoReceptor"),e.xp6(1),e.Q6J("ngSwitchCase","numeroDocumentoReceptor"),e.xp6(1),e.Q6J("ngSwitchCase","estadoCotizacion"),e.xp6(1),e.Q6J("ngSwitchCase","denominacionReceptor"))}function eo(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(3).$implicit;return e.oxw().goEditar(tt.id)}),e.qZA()}}function oo(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(3).$implicit;return e.oxw().anular(tt)}),e.qZA()}}function no(J,S){if(1&J){const P=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(3).$implicit;return e.oxw().generateSale(tt.id)}),e.qZA()}}function Et(J,S){if(1&J){const P=e.EpF();e.ynx(0,32),e.TgZ(1,"span",24),e._uU(2,"Acciones"),e.qZA(),e.TgZ(3,"button",33),e.NdJ("click",function(){e.CHM(P);const tt=e.oxw(2).$implicit;return e.oxw().openPdf(tt)}),e.qZA(),e.YNc(4,eo,1,0,"button",34),e.YNc(5,oo,1,0,"button",35),e.YNc(6,no,1,0,"button",36),e.BQk()}if(2&J){const P=e.oxw(2).$implicit,H=e.oxw();e.xp6(4),e.Q6J("ngIf","PENDIENTE"==P.estadoCotizacion),e.xp6(1),e.Q6J("ngIf","PENDIENTE"==P.estadoCotizacion),e.xp6(1),e.Q6J("ngIf","PENDIENTE"==P.estadoCotizacion&&H.canSell)}}function io(J,S){if(1&J&&(e.TgZ(0,"td",19),e.YNc(1,to,9,7,"ng-container",20),e.YNc(2,Et,7,3,"ng-container",21),e.qZA()),2&J){const P=S.$implicit;e.Q6J("ngSwitch",P.field),e.xp6(1),e.Q6J("ngIf",!P.isActions),e.xp6(1),e.Q6J("ngIf",P.isActions)}}function ro(J,S){if(1&J&&(e.TgZ(0,"tr"),e.YNc(1,io,3,3,"td",18),e.qZA()),2&J){const P=S.columns;e.xp6(1),e.Q6J("ngForOf",P)}}const jt=function(){return{width:"100%"}};class qt{constructor(S,P,H,tt,ut,yt,Bt,Jt,Qt,Yt,$t,zt){this.route=S,this.router=P,this.quotationService=H,this.companyService=tt,this.userService=ut,this.loginService=yt,this.datePipe=Bt,this.messageService=Jt,this.confirmationService=Qt,this.breadcrumbService=Yt,this.dialogService=$t,this.ls=zt,this.unsubscribe$=new I.xQ,this.configCompany={},this.cotizaciones=[],this.perPage=10,this.puntosVenta=[]}ngOnInit(){this.breadcrumbService.setItems((0,v.kn)(this.route));const S=new Date;this.filtroDesde=new Date(S.getFullYear(),S.getMonth(),1),this.filtroHasta=new Date(S.getFullYear(),S.getMonth()+1,0),this.configCompany$.pipe((0,y.Rs)(this.unsubscribe$)).subscribe(P=>{this.configCompany=P}),this.cols=[{field:"fechaEmision",header:"Fecha"},{field:"serie",header:"Serie"},{field:"numero",header:"N\xfamero"},{field:"telefonoReceptor",header:"Telefono"},{field:"numeroDocumentoReceptor",header:"RUC, DNI"},{field:"denominacionReceptor",header:"Nombre, Rz. social"},{field:"totalVenta",header:"Total"},{field:"estadoCotizacion",header:"Estado"},{header:"Acciones",isActions:!0}],this.loadData(),this.validarPuntoVenta()}get canSell(){return this.loginService.hasPermission("VENTAS_CREAR")}goEditar(S){this.router.navigateByUrl(`/ventas/editar-cotizacion/${S}`)}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}validarPuntoVenta(){this.puntoVenta$.subscribe(S=>{this.filtroPuntoVenta=S,this.resetAndRefreshTable()})}loadLazy(S){this.lastLazyLoadEvent=S;const P=this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy"),H=this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy"),ut=["pageNumber="+S.first/this.perPage,`perPage=${S.rows}`,`filtroDesde=${P}`,`filtroHasta=${H}`];this.filtroRuc&&ut.push(`filtroRuc=${this.filtroRuc}`),this.filtroNumero&&ut.push(`filtroNumero=${this.filtroNumero}`),this.filtroPuntoVenta&&ut.push(`idPuntoVenta=${this.filtroPuntoVenta.id}`),S.sortOrder&&ut.push(`sortOrder=${S.sortOrder}`),S.sortField&&ut.push(`sortField=${S.sortField}`),this.quotationService.findAllPage(ut.join("&")).subscribe(yt=>{this.totalRecords=yt.totalElements,this.cotizaciones=yt.content})}loadData(){this.puntosVenta=this.loginService.getPuntosVentaUsuario()}openPdf(S){this.quotationService.openPdf(S).subscribe(P=>{this.dialogService.open(m.Z,{data:{ordersPrint:[{pdfPrint:P}]},header:"Cotizaci\xf3n",width:"800px"})})}generateSale(S){this.router.navigateByUrl(`/ventas/nueva-venta/cotizacion/${S}`)}anular(S){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de anular la cotizaci\xf3n ${S.numero}?`,accept:()=>{this.quotationService.anular(S.id).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Cotizaci\xf3n anulada correctamente"}),this.tabla._filter()})},acceptLabel:"Si",rejectLabel:"No"})}showModalSend(S,P){const H=`${this.quotationService.getUrlPdf(S)}?time=${(new Date).getTime()}`,tt={id:S.id,nameMessage:`${S.serie}-${S.numero}`,archivos:[],asunto:`Cotizaci\xf3n electr\xf3nica ${S.fechaEmision}`,emails:[...S.emailReceptor?[S.emailReceptor]:[]],number:S.telefonoReceptor,texto:(0,v.sg)(S),url:H,messageWhatsappWeb:`Hola! *${this.loginService.getLogin().user.empresa.nombreComercial}* adjunta su cotizaci\xf3n electr\xf3nica con n\xfamero ${S.serie}-${S.numero}, muchas gracias por su preferencia. Link del PDF: ${H}`,textMessage:`Hola! *${this.loginService.getLogin().user.empresa.nombreComercial}* adjunta su cotizaci\xf3n electr\xf3nica con n\xfamero ${S.serie}-${S.numero}, muchas gracias por su preferencia.`,type:"quotation"};this.dialogService.open(p.D,{data:{dataSend:tt,sendType:P},header:"Enviar cotizaci\xf3n",width:"80%"}).onClose.subscribe(yt=>{yt&&(!S.telefonoReceptor&&yt.numberPhone&&S.cliente.numeroDocumento!==this.configCompany.clientePorDefectoData.numeroDocumento&&this.confirmationService.confirm({message:`\xbfDesea registrar el n\xfamero ${yt.numberPhone} en el cliente ${S.denominacionReceptor}?`,accept:()=>{this.quotationService.editContactById(S.id,{number:yt.numberPhone}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Tel\xe9fono registrado correctamente."}),this.resetAndRefreshTable()})},acceptLabel:"Si",rejectLabel:"No"}),!S.emailReceptor&&yt.email&&this.confirmationService.confirm({message:`\xbfDesea registrar el email ${yt.email} en el cliente ${S.denominacionReceptor}?`,accept:()=>{this.quotationService.editContactById(S.id,{email:yt.email}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Email registrado correctamente."}),this.resetAndRefreshTable()})},acceptLabel:"Si",rejectLabel:"No"}))})}}qt.\u0275fac=function(S){return new(S||qt)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(Le.G),e.Y36(l.J),e.Y36(h.i),e.Y36(r.r),e.Y36(f.uU),e.Y36(C.ez),e.Y36(C.YP),e.Y36(x.p),e.Y36(A.xA),e.Y36(M.E))},qt.\u0275cmp=e.Xpm({type:qt,selectors:[["app-ver-cotizaciones"]],viewQuery:function(S,P){if(1&S&&(e.Gf(Be,5),e.Gf(Je,7)),2&S){let H;e.iGM(H=e.CRH())&&(P.fileUploadEmail=H.first),e.iGM(H=e.CRH())&&(P.tabla=H.first)}},decls:31,vars:26,consts:[[1,"grid"],[1,"col-12"],[3,"submit"],[1,"grid","p-fluid"],[1,"col-6","md:col-3","lg:col-2"],[2,"margin-bottom","0.5rem","margin-top","0"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","numeroDocumento","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],[1,"col-6","md:col-2","lg:col-1"],["name","numero","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["dataKey","id","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta",3,"ngModel","options","showClear","onChange","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[1,"grid","p-nogutter"],[1,"col"],[1,"m-0","text-xs","font-bold"],[1,"m-0","text-sm"],[1,"col-fixed",2,"width","115px"],["type","button","pButton","","icon","fa fa-envelope","pTooltip","Enviar por correo",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["type","button","pButton","","icon","pi pi-whatsapp","pTooltip","Enviar por whatsapp",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],[2,"text-align","center"],["pTooltip","Imprimir","type","button","pButton","","icon","fa fa-file-pdf-o",1,"p-button-secondary",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Editar","type","button","pButton","","icon","pi pi-pencil","class","p-button-warning",3,"click",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","type","button","pButton","","icon","fa fa-ban","pTooltip","Anular","class","p-button-danger",3,"click",4,"ngIf"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","Generar venta","type","button","pButton","","icon","fa fa-cart-arrow-down",3,"click",4,"ngIf"],["pTooltip","Editar","type","button","pButton","","icon","pi pi-pencil",1,"p-button-warning",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["type","button","pButton","","icon","fa fa-ban","pTooltip","Anular",1,"p-button-danger",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Generar venta","type","button","pButton","","icon","fa fa-cart-arrow-down",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"]],template:function(S,P){1&S&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.NdJ("submit",function(){return P.resetAndRefreshTable()}),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"h4",5),e._uU(7,"Desde"),e.qZA(),e.TgZ(8,"p-calendar",6),e.NdJ("onSelect",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroDesde=tt}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"h4",5),e._uU(11,"Hasta"),e.qZA(),e.TgZ(12,"p-calendar",7),e.NdJ("onSelect",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroHasta=tt}),e.qZA(),e.qZA(),e.TgZ(13,"div",4),e.TgZ(14,"h4",5),e._uU(15,"Cliente"),e.qZA(),e.TgZ(16,"input",8),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroRuc=tt}),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"h4",5),e._uU(19,"N\xfamero"),e.qZA(),e.TgZ(20,"input",10),e.NdJ("input",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroNumero=tt}),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"h4",5),e._uU(23,"Punto de venta"),e.qZA(),e.TgZ(24,"p-dropdown",11),e.NdJ("onChange",function(){return P.resetAndRefreshTable()})("ngModelChange",function(tt){return P.filtroPuntoVenta=tt}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",12),e.TgZ(27,"p-table",13,14),e.NdJ("onLazyLoad",function(tt){return P.loadLazy(tt)}),e.YNc(29,Ye,2,1,"ng-template",15),e.YNc(30,ro,2,1,"ng-template",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&S&&(e.xp6(8),e.Akn(e.DdM(23,jt)),e.Q6J("ngModel",P.filtroDesde)("locale",P.ls.calendarEs),e.xp6(4),e.Akn(e.DdM(24,jt)),e.Q6J("ngModel",P.filtroHasta)("locale",P.ls.calendarEs),e.xp6(4),e.Q6J("ngModel",P.filtroRuc),e.xp6(4),e.Q6J("ngModel",P.filtroNumero),e.xp6(4),e.Akn(e.DdM(25,jt)),e.Q6J("ngModel",P.filtroPuntoVenta)("options",P.puntosVenta)("showClear",!0),e.xp6(3),e.Q6J("columns",P.cols)("value",P.cotizaciones)("lazy",!0)("paginator",!0)("rows",P.perPage)("totalRecords",P.totalRecords)("responsive",!0)("autoLayout",!0))},directives:[L.Z,Y._Y,Y.JL,Y.F,Q.f,Y.JJ,Y.On,Y.Fj,b.o,it.Lt,U.iA,C.jx,f.sg,f.RF,f.O5,f.n9,D.Hq,j.u,f.ED],pipes:[G.Z],styles:[".numero[_ngcontent-%COMP%]{width:15px}"]}),(0,w.gn)([(0,i.Ph)(n.Z.getConfig)],qt.prototype,"configCompany$",void 0),(0,w.gn)([(0,i.Ph)(n.Z.getOffice)],qt.prototype,"puntoVenta$",void 0);const ao=[{path:"ver-comprobantes",component:wt,canActivate:[Zt.P],data:{breadcrumb:[{label:"Ventas"},{label:"Ver comprobantes"}]}},{path:"nueva-venta",component:u.f,data:{isEdit:!1,breadcrumb:[{label:"Ventas"},{label:"Nueva venta"}]},canActivate:[Zt.P]},{path:"nueva-venta/notaventa/:idNotaVenta",component:u.f,data:{isEdit:!1,breadcrumb:[{label:"Ventas"},{label:"Nueva venta"}]},canActivate:[Zt.P]},{path:"nueva-venta/membresia/:idMembresia",component:u.f,data:{isEdit:!1,breadcrumb:[{label:"Ventas"},{label:"Nueva venta"}]},canActivate:[Zt.P]},{path:"nueva-venta/cotizacion/:idCotizacion",component:u.f,data:{isEdit:!1,breadcrumb:[{label:"Ventas"},{label:"Nueva venta"}]},canActivate:[Zt.P]},{path:"nueva-venta/nota-venta/:idNotaVenta",component:u.f,data:{isEdit:!1,breadcrumb:[{label:"Ventas"},{label:"Nueva venta"}]},canActivate:[Zt.P]},{path:"emitir-nota-credito",component:u.f,data:{isEdit:!1,tipoComprobante:"07",breadcrumb:[{label:"Ventas"},{label:"Emitir nota de cr\xe9dito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"emitir-nota-credito/:idTicket",component:u.f,data:{isEdit:!1,tipoComprobante:"07",breadcrumb:[{label:"Ventas"},{label:"Emitir nota de cr\xe9dito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"emitir-nota-debito",component:u.f,data:{isEdit:!1,tipoComprobante:"08",breadcrumb:[{label:"Ventas"},{label:"Emitir nota de d\xe9bito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"emitir-nota-debito/:idTicket",component:u.f,data:{isEdit:!1,tipoComprobante:"08",breadcrumb:[{label:"Ventas"},{label:"Emitir nota de d\xe9bito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"editar-venta/:tipoComprobante/:idTicketEdit",component:u.f,data:{isEdit:!0,breadcrumb:[{label:"Ventas"},{label:"Editar venta"}]},canActivate:[Zt.P]},{path:"editar-nota-credito/:idTicketEdit",component:u.f,data:{isEdit:!0,tipoComprobante:"07",breadcrumb:[{label:"Ventas"},{label:"Editar nota de cr\xe9dito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"editar-nota-debito/:idTicketEdit",component:u.f,data:{isEdit:!0,tipoComprobante:"08",breadcrumb:[{label:"Ventas"},{label:"Editar nota de d\xe9bito electr\xf3nica"}]},canActivate:[Zt.P]},{path:"ver-cotizaciones",component:qt,canActivate:[Zt.P],data:{breadcrumb:[{label:"Ventas"},{label:"Cotizaciones"}]}},{path:"nueva-cotizacion",component:u.f,data:{isEdit:!1,isQuotation:!0,breadcrumb:[{label:"Ventas"},{label:"Cotizaciones"},{label:"Nueva Cotizaci\xf3n"}]},canActivate:[Zt.P]},{path:"editar-cotizacion/:idCotizacionEdit",component:u.f,data:{isEdit:!0,isQuotation:!0,breadcrumb:[{label:"Ventas"},{label:"Cotizaciones"},{label:"Editar Cotizaci\xf3n"}]},canActivate:[Zt.P]}];let lo=(()=>{class J{}return J.\u0275fac=function(P){return new(P||J)},J.\u0275mod=e.oAB({type:J}),J.\u0275inj=e.cJS({imports:[[s.Bz.forChild(ao)],s.Bz]}),J})();var Lt=c(20958),te=c(42939),ee=c(16016),so=c(19406),co=c(27429),uo=c(89400);let fo=(()=>{class J{}return J.\u0275fac=function(P){return new(P||J)},J.\u0275mod=e.oAB({type:J}),J.\u0275inj=e.cJS({imports:[[f.ez,Lt.m]]}),J})();var po=c(55402);let mo=(()=>{class J{}return J.\u0275fac=function(P){return new(P||J)},J.\u0275mod=e.oAB({type:J}),J.\u0275inj=e.cJS({providers:[A.xA],imports:[[f.ez,Lt.m,te.Gg,ee.Z_]]}),J})();var ho=c(99266);let go=(()=>{class J{}return J.\u0275fac=function(P){return new(P||J)},J.\u0275mod=e.oAB({type:J}),J.\u0275inj=e.cJS({providers:[A.xA],imports:[[Lt.m,so.P,lo,te.Gg,ee.Z_,co.N,uo.z,fo,po.R,mo,ho.w]]}),J})()},23582:(It,$,c)=>{"use strict";c.d($,{U:()=>u});var s=c(5e3);let u=(()=>{class w{transform(g,y){return"ACEPT"==g?"Aceptado":"RECHA"==g?"Rechazado":"ANULA"==g?"Anulado":"N_ENV"==g?"No enviado":""}}return w.\u0275fac=function(g){return new(g||w)},w.\u0275pipe=s.Yjl({name:"estadoSunat",type:w,pure:!0}),w})()},89971:function(It){"undefined"!=typeof self&&self,It.exports=function($){var c={};function s(u){if(c[u])return c[u].exports;var w=c[u]={i:u,l:!1,exports:{}};return $[u].call(w.exports,w,w.exports,s),w.l=!0,w.exports}return s.m=$,s.c=c,s.d=function(u,w,I){s.o(u,w)||Object.defineProperty(u,w,{configurable:!1,enumerable:!0,get:I})},s.n=function(u){var w=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(w,"a",w),w},s.o=function(u,w){return Object.prototype.hasOwnProperty.call(u,w)},s.p="",s(s.s=109)}([function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=s(17),w=s(18),I=s(19),g=s(45),y=s(46),v=s(47),i=s(48),n=s(49),a=s(12),m=s(32),p=s(33),e=s(31),t=s(1);c.default={Scope:t.Scope,create:t.create,find:t.find,query:t.query,register:t.register,Container:u.default,Format:w.default,Leaf:I.default,Embed:i.default,Scroll:g.default,Block:v.default,Inline:y.default,Text:n.default,Attributor:{Attribute:a.default,Class:m.default,Style:p.default,Store:e.default}}},function($,c,s){"use strict";var e,u=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,l){t.__proto__=l}||function(t,l){for(var h in l)l.hasOwnProperty(h)&&(t[h]=l[h])},function(t,l){function h(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(c,"__esModule",{value:!0});var w=function(e){function t(l){var h=this;return(h=e.call(this,l="[Parchment] "+l)||this).message=l,h.name=h.constructor.name,h}return u(t,e),t}(Error);c.ParchmentError=w;var i,I={},g={},y={},v={};function m(e,t){var l;if(void 0===t&&(t=i.ANY),"string"==typeof e)l=v[e]||I[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)l=v.text;else if("number"==typeof e)e&i.LEVEL&i.BLOCK?l=v.block:e&i.LEVEL&i.INLINE&&(l=v.inline);else if(e instanceof HTMLElement){var h=(e.getAttribute("class")||"").split(/\s+/);for(var r in h)if(l=g[h[r]])break;l=l||y[e.tagName]}return null==l?null:t&i.LEVEL&l.scope&&t&i.TYPE&l.scope?l:null}c.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(i=c.Scope||(c.Scope={})),c.create=function n(e,t){var l=m(e);if(null==l)throw new w("Unable to create "+e+" blot");var h=l,r=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:h.create(t);return new h(r,t)},c.find=function a(e,t){return void 0===t&&(t=!1),null==e?null:null!=e[c.DATA_KEY]?e[c.DATA_KEY].blot:t?a(e.parentNode,t):null},c.query=m,c.register=function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>1)return e.map(function(r){return p(r)});var l=e[0];if("string"!=typeof l.blotName&&"string"!=typeof l.attrName)throw new w("Invalid definition");if("abstract"===l.blotName)throw new w("Cannot register abstract class");return v[l.blotName||l.attrName]=l,"string"==typeof l.keyName?I[l.keyName]=l:(null!=l.className&&(g[l.className]=l),null!=l.tagName&&(l.tagName=Array.isArray(l.tagName)?l.tagName.map(function(r){return r.toUpperCase()}):l.tagName.toUpperCase(),(Array.isArray(l.tagName)?l.tagName:[l.tagName]).forEach(function(r){(null==y[r]||null==l.className)&&(y[r]=l)}))),l}},function($,c,s){var u=s(51),w=s(11),I=s(3),g=s(20),y=String.fromCharCode(0),v=function(i){this.ops=Array.isArray(i)?i:null!=i&&Array.isArray(i.ops)?i.ops:[]};v.prototype.insert=function(i,n){var a={};return 0===i.length?this:(a.insert=i,null!=n&&"object"==typeof n&&Object.keys(n).length>0&&(a.attributes=n),this.push(a))},v.prototype.delete=function(i){return i<=0?this:this.push({delete:i})},v.prototype.retain=function(i,n){if(i<=0)return this;var a={retain:i};return null!=n&&"object"==typeof n&&Object.keys(n).length>0&&(a.attributes=n),this.push(a)},v.prototype.push=function(i){var n=this.ops.length,a=this.ops[n-1];if(i=I(!0,{},i),"object"==typeof a){if("number"==typeof i.delete&&"number"==typeof a.delete)return this.ops[n-1]={delete:a.delete+i.delete},this;if("number"==typeof a.delete&&null!=i.insert&&"object"!=typeof(a=this.ops[(n-=1)-1]))return this.ops.unshift(i),this;if(w(i.attributes,a.attributes)){if("string"==typeof i.insert&&"string"==typeof a.insert)return this.ops[n-1]={insert:a.insert+i.insert},"object"==typeof i.attributes&&(this.ops[n-1].attributes=i.attributes),this;if("number"==typeof i.retain&&"number"==typeof a.retain)return this.ops[n-1]={retain:a.retain+i.retain},"object"==typeof i.attributes&&(this.ops[n-1].attributes=i.attributes),this}}return n===this.ops.length?this.ops.push(i):this.ops.splice(n,0,i),this},v.prototype.chop=function(){var i=this.ops[this.ops.length-1];return i&&i.retain&&!i.attributes&&this.ops.pop(),this},v.prototype.filter=function(i){return this.ops.filter(i)},v.prototype.forEach=function(i){this.ops.forEach(i)},v.prototype.map=function(i){return this.ops.map(i)},v.prototype.partition=function(i){var n=[],a=[];return this.forEach(function(m){(i(m)?n:a).push(m)}),[n,a]},v.prototype.reduce=function(i,n){return this.ops.reduce(i,n)},v.prototype.changeLength=function(){return this.reduce(function(i,n){return n.insert?i+g.length(n):n.delete?i-n.delete:i},0)},v.prototype.length=function(){return this.reduce(function(i,n){return i+g.length(n)},0)},v.prototype.slice=function(i,n){i=i||0,"number"!=typeof n&&(n=1/0);for(var a=[],m=g.iterator(this.ops),p=0;p<n&&m.hasNext();){var e;p<i?e=m.next(i-p):(e=m.next(n-p),a.push(e)),p+=g.length(e)}return new v(a)},v.prototype.compose=function(i){var n=g.iterator(this.ops),a=g.iterator(i.ops),m=[],p=a.peek();if(null!=p&&"number"==typeof p.retain&&null==p.attributes){for(var e=p.retain;"insert"===n.peekType()&&n.peekLength()<=e;)e-=n.peekLength(),m.push(n.next());p.retain-e>0&&a.next(p.retain-e)}for(var t=new v(m);n.hasNext()||a.hasNext();)if("insert"===a.peekType())t.push(a.next());else if("delete"===n.peekType())t.push(n.next());else{var l=Math.min(n.peekLength(),a.peekLength()),h=n.next(l),r=a.next(l);if("number"==typeof r.retain){var f={};"number"==typeof h.retain?f.retain=l:f.insert=h.insert;var Z=g.attributes.compose(h.attributes,r.attributes,"number"==typeof h.retain);if(Z&&(f.attributes=Z),t.push(f),!a.hasNext()&&w(t.ops[t.ops.length-1],f)){var C=new v(n.rest());return t.concat(C).chop()}}else"number"==typeof r.delete&&"number"==typeof h.retain&&t.push(r)}return t.chop()},v.prototype.concat=function(i){var n=new v(this.ops.slice());return i.ops.length>0&&(n.push(i.ops[0]),n.ops=n.ops.concat(i.ops.slice(1))),n},v.prototype.diff=function(i,n){if(this.ops===i.ops)return new v;var a=[this,i].map(function(l){return l.map(function(h){if(null!=h.insert)return"string"==typeof h.insert?h.insert:y;throw new Error("diff() called "+(l===i?"on":"with")+" non-document")}).join("")}),m=new v,p=u(a[0],a[1],n),e=g.iterator(this.ops),t=g.iterator(i.ops);return p.forEach(function(l){for(var h=l[1].length;h>0;){var r=0;switch(l[0]){case u.INSERT:r=Math.min(t.peekLength(),h),m.push(t.next(r));break;case u.DELETE:r=Math.min(h,e.peekLength()),e.next(r),m.delete(r);break;case u.EQUAL:r=Math.min(e.peekLength(),t.peekLength(),h);var f=e.next(r),Z=t.next(r);w(f.insert,Z.insert)?m.retain(r,g.attributes.diff(f.attributes,Z.attributes)):m.push(Z).delete(r)}h-=r}}),m.chop()},v.prototype.eachLine=function(i,n){n=n||"\n";for(var a=g.iterator(this.ops),m=new v,p=0;a.hasNext();){if("insert"!==a.peekType())return;var e=a.peek(),t=g.length(e)-a.peekLength(),l="string"==typeof e.insert?e.insert.indexOf(n,t)-t:-1;if(l<0)m.push(a.next());else if(l>0)m.push(a.next(l));else{if(!1===i(m,a.next(1).attributes||{},p))return;p+=1,m=new v}}m.length()>0&&i(m,{},p)},v.prototype.transform=function(i,n){if(n=!!n,"number"==typeof i)return this.transformPosition(i,n);for(var a=g.iterator(this.ops),m=g.iterator(i.ops),p=new v;a.hasNext()||m.hasNext();)if("insert"!==a.peekType()||!n&&"insert"===m.peekType())if("insert"===m.peekType())p.push(m.next());else{var e=Math.min(a.peekLength(),m.peekLength()),t=a.next(e),l=m.next(e);if(t.delete)continue;l.delete?p.push(l):p.retain(e,g.attributes.transform(t.attributes,l.attributes,n))}else p.retain(g.length(a.next()));return p.chop()},v.prototype.transformPosition=function(i,n){n=!!n;for(var a=g.iterator(this.ops),m=0;a.hasNext()&&m<=i;){var p=a.peekLength(),e=a.peekType();a.next(),"delete"!==e?("insert"===e&&(m<i||!n)&&(i+=p),m+=p):i-=Math.min(p,i-m)}return i},$.exports=v},function($,c){"use strict";var s=Object.prototype.hasOwnProperty,u=Object.prototype.toString,w=Object.defineProperty,I=Object.getOwnPropertyDescriptor,g=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===u.call(a)},y=function(a){if(!a||"[object Object]"!==u.call(a))return!1;var e,m=s.call(a,"constructor"),p=a.constructor&&a.constructor.prototype&&s.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!m&&!p)return!1;for(e in a);return void 0===e||s.call(a,e)},v=function(a,m){w&&"__proto__"===m.name?w(a,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):a[m.name]=m.newValue},i=function(a,m){if("__proto__"===m){if(!s.call(a,m))return;if(I)return I(a,m).value}return a[m]};$.exports=function n(){var a,m,p,e,t,l,h=arguments[0],r=1,f=arguments.length,Z=!1;for("boolean"==typeof h&&(Z=h,h=arguments[1]||{},r=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});r<f;++r)if(null!=(a=arguments[r]))for(m in a)p=i(h,m),h!==(e=i(a,m))&&(Z&&e&&(y(e)||(t=g(e)))?(t?(t=!1,l=p&&g(p)?p:[]):l=p&&y(p)?p:{},v(h,{name:m,newValue:n(Z,l,e)})):void 0!==e&&v(h,{name:m,newValue:e}));return h}},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BlockEmbed=c.bubbleFormats=void 0;var u=function(){function _(A,k){for(var V=0;V<k.length;V++){var L=k[V];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,k,V){return k&&_(A.prototype,k),V&&_(A,V),A}}(),w=function _(A,k,V){null===A&&(A=Function.prototype);var L=Object.getOwnPropertyDescriptor(A,k);if(void 0===L){var z=Object.getPrototypeOf(A);return null===z?void 0:_(z,k,V)}if("value"in L)return L.value;var Y=L.get;return void 0===Y?void 0:Y.call(V)},g=h(s(3)),v=h(s(2)),n=h(s(0)),m=h(s(16)),e=h(s(6)),l=h(s(7));function h(_){return _&&_.__esModule?_:{default:_}}function r(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function f(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?_:A}function Z(_,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var E=function(_){function A(){return r(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return Z(A,_),u(A,[{key:"attach",value:function(){w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new n.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new v.default).insert(this.value(),(0,g.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(V,L){var z=n.default.query(V,n.default.Scope.BLOCK_ATTRIBUTE);null!=z&&this.attributes.attribute(z,L)}},{key:"formatAt",value:function(V,L,z,Y){this.format(z,Y)}},{key:"insertAt",value:function(V,L,z){if("string"==typeof L&&L.endsWith("\n")){var Y=n.default.create(M.blotName);this.parent.insertBefore(Y,0===V?this:this.next),Y.insertAt(0,L.slice(0,-1))}else w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,V,L,z)}}]),A}(n.default.Embed);E.scope=n.default.Scope.BLOCK_BLOT;var M=function(_){function A(k){r(this,A);var V=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k));return V.cache={},V}return Z(A,_),u(A,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(n.default.Leaf).reduce(function(V,L){return 0===L.length()?V:V.insert(L.value(),x(L))},new v.default).insert("\n",x(this))),this.cache.delta}},{key:"deleteAt",value:function(V,L){w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,V,L),this.cache={}}},{key:"formatAt",value:function(V,L,z,Y){L<=0||(n.default.query(z,n.default.Scope.BLOCK)?V+L===this.length()&&this.format(z,Y):w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,V,Math.min(L,this.length()-V-1),z,Y),this.cache={})}},{key:"insertAt",value:function(V,L,z){if(null!=z)return w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,V,L,z);if(0!==L.length){var Y=L.split("\n"),it=Y.shift();it.length>0&&(V<this.length()-1||null==this.children.tail?w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(V,this.length()-1),it):this.children.tail.insertAt(this.children.tail.length(),it),this.cache={});var Q=this;Y.reduce(function(R,b){return(Q=Q.split(R,!0)).insertAt(0,b),b.length},V+it.length)}}},{key:"insertBefore",value:function(V,L){var z=this.children.head;w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,V,L),z instanceof m.default&&z.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(V,L){w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,V,L),this.cache={}}},{key:"optimize",value:function(V){w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,V),this.cache={}}},{key:"path",value:function(V){return w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,V,!0)}},{key:"removeChild",value:function(V){w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,V),this.cache={}}},{key:"split",value:function(V){var L=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(L&&(0===V||V>=this.length()-1)){var z=this.clone();return 0===V?(this.parent.insertBefore(z,this),this):(this.parent.insertBefore(z,this.next),z)}var Y=w(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,V,L);return this.cache={},Y}}]),A}(n.default.Block);function x(_){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==_||("function"==typeof _.formats&&(A=(0,g.default)(A,_.formats())),null==_.parent||"scroll"==_.parent.blotName||_.parent.statics.scope!==_.statics.scope)?A:x(_.parent,A)}M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[e.default,n.default.Embed,l.default],c.bubbleFormats=x,c.BlockEmbed=E,c.default=M},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.overload=c.expandConfig=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},w=function(R,b){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function Q(R,b){var O=[],q=!0,U=!1,j=void 0;try{for(var B,D=R[Symbol.iterator]();!(q=(B=D.next()).done)&&(O.push(B.value),!b||O.length!==b);q=!0);}catch(G){U=!0,j=G}finally{try{!q&&D.return&&D.return()}finally{if(U)throw j}}return O}(R,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=function(){function Q(R,b){for(var O=0;O<b.length;O++){var q=b[O];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(R,q.key,q)}}return function(R,b,O){return b&&Q(R.prototype,b),O&&Q(R,O),R}}();s(50);var y=x(s(2)),i=x(s(14)),a=x(s(8)),p=x(s(9)),t=x(s(0)),l=s(15),h=x(l),f=x(s(3)),C=x(s(10)),M=x(s(34));function x(Q){return Q&&Q.__esModule?Q:{default:Q}}function _(Q,R,b){return R in Q?Object.defineProperty(Q,R,{value:b,enumerable:!0,configurable:!0,writable:!0}):Q[R]=b,Q}function A(Q,R){if(!(Q instanceof R))throw new TypeError("Cannot call a class as a function")}var k=(0,C.default)("quill"),V=function(){function Q(R){var b=this,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(A(this,Q),this.options=L(R,O),this.container=this.options.container,null==this.container)return k.error("Invalid Quill container",R);this.options.debug&&Q.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=t.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(j){j===a.default.events.TEXT_CHANGE&&b.root.classList.toggle("ql-blank",b.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(j,D){var B=b.selection.lastRange,G=B&&0===B.length?B.index:void 0;z.call(b,function(){return b.editor.update(null,D,G)},j)});var U=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+q+"<p><br></p></div>");this.setContents(U),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return I(Q,null,[{key:"debug",value:function(b){!0===b&&(b="log"),C.default.level(b)}},{key:"find",value:function(b){return b.__quill||t.default.find(b)}},{key:"import",value:function(b){return null==this.imports[b]&&k.error("Cannot import "+b+". Are you sure it was registered?"),this.imports[b]}},{key:"register",value:function(b,O){var q=this,U=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof b){var j=b.attrName||b.blotName;"string"==typeof j?this.register("formats/"+j,b,O):Object.keys(b).forEach(function(D){q.register(D,b[D],O)})}else null!=this.imports[b]&&!U&&k.warn("Overwriting "+b+" with",O),this.imports[b]=O,(b.startsWith("blots/")||b.startsWith("formats/"))&&"abstract"!==O.blotName?t.default.register(O):b.startsWith("modules")&&"function"==typeof O.register&&O.register()}}]),I(Q,[{key:"addContainer",value:function(b){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof b){var q=b;(b=document.createElement("div")).classList.add(q)}return this.container.insertBefore(b,O),b}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(b,O,q){var U=this,j=Y(b,O,q),D=w(j,4);return z.call(this,function(){return U.editor.deleteText(b,O)},q=D[3],b=D[0],-1*(O=D[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(b),this.container.classList.toggle("ql-disabled",!b)}},{key:"focus",value:function(){var b=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=b,this.scrollIntoView()}},{key:"format",value:function(b,O){var q=this;return z.call(this,function(){var j=q.getSelection(!0),D=new y.default;if(null==j)return D;if(t.default.query(b,t.default.Scope.BLOCK))D=q.editor.formatLine(j.index,j.length,_({},b,O));else{if(0===j.length)return q.selection.format(b,O),D;D=q.editor.formatText(j.index,j.length,_({},b,O))}return q.setSelection(j,a.default.sources.SILENT),D},arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.sources.API)}},{key:"formatLine",value:function(b,O,q,U,j){var B,D=this,G=Y(b,O,q,U,j),W=w(G,4);return O=W[1],B=W[2],z.call(this,function(){return D.editor.formatLine(b,O,B)},j=W[3],b=W[0],0)}},{key:"formatText",value:function(b,O,q,U,j){var B,D=this,G=Y(b,O,q,U,j),W=w(G,4);return O=W[1],B=W[2],z.call(this,function(){return D.editor.formatText(b,O,B)},j=W[3],b=W[0],0)}},{key:"getBounds",value:function(b){var q=void 0;q="number"==typeof b?this.selection.getBounds(b,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(b.index,b.length);var U=this.container.getBoundingClientRect();return{bottom:q.bottom-U.top,height:q.height,left:q.left-U.left,right:q.right-U.left,top:q.top-U.top,width:q.width}}},{key:"getContents",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-b,q=Y(b,O),U=w(q,2);return this.editor.getContents(b=U[0],O=U[1])}},{key:"getFormat",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof b?this.editor.getFormat(b,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(b.index,b.length)}},{key:"getIndex",value:function(b){return b.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(b){return this.scroll.leaf(b)}},{key:"getLine",value:function(b){return this.scroll.line(b)}},{key:"getLines",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof b?this.scroll.lines(b.index,b.length):this.scroll.lines(b,O)}},{key:"getModule",value:function(b){return this.theme.modules[b]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-b,q=Y(b,O),U=w(q,2);return this.editor.getText(b=U[0],O=U[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(b,O,q){var U=this;return z.call(this,function(){return U.editor.insertEmbed(b,O,q)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:Q.sources.API,b)}},{key:"insertText",value:function(b,O,q,U,j){var B,D=this,G=Y(b,0,q,U,j),W=w(G,4);return B=W[2],z.call(this,function(){return D.editor.insertText(b,O,B)},j=W[3],b=W[0],O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(b,O,q){this.clipboard.dangerouslyPasteHTML(b,O,q)}},{key:"removeFormat",value:function(b,O,q){var U=this,j=Y(b,O,q),D=w(j,4);return O=D[1],z.call(this,function(){return U.editor.removeFormat(b,O)},q=D[3],b=D[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(b){var O=this;return z.call(this,function(){b=new y.default(b);var U=O.getLength(),j=O.editor.deleteText(0,U),D=O.editor.applyDelta(b),B=D.ops[D.ops.length-1];return null!=B&&"string"==typeof B.insert&&"\n"===B.insert[B.insert.length-1]&&(O.editor.deleteText(O.getLength()-1,1),D.delete(1)),j.compose(D)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.sources.API)}},{key:"setSelection",value:function(b,O,q){if(null==b)this.selection.setRange(null,O||Q.sources.API);else{var U=Y(b,O,q),j=w(U,4);q=j[3],this.selection.setRange(new l.Range(b=j[0],O=j[1]),q),q!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(b){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.sources.API,q=(new y.default).insert(b);return this.setContents(q,O)}},{key:"update",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.sources.USER,O=this.scroll.update(b);return this.selection.update(b),O}},{key:"updateContents",value:function(b){var O=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.sources.API;return z.call(this,function(){return b=new y.default(b),O.editor.applyDelta(b,q)},q,!0)}}]),Q}();function L(Q,R){if((R=(0,f.default)(!0,{container:Q,modules:{clipboard:!0,keyboard:!0,history:!0}},R)).theme&&R.theme!==V.DEFAULTS.theme){if(R.theme=V.import("themes/"+R.theme),null==R.theme)throw new Error("Invalid theme "+R.theme+". Did you register it?")}else R.theme=M.default;var b=(0,f.default)(!0,{},R.theme.DEFAULTS);[b,R].forEach(function(U){U.modules=U.modules||{},Object.keys(U.modules).forEach(function(j){!0===U.modules[j]&&(U.modules[j]={})})});var q=Object.keys(b.modules).concat(Object.keys(R.modules)).reduce(function(U,j){var D=V.import("modules/"+j);return null==D?k.error("Cannot load "+j+" module. Are you sure you registered it?"):U[j]=D.DEFAULTS||{},U},{});return null!=R.modules&&R.modules.toolbar&&R.modules.toolbar.constructor!==Object&&(R.modules.toolbar={container:R.modules.toolbar}),R=(0,f.default)(!0,{},V.DEFAULTS,{modules:q},b,R),["bounds","container","scrollingContainer"].forEach(function(U){"string"==typeof R[U]&&(R[U]=document.querySelector(R[U]))}),R.modules=Object.keys(R.modules).reduce(function(U,j){return R.modules[j]&&(U[j]=R.modules[j]),U},{}),R}function z(Q,R,b,O){if(this.options.strict&&!this.isEnabled()&&R===a.default.sources.USER)return new y.default;var q=null==b?null:this.getSelection(),U=this.editor.delta,j=Q();if(null!=q&&(!0===b&&(b=q.index),null==O?q=it(q,j,R):0!==O&&(q=it(q,b,O,R)),this.setSelection(q,a.default.sources.SILENT)),j.length()>0){var D,G,B=[a.default.events.TEXT_CHANGE,j,U,R];(D=this.emitter).emit.apply(D,[a.default.events.EDITOR_CHANGE].concat(B)),R!==a.default.sources.SILENT&&(G=this.emitter).emit.apply(G,B)}return j}function Y(Q,R,b,O,q){var U={};return"number"==typeof Q.index&&"number"==typeof Q.length?"number"!=typeof R?(q=O,O=b,b=R,R=Q.length,Q=Q.index):(R=Q.length,Q=Q.index):"number"!=typeof R&&(q=O,O=b,b=R,R=0),"object"===(void 0===b?"undefined":u(b))?(U=b,q=O):"string"==typeof b&&(null!=O?U[b]=O:q=b),[Q,R,U,q=q||a.default.sources.API]}function it(Q,R,b,O){if(null==Q)return null;var q=void 0,U=void 0;if(R instanceof y.default){var j=[Q.index,Q.index+Q.length].map(function(W){return R.transformPosition(W,O!==a.default.sources.USER)}),D=w(j,2);q=D[0],U=D[1]}else{var B=[Q.index,Q.index+Q.length].map(function(W){return W<R||W===R&&O===a.default.sources.USER?W:b>=0?W+b:Math.max(R,W+b)}),G=w(B,2);q=G[0],U=G[1]}return new l.Range(q,U-q)}V.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},V.events=a.default.events,V.sources=a.default.sources,V.version="1.3.7",V.imports={delta:y.default,parchment:t.default,"core/module":p.default,"core/theme":M.default},c.expandConfig=L,c.overload=Y,c.default=V},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function e(t,l){for(var h=0;h<l.length;h++){var r=l[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,l,h){return l&&e(t.prototype,l),h&&e(t,h),t}}(),w=function e(t,l,h){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,l);if(void 0===r){var f=Object.getPrototypeOf(t);return null===f?void 0:e(f,l,h)}if("value"in r)return r.value;var Z=r.get;return void 0===Z?void 0:Z.call(h)},g=i(s(7)),v=i(s(0));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"formatAt",value:function(h,r,f,Z){if(t.compare(this.statics.blotName,f)<0&&v.default.query(f,v.default.Scope.BLOT)){var C=this.isolate(h,r);Z&&C.wrap(f,Z)}else w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,h,r,f,Z)}},{key:"optimize",value:function(h){if(w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,h),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(h,r){var f=t.order.indexOf(h),Z=t.order.indexOf(r);return f>=0||Z>=0?f-Z:h===r?0:h<r?-1:1}}]),t}(v.default.Inline);p.allowedChildren=[p,v.default.Embed,g.default],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],c.default=p},function($,c,s){"use strict";function g(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function y(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}Object.defineProperty(c,"__esModule",{value:!0});var i=function(n){function a(){return g(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function v(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a}(function I(n){return n&&n.__esModule?n:{default:n}}(s(0)).default.Text);c.default=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function l(h,r){for(var f=0;f<r.length;f++){var Z=r[f];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(h,Z.key,Z)}}return function(h,r,f){return r&&l(h.prototype,r),f&&l(h,f),h}}(),w=function l(h,r,f){null===h&&(h=Function.prototype);var Z=Object.getOwnPropertyDescriptor(h,r);if(void 0===Z){var C=Object.getPrototypeOf(h);return null===C?void 0:l(C,r,f)}if("value"in Z)return Z.value;var E=Z.get;return void 0===E?void 0:E.call(f)},g=i(s(54));function i(l){return l&&l.__esModule?l:{default:l}}var p=(0,i(s(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(l){document.addEventListener(l,function(){for(var h=arguments.length,r=Array(h),f=0;f<h;f++)r[f]=arguments[f];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(Z){var C;Z.__quill&&Z.__quill.emitter&&(C=Z.__quill.emitter).handleDOM.apply(C,r)})})});var t=function(l){function h(){!function n(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,h);var r=function a(l,h){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?l:h}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return r.listeners={},r.on("error",p.error),r}return function m(l,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(l,h):l.__proto__=h)}(h,l),u(h,[{key:"emit",value:function(){p.log.apply(p,arguments),w(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(f){for(var Z=arguments.length,C=Array(Z>1?Z-1:0),E=1;E<Z;E++)C[E-1]=arguments[E];(this.listeners[f.type]||[]).forEach(function(M){var x=M.node,_=M.handler;(f.target===x||x.contains(f.target))&&_.apply(void 0,[f].concat(C))})}},{key:"listenDOM",value:function(f,Z,C){this.listeners[f]||(this.listeners[f]=[]),this.listeners[f].push({node:Z,handler:C})}}]),h}(g.default);t.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},t.sources={API:"api",SILENT:"silent",USER:"user"},c.default=t},function($,c,s){"use strict";function u(I,g){if(!(I instanceof g))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var w=function I(g){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,I),this.quill=g,this.options=y};w.DEFAULTS={},c.default=w},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=["error","warn","log","info"],w="warn";function I(y){if(u.indexOf(y)<=u.indexOf(w)){for(var v,i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(v=console)[y].apply(v,n)}}function g(y){return u.reduce(function(v,i){return v[i]=I.bind(console,i,y),v},{})}I.level=g.level=function(y){w=y},c.default=g},function($,c,s){var u=Array.prototype.slice,w=s(52),I=s(53),g=$.exports=function(n,a,m){return m||(m={}),n===a||(n instanceof Date&&a instanceof Date?n.getTime()===a.getTime():!n||!a||"object"!=typeof n&&"object"!=typeof a?m.strict?n===a:n==a:function i(n,a,m){var p,e;if(y(n)||y(a)||n.prototype!==a.prototype)return!1;if(I(n))return!!I(a)&&(n=u.call(n),a=u.call(a),g(n,a,m));if(v(n)){if(!v(a)||n.length!==a.length)return!1;for(p=0;p<n.length;p++)if(n[p]!==a[p])return!1;return!0}try{var t=w(n),l=w(a)}catch(h){return!1}if(t.length!=l.length)return!1;for(t.sort(),l.sort(),p=t.length-1;p>=0;p--)if(t[p]!=l[p])return!1;for(p=t.length-1;p>=0;p--)if(!g(n[e=t[p]],a[e],m))return!1;return typeof n==typeof a}(n,a,m))};function y(n){return null==n}function v(n){return!(!n||"object"!=typeof n||"number"!=typeof n.length||"function"!=typeof n.copy||"function"!=typeof n.slice||n.length>0&&"number"!=typeof n[0])}},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=s(1),w=function(){function I(g,y,v){void 0===v&&(v={}),this.attrName=g,this.keyName=y,this.scope=null!=v.scope?v.scope&u.Scope.LEVEL|u.Scope.TYPE&u.Scope.ATTRIBUTE:u.Scope.ATTRIBUTE,null!=v.whitelist&&(this.whitelist=v.whitelist)}return I.keys=function(g){return[].map.call(g.attributes,function(y){return y.name})},I.prototype.add=function(g,y){return!!this.canAdd(g,y)&&(g.setAttribute(this.keyName,y),!0)},I.prototype.canAdd=function(g,y){return null!=u.query(g,u.Scope.BLOT&(this.scope|u.Scope.TYPE))&&(null==this.whitelist||("string"==typeof y?this.whitelist.indexOf(y.replace(/["']/g,""))>-1:this.whitelist.indexOf(y)>-1))},I.prototype.remove=function(g){g.removeAttribute(this.keyName)},I.prototype.value=function(g){var y=g.getAttribute(this.keyName);return this.canAdd(g,y)&&y?y:""},I}();c.default=w},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Code=void 0;var u=function(M,x){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function E(M,x){var _=[],A=!0,k=!1,V=void 0;try{for(var z,L=M[Symbol.iterator]();!(A=(z=L.next()).done)&&(_.push(z.value),!x||_.length!==x);A=!0);}catch(Y){k=!0,V=Y}finally{try{!A&&L.return&&L.return()}finally{if(k)throw V}}return _}(M,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function E(M,x){for(var _=0;_<x.length;_++){var A=x[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,x,_){return x&&E(M.prototype,x),_&&E(M,_),M}}(),I=function E(M,x,_){null===M&&(M=Function.prototype);var A=Object.getOwnPropertyDescriptor(M,x);if(void 0===A){var k=Object.getPrototypeOf(M);return null===k?void 0:E(k,x,_)}if("value"in A)return A.value;var V=A.get;return void 0===V?void 0:V.call(_)},y=l(s(2)),i=l(s(0)),a=l(s(4)),p=l(s(6)),t=l(s(7));function l(E){return E&&E.__esModule?E:{default:E}}function h(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}function r(E,M){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?E:M}function f(E,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);E.prototype=Object.create(M&&M.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(E,M):E.__proto__=M)}var Z=function(E){function M(){return h(this,M),r(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return f(M,E),M}(p.default);Z.blotName="code",Z.tagName="CODE";var C=function(E){function M(){return h(this,M),r(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return f(M,E),w(M,[{key:"delta",value:function(){var _=this,A=this.domNode.textContent;return A.endsWith("\n")&&(A=A.slice(0,-1)),A.split("\n").reduce(function(k,V){return k.insert(V).insert("\n",_.formats())},new y.default)}},{key:"format",value:function(_,A){if(_!==this.statics.blotName||!A){var k=this.descendant(t.default,this.length()-1),L=u(k,1)[0];null!=L&&L.deleteAt(L.length()-1,1),I(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,_,A)}}},{key:"formatAt",value:function(_,A,k,V){if(0!==A&&null!=i.default.query(k,i.default.Scope.BLOCK)&&(k!==this.statics.blotName||V!==this.statics.formats(this.domNode))){var L=this.newlineIndex(_);if(!(L<0||L>=_+A)){var z=this.newlineIndex(_,!0)+1,Y=L-z+1,it=this.isolate(z,Y),Q=it.next;it.format(k,V),Q instanceof M&&Q.formatAt(0,_-z+A-Y,k,V)}}}},{key:"insertAt",value:function(_,A,k){if(null==k){var V=this.descendant(t.default,_),L=u(V,2);L[0].insertAt(L[1],A)}}},{key:"length",value:function(){var _=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?_:_+1}},{key:"newlineIndex",value:function(_){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,_).lastIndexOf("\n");var k=this.domNode.textContent.slice(_).indexOf("\n");return k>-1?_+k:-1}},{key:"optimize",value:function(_){this.domNode.textContent.endsWith("\n")||this.appendChild(i.default.create("text","\n")),I(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,_);var A=this.next;null!=A&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(_),A.moveChildren(this),A.remove())}},{key:"replace",value:function(_){I(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,_),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var k=i.default.find(A);null==k?A.parentNode.removeChild(A):k instanceof i.default.Embed?k.remove():k.unwrap()})}}],[{key:"create",value:function(_){var A=I(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,_);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),M}(a.default);C.blotName="code-block",C.tagName="PRE",C.TAB="  ",c.Code=Z,c.default=C},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},w=function(R,b){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function Q(R,b){var O=[],q=!0,U=!1,j=void 0;try{for(var B,D=R[Symbol.iterator]();!(q=(B=D.next()).done)&&(O.push(B.value),!b||O.length!==b);q=!0);}catch(G){U=!0,j=G}finally{try{!q&&D.return&&D.return()}finally{if(U)throw j}}return O}(R,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=function(){function Q(R,b){for(var O=0;O<b.length;O++){var q=b[O];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(R,q.key,q)}}return function(R,b,O){return b&&Q(R.prototype,b),O&&Q(R,O),R}}(),y=A(s(2)),i=A(s(20)),a=A(s(0)),p=A(s(13)),t=A(s(24)),l=s(4),h=A(l),f=A(s(16)),C=A(s(21)),M=A(s(11)),_=A(s(3));function A(Q){return Q&&Q.__esModule?Q:{default:Q}}var L=/^[ -~]*$/,z=function(){function Q(R){(function V(Q,R){if(!(Q instanceof R))throw new TypeError("Cannot call a class as a function")})(this,Q),this.scroll=R,this.delta=this.getDelta()}return I(Q,[{key:"applyDelta",value:function(b){var O=this,q=!1;this.scroll.update();var U=this.scroll.length();return this.scroll.batchStart(),(b=function it(Q){return Q.reduce(function(R,b){if(1===b.insert){var O=(0,C.default)(b.attributes);return delete O.image,R.insert({image:b.attributes.image},O)}if(null!=b.attributes&&(!0===b.attributes.list||!0===b.attributes.bullet)&&((b=(0,C.default)(b)).attributes.list?b.attributes.list="ordered":(b.attributes.list="bullet",delete b.attributes.bullet)),"string"==typeof b.insert){var q=b.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return R.insert(q,b.attributes)}return R.push(b)},new y.default)}(b)).reduce(function(j,D){var B=D.retain||D.delete||D.insert.length||1,G=D.attributes||{};if(null!=D.insert){if("string"==typeof D.insert){var W=D.insert;W.endsWith("\n")&&q&&(q=!1,W=W.slice(0,-1)),j>=U&&!W.endsWith("\n")&&(q=!0),O.scroll.insertAt(j,W);var ot=O.scroll.line(j),lt=w(ot,2),ft=lt[0],pt=lt[1],ht=(0,_.default)({},(0,l.bubbleFormats)(ft));if(ft instanceof h.default){var vt=ft.descendant(a.default.Leaf,pt),At=w(vt,1);ht=(0,_.default)(ht,(0,l.bubbleFormats)(At[0]))}G=i.default.attributes.diff(ht,G)||{}}else if("object"===u(D.insert)){var X=Object.keys(D.insert)[0];if(null==X)return j;O.scroll.insertAt(j,X,D.insert[X])}U+=B}return Object.keys(G).forEach(function(et){O.scroll.formatAt(j,B,et,G[et])}),j+B},0),b.reduce(function(j,D){return"number"==typeof D.delete?(O.scroll.deleteAt(j,D.delete),j):j+(D.retain||D.insert.length||1)},0),this.scroll.batchEnd(),this.update(b)}},{key:"deleteText",value:function(b,O){return this.scroll.deleteAt(b,O),this.update((new y.default).retain(b).delete(O))}},{key:"formatLine",value:function(b,O){var q=this,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(U).forEach(function(j){if(null==q.scroll.whitelist||q.scroll.whitelist[j]){var D=q.scroll.lines(b,Math.max(O,1)),B=O;D.forEach(function(G){var W=G.length();if(G instanceof p.default){var ot=b-G.offset(q.scroll),lt=G.newlineIndex(ot+B)-ot+1;G.formatAt(ot,lt,j,U[j])}else G.format(j,U[j]);B-=W})}}),this.scroll.optimize(),this.update((new y.default).retain(b).retain(O,(0,C.default)(U)))}},{key:"formatText",value:function(b,O){var q=this,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(U).forEach(function(j){q.scroll.formatAt(b,O,j,U[j])}),this.update((new y.default).retain(b).retain(O,(0,C.default)(U)))}},{key:"getContents",value:function(b,O){return this.delta.slice(b,b+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(b,O){return b.concat(O.delta())},new y.default)}},{key:"getFormat",value:function(b){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,q=[],U=[];0===O?this.scroll.path(b).forEach(function(D){var G=w(D,1)[0];G instanceof h.default?q.push(G):G instanceof a.default.Leaf&&U.push(G)}):(q=this.scroll.lines(b,O),U=this.scroll.descendants(a.default.Leaf,b,O));var j=[q,U].map(function(D){if(0===D.length)return{};for(var B=(0,l.bubbleFormats)(D.shift());Object.keys(B).length>0;){var G=D.shift();if(null==G)return B;B=Y((0,l.bubbleFormats)(G),B)}return B});return _.default.apply(_.default,j)}},{key:"getText",value:function(b,O){return this.getContents(b,O).filter(function(q){return"string"==typeof q.insert}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(b,O,q){return this.scroll.insertAt(b,O,q),this.update((new y.default).retain(b).insert(function k(Q,R,b){return R in Q?Object.defineProperty(Q,R,{value:b,enumerable:!0,configurable:!0,writable:!0}):Q[R]=b,Q}({},O,q)))}},{key:"insertText",value:function(b,O){var q=this,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O=O.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(b,O),Object.keys(U).forEach(function(j){q.scroll.formatAt(b,O.length,j,U[j])}),this.update((new y.default).retain(b).insert(O,(0,C.default)(U)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var b=this.scroll.children.head;return!(b.statics.blotName!==h.default.blotName||b.children.length>1)&&b.children.head instanceof f.default}},{key:"removeFormat",value:function(b,O){var q=this.getText(b,O),U=this.scroll.line(b+O),j=w(U,2),D=j[0],B=j[1],G=0,W=new y.default;null!=D&&(G=D instanceof p.default?D.newlineIndex(B)-B+1:D.length()-B,W=D.delta().slice(B,B+G-1).insert("\n"));var lt=this.getContents(b,O+G).diff((new y.default).insert(q).concat(W)),ft=(new y.default).retain(b).concat(lt);return this.applyDelta(ft)}},{key:"update",value:function(b){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,U=this.delta;if(1===O.length&&"characterData"===O[0].type&&O[0].target.data.match(L)&&a.default.find(O[0].target)){var j=a.default.find(O[0].target),D=(0,l.bubbleFormats)(j),B=j.offset(this.scroll),G=O[0].oldValue.replace(t.default.CONTENTS,""),W=(new y.default).insert(G),ot=(new y.default).insert(j.value());b=(new y.default).retain(B).concat(W.diff(ot,q)).reduce(function(ft,pt){return pt.insert?ft.insert(pt.insert,D):ft.push(pt)},new y.default),this.delta=U.compose(b)}else this.delta=this.getDelta(),(!b||!(0,M.default)(U.compose(b),this.delta))&&(b=U.diff(this.delta,q));return b}}]),Q}();function Y(Q,R){return Object.keys(R).reduce(function(b,O){return null==Q[O]||(R[O]===Q[O]?b[O]=R[O]:Array.isArray(R[O])?R[O].indexOf(Q[O])<0&&(b[O]=R[O].concat([Q[O]])):b[O]=[R[O],Q[O]]),b},{})}c.default=z},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Range=void 0;var u=function(M,x){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function E(M,x){var _=[],A=!0,k=!1,V=void 0;try{for(var z,L=M[Symbol.iterator]();!(A=(z=L.next()).done)&&(_.push(z.value),!x||_.length!==x);A=!0);}catch(Y){k=!0,V=Y}finally{try{!A&&L.return&&L.return()}finally{if(k)throw V}}return _}(M,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function E(M,x){for(var _=0;_<x.length;_++){var A=x[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,x,_){return x&&E(M.prototype,x),_&&E(M,_),M}}(),g=t(s(0)),v=t(s(21)),n=t(s(11)),m=t(s(8));function t(E){return E&&E.__esModule?E:{default:E}}function l(E){if(Array.isArray(E)){for(var M=0,x=Array(E.length);M<E.length;M++)x[M]=E[M];return x}return Array.from(E)}function h(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}var r=(0,t(s(10)).default)("quill:selection"),f=function E(M){var x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,E),this.index=M,this.length=x},Z=function(){function E(M,x){var _=this;h(this,E),this.emitter=x,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=g.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){_.mouseDown||setTimeout(_.update.bind(_,m.default.sources.USER),1)}),this.emitter.on(m.default.events.EDITOR_CHANGE,function(A,k){A===m.default.events.TEXT_CHANGE&&k.length()>0&&_.update(m.default.sources.SILENT)}),this.emitter.on(m.default.events.SCROLL_BEFORE_UPDATE,function(){if(_.hasFocus()){var A=_.getNativeRange();null!=A&&A.start.node!==_.cursor.textNode&&_.emitter.once(m.default.events.SCROLL_UPDATE,function(){try{_.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch(k){}})}}),this.emitter.on(m.default.events.SCROLL_OPTIMIZE,function(A,k){if(k.range){var V=k.range;_.setNativeRange(V.startNode,V.startOffset,V.endNode,V.endOffset)}}),this.update(m.default.sources.SILENT)}return w(E,[{key:"handleComposition",value:function(){var x=this;this.root.addEventListener("compositionstart",function(){x.composing=!0}),this.root.addEventListener("compositionend",function(){if(x.composing=!1,x.cursor.parent){var _=x.cursor.restore();if(!_)return;setTimeout(function(){x.setNativeRange(_.startNode,_.startOffset,_.endNode,_.endOffset)},1)}})}},{key:"handleDragging",value:function(){var x=this;this.emitter.listenDOM("mousedown",document.body,function(){x.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){x.mouseDown=!1,x.update(m.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(x,_){if(null==this.scroll.whitelist||this.scroll.whitelist[x]){this.scroll.update();var A=this.getNativeRange();if(null!=A&&A.native.collapsed&&!g.default.query(x,g.default.Scope.BLOCK)){if(A.start.node!==this.cursor.textNode){var k=g.default.find(A.start.node,!1);if(null==k)return;if(k instanceof g.default.Leaf){var V=k.split(A.start.offset);k.parent.insertBefore(this.cursor,V)}else k.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(x,_),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(x){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,A=this.scroll.length();x=Math.min(x,A-1),_=Math.min(x+_,A-1)-x;var k=void 0,V=this.scroll.leaf(x),L=u(V,2),z=L[0],Y=L[1];if(null==z)return null;var it=z.position(Y,!0),Q=u(it,2);k=Q[0],Y=Q[1];var R=document.createRange();if(_>0){R.setStart(k,Y);var b=this.scroll.leaf(x+_),O=u(b,2);if(null==(z=O[0]))return null;var q=z.position(Y=O[1],!0),U=u(q,2);return R.setEnd(k=U[0],Y=U[1]),R.getBoundingClientRect()}var j="left",D=void 0;return k instanceof Text?(Y<k.data.length?(R.setStart(k,Y),R.setEnd(k,Y+1)):(R.setStart(k,Y-1),R.setEnd(k,Y),j="right"),D=R.getBoundingClientRect()):(D=z.domNode.getBoundingClientRect(),Y>0&&(j="right")),{bottom:D.top+D.height,height:D.height,left:D[j],right:D[j],top:D.top,width:0}}},{key:"getNativeRange",value:function(){var x=document.getSelection();if(null==x||x.rangeCount<=0)return null;var _=x.getRangeAt(0);if(null==_)return null;var A=this.normalizeNative(_);return r.info("getNativeRange",A),A}},{key:"getRange",value:function(){var x=this.getNativeRange();return null==x?[null,null]:[this.normalizedToRange(x),x]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(x){var _=this,A=[[x.start.node,x.start.offset]];x.native.collapsed||A.push([x.end.node,x.end.offset]);var k=A.map(function(z){var Y=u(z,2),it=Y[0],Q=Y[1],R=g.default.find(it,!0),b=R.offset(_.scroll);return 0===Q?b:R instanceof g.default.Container?b+R.length():b+R.index(it,Q)}),V=Math.min(Math.max.apply(Math,l(k)),this.scroll.length()-1),L=Math.min.apply(Math,[V].concat(l(k)));return new f(L,V-L)}},{key:"normalizeNative",value:function(x){if(!C(this.root,x.startContainer)||!x.collapsed&&!C(this.root,x.endContainer))return null;var _={start:{node:x.startContainer,offset:x.startOffset},end:{node:x.endContainer,offset:x.endOffset},native:x};return[_.start,_.end].forEach(function(A){for(var k=A.node,V=A.offset;!(k instanceof Text)&&k.childNodes.length>0;)if(k.childNodes.length>V)k=k.childNodes[V],V=0;else{if(k.childNodes.length!==V)break;V=(k=k.lastChild)instanceof Text?k.data.length:k.childNodes.length+1}A.node=k,A.offset=V}),_}},{key:"rangeToNative",value:function(x){var _=this,A=x.collapsed?[x.index]:[x.index,x.index+x.length],k=[],V=this.scroll.length();return A.forEach(function(L,z){L=Math.min(V-1,L);var it=_.scroll.leaf(L),Q=u(it,2),b=Q[1],O=Q[0].position(b,0!==z),q=u(O,2);k.push(q[0],b=q[1])}),k.length<2&&(k=k.concat(k)),k}},{key:"scrollIntoView",value:function(x){var _=this.lastRange;if(null!=_){var A=this.getBounds(_.index,_.length);if(null!=A){var k=this.scroll.length()-1,V=this.scroll.line(Math.min(_.index,k)),z=u(V,1)[0],Y=z;if(_.length>0){var it=this.scroll.line(Math.min(_.index+_.length,k));Y=u(it,1)[0]}if(null!=z&&null!=Y){var R=x.getBoundingClientRect();A.top<R.top?x.scrollTop-=R.top-A.top:A.bottom>R.bottom&&(x.scrollTop+=A.bottom-R.bottom)}}}}},{key:"setNativeRange",value:function(x,_){var A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_,V=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(r.info("setNativeRange",x,_,A,k),null==x||null!=this.root.parentNode&&null!=x.parentNode&&null!=A.parentNode){var L=document.getSelection();if(null!=L)if(null!=x){this.hasFocus()||this.root.focus();var z=(this.getNativeRange()||{}).native;if(null==z||V||x!==z.startContainer||_!==z.startOffset||A!==z.endContainer||k!==z.endOffset){"BR"==x.tagName&&(_=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode),"BR"==A.tagName&&(k=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var Y=document.createRange();Y.setStart(x,_),Y.setEnd(A,k),L.removeAllRanges(),L.addRange(Y)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(x){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.default.sources.API;if("string"==typeof _&&(A=_,_=!1),r.info("setRange",x),null!=x){var k=this.rangeToNative(x);this.setNativeRange.apply(this,l(k).concat([_]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.default.sources.USER,_=this.lastRange,A=this.getRange(),k=u(A,2),L=k[1];if(this.lastRange=k[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,n.default)(_,this.lastRange)){var z;!this.composing&&null!=L&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var it,Y=[m.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(_),x];(z=this.emitter).emit.apply(z,[m.default.events.EDITOR_CHANGE].concat(Y)),x!==m.default.sources.SILENT&&(it=this.emitter).emit.apply(it,Y)}}}]),E}();function C(E,M){return M instanceof Text&&(M=M.parentNode),E.contains(M)}c.Range=f,c.default=Z},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function m(p,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,e,t){return e&&m(p.prototype,e),t&&m(p,t),p}}(),w=function m(p,e,t){null===p&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,e);if(void 0===l){var h=Object.getPrototypeOf(p);return null===h?void 0:m(h,e,t)}if("value"in l)return l.value;var r=l.get;return void 0===r?void 0:r.call(t)};function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}var a=function(m){function p(){return v(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),u(p,[{key:"insertInto",value:function(t,l){0===t.children.length?w(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"insertInto",this).call(this,t,l):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),p}(function y(m){return m&&m.__esModule?m:{default:m}}(s(0)).default.Embed);a.blotName="break",a.tagName="BR",c.default=a},function($,c,s){"use strict";var i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var m in a)a.hasOwnProperty(m)&&(n[m]=a[m])},function(n,a){function m(){this.constructor=n}i(n,a),n.prototype=null===a?Object.create(a):(m.prototype=a.prototype,new m)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(44),I=s(30),g=s(1),y=function(i){function n(a){var m=i.call(this,a)||this;return m.build(),m}return u(n,i),n.prototype.appendChild=function(a){this.insertBefore(a)},n.prototype.attach=function(){i.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},n.prototype.build=function(){var a=this;this.children=new w.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(m){try{var p=v(m);a.insertBefore(p,a.children.head||void 0)}catch(e){if(e instanceof g.ParchmentError)return;throw e}})},n.prototype.deleteAt=function(a,m){if(0===a&&m===this.length())return this.remove();this.children.forEachAt(a,m,function(p,e,t){p.deleteAt(e,t)})},n.prototype.descendant=function(a,m){var p=this.children.find(m),e=p[0],t=p[1];return null==a.blotName&&a(e)||null!=a.blotName&&e instanceof a?[e,t]:e instanceof n?e.descendant(a,t):[null,-1]},n.prototype.descendants=function(a,m,p){void 0===m&&(m=0),void 0===p&&(p=Number.MAX_VALUE);var e=[],t=p;return this.children.forEachAt(m,p,function(l,h,r){(null==a.blotName&&a(l)||null!=a.blotName&&l instanceof a)&&e.push(l),l instanceof n&&(e=e.concat(l.descendants(a,h,t))),t-=r}),e},n.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),i.prototype.detach.call(this)},n.prototype.formatAt=function(a,m,p,e){this.children.forEachAt(a,m,function(t,l,h){t.formatAt(l,h,p,e)})},n.prototype.insertAt=function(a,m,p){var e=this.children.find(a),t=e[0];if(t)t.insertAt(e[1],m,p);else{var h=null==p?g.create("text",m):g.create(m,p);this.appendChild(h)}},n.prototype.insertBefore=function(a,m){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(p){return a instanceof p}))throw new g.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,m)},n.prototype.length=function(){return this.children.reduce(function(a,m){return a+m.length()},0)},n.prototype.moveChildren=function(a,m){this.children.forEach(function(p){a.insertBefore(p,m)})},n.prototype.optimize=function(a){if(i.prototype.optimize.call(this,a),0===this.children.length)if(null!=this.statics.defaultChild){var m=g.create(this.statics.defaultChild);this.appendChild(m),m.optimize(a)}else this.remove()},n.prototype.path=function(a,m){void 0===m&&(m=!1);var p=this.children.find(a,m),e=p[0],t=p[1],l=[[this,a]];return e instanceof n?l.concat(e.path(t,m)):(null!=e&&l.push([e,t]),l)},n.prototype.removeChild=function(a){this.children.remove(a)},n.prototype.replace=function(a){a instanceof n&&a.moveChildren(this),i.prototype.replace.call(this,a)},n.prototype.split=function(a,m){if(void 0===m&&(m=!1),!m){if(0===a)return this;if(a===this.length())return this.next}var p=this.clone();return this.parent.insertBefore(p,this.next),this.children.forEachAt(a,this.length(),function(e,t,l){e=e.split(t,m),p.appendChild(e)}),p},n.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},n.prototype.update=function(a,m){var p=this,e=[],t=[];a.forEach(function(l){l.target===p.domNode&&"childList"===l.type&&(e.push.apply(e,l.addedNodes),t.push.apply(t,l.removedNodes))}),t.forEach(function(l){if(!(null!=l.parentNode&&"IFRAME"!==l.tagName&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var h=g.find(l);null!=h&&(null==h.domNode.parentNode||h.domNode.parentNode===p.domNode)&&h.detach()}}),e.filter(function(l){return l.parentNode==p.domNode}).sort(function(l,h){return l===h?0:l.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(l){var h=null;null!=l.nextSibling&&(h=g.find(l.nextSibling));var r=v(l);(r.next!=h||null==r.next)&&(null!=r.parent&&r.parent.removeChild(p),p.insertBefore(r,h||void 0))})},n}(I.default);function v(i){var n=g.find(i);if(null==n)try{n=g.create(i)}catch(a){n=g.create(g.Scope.INLINE),[].slice.call(i.childNodes).forEach(function(m){n.domNode.appendChild(m)}),i.parentNode&&i.parentNode.replaceChild(n.domNode,i),n.attach()}return n}c.default=y},function($,c,s){"use strict";var i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var m in a)a.hasOwnProperty(m)&&(n[m]=a[m])},function(n,a){function m(){this.constructor=n}i(n,a),n.prototype=null===a?Object.create(a):(m.prototype=a.prototype,new m)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(12),I=s(31),g=s(17),y=s(1),v=function(i){function n(a){var m=i.call(this,a)||this;return m.attributes=new I.default(m.domNode),m}return u(n,i),n.formats=function(a){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?a.tagName.toLowerCase():void 0)},n.prototype.format=function(a,m){var p=y.query(a);p instanceof w.default?this.attributes.attribute(p,m):m&&null!=p&&(a!==this.statics.blotName||this.formats()[a]!==m)&&this.replaceWith(a,m)},n.prototype.formats=function(){var a=this.attributes.values(),m=this.statics.formats(this.domNode);return null!=m&&(a[this.statics.blotName]=m),a},n.prototype.replaceWith=function(a,m){var p=i.prototype.replaceWith.call(this,a,m);return this.attributes.copy(p),p},n.prototype.update=function(a,m){var p=this;i.prototype.update.call(this,a,m),a.some(function(e){return e.target===p.domNode&&"attributes"===e.type})&&this.attributes.build()},n.prototype.wrap=function(a,m){var p=i.prototype.wrap.call(this,a,m);return p instanceof n&&p.statics.scope===this.statics.scope&&this.attributes.move(p),p},n}(g.default);c.default=v},function($,c,s){"use strict";var y,u=this&&this.__extends||(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var n in i)i.hasOwnProperty(n)&&(v[n]=i[n])},function(v,i){function n(){this.constructor=v}y(v,i),v.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(30),I=s(1),g=function(y){function v(){return null!==y&&y.apply(this,arguments)||this}return u(v,y),v.value=function(i){return!0},v.prototype.index=function(i,n){return this.domNode===i||this.domNode.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1},v.prototype.position=function(i,n){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return i>0&&(a+=1),[this.parent.domNode,a]},v.prototype.value=function(){var i;return(i={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,i},v.scope=I.Scope.INLINE_BLOT,v}(w.default);c.default=g},function($,c,s){var u=s(11),w=s(3),I={attributes:{compose:function(y,v,i){"object"!=typeof y&&(y={}),"object"!=typeof v&&(v={});var n=w(!0,{},v);for(var a in i||(n=Object.keys(n).reduce(function(m,p){return null!=n[p]&&(m[p]=n[p]),m},{})),y)void 0!==y[a]&&void 0===v[a]&&(n[a]=y[a]);return Object.keys(n).length>0?n:void 0},diff:function(y,v){"object"!=typeof y&&(y={}),"object"!=typeof v&&(v={});var i=Object.keys(y).concat(Object.keys(v)).reduce(function(n,a){return u(y[a],v[a])||(n[a]=void 0===v[a]?null:v[a]),n},{});return Object.keys(i).length>0?i:void 0},transform:function(y,v,i){if("object"!=typeof y)return v;if("object"==typeof v){if(!i)return v;var n=Object.keys(v).reduce(function(a,m){return void 0===y[m]&&(a[m]=v[m]),a},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(y){return new g(y)},length:function(y){return"number"==typeof y.delete?y.delete:"number"==typeof y.retain?y.retain:"string"==typeof y.insert?y.insert.length:1}};function g(y){this.ops=y,this.index=0,this.offset=0}g.prototype.hasNext=function(){return this.peekLength()<1/0},g.prototype.next=function(y){y||(y=1/0);var v=this.ops[this.index];if(v){var i=this.offset,n=I.length(v);if(y>=n-i?(y=n-i,this.index+=1,this.offset=0):this.offset+=y,"number"==typeof v.delete)return{delete:y};var a={};return v.attributes&&(a.attributes=v.attributes),"number"==typeof v.retain?a.retain=y:a.insert="string"==typeof v.insert?v.insert.substr(i,y):v.insert,a}return{retain:1/0}},g.prototype.peek=function(){return this.ops[this.index]},g.prototype.peekLength=function(){return this.ops[this.index]?I.length(this.ops[this.index])-this.offset:1/0},g.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},g.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var y=this.offset,v=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=y,this.index=v,[i].concat(n)}return[]},$.exports=I},function($,c){var s=function(){"use strict";function u(p,e){return null!=e&&p instanceof e}var w,I,g;try{w=Map}catch(p){w=function(){}}try{I=Set}catch(p){I=function(){}}try{g=Promise}catch(p){g=function(){}}function y(p,e,t,l,h){"object"==typeof e&&(t=e.depth,l=e.prototype,h=e.includeNonEnumerable,e=e.circular);var r=[],f=[],Z="undefined"!=typeof Buffer;return void 0===e&&(e=!0),void 0===t&&(t=1/0),function C(E,M){if(null===E)return null;if(0===M)return E;var x,_;if("object"!=typeof E)return E;if(u(E,w))x=new w;else if(u(E,I))x=new I;else if(u(E,g))x=new g(function(R,b){E.then(function(O){R(C(O,M-1))},function(O){b(C(O,M-1))})});else if(y.__isArray(E))x=[];else if(y.__isRegExp(E))x=new RegExp(E.source,m(E)),E.lastIndex&&(x.lastIndex=E.lastIndex);else if(y.__isDate(E))x=new Date(E.getTime());else{if(Z&&Buffer.isBuffer(E))return x=Buffer.allocUnsafe?Buffer.allocUnsafe(E.length):new Buffer(E.length),E.copy(x),x;u(E,Error)?x=Object.create(E):void 0===l?(_=Object.getPrototypeOf(E),x=Object.create(_)):(x=Object.create(l),_=l)}if(e){var A=r.indexOf(E);if(-1!=A)return f[A];r.push(E),f.push(x)}for(var k in u(E,w)&&E.forEach(function(R,b){var O=C(b,M-1),q=C(R,M-1);x.set(O,q)}),u(E,I)&&E.forEach(function(R){var b=C(R,M-1);x.add(b)}),E){var V;_&&(V=Object.getOwnPropertyDescriptor(_,k)),(!V||null!=V.set)&&(x[k]=C(E[k],M-1))}if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(E);for(k=0;k<L.length;k++){var z=L[k];(Y=Object.getOwnPropertyDescriptor(E,z))&&!Y.enumerable&&!h||(x[z]=C(E[z],M-1),Y.enumerable||Object.defineProperty(x,z,{enumerable:!1}))}}if(h){var it=Object.getOwnPropertyNames(E);for(k=0;k<it.length;k++){var Y,Q=it[k];(Y=Object.getOwnPropertyDescriptor(E,Q))&&Y.enumerable||(x[Q]=C(E[Q],M-1),Object.defineProperty(x,Q,{enumerable:!1}))}}return x}(p,t)}function v(p){return Object.prototype.toString.call(p)}function m(p){var e="";return p.global&&(e+="g"),p.ignoreCase&&(e+="i"),p.multiline&&(e+="m"),e}return y.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},y.__objToStr=v,y.__isDate=function i(p){return"object"==typeof p&&"[object Date]"===v(p)},y.__isArray=function n(p){return"object"==typeof p&&"[object Array]"===v(p)},y.__isRegExp=function a(p){return"object"==typeof p&&"[object RegExp]"===v(p)},y.__getRegExpFlags=m,y}();"object"==typeof $&&$.exports&&($.exports=s)},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(_,A){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return function x(_,A){var k=[],V=!0,L=!1,z=void 0;try{for(var it,Y=_[Symbol.iterator]();!(V=(it=Y.next()).done)&&(k.push(it.value),!A||k.length!==A);V=!0);}catch(Q){L=!0,z=Q}finally{try{!V&&Y.return&&Y.return()}finally{if(L)throw z}}return k}(_,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function x(_,A){for(var k=0;k<A.length;k++){var V=A[k];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(_,V.key,V)}}return function(_,A,k){return A&&x(_.prototype,A),k&&x(_,k),_}}(),I=function x(_,A,k){null===_&&(_=Function.prototype);var V=Object.getOwnPropertyDescriptor(_,A);if(void 0===V){var L=Object.getPrototypeOf(_);return null===L?void 0:x(L,A,k)}if("value"in V)return V.value;var z=V.get;return void 0===z?void 0:z.call(k)},y=r(s(0)),i=r(s(8)),n=s(4),a=r(n),p=r(s(16)),t=r(s(13)),h=r(s(25));function r(x){return x&&x.__esModule?x:{default:x}}function E(x){return x instanceof a.default||x instanceof n.BlockEmbed}var M=function(x){function _(A,k){!function f(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_);var V=function Z(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?x:_}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return V.emitter=k.emitter,Array.isArray(k.whitelist)&&(V.whitelist=k.whitelist.reduce(function(L,z){return L[z]=!0,L},{})),V.domNode.addEventListener("DOMNodeInserted",function(){}),V.optimize(),V.enable(),V}return function C(x,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}(_,x),w(_,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(k,V){var L=this.line(k),z=u(L,2),Y=z[0],it=z[1],Q=this.line(k+V),b=u(Q,1)[0];if(I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,k,V),null!=b&&Y!==b&&it>0){if(Y instanceof n.BlockEmbed||b instanceof n.BlockEmbed)return void this.optimize();if(Y instanceof t.default){var O=Y.newlineIndex(Y.length(),!0);if(O>-1&&(Y=Y.split(O+1))===b)return void this.optimize()}else if(b instanceof t.default){var q=b.newlineIndex(0);q>-1&&b.split(q+1)}Y.moveChildren(b,b.children.head instanceof p.default?null:b.children.head),Y.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(k,V,L,z){null!=this.whitelist&&!this.whitelist[L]||(I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,k,V,L,z),this.optimize())}},{key:"insertAt",value:function(k,V,L){if(null==L||null==this.whitelist||this.whitelist[V]){if(k>=this.length())if(null==L||null==y.default.query(V,y.default.Scope.BLOCK)){var z=y.default.create(this.statics.defaultChild);this.appendChild(z),null==L&&V.endsWith("\n")&&(V=V.slice(0,-1)),z.insertAt(0,V,L)}else{var Y=y.default.create(V,L);this.appendChild(Y)}else I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,k,V,L);this.optimize()}}},{key:"insertBefore",value:function(k,V){if(k.statics.scope===y.default.Scope.INLINE_BLOT){var L=y.default.create(this.statics.defaultChild);L.appendChild(k),k=L}I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,k,V)}},{key:"leaf",value:function(k){return this.path(k).pop()||[null,-1]}},{key:"line",value:function(k){return k===this.length()?this.line(k-1):this.descendant(E,k)}},{key:"lines",value:function(){return function z(Y,it,Q){var R=[],b=Q;return Y.children.forEachAt(it,Q,function(O,q,U){E(O)?R.push(O):O instanceof y.default.Container&&(R=R.concat(z(O,q,b))),b-=U}),R}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,k,V),k.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,k,V))}},{key:"path",value:function(k){return I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,k).slice(1)}},{key:"update",value:function(k){if(!0!==this.batch){var V=i.default.sources.USER;"string"==typeof k&&(V=k),Array.isArray(k)||(k=this.observer.takeRecords()),k.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,V,k),I(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"update",this).call(this,k.concat([])),k.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,V,k)}}}]),_}(y.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[a.default,n.BlockEmbed,h.default],c.default=M},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SHORTKEY=c.default=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},w=function(B,G){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return function D(B,G){var W=[],ot=!0,lt=!1,ft=void 0;try{for(var ht,pt=B[Symbol.iterator]();!(ot=(ht=pt.next()).done)&&(W.push(ht.value),!G||W.length!==G);ot=!0);}catch(vt){lt=!0,ft=vt}finally{try{!ot&&pt.return&&pt.return()}finally{if(lt)throw ft}}return W}(B,G);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=function(){function D(B,G){for(var W=0;W<G.length;W++){var ot=G[W];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(B,ot.key,ot)}}return function(B,G,W){return G&&D(B.prototype,G),W&&D(B,W),B}}(),y=x(s(21)),i=x(s(11)),a=x(s(3)),p=x(s(2)),t=x(s(20)),h=x(s(0)),f=x(s(5)),C=x(s(10)),M=x(s(9));function x(D){return D&&D.__esModule?D:{default:D}}function _(D,B,G){return B in D?Object.defineProperty(D,B,{value:G,enumerable:!0,configurable:!0,writable:!0}):D[B]=G,D}var L=(0,C.default)("quill:keyboard"),z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(D){function B(G,W){!function A(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")}(this,B);var ot=function k(D,B){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!B||"object"!=typeof B&&"function"!=typeof B?D:B}(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,G,W));return ot.bindings={},Object.keys(ot.options.bindings).forEach(function(lt){"list autofill"===lt&&null!=G.scroll.whitelist&&!G.scroll.whitelist.list||ot.options.bindings[lt]&&ot.addBinding(ot.options.bindings[lt])}),ot.addBinding({key:B.keys.ENTER,shiftKey:null},O),ot.addBinding({key:B.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ot.addBinding({key:B.keys.BACKSPACE},{collapsed:!0},Q),ot.addBinding({key:B.keys.DELETE},{collapsed:!0},R)):(ot.addBinding({key:B.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Q),ot.addBinding({key:B.keys.DELETE},{collapsed:!0,suffix:/^.?$/},R)),ot.addBinding({key:B.keys.BACKSPACE},{collapsed:!1},b),ot.addBinding({key:B.keys.DELETE},{collapsed:!1},b),ot.addBinding({key:B.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Q),ot.listen(),ot}return function V(D,B){if("function"!=typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function, not "+typeof B);D.prototype=Object.create(B&&B.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(D,B):D.__proto__=B)}(B,D),I(B,null,[{key:"match",value:function(W,ot){return ot=j(ot),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(lt){return!!ot[lt]!==W[lt]&&null!==ot[lt]})&&ot.key===(W.which||W.keyCode)}}]),I(B,[{key:"addBinding",value:function(W){var ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ft=j(W);if(null==ft||null==ft.key)return L.warn("Attempted to add invalid keyboard binding",ft);"function"==typeof ot&&(ot={handler:ot}),"function"==typeof lt&&(lt={handler:lt}),ft=(0,a.default)(ft,ot,lt),this.bindings[ft.key]=this.bindings[ft.key]||[],this.bindings[ft.key].push(ft)}},{key:"listen",value:function(){var W=this;this.quill.root.addEventListener("keydown",function(ot){if(!ot.defaultPrevented){var ft=(W.bindings[ot.which||ot.keyCode]||[]).filter(function(Tt){return B.match(ot,Tt)});if(0!==ft.length){var pt=W.quill.getSelection();if(null!=pt&&W.quill.hasFocus()){var ht=W.quill.getLine(pt.index),vt=w(ht,2),At=vt[0],xt=vt[1],X=W.quill.getLeaf(pt.index),et=w(X,2),st=et[0],ct=et[1],rt=0===pt.length?[st,ct]:W.quill.getLeaf(pt.index+pt.length),mt=w(rt,2),gt=mt[0],dt=mt[1],Ot=st instanceof h.default.Text?st.value().slice(0,ct):"",Nt=gt instanceof h.default.Text?gt.value().slice(dt):"",Ct={collapsed:0===pt.length,empty:0===pt.length&&At.length()<=1,format:W.quill.getFormat(pt),offset:xt,prefix:Ot,suffix:Nt};ft.some(function(Tt){if(null!=Tt.collapsed&&Tt.collapsed!==Ct.collapsed||null!=Tt.empty&&Tt.empty!==Ct.empty||null!=Tt.offset&&Tt.offset!==Ct.offset)return!1;if(Array.isArray(Tt.format)){if(Tt.format.every(function(Pt){return null==Ct.format[Pt]}))return!1}else if("object"===u(Tt.format)&&!Object.keys(Tt.format).every(function(Pt){return!0===Tt.format[Pt]?null!=Ct.format[Pt]:!1===Tt.format[Pt]?null==Ct.format[Pt]:(0,i.default)(Tt.format[Pt],Ct.format[Pt])}))return!1;return!(null!=Tt.prefix&&!Tt.prefix.test(Ct.prefix)||null!=Tt.suffix&&!Tt.suffix.test(Ct.suffix))&&!0!==Tt.handler.call(W,pt,Ct)})&&ot.preventDefault()}}}})}}]),B}(M.default);function it(D,B){var G;return _(G={key:D,shiftKey:B,altKey:null},D===Y.keys.LEFT?"prefix":"suffix",/^$/),_(G,"handler",function(lt){var ft=lt.index;D===Y.keys.RIGHT&&(ft+=lt.length+1);var pt=this.quill.getLeaf(ft);return!(w(pt,1)[0]instanceof h.default.Embed&&(D===Y.keys.LEFT?B?this.quill.setSelection(lt.index-1,lt.length+1,f.default.sources.USER):this.quill.setSelection(lt.index-1,f.default.sources.USER):B?this.quill.setSelection(lt.index,lt.length+1,f.default.sources.USER):this.quill.setSelection(lt.index+lt.length+1,f.default.sources.USER),1))}),G}function Q(D,B){if(!(0===D.index||this.quill.getLength()<=1)){var G=this.quill.getLine(D.index),ot=w(G,1)[0],lt={};if(0===B.offset){var ft=this.quill.getLine(D.index-1),ht=w(ft,1)[0];if(null!=ht&&ht.length()>1){var vt=ot.formats(),At=this.quill.getFormat(D.index-1,1);lt=t.default.attributes.diff(vt,At)||{}}}var xt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(B.prefix)?2:1;this.quill.deleteText(D.index-xt,xt,f.default.sources.USER),Object.keys(lt).length>0&&this.quill.formatLine(D.index-xt,xt,lt,f.default.sources.USER),this.quill.focus()}}function R(D,B){var G=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(B.suffix)?2:1;if(!(D.index>=this.quill.getLength()-G)){var W={},ot=0,lt=this.quill.getLine(D.index),pt=w(lt,1)[0];if(B.offset>=pt.length()-1){var ht=this.quill.getLine(D.index+1),At=w(ht,1)[0];if(At){var xt=pt.formats(),X=this.quill.getFormat(D.index,1);W=t.default.attributes.diff(xt,X)||{},ot=At.length()}}this.quill.deleteText(D.index,G,f.default.sources.USER),Object.keys(W).length>0&&this.quill.formatLine(D.index+ot-1,G,W,f.default.sources.USER)}}function b(D){var B=this.quill.getLines(D),G={};if(B.length>1){var W=B[0].formats(),ot=B[B.length-1].formats();G=t.default.attributes.diff(ot,W)||{}}this.quill.deleteText(D,f.default.sources.USER),Object.keys(G).length>0&&this.quill.formatLine(D.index,1,G,f.default.sources.USER),this.quill.setSelection(D.index,f.default.sources.SILENT),this.quill.focus()}function O(D,B){var G=this;D.length>0&&this.quill.scroll.deleteAt(D.index,D.length);var W=Object.keys(B.format).reduce(function(ot,lt){return h.default.query(lt,h.default.Scope.BLOCK)&&!Array.isArray(B.format[lt])&&(ot[lt]=B.format[lt]),ot},{});this.quill.insertText(D.index,"\n",W,f.default.sources.USER),this.quill.setSelection(D.index+1,f.default.sources.SILENT),this.quill.focus(),Object.keys(B.format).forEach(function(ot){null==W[ot]&&(Array.isArray(B.format[ot])||"link"!==ot&&G.quill.format(ot,B.format[ot],f.default.sources.USER))})}function q(D){return{key:Y.keys.TAB,shiftKey:!D,format:{"code-block":!0},handler:function(G){var W=h.default.query("code-block"),ot=G.index,lt=G.length,ft=this.quill.scroll.descendant(W,ot),pt=w(ft,2),ht=pt[0],vt=pt[1];if(null!=ht){var At=this.quill.getIndex(ht),xt=ht.newlineIndex(vt,!0)+1,X=ht.newlineIndex(At+vt+lt),et=ht.domNode.textContent.slice(xt,X).split("\n");vt=0,et.forEach(function(st,ct){D?(ht.insertAt(xt+vt,W.TAB),vt+=W.TAB.length,0===ct?ot+=W.TAB.length:lt+=W.TAB.length):st.startsWith(W.TAB)&&(ht.deleteAt(xt+vt,W.TAB.length),vt-=W.TAB.length,0===ct?ot-=W.TAB.length:lt-=W.TAB.length),vt+=st.length+1}),this.quill.update(f.default.sources.USER),this.quill.setSelection(ot,lt,f.default.sources.SILENT)}}}}function U(D){return{key:D[0].toUpperCase(),shortKey:!0,handler:function(G,W){this.quill.format(D,!W.format[D],f.default.sources.USER)}}}function j(D){if("string"==typeof D||"number"==typeof D)return j({key:D});if("object"===(void 0===D?"undefined":u(D))&&(D=(0,y.default)(D,!1)),"string"==typeof D.key)if(null!=Y.keys[D.key.toUpperCase()])D.key=Y.keys[D.key.toUpperCase()];else{if(1!==D.key.length)return null;D.key=D.key.toUpperCase().charCodeAt(0)}return D.shortKey&&(D[z]=D.shortKey,delete D.shortKey),D}Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:U("bold"),italic:U("italic"),underline:U("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(B,G){if(G.collapsed&&0!==G.offset)return!0;this.quill.format("indent","+1",f.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(B,G){if(G.collapsed&&0!==G.offset)return!0;this.quill.format("indent","-1",f.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(B,G){null!=G.format.indent?this.quill.format("indent","-1",f.default.sources.USER):null!=G.format.list&&this.quill.format("list",!1,f.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(B){this.quill.deleteText(B.index-1,1,f.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(B){this.quill.history.cutoff();var G=(new p.default).retain(B.index).delete(B.length).insert("\t");this.quill.updateContents(G,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index+1,f.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(B,G){this.quill.format("list",!1,f.default.sources.USER),G.format.indent&&this.quill.format("indent",!1,f.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(B){var G=this.quill.getLine(B.index),W=w(G,2),ot=W[0],lt=W[1],ft=(0,a.default)({},ot.formats(),{list:"checked"}),pt=(new p.default).retain(B.index).insert("\n",ft).retain(ot.length()-lt-1).retain(1,{list:"unchecked"});this.quill.updateContents(pt,f.default.sources.USER),this.quill.setSelection(B.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(B,G){var W=this.quill.getLine(B.index),ot=w(W,2),lt=ot[0],ft=ot[1],pt=(new p.default).retain(B.index).insert("\n",G.format).retain(lt.length()-ft-1).retain(1,{header:null});this.quill.updateContents(pt,f.default.sources.USER),this.quill.setSelection(B.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(B,G){var W=G.prefix.length,ot=this.quill.getLine(B.index),lt=w(ot,2),ft=lt[0],pt=lt[1];if(pt>W)return!0;var ht=void 0;switch(G.prefix.trim()){case"[]":case"[ ]":ht="unchecked";break;case"[x]":ht="checked";break;case"-":case"*":ht="bullet";break;default:ht="ordered"}this.quill.insertText(B.index," ",f.default.sources.USER),this.quill.history.cutoff();var vt=(new p.default).retain(B.index-pt).delete(W+1).retain(ft.length()-2-pt).retain(1,{list:ht});this.quill.updateContents(vt,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index-W,f.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(B){var G=this.quill.getLine(B.index),W=w(G,2),ot=W[0],lt=W[1],ft=(new p.default).retain(B.index+ot.length()-lt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ft,f.default.sources.USER)}},"embed left":it(Y.keys.LEFT,!1),"embed left shift":it(Y.keys.LEFT,!0),"embed right":it(Y.keys.RIGHT,!1),"embed right shift":it(Y.keys.RIGHT,!0)}},c.default=Y,c.SHORTKEY=z},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(l,h){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return function t(l,h){var r=[],f=!0,Z=!1,C=void 0;try{for(var M,E=l[Symbol.iterator]();!(f=(M=E.next()).done)&&(r.push(M.value),!h||r.length!==h);f=!0);}catch(x){Z=!0,C=x}finally{try{!f&&E.return&&E.return()}finally{if(Z)throw C}}return r}(l,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function t(l,h,r){null===l&&(l=Function.prototype);var f=Object.getOwnPropertyDescriptor(l,h);if(void 0===f){var Z=Object.getPrototypeOf(l);return null===Z?void 0:t(Z,h,r)}if("value"in f)return f.value;var C=f.get;return void 0===C?void 0:C.call(r)},I=function(){function t(l,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,r){return h&&t(l.prototype,h),r&&t(l,r),l}}(),y=n(s(0)),i=n(s(7));function n(t){return t&&t.__esModule?t:{default:t}}var e=function(t){function l(h,r){!function a(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var f=function m(t,l){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?t:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,h));return f.selection=r,f.textNode=document.createTextNode(l.CONTENTS),f.domNode.appendChild(f.textNode),f._length=0,f}return function p(t,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);t.prototype=Object.create(l&&l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(t,l):t.__proto__=l)}(l,t),I(l,null,[{key:"value",value:function(){}}]),I(l,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(r,f){if(0!==this._length)return w(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"format",this).call(this,r,f);for(var Z=this,C=0;null!=Z&&Z.statics.scope!==y.default.Scope.BLOCK_BLOT;)C+=Z.offset(Z.parent),Z=Z.parent;null!=Z&&(this._length=l.CONTENTS.length,Z.optimize(),Z.formatAt(C,l.CONTENTS.length,r,f),this._length=0)}},{key:"index",value:function(r,f){return r===this.textNode?0:w(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"index",this).call(this,r,f)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){w(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var r=this.textNode,f=this.selection.getNativeRange(),Z=void 0,C=void 0,E=void 0;if(null!=f&&f.start.node===r&&f.end.node===r){var M=[r,f.start.offset,f.end.offset];Z=M[0],C=M[1],E=M[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==l.CONTENTS){var x=this.textNode.data.split(l.CONTENTS).join("");this.next instanceof i.default?(Z=this.next.domNode,this.next.insertAt(0,x),this.textNode.data=l.CONTENTS):(this.textNode.data=x,this.parent.insertBefore(y.default.create(this.textNode),this),this.textNode=document.createTextNode(l.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=C){var _=[C,E].map(function(k){return Math.max(0,Math.min(Z.data.length,k-1))}),A=u(_,2);return{startNode:Z,startOffset:C=A[0],endNode:Z,endOffset:E=A[1]}}}}},{key:"update",value:function(r,f){var Z=this;if(r.some(function(E){return"characterData"===E.type&&E.target===Z.textNode})){var C=this.restore();C&&(f.range=C)}}},{key:"value",value:function(){return""}}]),l}(y.default.Embed);e.blotName="cursor",e.className="ql-cursor",e.tagName="span",e.CONTENTS="\ufeff",c.default=e},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var w=y(s(0)),I=s(4),g=y(I);function y(m){return m&&m.__esModule?m:{default:m}}function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}var a=function(m){function p(){return v(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),p}(w.default.Container);a.allowedChildren=[g.default,I.BlockEmbed,a],c.default=a},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ColorStyle=c.ColorClass=c.ColorAttributor=void 0;var u=function(){function e(t,l){for(var h=0;h<l.length;h++){var r=l[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,l,h){return l&&e(t.prototype,l),h&&e(t,h),t}}(),w=function e(t,l,h){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,l);if(void 0===r){var f=Object.getPrototypeOf(t);return null===f?void 0:e(f,l,h)}if("value"in r)return r.value;var Z=r.get;return void 0===Z?void 0:Z.call(h)},g=function y(e){return e&&e.__esModule?e:{default:e}}(s(0));function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return v(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"value",value:function(h){var r=w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,h);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(f){return("00"+parseInt(f).toString(16)).slice(-2)}).join(""):r}}]),t}(g.default.Attributor.Style),m=new g.default.Attributor.Class("color","ql-color",{scope:g.default.Scope.INLINE}),p=new a("color","color",{scope:g.default.Scope.INLINE});c.ColorAttributor=a,c.ColorClass=m,c.ColorStyle=p},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.sanitize=c.default=void 0;var u=function(){function p(e,t){for(var l=0;l<t.length;l++){var h=t[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}return function(e,t,l){return t&&p(e.prototype,t),l&&p(e,l),e}}(),w=function p(e,t,l){null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,t);if(void 0===h){var r=Object.getPrototypeOf(e);return null===r?void 0:p(r,t,l)}if("value"in h)return h.value;var f=h.get;return void 0===f?void 0:f.call(l)};function v(p,e){if(!(p instanceof e))throw new TypeError("Cannot call a class as a function")}function i(p,e){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?p:e}var a=function(p){function e(){return v(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function n(p,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);p.prototype=Object.create(e&&e.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(p,e):p.__proto__=e)}(e,p),u(e,[{key:"format",value:function(l,h){if(l!==this.statics.blotName||!h)return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,l,h);h=this.constructor.sanitize(h),this.domNode.setAttribute("href",h)}}],[{key:"create",value:function(l){var h=w(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,l);return l=this.sanitize(l),h.setAttribute("href",l),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}},{key:"formats",value:function(l){return l.getAttribute("href")}},{key:"sanitize",value:function(l){return m(l,this.PROTOCOL_WHITELIST)?l:this.SANITIZED_URL}}]),e}(function y(p){return p&&p.__esModule?p:{default:p}}(s(6)).default);function m(p,e){var t=document.createElement("a");t.href=p;var l=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(l)>-1}a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"],c.default=a,c.sanitize=m},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(){function e(t,l){for(var h=0;h<l.length;h++){var r=l[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,l,h){return l&&e(t.prototype,l),h&&e(t,h),t}}(),g=i(s(23)),v=i(s(107));function i(e){return e&&e.__esModule?e:{default:e}}var a=0;function m(e,t){e.setAttribute(t,"true"!==e.getAttribute(t))}var p=function(){function e(t){var l=this;(function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){l.togglePicker()}),this.label.addEventListener("keydown",function(h){switch(h.keyCode){case g.default.keys.ENTER:l.togglePicker();break;case g.default.keys.ESCAPE:l.escape(),h.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return w(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),m(this.label,"aria-expanded"),m(this.options,"aria-hidden")}},{key:"buildItem",value:function(l){var h=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),l.hasAttribute("value")&&r.setAttribute("data-value",l.getAttribute("value")),l.textContent&&r.setAttribute("data-label",l.textContent),r.addEventListener("click",function(){h.selectItem(r,!0)}),r.addEventListener("keydown",function(f){switch(f.keyCode){case g.default.keys.ENTER:h.selectItem(r,!0),f.preventDefault();break;case g.default.keys.ESCAPE:h.escape(),f.preventDefault()}}),r}},{key:"buildLabel",value:function(){var l=document.createElement("span");return l.classList.add("ql-picker-label"),l.innerHTML=v.default,l.tabIndex="0",l.setAttribute("role","button"),l.setAttribute("aria-expanded","false"),this.container.appendChild(l),l}},{key:"buildOptions",value:function(){var l=this,h=document.createElement("span");h.classList.add("ql-picker-options"),h.setAttribute("aria-hidden","true"),h.tabIndex="-1",h.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",h.id),this.options=h,[].slice.call(this.select.options).forEach(function(r){var f=l.buildItem(r);h.appendChild(f),!0===r.selected&&l.selectItem(f)}),this.container.appendChild(h)}},{key:"buildPicker",value:function(){var l=this;[].slice.call(this.select.attributes).forEach(function(h){l.container.setAttribute(h.name,h.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var l=this;this.close(),setTimeout(function(){return l.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(l){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(l!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=l&&(l.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(l.parentNode.children,l),l.hasAttribute("data-value")?this.label.setAttribute("data-value",l.getAttribute("data-value")):this.label.removeAttribute("data-value"),l.hasAttribute("data-label")?this.label.setAttribute("data-label",l.getAttribute("data-label")):this.label.removeAttribute("data-label"),h))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":u(Event))){var f=document.createEvent("Event");f.initEvent("change",!0,!0),this.select.dispatchEvent(f)}this.close()}}},{key:"update",value:function(){var l=void 0;if(this.select.selectedIndex>-1){var h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];l=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);var r=null!=l&&l!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();c.default=p},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var w=L(s(0)),g=L(s(5)),y=s(4),v=L(y),n=L(s(16)),m=L(s(25)),e=L(s(24)),l=L(s(35)),r=L(s(6)),Z=L(s(22)),E=L(s(7)),x=L(s(55)),A=L(s(42)),V=L(s(23));function L(z){return z&&z.__esModule?z:{default:z}}g.default.register({"blots/block":v.default,"blots/block/embed":y.BlockEmbed,"blots/break":n.default,"blots/container":m.default,"blots/cursor":e.default,"blots/embed":l.default,"blots/inline":r.default,"blots/scroll":Z.default,"blots/text":E.default,"modules/clipboard":x.default,"modules/history":A.default,"modules/keyboard":V.default}),w.default.register(v.default,n.default,e.default,r.default,Z.default,E.default),c.default=g.default},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=s(1),w=function(){function I(g){this.domNode=g,this.domNode[u.DATA_KEY]={blot:this}}return Object.defineProperty(I.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),I.create=function(g){if(null==this.tagName)throw new u.ParchmentError("Blot definition missing tagName");var y;return Array.isArray(this.tagName)?("string"==typeof g&&(g=g.toUpperCase(),parseInt(g).toString()===g&&(g=parseInt(g))),y="number"==typeof g?document.createElement(this.tagName[g-1]):this.tagName.indexOf(g)>-1?document.createElement(g):document.createElement(this.tagName[0])):y=document.createElement(this.tagName),this.className&&y.classList.add(this.className),y},I.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},I.prototype.clone=function(){var g=this.domNode.cloneNode(!1);return u.create(g)},I.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[u.DATA_KEY]},I.prototype.deleteAt=function(g,y){this.isolate(g,y).remove()},I.prototype.formatAt=function(g,y,v,i){var n=this.isolate(g,y);if(null!=u.query(v,u.Scope.BLOT)&&i)n.wrap(v,i);else if(null!=u.query(v,u.Scope.ATTRIBUTE)){var a=u.create(this.statics.scope);n.wrap(a),a.format(v,i)}},I.prototype.insertAt=function(g,y,v){var i=null==v?u.create("text",y):u.create(y,v),n=this.split(g);this.parent.insertBefore(i,n)},I.prototype.insertInto=function(g,y){void 0===y&&(y=null),null!=this.parent&&this.parent.children.remove(this);var v=null;g.children.insertBefore(this,y),null!=y&&(v=y.domNode),(this.domNode.parentNode!=g.domNode||this.domNode.nextSibling!=v)&&g.domNode.insertBefore(this.domNode,v),this.parent=g,this.attach()},I.prototype.isolate=function(g,y){var v=this.split(g);return v.split(y),v},I.prototype.length=function(){return 1},I.prototype.offset=function(g){return void 0===g&&(g=this.parent),null==this.parent||this==g?0:this.parent.children.offset(this)+this.parent.offset(g)},I.prototype.optimize=function(g){null!=this.domNode[u.DATA_KEY]&&delete this.domNode[u.DATA_KEY].mutations},I.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},I.prototype.replace=function(g){null!=g.parent&&(g.parent.insertBefore(this,g.next),g.remove())},I.prototype.replaceWith=function(g,y){var v="string"==typeof g?u.create(g,y):g;return v.replace(this),v},I.prototype.split=function(g,y){return 0===g?this:this.next},I.prototype.update=function(g,y){},I.prototype.wrap=function(g,y){var v="string"==typeof g?u.create(g,y):g;return null!=this.parent&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},I.blotName="abstract",I}();c.default=w},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=s(12),w=s(32),I=s(33),g=s(1),y=function(){function v(i){this.attributes={},this.domNode=i,this.build()}return v.prototype.attribute=function(i,n){n?i.add(this.domNode,n)&&(null!=i.value(this.domNode)?this.attributes[i.attrName]=i:delete this.attributes[i.attrName]):(i.remove(this.domNode),delete this.attributes[i.attrName])},v.prototype.build=function(){var i=this;this.attributes={};var n=u.default.keys(this.domNode),a=w.default.keys(this.domNode),m=I.default.keys(this.domNode);n.concat(a).concat(m).forEach(function(p){var e=g.query(p,g.Scope.ATTRIBUTE);e instanceof u.default&&(i.attributes[e.attrName]=e)})},v.prototype.copy=function(i){var n=this;Object.keys(this.attributes).forEach(function(a){var m=n.attributes[a].value(n.domNode);i.format(a,m)})},v.prototype.move=function(i){var n=this;this.copy(i),Object.keys(this.attributes).forEach(function(a){n.attributes[a].remove(n.domNode)}),this.attributes={}},v.prototype.values=function(){var i=this;return Object.keys(this.attributes).reduce(function(n,a){return n[a]=i.attributes[a].value(i.domNode),n},{})},v}();c.default=y},function($,c,s){"use strict";var y,u=this&&this.__extends||(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var n in i)i.hasOwnProperty(n)&&(v[n]=i[n])},function(v,i){function n(){this.constructor=v}y(v,i),v.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});function I(y,v){return(y.getAttribute("class")||"").split(/\s+/).filter(function(n){return 0===n.indexOf(v+"-")})}Object.defineProperty(c,"__esModule",{value:!0});var g=function(y){function v(){return null!==y&&y.apply(this,arguments)||this}return u(v,y),v.keys=function(i){return(i.getAttribute("class")||"").split(/\s+/).map(function(n){return n.split("-").slice(0,-1).join("-")})},v.prototype.add=function(i,n){return!!this.canAdd(i,n)&&(this.remove(i),i.classList.add(this.keyName+"-"+n),!0)},v.prototype.remove=function(i){I(i,this.keyName).forEach(function(a){i.classList.remove(a)}),0===i.classList.length&&i.removeAttribute("class")},v.prototype.value=function(i){var a=(I(i,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(i,a)?a:""},v}(s(12).default);c.default=g},function($,c,s){"use strict";var y,u=this&&this.__extends||(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var n in i)i.hasOwnProperty(n)&&(v[n]=i[n])},function(v,i){function n(){this.constructor=v}y(v,i),v.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});function I(y){var v=y.split("-"),i=v.slice(1).map(function(n){return n[0].toUpperCase()+n.slice(1)}).join("");return v[0]+i}Object.defineProperty(c,"__esModule",{value:!0});var g=function(y){function v(){return null!==y&&y.apply(this,arguments)||this}return u(v,y),v.keys=function(i){return(i.getAttribute("style")||"").split(";").map(function(n){return n.split(":")[0].trim()})},v.prototype.add=function(i,n){return!!this.canAdd(i,n)&&(i.style[I(this.keyName)]=n,!0)},v.prototype.remove=function(i){i.style[I(this.keyName)]="",i.getAttribute("style")||i.removeAttribute("style")},v.prototype.value=function(i){var n=i.style[I(this.keyName)];return this.canAdd(i,n)?n:""},v}(s(12).default);c.default=g},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function g(y,v){for(var i=0;i<v.length;i++){var n=v[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(y,n.key,n)}}return function(y,v,i){return v&&g(y.prototype,v),i&&g(y,i),y}}();var I=function(){function g(y,v){(function w(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,g),this.quill=y,this.options=v,this.modules={}}return u(g,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(i){null==v.modules[i]&&v.addModule(i)})}},{key:"addModule",value:function(v){var i=this.quill.constructor.import("modules/"+v);return this.modules[v]=new i(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),g}();I.DEFAULTS={modules:{}},I.themes={default:I},c.default=I},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function t(l,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,r){return h&&t(l.prototype,h),r&&t(l,r),l}}(),w=function t(l,h,r){null===l&&(l=Function.prototype);var f=Object.getOwnPropertyDescriptor(l,h);if(void 0===f){var Z=Object.getPrototypeOf(l);return null===Z?void 0:t(Z,h,r)}if("value"in f)return f.value;var C=f.get;return void 0===C?void 0:C.call(r)},g=i(s(0)),v=i(s(7));function i(t){return t&&t.__esModule?t:{default:t}}var p="\ufeff",e=function(t){function l(h){!function n(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function a(t,l){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?t:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,h));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(f){r.contentNode.appendChild(f)}),r.leftGuard=document.createTextNode(p),r.rightGuard=document.createTextNode(p),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function m(t,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);t.prototype=Object.create(l&&l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(t,l):t.__proto__=l)}(l,t),u(l,[{key:"index",value:function(r,f){return r===this.leftGuard?0:r===this.rightGuard?1:w(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"index",this).call(this,r,f)}},{key:"restore",value:function(r){var f=void 0,Z=void 0,C=r.data.split(p).join("");if(r===this.leftGuard)if(this.prev instanceof v.default){var E=this.prev.length();this.prev.insertAt(E,C),f={startNode:this.prev.domNode,startOffset:E+C.length}}else Z=document.createTextNode(C),this.parent.insertBefore(g.default.create(Z),this),f={startNode:Z,startOffset:C.length};else r===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,C),f={startNode:this.next.domNode,startOffset:C.length}):(Z=document.createTextNode(C),this.parent.insertBefore(g.default.create(Z),this.next),f={startNode:Z,startOffset:C.length}));return r.data=p,f}},{key:"update",value:function(r,f){var Z=this;r.forEach(function(C){if("characterData"===C.type&&(C.target===Z.leftGuard||C.target===Z.rightGuard)){var E=Z.restore(C.target);E&&(f.range=E)}})}}]),l}(g.default.Embed);c.default=e},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AlignStyle=c.AlignClass=c.AlignAttribute=void 0;var w=function I(n){return n&&n.__esModule?n:{default:n}}(s(0));var g={scope:w.default.Scope.BLOCK,whitelist:["right","center","justify"]},y=new w.default.Attributor.Attribute("align","align",g),v=new w.default.Attributor.Class("align","ql-align",g),i=new w.default.Attributor.Style("align","text-align",g);c.AlignAttribute=y,c.AlignClass=v,c.AlignStyle=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BackgroundStyle=c.BackgroundClass=void 0;var w=function g(i){return i&&i.__esModule?i:{default:i}}(s(0)),I=s(26);var y=new w.default.Attributor.Class("background","ql-bg",{scope:w.default.Scope.INLINE}),v=new I.ColorAttributor("background","background-color",{scope:w.default.Scope.INLINE});c.BackgroundClass=y,c.BackgroundStyle=v},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DirectionStyle=c.DirectionClass=c.DirectionAttribute=void 0;var w=function I(n){return n&&n.__esModule?n:{default:n}}(s(0));var g={scope:w.default.Scope.BLOCK,whitelist:["rtl"]},y=new w.default.Attributor.Attribute("direction","dir",g),v=new w.default.Attributor.Class("direction","ql-direction",g),i=new w.default.Attributor.Style("direction","direction",g);c.DirectionAttribute=y,c.DirectionClass=v,c.DirectionStyle=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FontClass=c.FontStyle=void 0;var u=function(){function t(l,h){for(var r=0;r<h.length;r++){var f=h[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,r){return h&&t(l.prototype,h),r&&t(l,r),l}}(),w=function t(l,h,r){null===l&&(l=Function.prototype);var f=Object.getOwnPropertyDescriptor(l,h);if(void 0===f){var Z=Object.getPrototypeOf(l);return null===Z?void 0:t(Z,h,r)}if("value"in f)return f.value;var C=f.get;return void 0===C?void 0:C.call(r)},g=function y(t){return t&&t.__esModule?t:{default:t}}(s(0));function v(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}function i(t,l){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?t:l}var a={scope:g.default.Scope.INLINE,whitelist:["serif","monospace"]},m=new g.default.Attributor.Class("font","ql-font",a),p=function(t){function l(){return v(this,l),i(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function n(t,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);t.prototype=Object.create(l&&l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(t,l):t.__proto__=l)}(l,t),u(l,[{key:"value",value:function(r){return w(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"value",this).call(this,r).replace(/["']/g,"")}}]),l}(g.default.Attributor.Style),e=new p("font","font-family",a);c.FontStyle=e,c.FontClass=m},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SizeStyle=c.SizeClass=void 0;var w=function I(v){return v&&v.__esModule?v:{default:v}}(s(0));var g=new w.default.Attributor.Class("size","ql-size",{scope:w.default.Scope.INLINE,whitelist:["small","large","huge"]}),y=new w.default.Attributor.Style("size","font-size",{scope:w.default.Scope.INLINE,whitelist:["10px","18px","32px"]});c.SizeClass=g,c.SizeStyle=y},function($,c,s){"use strict";$.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getLastChangeIndex=c.default=void 0;var u=function(){function h(r,f){for(var Z=0;Z<f.length;Z++){var C=f[Z];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(r,C.key,C)}}return function(r,f,Z){return f&&h(r.prototype,f),Z&&h(r,Z),r}}(),I=n(s(0)),y=n(s(5));function n(h){return h&&h.__esModule?h:{default:h}}var e=function(h){function r(f,Z){!function a(h,r){if(!(h instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var C=function m(h,r){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?h:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,f,Z));return C.lastRecorded=0,C.ignoreChange=!1,C.clear(),C.quill.on(y.default.events.EDITOR_CHANGE,function(E,M,x,_){E!==y.default.events.TEXT_CHANGE||C.ignoreChange||(C.options.userOnly&&_!==y.default.sources.USER?C.transform(M):C.record(M,x))}),C.quill.keyboard.addBinding({key:"Z",shortKey:!0},C.undo.bind(C)),C.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},C.redo.bind(C)),/Win/i.test(navigator.platform)&&C.quill.keyboard.addBinding({key:"Y",shortKey:!0},C.redo.bind(C)),C}return function p(h,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);h.prototype=Object.create(r&&r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(h,r):h.__proto__=r)}(r,h),u(r,[{key:"change",value:function(Z,C){if(0!==this.stack[Z].length){var E=this.stack[Z].pop();this.stack[C].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[Z],y.default.sources.USER),this.ignoreChange=!1;var M=l(E[Z]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(Z,C){if(0!==Z.ops.length){this.stack.redo=[];var E=this.quill.getContents().diff(C),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var x=this.stack.undo.pop();E=E.compose(x.undo),Z=x.redo.compose(Z)}else this.lastRecorded=M;this.stack.undo.push({redo:Z,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(Z){this.stack.undo.forEach(function(C){C.undo=Z.transform(C.undo,!0),C.redo=Z.transform(C.redo,!0)}),this.stack.redo.forEach(function(C){C.undo=Z.transform(C.undo,!0),C.redo=Z.transform(C.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),r}(n(s(9)).default);function l(h){var r=h.reduce(function(Z,C){return Z+(C.delete||0)},0),f=h.length()-r;return function t(h){var r=h.ops[h.ops.length-1];return null!=r&&(null!=r.insert?"string"==typeof r.insert&&r.insert.endsWith("\n"):null!=r.attributes&&Object.keys(r.attributes).some(function(f){return null!=I.default.query(f,I.default.Scope.BLOCK)}))}(h)&&(f-=1),f}e.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},c.default=e,c.getLastChangeIndex=l},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BaseTooltip=void 0;var u=function(){function O(q,U){for(var j=0;j<U.length;j++){var D=U[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(q,D.key,D)}}return function(q,U,j){return U&&O(q.prototype,U),j&&O(q,j),q}}(),w=function O(q,U,j){null===q&&(q=Function.prototype);var D=Object.getOwnPropertyDescriptor(q,U);if(void 0===D){var B=Object.getPrototypeOf(q);return null===B?void 0:O(B,U,j)}if("value"in D)return D.value;var G=D.get;return void 0===G?void 0:G.call(j)},g=M(s(3)),v=M(s(2)),n=M(s(8)),m=M(s(23)),e=M(s(34)),l=M(s(59)),r=M(s(60)),Z=M(s(28)),E=M(s(61));function M(O){return O&&O.__esModule?O:{default:O}}function x(O,q){if(!(O instanceof q))throw new TypeError("Cannot call a class as a function")}function _(O,q){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!q||"object"!=typeof q&&"function"!=typeof q?O:q}function A(O,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function, not "+typeof q);O.prototype=Object.create(q&&q.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(O,q):O.__proto__=q)}var k=[!1,"center","right","justify"],V=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],z=["1","2","3",!1],Y=["small",!1,"large","huge"],it=function(O){function q(U,j){x(this,q);var D=_(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,U,j));return U.emitter.listenDOM("click",document.body,function G(W){if(!document.body.contains(U.root))return document.body.removeEventListener("click",G);null!=D.tooltip&&!D.tooltip.root.contains(W.target)&&document.activeElement!==D.tooltip.textbox&&!D.quill.hasFocus()&&D.tooltip.hide(),null!=D.pickers&&D.pickers.forEach(function(ot){ot.container.contains(W.target)||ot.close()})}),D}return A(q,O),u(q,[{key:"addModule",value:function(j){var D=w(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,j);return"toolbar"===j&&this.extendToolbar(D),D}},{key:"buildButtons",value:function(j,D){j.forEach(function(B){(B.getAttribute("class")||"").split(/\s+/).forEach(function(W){if(W.startsWith("ql-")&&(W=W.slice("ql-".length),null!=D[W]))if("direction"===W)B.innerHTML=D[W][""]+D[W].rtl;else if("string"==typeof D[W])B.innerHTML=D[W];else{var ot=B.value||"";null!=ot&&D[W][ot]&&(B.innerHTML=D[W][ot])}})})}},{key:"buildPickers",value:function(j,D){var B=this;this.pickers=j.map(function(W){if(W.classList.contains("ql-align"))return null==W.querySelector("option")&&b(W,k),new r.default(W,D.align);if(W.classList.contains("ql-background")||W.classList.contains("ql-color")){var ot=W.classList.contains("ql-background")?"background":"color";return null==W.querySelector("option")&&b(W,V,"background"===ot?"#ffffff":"#000000"),new l.default(W,D[ot])}return null==W.querySelector("option")&&(W.classList.contains("ql-font")?b(W,L):W.classList.contains("ql-header")?b(W,z):W.classList.contains("ql-size")&&b(W,Y)),new Z.default(W)}),this.quill.on(n.default.events.EDITOR_CHANGE,function(){B.pickers.forEach(function(ot){ot.update()})})}}]),q}(e.default);it.DEFAULTS=(0,g.default)(!0,{},e.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,U=this.container.querySelector("input.ql-image[type=file]");null==U&&((U=document.createElement("input")).setAttribute("type","file"),U.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),U.classList.add("ql-image"),U.addEventListener("change",function(){if(null!=U.files&&null!=U.files[0]){var j=new FileReader;j.onload=function(D){var B=q.quill.getSelection(!0);q.quill.updateContents((new v.default).retain(B.index).delete(B.length).insert({image:D.target.result}),n.default.sources.USER),q.quill.setSelection(B.index+1,n.default.sources.SILENT),U.value=""},j.readAsDataURL(U.files[0])}}),this.container.appendChild(U)),U.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Q=function(O){function q(U,j){x(this,q);var D=_(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,U,j));return D.textbox=D.root.querySelector('input[type="text"]'),D.listen(),D}return A(q,O),u(q,[{key:"listen",value:function(){var j=this;this.textbox.addEventListener("keydown",function(D){m.default.match(D,"enter")?(j.save(),D.preventDefault()):m.default.match(D,"escape")&&(j.cancel(),D.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=D?this.textbox.value=D:j!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+j)||""),this.root.setAttribute("data-mode",j)}},{key:"restoreFocus",value:function(){var j=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=j}},{key:"save",value:function(){var j=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var D=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",j,n.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",j,n.default.sources.USER)),this.quill.root.scrollTop=D;break;case"video":j=function R(O){var q=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":O}(j);case"formula":if(!j)break;var B=this.quill.getSelection(!0);if(null!=B){var G=B.index+B.length;this.quill.insertEmbed(G,this.root.getAttribute("data-mode"),j,n.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(G+1," ",n.default.sources.USER),this.quill.setSelection(G+2,n.default.sources.USER)}}this.textbox.value="",this.hide()}}]),q}(E.default);function b(O,q){var U=arguments.length>2&&void 0!==arguments[2]&&arguments[2];q.forEach(function(j){var D=document.createElement("option");j===U?D.setAttribute("selected","selected"):D.setAttribute("value",j),O.appendChild(D)})}c.BaseTooltip=Q,c.default=it},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function w(){this.head=this.tail=null,this.length=0}return w.prototype.append=function(){for(var I=[],g=0;g<arguments.length;g++)I[g]=arguments[g];this.insertBefore(I[0],null),I.length>1&&this.append.apply(this,I.slice(1))},w.prototype.contains=function(I){for(var g,y=this.iterator();g=y();)if(g===I)return!0;return!1},w.prototype.insertBefore=function(I,g){!I||(I.next=g,null!=g?(I.prev=g.prev,null!=g.prev&&(g.prev.next=I),g.prev=I,g===this.head&&(this.head=I)):null!=this.tail?(this.tail.next=I,I.prev=this.tail,this.tail=I):(I.prev=null,this.head=this.tail=I),this.length+=1)},w.prototype.offset=function(I){for(var g=0,y=this.head;null!=y;){if(y===I)return g;g+=y.length(),y=y.next}return-1},w.prototype.remove=function(I){!this.contains(I)||(null!=I.prev&&(I.prev.next=I.next),null!=I.next&&(I.next.prev=I.prev),I===this.head&&(this.head=I.next),I===this.tail&&(this.tail=I.prev),this.length-=1)},w.prototype.iterator=function(I){return void 0===I&&(I=this.head),function(){var g=I;return null!=I&&(I=I.next),g}},w.prototype.find=function(I,g){void 0===g&&(g=!1);for(var y,v=this.iterator();y=v();){var i=y.length();if(I<i||g&&I===i&&(null==y.next||0!==y.next.length()))return[y,I];I-=i}return[null,0]},w.prototype.forEach=function(I){for(var g,y=this.iterator();g=y();)I(g)},w.prototype.forEachAt=function(I,g,y){if(!(g<=0))for(var a,v=this.find(I),m=I-v[1],p=this.iterator(v[0]);(a=p())&&m<I+g;){var e=a.length();I>m?y(a,I-m,Math.min(g,m+e-I)):y(a,0,Math.min(e,I+g-m)),m+=e}},w.prototype.map=function(I){return this.reduce(function(g,y){return g.push(I(y)),g},[])},w.prototype.reduce=function(I,g){for(var y,v=this.iterator();y=v();)g=I(g,y);return g},w}();c.default=u},function($,c,s){"use strict";var i,u=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var m in a)a.hasOwnProperty(m)&&(n[m]=a[m])},function(n,a){function m(){this.constructor=n}i(n,a),n.prototype=null===a?Object.create(a):(m.prototype=a.prototype,new m)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(17),I=s(1),g={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},v=function(i){function n(a){var m=i.call(this,a)||this;return m.scroll=m,m.observer=new MutationObserver(function(p){m.update(p)}),m.observer.observe(m.domNode,g),m.attach(),m}return u(n,i),n.prototype.detach=function(){i.prototype.detach.call(this),this.observer.disconnect()},n.prototype.deleteAt=function(a,m){this.update(),0===a&&m===this.length()?this.children.forEach(function(p){p.remove()}):i.prototype.deleteAt.call(this,a,m)},n.prototype.formatAt=function(a,m,p,e){this.update(),i.prototype.formatAt.call(this,a,m,p,e)},n.prototype.insertAt=function(a,m,p){this.update(),i.prototype.insertAt.call(this,a,m,p)},n.prototype.optimize=function(a,m){var p=this;void 0===a&&(a=[]),void 0===m&&(m={}),i.prototype.optimize.call(this,m);for(var e=[].slice.call(this.observer.takeRecords());e.length>0;)a.push(e.pop());for(var t=function(f,Z){void 0===Z&&(Z=!0),null!=f&&f!==p&&null!=f.domNode.parentNode&&(null==f.domNode[I.DATA_KEY].mutations&&(f.domNode[I.DATA_KEY].mutations=[]),Z&&t(f.parent))},l=function(f){null==f.domNode[I.DATA_KEY]||null==f.domNode[I.DATA_KEY].mutations||(f instanceof w.default&&f.children.forEach(l),f.optimize(m))},h=a,r=0;h.length>0;r+=1){if(r>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(function(f){var Z=I.find(f.target,!0);null!=Z&&(Z.domNode===f.target&&("childList"===f.type?(t(I.find(f.previousSibling,!1)),[].forEach.call(f.addedNodes,function(C){var E=I.find(C,!1);t(E,!1),E instanceof w.default&&E.children.forEach(function(M){t(M,!1)})})):"attributes"===f.type&&t(Z.prev)),t(Z))}),this.children.forEach(l),e=(h=[].slice.call(this.observer.takeRecords())).slice();e.length>0;)a.push(e.pop())}},n.prototype.update=function(a,m){var p=this;void 0===m&&(m={}),(a=a||this.observer.takeRecords()).map(function(e){var t=I.find(e.target,!0);return null==t?null:null==t.domNode[I.DATA_KEY].mutations?(t.domNode[I.DATA_KEY].mutations=[e],t):(t.domNode[I.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null==e||e===p||null==e.domNode[I.DATA_KEY]||e.update(e.domNode[I.DATA_KEY].mutations||[],m)}),null!=this.domNode[I.DATA_KEY].mutations&&i.prototype.update.call(this,this.domNode[I.DATA_KEY].mutations,m),this.optimize(a,m)},n.blotName="scroll",n.defaultChild="block",n.scope=I.Scope.BLOCK_BLOT,n.tagName="DIV",n}(w.default);c.default=v},function($,c,s){"use strict";var v,u=this&&this.__extends||(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])},function(i,n){function a(){this.constructor=i}v(i,n),i.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(18),I=s(1);var y=function(v){function i(){return null!==v&&v.apply(this,arguments)||this}return u(i,v),i.formats=function(n){if(n.tagName!==i.tagName)return v.formats.call(this,n)},i.prototype.format=function(n,a){var m=this;n!==this.statics.blotName||a?v.prototype.format.call(this,n,a):(this.children.forEach(function(p){p instanceof w.default||(p=p.wrap(i.blotName,!0)),m.attributes.copy(p)}),this.unwrap())},i.prototype.formatAt=function(n,a,m,p){null!=this.formats()[m]||I.query(m,I.Scope.ATTRIBUTE)?this.isolate(n,a).format(m,p):v.prototype.formatAt.call(this,n,a,m,p)},i.prototype.optimize=function(n){v.prototype.optimize.call(this,n);var a=this.formats();if(0===Object.keys(a).length)return this.unwrap();var m=this.next;m instanceof i&&m.prev===this&&function g(v,i){if(Object.keys(v).length!==Object.keys(i).length)return!1;for(var n in v)if(v[n]!==i[n])return!1;return!0}(a,m.formats())&&(m.moveChildren(this),m.remove())},i.blotName="inline",i.scope=I.Scope.INLINE_BLOT,i.tagName="SPAN",i}(w.default);c.default=y},function($,c,s){"use strict";var y,u=this&&this.__extends||(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var n in i)i.hasOwnProperty(n)&&(v[n]=i[n])},function(v,i){function n(){this.constructor=v}y(v,i),v.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(18),I=s(1),g=function(y){function v(){return null!==y&&y.apply(this,arguments)||this}return u(v,y),v.formats=function(i){var n=I.query(v.blotName).tagName;if(i.tagName!==n)return y.formats.call(this,i)},v.prototype.format=function(i,n){null!=I.query(i,I.Scope.BLOCK)&&(i!==this.statics.blotName||n?y.prototype.format.call(this,i,n):this.replaceWith(v.blotName))},v.prototype.formatAt=function(i,n,a,m){null!=I.query(a,I.Scope.BLOCK)?this.format(a,m):y.prototype.formatAt.call(this,i,n,a,m)},v.prototype.insertAt=function(i,n,a){if(null==a||null!=I.query(n,I.Scope.INLINE))y.prototype.insertAt.call(this,i,n,a);else{var m=this.split(i),p=I.create(n,a);m.parent.insertBefore(p,m)}},v.prototype.update=function(i,n){navigator.userAgent.match(/Trident/)?this.build():y.prototype.update.call(this,i,n)},v.blotName="block",v.scope=I.Scope.BLOCK_BLOT,v.tagName="P",v}(w.default);c.default=g},function($,c,s){"use strict";var g,u=this&&this.__extends||(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var i in v)v.hasOwnProperty(i)&&(y[i]=v[i])},function(y,v){function i(){this.constructor=y}g(y,v),y.prototype=null===v?Object.create(v):(i.prototype=v.prototype,new i)});Object.defineProperty(c,"__esModule",{value:!0});var I=function(g){function y(){return null!==g&&g.apply(this,arguments)||this}return u(y,g),y.formats=function(v){},y.prototype.format=function(v,i){g.prototype.formatAt.call(this,0,this.length(),v,i)},y.prototype.formatAt=function(v,i,n,a){0===v&&i===this.length()?this.format(n,a):g.prototype.formatAt.call(this,v,i,n,a)},y.prototype.formats=function(){return this.statics.formats(this.domNode)},y}(s(19).default);c.default=I},function($,c,s){"use strict";var y,u=this&&this.__extends||(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var n in i)i.hasOwnProperty(n)&&(v[n]=i[n])},function(v,i){function n(){this.constructor=v}y(v,i),v.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(c,"__esModule",{value:!0});var w=s(19),I=s(1),g=function(y){function v(i){var n=y.call(this,i)||this;return n.text=n.statics.value(n.domNode),n}return u(v,y),v.create=function(i){return document.createTextNode(i)},v.value=function(i){var n=i.data;return n.normalize&&(n=n.normalize()),n},v.prototype.deleteAt=function(i,n){this.domNode.data=this.text=this.text.slice(0,i)+this.text.slice(i+n)},v.prototype.index=function(i,n){return this.domNode===i?n:-1},v.prototype.insertAt=function(i,n,a){null==a?(this.text=this.text.slice(0,i)+n+this.text.slice(i),this.domNode.data=this.text):y.prototype.insertAt.call(this,i,n,a)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(i){y.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(i,n){return void 0===n&&(n=!1),[this.domNode,i]},v.prototype.split=function(i,n){if(void 0===n&&(n=!1),!n){if(0===i)return this;if(i===this.length())return this.next}var a=I.create(this.domNode.splitText(i));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},v.prototype.update=function(i,n){var a=this;i.some(function(m){return"characterData"===m.type&&m.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=I.Scope.INLINE_BLOT,v}(w.default);c.default=g},function($,c,s){"use strict";var u=document.createElement("div");if(u.classList.toggle("test-class",!1),u.classList.contains("test-class")){var w=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(I,g){return arguments.length>1&&!this.contains(I)==!g?g:w.call(this,I)}}String.prototype.startsWith||(String.prototype.startsWith=function(I,g){return this.substr(g=g||0,I.length)===I}),String.prototype.endsWith||(String.prototype.endsWith=function(I,g){var y=this.toString();("number"!=typeof g||!isFinite(g)||Math.floor(g)!==g||g>y.length)&&(g=y.length);var v=y.indexOf(I,g-=I.length);return-1!==v&&v===g}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(g){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof g)throw new TypeError("predicate must be a function");for(var n,y=Object(this),v=y.length>>>0,i=arguments[1],a=0;a<v;a++)if(g.call(i,n=y[a],a,y))return n}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function($,c){var s=-1;function I(r,f,Z){if(r==f)return r?[[0,r]]:[];(Z<0||r.length<Z)&&(Z=null);var C=i(r,f),E=r.substring(0,C);C=n(r=r.substring(C),f=f.substring(C));var M=r.substring(r.length-C),x=function g(r,f){var Z;if(!r)return[[1,f]];if(!f)return[[s,r]];var C=r.length>f.length?r:f,E=r.length>f.length?f:r,M=C.indexOf(E);if(-1!=M)return Z=[[1,C.substring(0,M)],[0,E],[1,C.substring(M+E.length)]],r.length>f.length&&(Z[0][0]=Z[2][0]=s),Z;if(1==E.length)return[[s,r],[1,f]];var x=function a(r,f){var Z=r.length>f.length?r:f,C=r.length>f.length?f:r;if(Z.length<4||2*C.length<Z.length)return null;function E(Y,it,Q){for(var q,U,j,D,R=Y.substring(Q,Q+Math.floor(Y.length/4)),b=-1,O="";-1!=(b=it.indexOf(R,b+1));){var B=i(Y.substring(Q),it.substring(b)),G=n(Y.substring(0,Q),it.substring(0,b));O.length<G+B&&(O=it.substring(b-G,b)+it.substring(b,b+B),q=Y.substring(0,Q-G),U=Y.substring(Q+B),j=it.substring(0,b-G),D=it.substring(b+B))}return 2*O.length>=Y.length?[q,U,j,D,O]:null}var _,A,k,V,L,M=E(Z,C,Math.ceil(Z.length/4)),x=E(Z,C,Math.ceil(Z.length/2));return M||x?(_=x?M&&M[4].length>x[4].length?M:x:M,r.length>f.length?(A=_[0],k=_[1],V=_[2],L=_[3]):(V=_[0],L=_[1],A=_[2],k=_[3]),[A,k,V,L,_[4]]):null}(r,f);if(x){var A=x[1],V=x[3],L=x[4],z=I(x[0],x[2]),Y=I(A,V);return z.concat([[0,L]],Y)}return function y(r,f){for(var Z=r.length,C=f.length,E=Math.ceil((Z+C)/2),M=E,x=2*E,_=new Array(x),A=new Array(x),k=0;k<x;k++)_[k]=-1,A[k]=-1;_[M+1]=0,A[M+1]=0;for(var V=Z-C,L=V%2!=0,z=0,Y=0,it=0,Q=0,R=0;R<E;R++){for(var b=-R+z;b<=R-Y;b+=2){for(var O=M+b,U=(q=b==-R||b!=R&&_[O-1]<_[O+1]?_[O+1]:_[O-1]+1)-b;q<Z&&U<C&&r.charAt(q)==f.charAt(U);)q++,U++;if(_[O]=q,q>Z)Y+=2;else if(U>C)z+=2;else if(L&&(j=M+V-b)>=0&&j<x&&-1!=A[j]&&q>=(D=Z-A[j]))return v(r,f,q,U)}for(var B=-R+it;B<=R-Q;B+=2){for(var D,j=M+B,G=(D=B==-R||B!=R&&A[j-1]<A[j+1]?A[j+1]:A[j-1]+1)-B;D<Z&&G<C&&r.charAt(Z-D-1)==f.charAt(C-G-1);)D++,G++;if(A[j]=D,D>Z)Q+=2;else if(G>C)it+=2;else if(!L){var q;if((O=M+V-B)>=0&&O<x&&-1!=_[O]&&(U=M+(q=_[O])-O,q>=(D=Z-D)))return v(r,f,q,U)}}}return[[s,r],[1,f]]}(r,f)}(r=r.substring(0,r.length-C),f=f.substring(0,f.length-C));return E&&x.unshift([0,E]),M&&x.push([0,M]),m(x),null!=Z&&(x=function t(r,f){var Z=function e(r,f){if(0===f)return[0,r];for(var Z=0,C=0;C<r.length;C++){var E=r[C];if(E[0]===s||0===E[0]){var M=Z+E[1].length;if(f===M)return[C+1,r];if(f<M){r=r.slice();var x=f-Z,_=[E[0],E[1].slice(0,x)],A=[E[0],E[1].slice(x)];return r.splice(C,1,_,A),[C+1,r]}Z=M}}throw new Error("cursor_pos is out of bounds!")}(r,f),C=Z[1],E=Z[0],M=C[E],x=C[E+1];if(null==M)return r;if(0!==M[0])return r;if(null!=x&&M[1]+x[1]===x[1]+M[1])return C.splice(E,2,x,M),h(C,E,2);if(null!=x&&0===x[1].indexOf(M[1])){C.splice(E,2,[x[0],M[1]],[0,M[1]]);var _=x[1].slice(M[1].length);return _.length>0&&C.splice(E+2,0,[x[0],_]),h(C,E,3)}return r}(x,Z)),function l(r){for(var f=!1,Z=function(x){return x.charCodeAt(0)>=56320&&x.charCodeAt(0)<=57343},C=function(x){return x.charCodeAt(x.length-1)>=55296&&x.charCodeAt(x.length-1)<=56319},E=2;E<r.length;E+=1)0===r[E-2][0]&&C(r[E-2][1])&&r[E-1][0]===s&&Z(r[E-1][1])&&1===r[E][0]&&Z(r[E][1])&&(f=!0,r[E-1][1]=r[E-2][1].slice(-1)+r[E-1][1],r[E][1]=r[E-2][1].slice(-1)+r[E][1],r[E-2][1]=r[E-2][1].slice(0,-1));if(!f)return r;var M=[];for(E=0;E<r.length;E+=1)r[E][1].length>0&&M.push(r[E]);return M}(x)}function v(r,f,Z,C){var E=r.substring(0,Z),M=f.substring(0,C),x=r.substring(Z),_=f.substring(C),A=I(E,M),k=I(x,_);return A.concat(k)}function i(r,f){if(!r||!f||r.charAt(0)!=f.charAt(0))return 0;for(var Z=0,C=Math.min(r.length,f.length),E=C,M=0;Z<E;)r.substring(M,E)==f.substring(M,E)?M=Z=E:C=E,E=Math.floor((C-Z)/2+Z);return E}function n(r,f){if(!r||!f||r.charAt(r.length-1)!=f.charAt(f.length-1))return 0;for(var Z=0,C=Math.min(r.length,f.length),E=C,M=0;Z<E;)r.substring(r.length-E,r.length-M)==f.substring(f.length-E,f.length-M)?M=Z=E:C=E,E=Math.floor((C-Z)/2+Z);return E}function m(r){r.push([0,""]);for(var x,f=0,Z=0,C=0,E="",M="";f<r.length;)switch(r[f][0]){case 1:C++,M+=r[f][1],f++;break;case s:Z++,E+=r[f][1],f++;break;case 0:Z+C>1?(0!==Z&&0!==C&&(0!==(x=i(M,E))&&(f-Z-C>0&&0==r[f-Z-C-1][0]?r[f-Z-C-1][1]+=M.substring(0,x):(r.splice(0,0,[0,M.substring(0,x)]),f++),M=M.substring(x),E=E.substring(x)),0!==(x=n(M,E))&&(r[f][1]=M.substring(M.length-x)+r[f][1],M=M.substring(0,M.length-x),E=E.substring(0,E.length-x))),0===Z?r.splice(f-C,Z+C,[1,M]):0===C?r.splice(f-Z,Z+C,[s,E]):r.splice(f-Z-C,Z+C,[s,E],[1,M]),f=f-Z-C+(Z?1:0)+(C?1:0)+1):0!==f&&0==r[f-1][0]?(r[f-1][1]+=r[f][1],r.splice(f,1)):f++,C=0,Z=0,E="",M=""}""===r[r.length-1][1]&&r.pop();var _=!1;for(f=1;f<r.length-1;)0==r[f-1][0]&&0==r[f+1][0]&&(r[f][1].substring(r[f][1].length-r[f-1][1].length)==r[f-1][1]?(r[f][1]=r[f-1][1]+r[f][1].substring(0,r[f][1].length-r[f-1][1].length),r[f+1][1]=r[f-1][1]+r[f+1][1],r.splice(f-1,1),_=!0):r[f][1].substring(0,r[f+1][1].length)==r[f+1][1]&&(r[f-1][1]+=r[f+1][1],r[f][1]=r[f][1].substring(r[f+1][1].length)+r[f+1][1],r.splice(f+1,1),_=!0)),f++;_&&m(r)}var p=I;function h(r,f,Z){for(var C=f+Z-1;C>=0&&C>=f-1;C--)if(C+1<r.length){var E=r[C],M=r[C+1];E[0]===M[1]&&r.splice(C,2,[E[0],E[1]+M[1]])}return r}p.INSERT=1,p.DELETE=s,p.EQUAL=0,$.exports=p},function($,c){function s(u){var w=[];for(var I in u)w.push(I);return w}($.exports="function"==typeof Object.keys?Object.keys:s).shim=s},function($,c){var s="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function u(I){return"[object Arguments]"==Object.prototype.toString.call(I)}function w(I){return I&&"object"==typeof I&&"number"==typeof I.length&&Object.prototype.hasOwnProperty.call(I,"callee")&&!Object.prototype.propertyIsEnumerable.call(I,"callee")||!1}(c=$.exports=s?u:w).supported=u,c.unsupported=w},function($,c){"use strict";var s=Object.prototype.hasOwnProperty,u="~";function w(){}function I(y,v,i){this.fn=y,this.context=v,this.once=i||!1}function g(){this._events=new w,this._eventsCount=0}Object.create&&(w.prototype=Object.create(null),(new w).__proto__||(u=!1)),g.prototype.eventNames=function(){var i,n,v=[];if(0===this._eventsCount)return v;for(n in i=this._events)s.call(i,n)&&v.push(u?n.slice(1):n);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(i)):v},g.prototype.listeners=function(v,i){var a=this._events[u?u+v:v];if(i)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var m=0,p=a.length,e=new Array(p);m<p;m++)e[m]=a[m].fn;return e},g.prototype.emit=function(v,i,n,a,m,p){var e=u?u+v:v;if(!this._events[e])return!1;var h,r,t=this._events[e],l=arguments.length;if(t.fn){switch(t.once&&this.removeListener(v,t.fn,void 0,!0),l){case 1:return t.fn.call(t.context),!0;case 2:return t.fn.call(t.context,i),!0;case 3:return t.fn.call(t.context,i,n),!0;case 4:return t.fn.call(t.context,i,n,a),!0;case 5:return t.fn.call(t.context,i,n,a,m),!0;case 6:return t.fn.call(t.context,i,n,a,m,p),!0}for(r=1,h=new Array(l-1);r<l;r++)h[r-1]=arguments[r];t.fn.apply(t.context,h)}else{var Z,f=t.length;for(r=0;r<f;r++)switch(t[r].once&&this.removeListener(v,t[r].fn,void 0,!0),l){case 1:t[r].fn.call(t[r].context);break;case 2:t[r].fn.call(t[r].context,i);break;case 3:t[r].fn.call(t[r].context,i,n);break;case 4:t[r].fn.call(t[r].context,i,n,a);break;default:if(!h)for(Z=1,h=new Array(l-1);Z<l;Z++)h[Z-1]=arguments[Z];t[r].fn.apply(t[r].context,h)}}return!0},g.prototype.on=function(v,i,n){var a=new I(i,n||this),m=u?u+v:v;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],a]:this._events[m].push(a):(this._events[m]=a,this._eventsCount++),this},g.prototype.once=function(v,i,n){var a=new I(i,n||this,!0),m=u?u+v:v;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],a]:this._events[m].push(a):(this._events[m]=a,this._eventsCount++),this},g.prototype.removeListener=function(v,i,n,a){var m=u?u+v:v;if(!this._events[m])return this;if(!i)return 0==--this._eventsCount?this._events=new w:delete this._events[m],this;var p=this._events[m];if(p.fn)p.fn===i&&(!a||p.once)&&(!n||p.context===n)&&(0==--this._eventsCount?this._events=new w:delete this._events[m]);else{for(var e=0,t=[],l=p.length;e<l;e++)(p[e].fn!==i||a&&!p[e].once||n&&p[e].context!==n)&&t.push(p[e]);t.length?this._events[m]=1===t.length?t[0]:t:0==--this._eventsCount?this._events=new w:delete this._events[m]}return this},g.prototype.removeAllListeners=function(v){var i;return v?this._events[i=u?u+v:v]&&(0==--this._eventsCount?this._events=new w:delete this._events[i]):(this._events=new w,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prototype.setMaxListeners=function(){return this},g.prefixed=u,g.EventEmitter=g,void 0!==$&&($.exports=g)},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.matchText=c.matchSpacing=c.matchNewline=c.matchBlot=c.matchAttributor=c.default=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},w=function(et,st){if(Array.isArray(et))return et;if(Symbol.iterator in Object(et))return function X(et,st){var ct=[],rt=!0,mt=!1,gt=void 0;try{for(var Ot,dt=et[Symbol.iterator]();!(rt=(Ot=dt.next()).done)&&(ct.push(Ot.value),!st||ct.length!==st);rt=!0);}catch(Nt){mt=!0,gt=Nt}finally{try{!rt&&dt.return&&dt.return()}finally{if(mt)throw gt}}return ct}(et,st);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=function(){function X(et,st){for(var ct=0;ct<st.length;ct++){var rt=st[ct];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(et,rt.key,rt)}}return function(et,st,ct){return st&&X(et.prototype,st),ct&&X(et,ct),et}}(),y=A(s(3)),i=A(s(2)),a=A(s(0)),p=A(s(5)),t=A(s(10)),h=A(s(9)),r=s(36),f=s(37),C=A(s(13)),E=s(26),M=s(38),x=s(39),_=s(40);function A(X){return X&&X.__esModule?X:{default:X}}function k(X,et,st){return et in X?Object.defineProperty(X,et,{value:st,enumerable:!0,configurable:!0,writable:!0}):X[et]=st,X}var Y=(0,t.default)("quill:clipboard"),it="__ql-matcher",Q=[[Node.TEXT_NODE,xt],[Node.TEXT_NODE,ht],["br",function lt(X,et){return j(et,"\n")||et.insert("\n"),et}],[Node.ELEMENT_NODE,ht],[Node.ELEMENT_NODE,ot],[Node.ELEMENT_NODE,vt],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,function At(X,et){var st={},ct=X.style||{};return ct.fontStyle&&"italic"===U(X).fontStyle&&(st.italic=!0),ct.fontWeight&&(U(X).fontWeight.startsWith("bold")||parseInt(U(X).fontWeight)>=700)&&(st.bold=!0),Object.keys(st).length>0&&(et=q(et,st)),parseFloat(ct.textIndent||0)>0&&(et=(new i.default).insert("\t").concat(et)),et}],["li",function pt(X,et){var st=a.default.query(X);if(null==st||"list-item"!==st.blotName||!j(et,"\n"))return et;for(var ct=-1,rt=X.parentNode;!rt.classList.contains("ql-clipboard");)"list"===(a.default.query(rt)||{}).blotName&&(ct+=1),rt=rt.parentNode;return ct<=0?et:et.compose((new i.default).retain(et.length()-1).retain(1,{indent:ct}))}],["b",G.bind(G,"bold")],["i",G.bind(G,"italic")],["style",function ft(){return new i.default}]],R=[r.AlignAttribute,M.DirectionAttribute].reduce(function(X,et){return X[et.keyName]=et,X},{}),b=[r.AlignStyle,f.BackgroundStyle,E.ColorStyle,M.DirectionStyle,x.FontStyle,_.SizeStyle].reduce(function(X,et){return X[et.keyName]=et,X},{}),O=function(X){function et(st,ct){!function V(X,et){if(!(X instanceof et))throw new TypeError("Cannot call a class as a function")}(this,et);var rt=function L(X,et){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!et||"object"!=typeof et&&"function"!=typeof et?X:et}(this,(et.__proto__||Object.getPrototypeOf(et)).call(this,st,ct));return rt.quill.root.addEventListener("paste",rt.onPaste.bind(rt)),rt.container=rt.quill.addContainer("ql-clipboard"),rt.container.setAttribute("contenteditable",!0),rt.container.setAttribute("tabindex",-1),rt.matchers=[],Q.concat(rt.options.matchers).forEach(function(mt){var gt=w(mt,2),Ot=gt[1];!ct.matchVisual&&Ot===vt||rt.addMatcher(gt[0],Ot)}),rt}return function z(X,et){if("function"!=typeof et&&null!==et)throw new TypeError("Super expression must either be null or a function, not "+typeof et);X.prototype=Object.create(et&&et.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),et&&(Object.setPrototypeOf?Object.setPrototypeOf(X,et):X.__proto__=et)}(et,X),I(et,[{key:"addMatcher",value:function(ct,rt){this.matchers.push([ct,rt])}},{key:"convert",value:function(ct){if("string"==typeof ct)return this.container.innerHTML=ct.replace(/\>\r?\n +\</g,"><"),this.convert();var rt=this.quill.getFormat(this.quill.selection.savedRange.index);if(rt[C.default.blotName]){var mt=this.container.innerText;return this.container.innerHTML="",(new i.default).insert(mt,k({},C.default.blotName,rt[C.default.blotName]))}var gt=this.prepareMatching(),dt=w(gt,2),Ct=B(this.container,dt[0],dt[1]);return j(Ct,"\n")&&null==Ct.ops[Ct.ops.length-1].attributes&&(Ct=Ct.compose((new i.default).retain(Ct.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,Ct),this.container.innerHTML="",Ct}},{key:"dangerouslyPasteHTML",value:function(ct,rt){var mt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.default.sources.API;if("string"==typeof ct)this.quill.setContents(this.convert(ct),rt),this.quill.setSelection(0,p.default.sources.SILENT);else{var gt=this.convert(rt);this.quill.updateContents((new i.default).retain(ct).concat(gt),mt),this.quill.setSelection(ct+gt.length(),p.default.sources.SILENT)}}},{key:"onPaste",value:function(ct){var rt=this;if(!ct.defaultPrevented&&this.quill.isEnabled()){var mt=this.quill.getSelection(),gt=(new i.default).retain(mt.index),dt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(p.default.sources.SILENT),setTimeout(function(){gt=gt.concat(rt.convert()).delete(mt.length),rt.quill.updateContents(gt,p.default.sources.USER),rt.quill.setSelection(gt.length()-mt.length,p.default.sources.SILENT),rt.quill.scrollingContainer.scrollTop=dt,rt.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ct=this,rt=[],mt=[];return this.matchers.forEach(function(gt){var dt=w(gt,2),Ot=dt[0],Nt=dt[1];switch(Ot){case Node.TEXT_NODE:mt.push(Nt);break;case Node.ELEMENT_NODE:rt.push(Nt);break;default:[].forEach.call(ct.container.querySelectorAll(Ot),function(Ct){Ct[it]=Ct[it]||[],Ct[it].push(Nt)})}}),[rt,mt]}}]),et}(h.default);function q(X,et,st){return"object"===(void 0===et?"undefined":u(et))?Object.keys(et).reduce(function(ct,rt){return q(ct,rt,et[rt])},X):X.reduce(function(ct,rt){return rt.attributes&&rt.attributes[et]?ct.push(rt):ct.insert(rt.insert,(0,y.default)({},k({},et,st),rt.attributes))},new i.default)}function U(X){if(X.nodeType!==Node.ELEMENT_NODE)return{};var et="__ql-computed-style";return X[et]||(X[et]=window.getComputedStyle(X))}function j(X,et){for(var st="",ct=X.ops.length-1;ct>=0&&st.length<et.length;--ct){var rt=X.ops[ct];if("string"!=typeof rt.insert)break;st=rt.insert+st}return st.slice(-1*et.length)===et}function D(X){if(0===X.childNodes.length)return!1;var et=U(X);return["block","list-item"].indexOf(et.display)>-1}function B(X,et,st){return X.nodeType===X.TEXT_NODE?st.reduce(function(ct,rt){return rt(X,ct)},new i.default):X.nodeType===X.ELEMENT_NODE?[].reduce.call(X.childNodes||[],function(ct,rt){var mt=B(rt,et,st);return rt.nodeType===X.ELEMENT_NODE&&(mt=et.reduce(function(gt,dt){return dt(rt,gt)},mt),mt=(rt[it]||[]).reduce(function(gt,dt){return dt(rt,gt)},mt)),ct.concat(mt)},new i.default):new i.default}function G(X,et,st){return q(st,X,!0)}function W(X,et){var st=a.default.Attributor.Attribute.keys(X),ct=a.default.Attributor.Class.keys(X),rt=a.default.Attributor.Style.keys(X),mt={};return st.concat(ct).concat(rt).forEach(function(gt){var dt=a.default.query(gt,a.default.Scope.ATTRIBUTE);null!=dt&&(mt[dt.attrName]=dt.value(X),mt[dt.attrName])||(null!=(dt=R[gt])&&(dt.attrName===gt||dt.keyName===gt)&&(mt[dt.attrName]=dt.value(X)||void 0),null!=(dt=b[gt])&&(dt.attrName===gt||dt.keyName===gt)&&(mt[(dt=b[gt]).attrName]=dt.value(X)||void 0))}),Object.keys(mt).length>0&&(et=q(et,mt)),et}function ot(X,et){var st=a.default.query(X);if(null==st)return et;if(st.prototype instanceof a.default.Embed){var ct={},rt=st.value(X);null!=rt&&(ct[st.blotName]=rt,et=(new i.default).insert(ct,st.formats(X)))}else"function"==typeof st.formats&&(et=q(et,st.blotName,st.formats(X)));return et}function ht(X,et){return j(et,"\n")||(D(X)||et.length()>0&&X.nextSibling&&D(X.nextSibling))&&et.insert("\n"),et}function vt(X,et){if(D(X)&&null!=X.nextElementSibling&&!j(et,"\n\n")){var st=X.offsetHeight+parseFloat(U(X).marginTop)+parseFloat(U(X).marginBottom);X.nextElementSibling.offsetTop>X.offsetTop+1.5*st&&et.insert("\n")}return et}function xt(X,et){var st=X.data;if("O:P"===X.parentNode.tagName)return et.insert(st.trim());if(0===st.trim().length&&X.parentNode.classList.contains("ql-clipboard"))return et;if(!U(X.parentNode).whiteSpace.startsWith("pre")){var ct=function(mt,gt){return(gt=gt.replace(/[^\u00a0]/g,"")).length<1&&mt?" ":gt};st=(st=st.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,ct.bind(ct,!0)),(null==X.previousSibling&&D(X.parentNode)||null!=X.previousSibling&&D(X.previousSibling))&&(st=st.replace(/^\s+/,ct.bind(ct,!1))),(null==X.nextSibling&&D(X.parentNode)||null!=X.nextSibling&&D(X.nextSibling))&&(st=st.replace(/\s+$/,ct.bind(ct,!1)))}return et.insert(st)}O.DEFAULTS={matchers:[],matchVisual:!0},c.default=O,c.matchAttributor=W,c.matchBlot=ot,c.matchNewline=ht,c.matchSpacing=vt,c.matchText=xt},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function m(p,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,e,t){return e&&m(p.prototype,e),t&&m(p,t),p}}(),w=function m(p,e,t){null===p&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,e);if(void 0===l){var h=Object.getPrototypeOf(p);return null===h?void 0:m(h,e,t)}if("value"in l)return l.value;var r=l.get;return void 0===r?void 0:r.call(t)};function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}var a=function(m){function p(){return v(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),u(p,[{key:"optimize",value:function(t){w(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return w(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),p}(function y(m){return m&&m.__esModule?m:{default:m}}(s(6)).default);a.blotName="bold",a.tagName=["STRONG","B"],c.default=a},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.addControls=c.default=void 0;var u=function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return function _(A,k){var V=[],L=!0,z=!1,Y=void 0;try{for(var Q,it=A[Symbol.iterator]();!(L=(Q=it.next()).done)&&(V.push(Q.value),!k||V.length!==k);L=!0);}catch(R){z=!0,Y=R}finally{try{!L&&it.return&&it.return()}finally{if(z)throw Y}}return V}(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function _(A,k){for(var V=0;V<k.length;V++){var L=k[V];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,k,V){return k&&_(A.prototype,k),V&&_(A,V),A}}(),g=t(s(2)),v=t(s(0)),n=t(s(5)),m=t(s(10)),e=t(s(9));function t(_){return _&&_.__esModule?_:{default:_}}function r(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?_:A}var Z=(0,m.default)("quill:toolbar"),C=function(_){function A(k,V){!function h(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}(this,A);var Y,L=r(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k,V));if(Array.isArray(L.options.container)){var z=document.createElement("div");M(z,L.options.container),k.container.parentNode.insertBefore(z,k.container),L.container=z}else L.container="string"==typeof L.options.container?document.querySelector(L.options.container):L.options.container;return L.container instanceof HTMLElement?(L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(it){L.addHandler(it,L.options.handlers[it])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(it){L.attach(it)}),L.quill.on(n.default.events.EDITOR_CHANGE,function(it,Q){it===n.default.events.SELECTION_CHANGE&&L.update(Q)}),L.quill.on(n.default.events.SCROLL_OPTIMIZE,function(){var it=L.quill.selection.getRange(),Q=u(it,1);L.update(Q[0])}),L):(Y=Z.error("Container required for toolbar",L.options),r(L,Y))}return function f(_,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}(A,_),w(A,[{key:"addHandler",value:function(V,L){this.handlers[V]=L}},{key:"attach",value:function(V){var L=this,z=[].find.call(V.classList,function(it){return 0===it.indexOf("ql-")});if(z){if(z=z.slice("ql-".length),"BUTTON"===V.tagName&&V.setAttribute("type","button"),null==this.handlers[z]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[z])return void Z.warn("ignoring attaching to disabled format",z,V);if(null==v.default.query(z))return void Z.warn("ignoring attaching to nonexistent format",z,V)}V.addEventListener("SELECT"===V.tagName?"change":"click",function(it){var Q=void 0;if("SELECT"===V.tagName){if(V.selectedIndex<0)return;var R=V.options[V.selectedIndex];Q=!R.hasAttribute("selected")&&(R.value||!1)}else Q=!V.classList.contains("ql-active")&&(V.value||!V.hasAttribute("value")),it.preventDefault();L.quill.focus();var b=L.quill.selection.getRange(),q=u(b,1)[0];if(null!=L.handlers[z])L.handlers[z].call(L,Q);else if(v.default.query(z).prototype instanceof v.default.Embed){if(!(Q=prompt("Enter "+z)))return;L.quill.updateContents((new g.default).retain(q.index).delete(q.length).insert(function l(_,A,k){return A in _?Object.defineProperty(_,A,{value:k,enumerable:!0,configurable:!0,writable:!0}):_[A]=k,_}({},z,Q)),n.default.sources.USER)}else L.quill.format(z,Q,n.default.sources.USER);L.update(q)}),this.controls.push([z,V])}}},{key:"update",value:function(V){var L=null==V?{}:this.quill.getFormat(V);this.controls.forEach(function(z){var Y=u(z,2),it=Y[0],Q=Y[1];if("SELECT"===Q.tagName){var R=void 0;if(null==V)R=null;else if(null==L[it])R=Q.querySelector("option[selected]");else if(!Array.isArray(L[it])){var b=L[it];"string"==typeof b&&(b=b.replace(/\"/g,'\\"')),R=Q.querySelector('option[value="'+b+'"]')}null==R?(Q.value="",Q.selectedIndex=-1):R.selected=!0}else if(null==V)Q.classList.remove("ql-active");else if(Q.hasAttribute("value")){var O=L[it]===Q.getAttribute("value")||null!=L[it]&&L[it].toString()===Q.getAttribute("value")||null==L[it]&&!Q.getAttribute("value");Q.classList.toggle("ql-active",O)}else Q.classList.toggle("ql-active",null!=L[it])})}}]),A}(e.default);function E(_,A,k){var V=document.createElement("button");V.setAttribute("type","button"),V.classList.add("ql-"+A),null!=k&&(V.value=k),_.appendChild(V)}function M(_,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(k){var V=document.createElement("span");V.classList.add("ql-formats"),k.forEach(function(L){if("string"==typeof L)E(V,L);else{var z=Object.keys(L)[0],Y=L[z];Array.isArray(Y)?function x(_,A,k){var V=document.createElement("select");V.classList.add("ql-"+A),k.forEach(function(L){var z=document.createElement("option");!1!==L?z.setAttribute("value",L):z.setAttribute("selected","selected"),V.appendChild(z)}),_.appendChild(V)}(V,z,Y):E(V,z,Y)}}),_.appendChild(V)})}C.DEFAULTS={},C.DEFAULTS={container:null,handlers:{clean:function(){var A=this,k=this.quill.getSelection();if(null!=k)if(0==k.length){var V=this.quill.getFormat();Object.keys(V).forEach(function(L){null!=v.default.query(L,v.default.Scope.INLINE)&&A.quill.format(L,!1)})}else this.quill.removeFormat(k,n.default.sources.USER)},direction:function(A){var k=this.quill.getFormat().align;"rtl"===A&&null==k?this.quill.format("align","right",n.default.sources.USER):!A&&"right"===k&&this.quill.format("align",!1,n.default.sources.USER),this.quill.format("direction",A,n.default.sources.USER)},indent:function(A){var k=this.quill.getSelection(),V=this.quill.getFormat(k),L=parseInt(V.indent||0);if("+1"===A||"-1"===A){var z="+1"===A?1:-1;"rtl"===V.direction&&(z*=-1),this.quill.format("indent",L+z,n.default.sources.USER)}},link:function(A){!0===A&&(A=prompt("Enter link URL:")),this.quill.format("link",A,n.default.sources.USER)},list:function(A){var k=this.quill.getSelection(),V=this.quill.getFormat(k);this.quill.format("list","check"===A?"checked"!==V.list&&"unchecked"!==V.list&&"unchecked":A,n.default.sources.USER)}}},c.default=C,c.addControls=M},function($,c){$.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function m(p,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,e,t){return e&&m(p.prototype,e),t&&m(p,t),p}}(),w=function m(p,e,t){null===p&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,e);if(void 0===l){var h=Object.getPrototypeOf(p);return null===h?void 0:m(h,e,t)}if("value"in l)return l.value;var r=l.get;return void 0===r?void 0:r.call(t)};var a=function(m){function p(e,t){!function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p);var l=function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));return l.label.innerHTML=t,l.container.classList.add("ql-color-picker"),[].slice.call(l.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(h){h.classList.add("ql-primary")}),l}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),u(p,[{key:"buildItem",value:function(t){var l=w(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"buildItem",this).call(this,t);return l.style.backgroundColor=t.getAttribute("value")||"",l}},{key:"selectItem",value:function(t,l){w(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,t,l);var h=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";h&&("line"===h.tagName?h.style.stroke=r:h.style.fill=r)}}]),p}(function y(m){return m&&m.__esModule?m:{default:m}}(s(28)).default);c.default=a},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function m(p,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,e,t){return e&&m(p.prototype,e),t&&m(p,t),p}}(),w=function m(p,e,t){null===p&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,e);if(void 0===l){var h=Object.getPrototypeOf(p);return null===h?void 0:m(h,e,t)}if("value"in l)return l.value;var r=l.get;return void 0===r?void 0:r.call(t)};var a=function(m){function p(e,t){!function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p);var l=function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));return l.container.classList.add("ql-icon-picker"),[].forEach.call(l.container.querySelectorAll(".ql-picker-item"),function(h){h.innerHTML=t[h.getAttribute("data-value")||""]}),l.defaultItem=l.container.querySelector(".ql-selected"),l.selectItem(l.defaultItem),l}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),u(p,[{key:"selectItem",value:function(t,l){w(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,t,l),this.label.innerHTML=(t=t||this.defaultItem).innerHTML}}]),p}(function y(m){return m&&m.__esModule?m:{default:m}}(s(28)).default);c.default=a},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function g(y,v){for(var i=0;i<v.length;i++){var n=v[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(y,n.key,n)}}return function(y,v,i){return v&&g(y.prototype,v),i&&g(y,i),y}}();var I=function(){function g(y,v){var i=this;(function w(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,g),this.quill=y,this.boundsContainer=v||document.body,this.root=y.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"}),this.hide()}return u(g,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var i=v.left+v.width/2-this.root.offsetWidth/2,n=v.bottom+this.quill.root.scrollTop;this.root.style.left=i+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),m=this.root.getBoundingClientRect(),p=0;return m.right>a.right&&(this.root.style.left=i+(p=a.right-m.right)+"px"),m.left<a.left&&(this.root.style.left=i+(p=a.left-m.left)+"px"),m.bottom>a.bottom&&(this.root.style.top=n-(v.bottom-v.top+(m.bottom-m.top))+"px",this.root.classList.add("ql-flip")),p}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),g}();c.default=I},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(_,A){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return function x(_,A){var k=[],V=!0,L=!1,z=void 0;try{for(var it,Y=_[Symbol.iterator]();!(V=(it=Y.next()).done)&&(k.push(it.value),!A||k.length!==A);V=!0);}catch(Q){L=!0,z=Q}finally{try{!V&&Y.return&&Y.return()}finally{if(L)throw z}}return k}(_,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function x(_,A,k){null===_&&(_=Function.prototype);var V=Object.getOwnPropertyDescriptor(_,A);if(void 0===V){var L=Object.getPrototypeOf(_);return null===L?void 0:x(L,A,k)}if("value"in V)return V.value;var z=V.get;return void 0===z?void 0:z.call(k)},I=function(){function x(_,A){for(var k=0;k<A.length;k++){var V=A[k];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(_,V.key,V)}}return function(_,A,k){return A&&x(_.prototype,A),k&&x(_,k),_}}(),y=h(s(3)),i=h(s(8)),n=s(43),a=h(n),p=h(s(27)),e=s(15),l=h(s(41));function h(x){return x&&x.__esModule?x:{default:x}}function r(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function f(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?x:_}function Z(x,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var C=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(x){function _(A,k){r(this,_),null!=k.modules.toolbar&&null==k.modules.toolbar.container&&(k.modules.toolbar.container=C);var V=f(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return V.quill.container.classList.add("ql-snow"),V}return Z(_,x),I(_,[{key:"extendToolbar",value:function(k){k.container.classList.add("ql-snow"),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),l.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),l.default),this.tooltip=new M(this.quill,this.options.bounds),k.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(V,L){k.handlers.link.call(k,!L.format.link)})}}]),_}(a.default);E.DEFAULTS=(0,y.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){if(_){var A=this.quill.getSelection();if(null==A||0==A.length)return;var k=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(k)&&0!==k.indexOf("mailto:")&&(k="mailto:"+k),this.quill.theme.tooltip.edit("link",k)}else this.quill.format("link",!1)}}}}});var M=function(x){function _(A,k){r(this,_);var V=f(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return V.preview=V.root.querySelector("a.ql-preview"),V}return Z(_,x),I(_,[{key:"listen",value:function(){var k=this;w(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(V){k.root.classList.contains("ql-editing")?k.save():k.edit("link",k.preview.textContent),V.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(V){if(null!=k.linkRange){var L=k.linkRange;k.restoreFocus(),k.quill.formatText(L,"link",!1,i.default.sources.USER),delete k.linkRange}V.preventDefault(),k.hide()}),this.quill.on(i.default.events.SELECTION_CHANGE,function(V,L,z){if(null!=V){if(0===V.length&&z===i.default.sources.USER){var Y=k.quill.scroll.descendant(p.default,V.index),it=u(Y,2),Q=it[0];if(null!=Q){k.linkRange=new e.Range(V.index-it[1],Q.length());var b=p.default.formats(Q.domNode);return k.preview.textContent=b,k.preview.setAttribute("href",b),k.show(),void k.position(k.quill.getBounds(k.linkRange))}}else delete k.linkRange;k.hide()}})}},{key:"show",value:function(){w(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),_}(n.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),c.default=E},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var w=rt(s(29)),I=s(36),g=s(38),y=s(64),i=rt(s(65)),a=rt(s(66)),m=s(67),p=rt(m),e=s(37),t=s(26),l=s(39),h=s(40),f=rt(s(56)),C=rt(s(68)),M=rt(s(27)),_=rt(s(69)),k=rt(s(70)),L=rt(s(71)),Y=rt(s(72)),Q=rt(s(73)),R=s(13),b=rt(R),q=rt(s(74)),j=rt(s(75)),B=rt(s(57)),W=rt(s(41)),lt=rt(s(28)),pt=rt(s(59)),vt=rt(s(60)),xt=rt(s(61)),et=rt(s(108)),ct=rt(s(62));function rt(mt){return mt&&mt.__esModule?mt:{default:mt}}w.default.register({"attributors/attribute/direction":g.DirectionAttribute,"attributors/class/align":I.AlignClass,"attributors/class/background":e.BackgroundClass,"attributors/class/color":t.ColorClass,"attributors/class/direction":g.DirectionClass,"attributors/class/font":l.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":I.AlignStyle,"attributors/style/background":e.BackgroundStyle,"attributors/style/color":t.ColorStyle,"attributors/style/direction":g.DirectionStyle,"attributors/style/font":l.FontStyle,"attributors/style/size":h.SizeStyle},!0),w.default.register({"formats/align":I.AlignClass,"formats/direction":g.DirectionClass,"formats/indent":y.IndentClass,"formats/background":e.BackgroundStyle,"formats/color":t.ColorStyle,"formats/font":l.FontClass,"formats/size":h.SizeClass,"formats/blockquote":i.default,"formats/code-block":b.default,"formats/header":a.default,"formats/list":p.default,"formats/bold":f.default,"formats/code":R.Code,"formats/italic":C.default,"formats/link":M.default,"formats/script":_.default,"formats/strike":k.default,"formats/underline":L.default,"formats/image":Y.default,"formats/video":Q.default,"formats/list/item":m.ListItem,"modules/formula":q.default,"modules/syntax":j.default,"modules/toolbar":B.default,"themes/bubble":et.default,"themes/snow":ct.default,"ui/icons":W.default,"ui/picker":lt.default,"ui/icon-picker":vt.default,"ui/color-picker":pt.default,"ui/tooltip":xt.default},!0),c.default=w.default},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IndentClass=void 0;var u=function(){function p(e,t){for(var l=0;l<t.length;l++){var h=t[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}return function(e,t,l){return t&&p(e.prototype,t),l&&p(e,l),e}}(),w=function p(e,t,l){null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,t);if(void 0===h){var r=Object.getPrototypeOf(e);return null===r?void 0:p(r,t,l)}if("value"in h)return h.value;var f=h.get;return void 0===f?void 0:f.call(l)},g=function y(p){return p&&p.__esModule?p:{default:p}}(s(0));function v(p,e){if(!(p instanceof e))throw new TypeError("Cannot call a class as a function")}function i(p,e){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?p:e}var a=function(p){function e(){return v(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function n(p,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);p.prototype=Object.create(e&&e.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(p,e):p.__proto__=e)}(e,p),u(e,[{key:"add",value:function(l,h){if("+1"===h||"-1"===h){var r=this.value(l)||0;h="+1"===h?r+1:r-1}return 0===h?(this.remove(l),!0):w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,l,h)}},{key:"canAdd",value:function(l,h){return w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,l,h)||w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,l,parseInt(h))}},{key:"value",value:function(l){return parseInt(w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,l))||void 0}}]),e}(g.default.Attributor.Class),m=new a("indent","ql-indent",{scope:g.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});c.IndentClass=m},function($,c,s){"use strict";function g(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function y(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}Object.defineProperty(c,"__esModule",{value:!0});var i=function(n){function a(){return g(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function v(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a}(function I(n){return n&&n.__esModule?n:{default:n}}(s(4)).default);i.blotName="blockquote",i.tagName="blockquote",c.default=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function a(m,p){for(var e=0;e<p.length;e++){var t=p[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(m,t.key,t)}}return function(m,p,e){return p&&a(m.prototype,p),e&&a(m,e),m}}();function y(a,m){if(!(a instanceof m))throw new TypeError("Cannot call a class as a function")}function v(a,m){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?a:m}var n=function(a){function m(){return y(this,m),v(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return function i(a,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);a.prototype=Object.create(m&&m.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(a,m):a.__proto__=m)}(m,a),u(m,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),m}(function g(a){return a&&a.__esModule?a:{default:a}}(s(4)).default);n.blotName="header",n.tagName=["H1","H2","H3","H4","H5","H6"],c.default=n},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.ListItem=void 0;var u=function(){function r(f,Z){for(var C=0;C<Z.length;C++){var E=Z[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}return function(f,Z,C){return Z&&r(f.prototype,Z),C&&r(f,C),f}}(),w=function r(f,Z,C){null===f&&(f=Function.prototype);var E=Object.getOwnPropertyDescriptor(f,Z);if(void 0===E){var M=Object.getPrototypeOf(f);return null===M?void 0:r(M,Z,C)}if("value"in E)return E.value;var x=E.get;return void 0===x?void 0:x.call(C)},g=a(s(0)),v=a(s(4)),n=a(s(25));function a(r){return r&&r.__esModule?r:{default:r}}function p(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function e(r,f){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?r:f}function t(r,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);r.prototype=Object.create(f&&f.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(r,f):r.__proto__=f)}var l=function(r){function f(){return p(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return t(f,r),u(f,[{key:"format",value:function(C,E){C!==h.blotName||E?w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,C,E):this.replaceWith(g.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(C,E){return this.parent.isolate(this.offset(this.parent),this.length()),C===this.parent.statics.blotName?(this.parent.replaceWith(C,E),this):(this.parent.unwrap(),w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replaceWith",this).call(this,C,E))}}],[{key:"formats",value:function(C){return C.tagName===this.tagName?void 0:w(f.__proto__||Object.getPrototypeOf(f),"formats",this).call(this,C)}}]),f}(v.default);l.blotName="list-item",l.tagName="LI";var h=function(r){function f(Z){p(this,f);var C=e(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,Z)),E=function(x){if(x.target.parentNode===Z){var _=C.statics.formats(Z),A=g.default.find(x.target);"checked"===_?A.format("list","unchecked"):"unchecked"===_&&A.format("list","checked")}};return Z.addEventListener("touchstart",E),Z.addEventListener("mousedown",E),C}return t(f,r),u(f,null,[{key:"create",value:function(C){var E="ordered"===C?"OL":"UL",M=w(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,E);return("checked"===C||"unchecked"===C)&&M.setAttribute("data-checked","checked"===C),M}},{key:"formats",value:function(C){return"OL"===C.tagName?"ordered":"UL"===C.tagName?C.hasAttribute("data-checked")?"true"===C.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),u(f,[{key:"format",value:function(C,E){this.children.length>0&&this.children.tail.format(C,E)}},{key:"formats",value:function(){return function m(r,f,Z){return f in r?Object.defineProperty(r,f,{value:Z,enumerable:!0,configurable:!0,writable:!0}):r[f]=Z,r}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(C,E){if(C instanceof l)w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"insertBefore",this).call(this,C,E);else{var M=null==E?this.length():E.offset(this),x=this.split(M);x.parent.insertBefore(C,x)}}},{key:"optimize",value:function(C){w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,C);var E=this.next;null!=E&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(C){if(C.statics.blotName!==this.statics.blotName){var E=g.default.create(this.statics.defaultChild);C.moveChildren(E),this.appendChild(E)}w(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replace",this).call(this,C)}}]),f}(n.default);h.blotName="list",h.scope=g.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[l],c.ListItem=l,c.default=h},function($,c,s){"use strict";function g(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function y(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}Object.defineProperty(c,"__esModule",{value:!0});var i=function(n){function a(){return g(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function v(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a}(function I(n){return n&&n.__esModule?n:{default:n}}(s(56)).default);i.blotName="italic",i.tagName=["EM","I"],c.default=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function m(p,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(p,l.key,l)}}return function(p,e,t){return e&&m(p.prototype,e),t&&m(p,t),p}}(),w=function m(p,e,t){null===p&&(p=Function.prototype);var l=Object.getOwnPropertyDescriptor(p,e);if(void 0===l){var h=Object.getPrototypeOf(p);return null===h?void 0:m(h,e,t)}if("value"in l)return l.value;var r=l.get;return void 0===r?void 0:r.call(t)};function v(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function i(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?m:p}var a=function(m){function p(){return v(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return function n(m,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}(p,m),u(p,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):w(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),p}(function y(m){return m&&m.__esModule?m:{default:m}}(s(6)).default);a.blotName="script",a.tagName=["SUB","SUP"],c.default=a},function($,c,s){"use strict";function g(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function y(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}Object.defineProperty(c,"__esModule",{value:!0});var i=function(n){function a(){return g(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function v(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a}(function I(n){return n&&n.__esModule?n:{default:n}}(s(6)).default);i.blotName="strike",i.tagName="S",c.default=i},function($,c,s){"use strict";function g(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function y(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?n:a}Object.defineProperty(c,"__esModule",{value:!0});var i=function(n){function a(){return g(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function v(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}(a,n),a}(function I(n){return n&&n.__esModule?n:{default:n}}(s(6)).default);i.blotName="underline",i.tagName="U",c.default=i},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function e(t,l){for(var h=0;h<l.length;h++){var r=l[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,l,h){return l&&e(t.prototype,l),h&&e(t,h),t}}(),w=function e(t,l,h){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,l);if(void 0===r){var f=Object.getPrototypeOf(t);return null===f?void 0:e(f,l,h)}if("value"in r)return r.value;var Z=r.get;return void 0===Z?void 0:Z.call(h)},g=function v(e){return e&&e.__esModule?e:{default:e}}(s(0)),y=s(27);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=["alt","height","width"],p=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"format",value:function(h,r){m.indexOf(h)>-1?r?this.domNode.setAttribute(h,r):this.domNode.removeAttribute(h):w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,h,r)}}],[{key:"create",value:function(h){var r=w(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,h);return"string"==typeof h&&r.setAttribute("src",this.sanitize(h)),r}},{key:"formats",value:function(h){return m.reduce(function(r,f){return h.hasAttribute(f)&&(r[f]=h.getAttribute(f)),r},{})}},{key:"match",value:function(h){return/\.(jpe?g|gif|png)$/.test(h)||/^data:image\/.+;base64/.test(h)}},{key:"sanitize",value:function(h){return(0,y.sanitize)(h,["http","https","data"])?h:"//:0"}},{key:"value",value:function(h){return h.getAttribute("src")}}]),t}(g.default.Embed);p.blotName="image",p.tagName="IMG",c.default=p},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var u=function(){function e(t,l){for(var h=0;h<l.length;h++){var r=l[h];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,l,h){return l&&e(t.prototype,l),h&&e(t,h),t}}(),w=function e(t,l,h){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,l);if(void 0===r){var f=Object.getPrototypeOf(t);return null===f?void 0:e(f,l,h)}if("value"in r)return r.value;var Z=r.get;return void 0===Z?void 0:Z.call(h)},I=s(4),y=function v(e){return e&&e.__esModule?e:{default:e}}(s(27));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=["height","width"],p=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"format",value:function(h,r){m.indexOf(h)>-1?r?this.domNode.setAttribute(h,r):this.domNode.removeAttribute(h):w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,h,r)}}],[{key:"create",value:function(h){var r=w(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,h);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(h)),r}},{key:"formats",value:function(h){return m.reduce(function(r,f){return h.hasAttribute(f)&&(r[f]=h.getAttribute(f)),r},{})}},{key:"sanitize",value:function(h){return y.default.sanitize(h)}},{key:"value",value:function(h){return h.getAttribute("src")}}]),t}(I.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",c.default=p},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.FormulaBlot=void 0;var u=function(){function h(r,f){for(var Z=0;Z<f.length;Z++){var C=f[Z];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(r,C.key,C)}}return function(r,f,Z){return f&&h(r.prototype,f),Z&&h(r,Z),r}}(),w=function h(r,f,Z){null===r&&(r=Function.prototype);var C=Object.getOwnPropertyDescriptor(r,f);if(void 0===C){var E=Object.getPrototypeOf(r);return null===E?void 0:h(E,f,Z)}if("value"in C)return C.value;var M=C.get;return void 0===M?void 0:M.call(Z)},g=a(s(35)),v=a(s(5)),n=a(s(9));function a(h){return h&&h.__esModule?h:{default:h}}function m(h,r){if(!(h instanceof r))throw new TypeError("Cannot call a class as a function")}function p(h,r){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?h:r}function e(h,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);h.prototype=Object.create(r&&r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(h,r):h.__proto__=r)}var t=function(h){function r(){return m(this,r),p(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return e(r,h),u(r,null,[{key:"create",value:function(Z){var C=w(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,Z);return"string"==typeof Z&&(window.katex.render(Z,C,{throwOnError:!1,errorColor:"#f00"}),C.setAttribute("data-value",Z)),C}},{key:"value",value:function(Z){return Z.getAttribute("data-value")}}]),r}(g.default);t.blotName="formula",t.className="ql-formula",t.tagName="SPAN";var l=function(h){function r(){m(this,r);var f=p(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return f}return e(r,h),u(r,null,[{key:"register",value:function(){v.default.register(t,!0)}}]),r}(n.default);c.FormulaBlot=t,c.default=l},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.CodeToken=c.CodeBlock=void 0;var u=function(){function Z(C,E){for(var M=0;M<E.length;M++){var x=E[M];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,E,M){return E&&Z(C.prototype,E),M&&Z(C,M),C}}(),w=function Z(C,E,M){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,E);if(void 0===x){var _=Object.getPrototypeOf(C);return null===_?void 0:Z(_,E,M)}if("value"in x)return x.value;var A=x.get;return void 0===A?void 0:A.call(M)},g=p(s(0)),v=p(s(5)),n=p(s(9));function p(Z){return Z&&Z.__esModule?Z:{default:Z}}function e(Z,C){if(!(Z instanceof C))throw new TypeError("Cannot call a class as a function")}function t(Z,C){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?Z:C}function l(Z,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);Z.prototype=Object.create(C&&C.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,C):Z.__proto__=C)}var h=function(Z){function C(){return e(this,C),t(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return l(C,Z),u(C,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),w(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var x=this.domNode.textContent;this.cachedText!==x&&((x.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=M(x),this.domNode.normalize(),this.attach()),this.cachedText=x)}}]),C}(p(s(13)).default);h.className="ql-syntax";var r=new g.default.Attributor.Class("token","hljs",{scope:g.default.Scope.INLINE}),f=function(Z){function C(E,M){e(this,C);var x=t(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,E,M));if("function"!=typeof x.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var _=null;return x.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(_),_=setTimeout(function(){x.highlight(),_=null},x.options.interval)}),x.highlight(),x}return l(C,Z),u(C,null,[{key:"register",value:function(){v.default.register(r,!0),v.default.register(h,!0)}}]),u(C,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var x=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(_){_.highlight(M.options.highlight)}),this.quill.update(v.default.sources.SILENT),null!=x&&this.quill.setSelection(x,v.default.sources.SILENT)}}}]),C}(n.default);f.DEFAULTS={highlight:null==window.hljs?null:function(Z){return window.hljs.highlightAuto(Z).value},interval:1e3},c.CodeBlock=h,c.CodeToken=r,c.default=f},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function($,c){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function($,c){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function($,c){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function($,c){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function($,c){$.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function($,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BubbleTooltip=void 0;var u=function C(E,M,x){null===E&&(E=Function.prototype);var _=Object.getOwnPropertyDescriptor(E,M);if(void 0===_){var A=Object.getPrototypeOf(E);return null===A?void 0:C(A,M,x)}if("value"in _)return _.value;var k=_.get;return void 0===k?void 0:k.call(x)},w=function(){function C(E,M){for(var x=0;x<M.length;x++){var _=M[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,M,x){return M&&C(E.prototype,M),x&&C(E,x),E}}(),g=e(s(3)),v=e(s(8)),i=s(43),n=e(i),a=s(15),p=e(s(41));function e(C){return C&&C.__esModule?C:{default:C}}function t(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function l(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||"object"!=typeof E&&"function"!=typeof E?C:E}function h(C,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var r=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],f=function(C){function E(M,x){t(this,E),null!=x.modules.toolbar&&null==x.modules.toolbar.container&&(x.modules.toolbar.container=r);var _=l(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M,x));return _.quill.container.classList.add("ql-bubble"),_}return h(E,C),w(E,[{key:"extendToolbar",value:function(x){this.tooltip=new Z(this.quill,this.options.bounds),this.tooltip.root.appendChild(x.container),this.buildButtons([].slice.call(x.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(x.container.querySelectorAll("select")),p.default)}}]),E}(n.default);f.DEFAULTS=(0,g.default)(!0,{},n.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var Z=function(C){function E(M,x){t(this,E);var _=l(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M,x));return _.quill.on(v.default.events.EDITOR_CHANGE,function(A,k,V,L){if(A===v.default.events.SELECTION_CHANGE)if(null!=k&&k.length>0&&L===v.default.sources.USER){_.show(),_.root.style.left="0px",_.root.style.width="",_.root.style.width=_.root.offsetWidth+"px";var z=_.quill.getLines(k.index,k.length);if(1===z.length)_.position(_.quill.getBounds(k));else{var Y=z[z.length-1],it=_.quill.getIndex(Y),Q=Math.min(Y.length()-1,k.index+k.length-it),R=_.quill.getBounds(new a.Range(it,Q));_.position(R)}}else document.activeElement!==_.textbox&&_.quill.hasFocus()&&_.hide()}),_}return h(E,C),w(E,[{key:"listen",value:function(){var x=this;u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){x.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!x.root.classList.contains("ql-hidden")){var _=x.quill.getSelection();null!=_&&x.position(x.quill.getBounds(_))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(x){var _=u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,x),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",0===_)return _;A.style.marginLeft=-1*_-A.offsetWidth/2+"px"}}]),E}(i.BaseTooltip);Z.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),c.BubbleTooltip=Z,c.default=f},function($,c,s){$.exports=s(63)}]).default},42939:(It,$,c)=>{"use strict";c.d($,{cL:()=>t,Gg:()=>l});var s=c(5e3),u=c(69808),w=c(59783),I=c(31424),g=c(93075);const y=["inputtext"];function v(h,r){1&h&&s.GkF(0)}function i(h,r){if(1&h&&(s.TgZ(0,"span",11),s._uU(1),s.qZA()),2&h){const f=s.oxw().$implicit,Z=s.oxw();s.xp6(1),s.Oqu(Z.field?Z.resolveFieldData(f,Z.field):f)}}function n(h,r){if(1&h){const f=s.EpF();s.TgZ(0,"span",12),s.NdJ("click",function(C){s.CHM(f);const E=s.oxw().index;return s.oxw().removeItem(C,E)}),s.qZA()}}const a=function(h){return{$implicit:h}};function m(h,r){if(1&h){const f=s.EpF();s.TgZ(0,"li",6,7),s.NdJ("click",function(C){const M=s.CHM(f).$implicit;return s.oxw().onItemClick(C,M)}),s.YNc(2,v,1,0,"ng-container",8),s.YNc(3,i,2,1,"span",9),s.YNc(4,n,1,0,"span",10),s.qZA()}if(2&h){const f=r.$implicit,Z=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",Z.itemTemplate)("ngTemplateOutletContext",s.VKq(4,a,f)),s.xp6(1),s.Q6J("ngIf",!Z.itemTemplate),s.xp6(1),s.Q6J("ngIf",!Z.disabled)}}const p=function(h,r){return{"p-inputtext p-chips-multiple-container":!0,"p-focus":h,"p-disabled":r}},e={provide:g.JU,useExisting:(0,s.Gpc)(()=>t),multi:!0};let t=(()=>{class h{constructor(f,Z){this.el=f,this.cd=Z,this.allowDuplicate=!0,this.onAdd=new s.vpe,this.onRemove=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onChipClick=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(f=>{f.getType(),this.itemTemplate=f.template}),this.updateFilledState()}onClick(){this.inputViewChild.nativeElement.focus()}onInput(){this.updateFilledState()}onPaste(f){this.disabled||(this.separator&&((f.clipboardData||window.clipboardData).getData("Text").split(this.separator).forEach(C=>{this.addItem(f,C,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(f,Z){this.onChipClick.emit({originalEvent:f,value:Z})}writeValue(f){this.value=f,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(f){this.onModelChange=f}registerOnTouched(f){this.onModelTouched=f}setDisabledState(f){this.disabled=f,this.cd.markForCheck()}resolveFieldData(f,Z){if(f&&Z){if(-1==Z.indexOf("."))return f[Z];{let M=Z.split("."),x=f;for(var C=0,E=M.length;C<E;++C)x=x[M[C]];return x}}return null}onInputFocus(f){this.focus=!0,this.onFocus.emit(f)}onInputBlur(f){this.focus=!1,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(f,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(f)}removeItem(f,Z){if(this.disabled)return;let C=this.value[Z];this.value=this.value.filter((E,M)=>M!=Z),this.onModelChange(this.value),this.onRemove.emit({originalEvent:f,value:C}),this.updateFilledState(),this.updateMaxedOut()}addItem(f,Z,C){this.value=this.value||[],Z&&Z.trim().length&&(this.allowDuplicate||-1===this.value.indexOf(Z))&&(this.value=[...this.value,Z],this.onModelChange(this.value),this.onAdd.emit({originalEvent:f,value:Z})),this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",C&&f.preventDefault()}onKeydown(f){switch(f.which){case 8:if(0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0){this.value=[...this.value];let Z=this.value.pop();this.onModelChange(this.value),this.onRemove.emit({originalEvent:f,value:Z}),this.updateFilledState()}break;case 13:this.addItem(f,this.inputViewChild.nativeElement.value,!0);break;case 9:this.addOnTab&&""!==this.inputViewChild.nativeElement.value&&this.addItem(f,this.inputViewChild.nativeElement.value,!0);break;default:this.max&&this.value&&this.max===this.value.length?f.preventDefault():this.separator&&","===this.separator&&188===f.which&&this.addItem(f,this.inputViewChild.nativeElement.value,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.disabled=!(!this.max||!this.value||this.max!==this.value.length)||this.disabled||!1)}}return h.\u0275fac=function(f){return new(f||h)(s.Y36(s.SBq),s.Y36(s.sBO))},h.\u0275cmp=s.Xpm({type:h,selectors:[["p-chips"]],contentQueries:function(f,Z,C){if(1&f&&s.Suo(C,w.jx,4),2&f){let E;s.iGM(E=s.CRH())&&(Z.templates=E)}},viewQuery:function(f,Z){if(1&f&&s.Gf(y,5),2&f){let C;s.iGM(C=s.CRH())&&(Z.inputViewChild=C.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(f,Z){2&f&&s.ekj("p-inputwrapper-filled",Z.filled)("p-inputwrapper-focus",Z.focus)},inputs:{style:"style",styleClass:"styleClass",disabled:"disabled",field:"field",placeholder:"placeholder",max:"max",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",allowDuplicate:"allowDuplicate",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:"addOnTab",addOnBlur:"addOnBlur",separator:"separator"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick"},features:[s._Bn([e])],decls:6,vars:17,consts:[[3,"ngClass","ngStyle","click"],[3,"ngClass"],["class","p-chips-token",3,"click",4,"ngFor","ngForOf"],[1,"p-chips-input-token"],["type","text",3,"disabled","ngStyle","keydown","input","paste","focus","blur"],["inputtext",""],[1,"p-chips-token",3,"click"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],["class","p-chips-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-chips-token-label"],[1,"p-chips-token-icon","pi","pi-times-circle",3,"click"]],template:function(f,Z){1&f&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return Z.onClick()}),s.TgZ(1,"ul",1),s.YNc(2,m,5,6,"li",2),s.TgZ(3,"li",3),s.TgZ(4,"input",4,5),s.NdJ("keydown",function(E){return Z.onKeydown(E)})("input",function(){return Z.onInput()})("paste",function(E){return Z.onPaste(E)})("focus",function(E){return Z.onInputFocus(E)})("blur",function(E){return Z.onInputBlur(E)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&f&&(s.Tol(Z.styleClass),s.Q6J("ngClass","p-chips p-component")("ngStyle",Z.style),s.xp6(1),s.Q6J("ngClass",s.WLB(14,p,Z.focus,Z.disabled)),s.xp6(1),s.Q6J("ngForOf",Z.value),s.xp6(2),s.Tol(Z.inputStyleClass),s.Q6J("disabled",Z.disabled)("ngStyle",Z.inputStyle),s.uIk("id",Z.inputId)("placeholder",Z.value&&Z.value.length?null:Z.placeholder)("tabindex",Z.tabindex)("aria-labelledby",Z.ariaLabelledBy))},directives:[u.mk,u.PC,u.sg,u.tP,u.O5],styles:[".p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}\n"],encapsulation:2,changeDetection:0}),h})(),l=(()=>{class h{}return h.\u0275fac=function(f){return new(f||h)},h.\u0275mod=s.oAB({type:h}),h.\u0275inj=s.cJS({imports:[[u.ez,I.j,w.m8],I.j,w.m8]}),h})()},16016:(It,$,c)=>{"use strict";c.d($,{ML:()=>e,Z_:()=>t});var s=c(5e3),u=c(69808),w=c(59783),I=c(75730),g=c(93075),y=c(89971);function v(l,h){1&l&&s.GkF(0)}function i(l,h){if(1&l&&(s.TgZ(0,"div",3),s.Hsn(1),s.YNc(2,v,1,0,"ng-container",4),s.qZA()),2&l){const r=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",r.headerTemplate)}}function n(l,h){1&l&&(s.TgZ(0,"div",3),s.TgZ(1,"span",5),s.TgZ(2,"select",6),s.TgZ(3,"option",7),s._uU(4,"Heading"),s.qZA(),s.TgZ(5,"option",8),s._uU(6,"Subheading"),s.qZA(),s.TgZ(7,"option",9),s._uU(8,"Normal"),s.qZA(),s.qZA(),s.TgZ(9,"select",10),s.TgZ(10,"option",9),s._uU(11,"Sans Serif"),s.qZA(),s.TgZ(12,"option",11),s._uU(13,"Serif"),s.qZA(),s.TgZ(14,"option",12),s._uU(15,"Monospace"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"span",5),s._UZ(17,"button",13),s._UZ(18,"button",14),s._UZ(19,"button",15),s.qZA(),s.TgZ(20,"span",5),s._UZ(21,"select",16),s._UZ(22,"select",17),s.qZA(),s.TgZ(23,"span",5),s._UZ(24,"button",18),s._UZ(25,"button",19),s.TgZ(26,"select",20),s._UZ(27,"option",9),s.TgZ(28,"option",21),s._uU(29,"center"),s.qZA(),s.TgZ(30,"option",22),s._uU(31,"right"),s.qZA(),s.TgZ(32,"option",23),s._uU(33,"justify"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"span",5),s._UZ(35,"button",24),s._UZ(36,"button",25),s._UZ(37,"button",26),s.qZA(),s.TgZ(38,"span",5),s._UZ(39,"button",27),s.qZA(),s.qZA())}const a=[[["p-header"]]],m=["p-header"],p={provide:g.JU,useExisting:(0,s.Gpc)(()=>e),multi:!0};let e=(()=>{class l{constructor(r){this.el=r,this.onTextChange=new s.vpe,this.onSelectionChange=new s.vpe,this.onInit=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterViewInit(){let r=I.p.findSingle(this.el.nativeElement,"div.p-editor-content"),Z={toolbar:I.p.findSingle(this.el.nativeElement,"div.p-editor-toolbar")},C=this.modules?Object.assign(Object.assign({},Z),this.modules):Z;this.quill=new y(r,{modules:C,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer}),this.value&&this.quill.setContents(this.quill.clipboard.convert(this.value)),this.quill.on("text-change",(E,M,x)=>{if("user"===x){let _=I.p.findSingle(r,".ql-editor").innerHTML,A=this.quill.getText().trim();"<p><br></p>"===_&&(_=null),this.onTextChange.emit({htmlValue:_,textValue:A,delta:E,source:x}),this.onModelChange(_),this.onModelTouched()}}),this.quill.on("selection-change",(E,M,x)=>{this.onSelectionChange.emit({range:E,oldRange:M,source:x})}),this.onInit.emit({editor:this.quill})}ngAfterContentInit(){this.templates.forEach(r=>{"header"===r.getType()&&(this.headerTemplate=r.template)})}writeValue(r){this.value=r,this.quill&&(r?this.quill.setContents(this.quill.clipboard.convert(r)):this.quill.setText(""))}registerOnChange(r){this.onModelChange=r}registerOnTouched(r){this.onModelTouched=r}getQuill(){return this.quill}get readonly(){return this._readonly}set readonly(r){this._readonly=r,this.quill&&(this._readonly?this.quill.disable():this.quill.enable())}}return l.\u0275fac=function(r){return new(r||l)(s.Y36(s.SBq))},l.\u0275cmp=s.Xpm({type:l,selectors:[["p-editor"]],contentQueries:function(r,f,Z){if(1&r&&(s.Suo(Z,w.h4,5),s.Suo(Z,w.jx,4)),2&r){let C;s.iGM(C=s.CRH())&&(f.toolbar=C.first),s.iGM(C=s.CRH())&&(f.templates=C)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onTextChange:"onTextChange",onSelectionChange:"onSelectionChange",onInit:"onInit"},features:[s._Bn([p])],ngContentSelectors:m,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(r,f){1&r&&(s.F$t(a),s.TgZ(0,"div",0),s.YNc(1,i,3,1,"div",1),s.YNc(2,n,40,0,"div",1),s._UZ(3,"div",2),s.qZA()),2&r&&(s.Tol(f.styleClass),s.Q6J("ngClass","p-editor-container"),s.xp6(1),s.Q6J("ngIf",f.toolbar||f.headerTemplate),s.xp6(1),s.Q6J("ngIf",!f.toolbar&&!f.headerTemplate),s.xp6(1),s.Q6J("ngStyle",f.style))},directives:[u.mk,u.O5,u.tP,u.PC],styles:[".p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}\n"],encapsulation:2,changeDetection:0}),l})(),t=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=s.oAB({type:l}),l.\u0275inj=s.cJS({imports:[[u.ez],w.m8]}),l})()}}]);