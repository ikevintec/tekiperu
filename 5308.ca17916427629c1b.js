"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[5308],{10762:(M,T,l)=>{l.d(T,{U:()=>u});var n=l(5e3),e=l(93075),s=l(45330),Z=l(68446);let P=(()=>{class d{constructor(c,_){this.config=c,this.ref=_}ngOnInit(){}categorySaved(){this.ref.close(!0)}}return d.\u0275fac=function(c){return new(c||d)(n.Y36(s.S),n.Y36(s.E7))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-modal-categoria"]],decls:1,vars:1,consts:[[3,"isModal","saveCategory"]],template:function(c,_){1&c&&(n.TgZ(0,"app-categoria",0),n.NdJ("saveCategory",function(){return _.categorySaved()}),n.qZA()),2&c&&n.Q6J("isModal",!0)},directives:[Z._],styles:[""]}),d})();var h=l(47728),v=l(40845),I=l(65987),F=l(31424),N=l(4119),E=l(15315),q=l(42629);const S=function(){return{width:"50vw"}},w=function(){return{width:"100%"}},J=d=>{const m={key:d.id,label:d.nombre,children:[]};return d.categorias.forEach(c=>{m.children.push(J(c))}),m},f=(d,m)=>{if(!d||!d.length||!m)return;let c;for(let _=0;_<d.length;_++){if(Number(d[_].key)===Number(m)){c=d[_];break}if(c=f(d[_].children,m),c)break}return c},A=(d,m)=>{if(!d||!d.length||!m)return;let c;for(let _=0;_<d.length;_++){if(Number(d[_].id)===Number(m)){c=d[_];break}if(c=A(d[_].categorias,m),c)break}return c};let u=(()=>{class d{constructor(c,_){this.categoryService=c,this.dialogService=_,this.displayModal=!1,this.disabled=!1,this.changeCategory=new n.vpe,this.onChange=C=>{},this.onTouched=C=>{}}ngOnInit(){this.loadCategories().then()}loadCategories(){return new Promise(c=>{this.categoryService.findAllList(["idCategoria=0","paginacion=false"].join("&")).subscribe(C=>{this.categories=[...C],this.categoriesTree=C.map(J),c(void 0)})})}selectCategory(c){this.categoryTree=c,this.category=A(this.categories,c.key),this.displayModal=!1,this.propagateChange()}clearCategory(){this.categoryTree=void 0,this.category=void 0,this.propagateChange()}propagateChange(){this.onChange(this.category),this.changeCategory.emit(this.category)}registerOnChange(c){this.onChange=c}registerOnTouched(c){this.onTouched=c}setDisabledState(c){this.disabled=c}writeValue(c){if(console.log("change categoruy",c),c){const _=()=>{this.categoryTree=f(this.categoriesTree,c.id),this.category=c,this.onChange(c)};this.categoriesTree?_():this.loadCategories().then(()=>{_()})}else this.clearCategory()}openModalAddCategory(){this.dialogService.open(P,{header:"Registrar Categor\xeda",width:"80%"}).onClose.subscribe(_=>{_&&this.loadCategories().then()})}}return d.\u0275fac=function(c){return new(c||d)(n.Y36(h.H),n.Y36(s.xA))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-selector-categoria"]],inputs:{disabled:"disabled"},outputs:{changeCategory:"changeCategory"},features:[n._Bn([{provide:e.JU,useExisting:(0,n.Gpc)(()=>d),multi:!0}])],decls:7,vars:11,consts:[[1,"p-inputgroup"],["pButton","","type","button","icon","pi pi-eye",3,"click"],["readOnly","true","type","text","pInputText","","placeholder","Selecciona categor\xeda",3,"value","focus"],["tooltipPosition","top","pTooltip","Limpiar","pButton","","type","button","icon","pi pi-times",3,"click"],["appendTo","body","header","Selecciona una categor\xeda",3,"modal","visible","visibleChange"],["label","Nuevo","tooltipPosition","top","pTooltip","Nueva categor\xeda","pButton","","type","button","icon","pi pi-plus",1,"p-button-success","mb-2",3,"click"],["selectionMode","single",3,"value","selection","selectionChange"]],template:function(c,_){1&c&&(n.TgZ(0,"div",0),n.TgZ(1,"button",1),n.NdJ("click",function(){return _.displayModal=!0}),n.qZA(),n.TgZ(2,"input",2),n.NdJ("focus",function(){return _.displayModal=!0}),n.qZA(),n.TgZ(3,"button",3),n.NdJ("click",function(){return _.clearCategory()}),n.qZA(),n.qZA(),n.TgZ(4,"p-dialog",4),n.NdJ("visibleChange",function(b){return _.displayModal=b}),n.TgZ(5,"button",5),n.NdJ("click",function(){return _.openModalAddCategory()}),n.qZA(),n.TgZ(6,"p-tree",6),n.NdJ("selectionChange",function(b){return _.selectCategory(b)})("selectionChange",function(b){return _.categoryTree=b}),n.qZA(),n.qZA()),2&c&&(n.xp6(2),n.Q6J("value",null==_.categoryTree?null:_.categoryTree.label),n.xp6(2),n.Akn(n.DdM(9,S)),n.Q6J("modal",!0)("visible",_.displayModal),n.xp6(2),n.Akn(n.DdM(10,w)),n.Q6J("value",_.categoriesTree)("selection",_.categoryTree))},directives:[v.Hq,I.H,F.o,N.u,E.V,q.mp],styles:[""]}),d})()},26614:(M,T,l)=>{l.d(T,{R:()=>J});var n=l(5e3),e=l(93075),s=l(59783),Z=l(20207),P=l(69808),h=l(31424),v=l(14036),I=l(20657),F=l(40845),N=l(55361);function E(f,A){if(1&f){const u=n.EpF();n.TgZ(0,"input",13),n.NdJ("input",function(){return n.CHM(u),n.oxw().propagateChange()})("blur",function(m){return n.CHM(u),n.oxw().onTouched(m)})("ngModelChange",function(m){return n.CHM(u),n.oxw().precioProducto.nombre=m}),n.qZA()}if(2&f){const u=n.oxw();n.Q6J("ngModel",u.precioProducto.nombre)}}function q(f,A){if(1&f&&(n._uU(0),n.ALo(1,"tipoPrecio")),2&f){const u=n.oxw();n.Oqu(n.lcZ(1,1,u.precioProducto.tipoPrecio))}}const S=function(){return{width:"100%"}};function w(f,A){if(1&f){const u=n.EpF();n.TgZ(0,"div",1),n.TgZ(1,"p-dropdown",14),n.NdJ("ngModelChange",function(m){return n.CHM(u),n.oxw().precioProducto.puntoVenta=m}),n.qZA(),n.qZA()}if(2&f){const u=n.oxw();n.xp6(1),n.Akn(n.DdM(5,S)),n.Q6J("disabled","POR_DEFECTO"===u.precioProducto.tipoPrecio||!u.preciosPorPuntoVenta)("ngModel",u.precioProducto.puntoVenta)("options",u.puntosVenta)}}let J=(()=>{class f{constructor(u,d){this.confirmationService=u,this.loginService=d,this.precioProducto={},this.deletePrice=new n.vpe,this.disabled=!1,this.onChange=m=>{},this.onTouched=m=>{}}get precioCompraPorPieza(){return this._precioCompraPorPieza}set precioCompraPorPieza(u){this._precioCompraPorPieza=u,this.calculoPrecio("C")}get igv(){return this._igv}set igv(u){this._igv=u,this.calculoPrecio("C")}ngOnInit(){this.puntosVenta=this.loginService.getPuntosVentaUsuario(),this.tipos=[{value:"POR_DEFECTO",label:"Por defecto",disabled:!0},{value:"MAYOREO",label:"Mayoreo"},{value:"ESPECIAL",label:"Especial"}]}calculoPrecio(u){let c;console.log("this.precioCompraPorPieza",this.precioCompraPorPieza),this.precioCompraPorPieza&&(c=100*((this.precioProducto.precio?this.precioProducto.precio:0)-this.precioCompraPorPieza)/this.precioCompraPorPieza),"P"===u?this.precioProducto.margenUtilidad=c:"U"===u?this.precioProducto.precio=this.precioProducto.margenUtilidad/100*this.precioCompraPorPieza+this.precioCompraPorPieza:this.precioProducto.precio&&(this.precioProducto.margenUtilidad=c),this.precioProducto.precioNeto=void 0,this.precioProducto.precio&&(this.precioProducto.precioNeto=this.igv?this.precioProducto.precio/(1+this.valorIgv):this.precioProducto.precio),this.propagateChange()}changeTipoPrecio(u){"MAYOREO"!==u.value&&(this.precioProducto.unidadesMayoreo=void 0),this.propagateChange()}propagateChange(){this.onChange(this.precioProducto)}delete(){this.deletePrice.emit(this.index)}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}setDisabledState(u){this.disabled=u}writeValue(u){void 0!==u&&(this.precioProducto=u,this.onChange(u))}}return f.\u0275fac=function(u){return new(u||f)(n.Y36(s.YP),n.Y36(Z.r))},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-precio-producto"]],inputs:{precioCompraPorPieza:"precioCompraPorPieza",igv:"igv",valorIgv:"valorIgv",index:"index",preciosPorPuntoVenta:"preciosPorPuntoVenta",disabled:"disabled"},outputs:{deletePrice:"deletePrice"},features:[n._Bn([{provide:e.JU,useExisting:(0,n.Gpc)(()=>f),multi:!0}])],decls:24,vars:20,consts:[[1,"pricing-block"],[1,"pricing-div"],[1,"left"],["style","width: 100%; margin-bottom: 0.2em","type","text","pInputText","",3,"ngModel","input","blur","ngModelChange",4,"ngIf","ngIfElse"],["noEspecial",""],["class","pricing-div",4,"ngIf"],["pKeyFilter","money","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"disabled","ngModel","blur","input","ngModelChange"],[1,"right"],["pKeyFilter","money","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"ngModel","blur","input","ngModelChange"],["pKeyFilter","money","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"disabled","ngModel","input","blur","ngModelChange"],["placeholder","Seleccione...",3,"disabled","ngModel","options","onBlur","onChange","ngModelChange"],[1,"action"],["pButton","","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"ngModel","input","blur","ngModelChange"],["dataKey","id","placeholder","Ninguno","optionLabel","nombre","name","puntoVenta",3,"disabled","ngModel","options","ngModelChange"]],template:function(u,d){if(1&u&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"p",2),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"div",1),n.YNc(5,E,1,1,"input",3),n.YNc(6,q,2,3,"ng-template",null,4,n.W1O),n.qZA(),n.YNc(8,w,2,6,"div",5),n.TgZ(9,"div",1),n.TgZ(10,"input",6),n.NdJ("blur",function(c){return d.onTouched(c)})("input",function(){return d.calculoPrecio("U")})("ngModelChange",function(c){return d.precioProducto.margenUtilidad=c}),n.qZA(),n.qZA(),n.TgZ(11,"div",1),n.TgZ(12,"p",7),n._uU(13),n.ALo(14,"number"),n.qZA(),n.qZA(),n.TgZ(15,"div",1),n.TgZ(16,"input",8),n.NdJ("blur",function(c){return d.onTouched(c)})("input",function(){return d.calculoPrecio("P")})("ngModelChange",function(c){return d.precioProducto.precio=c}),n.qZA(),n.qZA(),n.TgZ(17,"div",1),n.TgZ(18,"input",9),n.NdJ("input",function(){return d.propagateChange()})("blur",function(c){return d.onTouched(c)})("ngModelChange",function(c){return d.precioProducto.unidadesMayoreo=c}),n.qZA(),n.qZA(),n.TgZ(19,"div",1),n.TgZ(20,"p-dropdown",10),n.NdJ("onBlur",function(c){return d.onTouched(c)})("onChange",function(c){return d.changeTipoPrecio(c)})("ngModelChange",function(c){return d.precioProducto.tipoPrecio=c}),n.qZA(),n.qZA(),n.TgZ(21,"div",1),n.TgZ(22,"div",11),n.TgZ(23,"button",12),n.NdJ("click",function(){return d.delete()}),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&u){const m=n.MAs(7);n.xp6(3),n.hij("Precio ",d.index+1,""),n.xp6(2),n.Q6J("ngIf","ESPECIAL"===d.precioProducto.tipoPrecio)("ngIfElse",m),n.xp6(3),n.Q6J("ngIf",d.preciosPorPuntoVenta),n.xp6(2),n.Q6J("disabled",!d.precioCompraPorPieza)("ngModel",d.precioProducto.margenUtilidad),n.xp6(3),n.Oqu(n.xi3(14,16,d.precioProducto.precioNeto,"1.2-5")),n.xp6(3),n.Q6J("ngModel",d.precioProducto.precio),n.xp6(2),n.Q6J("disabled","MAYOREO"!==d.precioProducto.tipoPrecio)("ngModel",d.precioProducto.unidadesMayoreo),n.xp6(2),n.Akn(n.DdM(19,S)),n.Q6J("disabled","POR_DEFECTO"===d.precioProducto.tipoPrecio)("ngModel",d.precioProducto.tipoPrecio)("options",d.tipos),n.xp6(3),n.Q6J("disabled","POR_DEFECTO"===d.precioProducto.tipoPrecio)}},directives:[P.O5,e.Fj,h.o,e.JJ,e.On,v.Lt,I.Fr,F.Hq],pipes:[N.l,P.JJ],styles:[""]}),f})()},35308:(M,T,l)=>{l.d(T,{g:()=>U});var n=l(70655),e=l(5e3),s=l(93075),Z=l(8929),P=l(30567),h=l(82817),v=l(7625),I=l(2994),F=l(24850),N=l(85932),E=l(81575),q=l(74202),S=l(12216),w=l(96310),J=l(40038),f=l(59783),A=l(20207),u=l(33379),d=l(1203),m=l(8735),c=l(24394),_=l(47745),C=l(21602),b=l(74297),G=l(33725),D=l(31424),O=l(69808),k=l(43724),X=l(73407),ee=l(42841),oe=l(10762),te=l(14036),re=l(20657),ie=l(65987),ne=l(93036),ae=l(17102),le=l(26614),V=l(40845),se=l(80422),H=l(4119),Q=l(98952),ce=l(88205);function de(r,t){if(1&r&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&r){const o=t.$implicit;e.xp6(1),e.AsE("",o.name," - ",o.size," bytes")}}function pe(r,t){if(1&r&&(e.TgZ(0,"ul"),e.YNc(1,de,2,2,"li",6),e.qZA()),2&r){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.uploadedFiles)}}function ue(r,t){if(1&r&&e.YNc(0,pe,2,1,"ul",5),2&r){const o=e.oxw();e.Q6J("ngIf",o.uploadedFiles.length)}}let z=(()=>{class r{constructor(o,i,a){this.userService=o,this.loginService=i,this.messageService=a,this.uploadedFiles=[],this.onChange=p=>{},this.onTouched=p=>{}}ngOnInit(){}onFileUpload(o){const i=new FormData,a=o.files[0];i.append("file",a,a.name),this.userService.uploadImage(this.loginService.getUser().empresa.id,i).subscribe(p=>{this.url=p.url,this.propagateChange(),this.messageService.add({severity:"success",summary:"Archivo subido",detail:""})})}propagateChange(){this.onChange(this.url),this.onTouched(this.url)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}writeValue(o){this.url=o}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(u.i),e.Y36(A.r),e.Y36(f.ez))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-url-field-uploader"]],inputs:{accept:"accept"},features:[e._Bn([{provide:s.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0}])],decls:6,vars:4,consts:[[1,"grid"],[1,"col-12"],["chooseLabel","Selecciona archivo","uploadLabel","Subir archivo","cancelLabel","Cancelar","name","file","maxFileSize","1000000",3,"accept","customUpload","multiple","uploadHandler"],["pTemplate","content"],["onClick","this.select();","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p-fileUpload",2),e.NdJ("uploadHandler",function(p){return i.onFileUpload(p)}),e.YNc(3,ue,1,1,"ng-template",3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(p){return i.url=p}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Q6J("accept",i.accept)("customUpload",!0)("multiple",!1),e.xp6(3),e.Q6J("ngModel",i.url))},directives:[ce.p,f.jx,O.O5,O.sg,s.Fj,D.o,s.JJ,s.On],styles:[""]}),r})();var me=l(75875),ge=l(70050),_e=l(7786),fe=l(12689),he=l(15315),Pe=l(18872),ve=l(25563),Ze=l(19960),$=l(85761),Y=l(45330);function Ce(r,t){1&r&&e._UZ(0,"p-message",11)}function Te(r,t){1&r&&e._UZ(0,"p-message",12)}let j=(()=>{class r{constructor(o,i,a,p,g,B){this.fb=o,this.messageService=i,this.productPlanFieldService=a,this.confirmationService=p,this.ref=g,this.config=B}ngOnInit(){this.builderForm(),this.loadModelForEdit()}builderForm(){this.modelForm=this.fb.group({nombre:[void 0,[s.kI.required]],alias:[void 0,[s.kI.required]]})}registrar(){(0,h.c2)(this.modelForm),this.modelForm.valid?this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de ${this.isEdit?"actualizar":"registrar"}?`,accept:()=>{this.formToModel(),(this.isEdit?this.productPlanFieldService.update(this.model.id,this.model):this.productPlanFieldService.save(this.model)).subscribe(o=>{this.ref.close(o)})},acceptLabel:"Si",rejectLabel:"No"}):this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}cancel(){this.ref.close()}get isEdit(){return this.config.data.isEdit}get titleButtonAction(){return this.isEdit?"Actualizar":"Registrar"}formToModel(){const o=this.modelForm.getRawValue();this.model||(this.model={}),this.model.nombre=o.nombre,this.model.alias=o.alias}modelToForm(o){this.model=o,this.modelForm.patchValue({nombre:o.nombre,alias:o.alias})}loadModelForEdit(){const o=this.config.data.id;o&&setTimeout(()=>this.productPlanFieldService.findById(o).subscribe(i=>{this.model=i,this.modelToForm(i)}))}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(s.qu),e.Y36(f.ez),e.Y36($.r),e.Y36(f.YP),e.Y36(Y.E7),e.Y36(Y.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-campo"]],decls:16,vars:4,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-6"],[1,"label-form"],["formControlName","nombre","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese nombre",4,"ngIf"],["formControlName","alias","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese alias",4,"ngIf"],[1,"col-12","space-buttons",2,"text-align","center"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary",2,"margin-right","0.4rem",3,"click"],["pButton","","type","button",3,"label","click"],["severity","error","text","Ingrese nombre"],["severity","error","text","Ingrese alias"]],template:function(o,i){1&o&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"label",3),e._uU(5,"Nombre (*)"),e.qZA(),e._UZ(6,"input",4),e.YNc(7,Ce,1,0,"p-message",5),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"label",3),e._uU(10,"Identificador (*)"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,Te,1,0,"p-message",7),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return i.cancel()}),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.registrar()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("formGroup",i.modelForm),e.xp6(6),e.Q6J("ngIf",i.modelForm.get("nombre").touched&&(null==i.modelForm.get("nombre").errors?null:i.modelForm.get("nombre").errors.required)),e.xp6(5),e.Q6J("ngIf",i.modelForm.get("alias").touched&&(null==i.modelForm.get("alias").errors?null:i.modelForm.get("alias").errors.required)),e.xp6(3),e.Q6J("label",i.titleButtonAction))},directives:[b.Z,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,D.o,O.O5,k.q,V.Hq],styles:[""]}),r})();function Ae(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Alias"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Acciones"),e.qZA(),e.qZA())}function be(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"span",9),e._uU(7,"Acciones"),e.qZA(),e.TgZ(8,"button",10),e.NdJ("click",function(){const p=e.CHM(o).$implicit;return e.oxw().openModalEdit(p)}),e.qZA(),e.TgZ(9,"button",11),e.NdJ("click",function(){const p=e.CHM(o).$implicit;return e.oxw().select(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit;e.xp6(2),e.hij(" ",o.nombre," "),e.xp6(2),e.hij(" ",o.alias," ")}}let xe=(()=>{class r{constructor(o,i,a,p){this.productPlanFieldService=o,this.messageService=i,this.dialogService=a,this.confirmationService=p,this.productPlanFields=[],this.selectData=new e.vpe}ngOnInit(){this.loadData()}new(){}loadData(){this.productPlanFieldService.findAll([].join("&")).subscribe(i=>{this.productPlanFields=i})}openModalNew(){this.dialogService.open(j,{data:{isEdit:!1},header:"Nuevo",width:"80%"}).onClose.subscribe(i=>{i&&(this.messageService.add({severity:"success",summary:"Registro",detail:"Registrado correctamente."}),this.loadData())})}openModalEdit(o){this.dialogService.open(j,{data:{isEdit:!0,id:o.id},header:"Editar",width:"80%"}).onClose.subscribe(a=>{a&&(this.messageService.add({severity:"success",summary:"Registro",detail:"Actualizado correctamente."}),this.loadData())})}confirmDelete(o){this.confirmationService.confirm({message:"Est\xe1 seguro de eliminar este registro?",accept:()=>{this.productPlanFieldService.delete(o.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Eliminado correctamente"}),this.loadData()})},acceptLabel:"Si",rejectLabel:"No"})}select(o){this.selectData.emit(o)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36($.r),e.Y36(f.ez),e.Y36(Y.xA),e.Y36(f.YP))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-campos"]],outputs:{selectData:"selectData"},decls:11,vars:3,consts:[[1,"grid"],[1,"col-6"],["pButton","","type","button","icon","pi pi-plus","label","Nuevo",3,"click"],["type","text","pInputText","","placeholder","Buscar por nombre",2,"width","100%",3,"input"],[1,"col-12"],["dataKey","id",3,"value","responsive","autoLayout"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"p-column-title"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Editar",1,"p-button-success","m-1",3,"click"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar",1,"m-1",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.openModalNew()}),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"input",3),e.NdJ("input",function(){return i.loadData()}),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"p-table",5,6),e.YNc(9,Ae,7,0,"ng-template",7),e.YNc(10,be,10,2,"ng-template",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(7),e.Q6J("value",i.productPlanFields)("responsive",!0)("autoLayout",!0))},directives:[b.Z,V.Hq,D.o,Q.iA,f.jx,H.u],styles:[""]}),r})();var K=l(57994);function Ie(r,t){1&r&&e._UZ(0,"p-message",11)}function Fe(r,t){1&r&&e._UZ(0,"p-message",12)}let W=(()=>{class r{constructor(o,i,a,p,g,B){this.fb=o,this.messageService=i,this.contractPlanService=a,this.confirmationService=p,this.ref=g,this.config=B}ngOnInit(){this.builderForm(),this.loadModelForEdit()}builderForm(){this.modelForm=this.fb.group({nombre:[void 0,[s.kI.required]],url:[void 0,[s.kI.required]]})}registrar(){(0,h.c2)(this.modelForm),this.modelForm.valid?this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de ${this.isEdit?"actualizar":"registrar"}?`,accept:()=>{this.formToModel(),(this.isEdit?this.contractPlanService.update(this.model.id,this.model):this.contractPlanService.save(this.model)).subscribe(o=>{this.ref.close(o)})},acceptLabel:"Si",rejectLabel:"No"}):this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}cancel(){this.ref.close()}get isEdit(){return this.config.data.isEdit}get titleButtonAction(){return this.isEdit?"Actualizar":"Registrar"}formToModel(){const o=this.modelForm.getRawValue();this.model||(this.model={}),this.model.nombre=o.nombre,this.model.url=o.url}modelToForm(o){this.model=o,this.modelForm.patchValue({nombre:o.nombre,url:o.url})}loadModelForEdit(){const o=this.config.data.id;o&&setTimeout(()=>this.contractPlanService.findById(o).subscribe(i=>{this.model=i,this.modelToForm(i)}))}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(s.qu),e.Y36(f.ez),e.Y36(K.I),e.Y36(f.YP),e.Y36(Y.E7),e.Y36(Y.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-contrato"]],decls:16,vars:4,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-6"],[1,"label-form"],["formControlName","nombre","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese nombre",4,"ngIf"],["accept",".docx","formControlName","url"],["severity","error","text","Ingrese alias",4,"ngIf"],[1,"col-12","space-buttons",2,"text-align","center"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary",2,"margin-right","0.4rem",3,"click"],["pButton","","type","button",3,"label","click"],["severity","error","text","Ingrese nombre"],["severity","error","text","Ingrese alias"]],template:function(o,i){1&o&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"label",3),e._uU(5,"Nombre (*)"),e.qZA(),e._UZ(6,"input",4),e.YNc(7,Ie,1,0,"p-message",5),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"label",3),e._uU(10,"Url (*)"),e.qZA(),e._UZ(11,"app-url-field-uploader",6),e.YNc(12,Fe,1,0,"p-message",7),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return i.cancel()}),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.registrar()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("formGroup",i.modelForm),e.xp6(6),e.Q6J("ngIf",i.modelForm.get("nombre").touched&&(null==i.modelForm.get("nombre").errors?null:i.modelForm.get("nombre").errors.required)),e.xp6(5),e.Q6J("ngIf",i.modelForm.get("url").touched&&(null==i.modelForm.get("url").errors?null:i.modelForm.get("url").errors.required)),e.xp6(3),e.Q6J("label",i.titleButtonAction))},directives:[b.Z,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,D.o,O.O5,k.q,z,V.Hq],styles:[""]}),r})();function qe(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Acciones"),e.qZA(),e.qZA())}function ye(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",9),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"span",10),e._uU(6,"Acciones"),e.qZA(),e.TgZ(7,"button",11),e.NdJ("click",function(){const p=e.CHM(o).$implicit;return e.oxw().openModalEdit(p)}),e.qZA(),e.TgZ(8,"button",12),e.NdJ("click",function(){const p=e.CHM(o).$implicit;return e.oxw().select(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit;e.xp6(2),e.Q6J("href",o.url,e.LSH),e.xp6(1),e.hij(" ",o.nombre,"")}}let Ue=(()=>{class r{constructor(o,i,a,p){this.contractPlanService=o,this.messageService=i,this.dialogService=a,this.confirmationService=p,this.planContratos=[],this.selectData=new e.vpe}ngOnInit(){this.loadData()}new(){}loadData(){this.contractPlanService.findAll([].join("&")).subscribe(i=>{this.planContratos=i})}openModalNew(){this.dialogService.open(W,{data:{isEdit:!1},header:"Nuevo",width:"80%"}).onClose.subscribe(i=>{i&&(this.messageService.add({severity:"success",summary:"Registro",detail:"Registrado correctamente."}),this.loadData())})}openModalEdit(o){this.dialogService.open(W,{data:{isEdit:!0,id:o.id},header:"Editar",width:"80%"}).onClose.subscribe(a=>{a&&(this.messageService.add({severity:"success",summary:"Registro",detail:"Actualizado correctamente."}),this.loadData())})}confirmDelete(o){this.confirmationService.confirm({message:"Est\xe1 seguro de eliminar este registro?",accept:()=>{this.contractPlanService.delete(o.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Eliminado correctamente"}),this.loadData()})},acceptLabel:"Si",rejectLabel:"No"})}select(o){this.selectData.emit(o)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(K.I),e.Y36(f.ez),e.Y36(Y.xA),e.Y36(f.YP))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-contratos"]],outputs:{selectData:"selectData"},decls:11,vars:3,consts:[[1,"grid"],[1,"col-6"],["pButton","","type","button","icon","pi pi-plus","label","Nuevo",3,"click"],["type","text","pInputText","","placeholder","Buscar por nombre",2,"width","100%",3,"input"],[1,"col-12"],["dataKey","id",3,"value","responsive","autoLayout"],["dt",""],["pTemplate","header"],["pTemplate","body"],[3,"href"],[1,"p-column-title"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Editar",1,"p-button-success","m-1",3,"click"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar",1,"m-1",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.openModalNew()}),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"input",3),e.NdJ("input",function(){return i.loadData()}),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"p-table",5,6),e.YNc(9,qe,5,0,"ng-template",7),e.YNc(10,ye,9,2,"ng-template",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(7),e.Q6J("value",i.planContratos)("responsive",!0)("autoLayout",!0))},directives:[b.Z,V.Hq,D.o,Q.iA,f.jx,H.u],styles:[""]}),r})();function Me(r,t){1&r&&e._UZ(0,"p-message",78)}function Ne(r,t){1&r&&e._UZ(0,"p-message",79)}function Ee(r,t){1&r&&e._UZ(0,"p-message",80)}function Se(r,t){1&r&&e._UZ(0,"p-message",84)}const y=function(){return{width:"100px"}};function Je(r,t){if(1&r&&(e.TgZ(0,"div",81),e.TgZ(1,"label",12),e._uU(2,"Es servicio"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"p-toggleButton",82),e.qZA(),e.YNc(5,Se,1,0,"p-message",83),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.Akn(e.DdM(3,y)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("servicio").touched&&(null==o.modelForm.get("servicio").errors?null:o.modelForm.get("servicio").errors.required))}}function De(r,t){1&r&&e._UZ(0,"p-message",87)}function Oe(r,t){if(1&r&&(e.TgZ(0,"div",81),e.TgZ(1,"label",12),e._uU(2,"Mostrar en restaurante"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"p-toggleButton",85),e.qZA(),e.YNc(5,De,1,0,"p-message",86),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.Akn(e.DdM(3,y)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("mostrarEnRestaurante").touched&&(null==o.modelForm.get("mostrarEnRestaurante").errors?null:o.modelForm.get("mostrarEnRestaurante").errors.required))}}function Ye(r,t){1&r&&e._UZ(0,"p-message",90)}function we(r,t){if(1&r&&(e.TgZ(0,"div",81),e.TgZ(1,"label",12),e._uU(2,"Favorito"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"p-toggleButton",88),e.qZA(),e.YNc(5,Ye,1,0,"p-message",89),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.Akn(e.DdM(3,y)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("favorito").touched&&(null==o.modelForm.get("favorito").errors?null:o.modelForm.get("favorito").errors.required))}}function Ve(r,t){1&r&&e._UZ(0,"p-message",91)}function Qe(r,t){1&r&&e._UZ(0,"p-message",95)}const x=function(){return{width:"100%"}};function Be(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"label",92),e._uU(2,"Unidad compra (*)"),e.qZA(),e.TgZ(3,"p-dropdown",93),e.NdJ("onChange",function(){return e.CHM(o),e.oxw().changeUnitCode()}),e.qZA(),e.YNc(4,Qe,1,0,"p-message",94),e.qZA()}if(2&r){const o=e.oxw();e.xp6(3),e.Akn(e.DdM(4,x)),e.Q6J("options",o.unidadesItems),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("unidadCompra").touched&&(null==o.modelForm.get("unidadCompra").errors?null:o.modelForm.get("unidadCompra").errors.required))}}function Le(r,t){1&r&&e._UZ(0,"p-message",96)}function Re(r,t){1&r&&e._UZ(0,"p-message",100)}function ke(r,t){if(1&r&&(e.TgZ(0,"div",97),e.TgZ(1,"label",12),e._uU(2,"Factor "),e.qZA(),e._UZ(3,"input",98),e.YNc(4,Re,1,0,"p-message",99),e.qZA()),2&r){const o=e.oxw();e.xp6(3),e.Q6J("readOnly",o.equalUnits),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("factor").touched&&(null==o.modelForm.get("factor").errors?null:o.modelForm.get("factor").errors.required))}}function He(r,t){1&r&&e._UZ(0,"p-message",101)}function Ge(r,t){1&r&&e._UZ(0,"p-message",104)}function ze(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"label",12),e._uU(2,"Precio compra "),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"input",102),e.NdJ("input",function(){return e.CHM(o),e.oxw().changePurchasePriceTemp()}),e.qZA(),e.YNc(6,Ge,1,0,"p-message",103),e.qZA()}if(2&r){const o=e.oxw();e.xp6(4),e.hij("x ",o.getUnitLabelPurchase(),""),e.xp6(2),e.Q6J("ngIf",o.modelForm.get("precioCompra").touched&&(null==o.modelForm.get("precioCompra").errors?null:o.modelForm.get("precioCompra").errors.required))}}function $e(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"label",12),e._uU(2,"Pre, Compra Inc. impuestos"),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"p-toggleButton",105),e.NdJ("onChange",function(){return e.CHM(o),e.oxw().changePurchasePriceTemp()}),e.qZA(),e.qZA(),e.qZA()}2&r&&(e.xp6(4),e.Akn(e.DdM(2,y)))}function je(r,t){1&r&&e._UZ(0,"p-message",104)}function Ke(r,t){if(1&r&&(e.TgZ(0,"div",4),e.TgZ(1,"label",12),e._uU(2,"Precio compra neto "),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e._UZ(5,"input",106),e.YNc(6,je,1,0,"p-message",103),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.hij("x ",o.getUnitLabelPurchase(),""),e.xp6(2),e.Q6J("ngIf",o.modelForm.get("precioCompraNeto").touched&&(null==o.modelForm.get("precioCompraNeto").errors?null:o.modelForm.get("precioCompraNeto").errors.required))}}function We(r,t){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"label",12),e._uU(2,"Precio compra "),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA()),2&r){const o=e.oxw(2);e.xp6(4),e.hij("x ",o.getUnitLabelSale(),""),e.xp6(2),e.Oqu(o.precioCompraPorPieza)}}function Xe(r,t){if(1&r&&(e.TgZ(0,"div",4),e.YNc(1,We,7,2,"div",107),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.equalUnits)}}function eo(r,t){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"label",12),e._uU(2,"Precio compra neto "),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA()),2&r){const o=e.oxw(2);e.xp6(4),e.hij("x ",o.getUnitLabelSale(),""),e.xp6(2),e.Oqu(o.precioCompraPorPiezaNeto)}}function oo(r,t){if(1&r&&(e.TgZ(0,"div",4),e.YNc(1,eo,7,2,"div",107),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.equalUnits)}}function to(r,t){1&r&&(e.TgZ(0,"div",27),e.TgZ(1,"label",12),e._uU(2,"Lote / Serie"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"p-toggleButton",108),e.qZA(),e.qZA()),2&r&&(e.xp6(4),e.Akn(e.DdM(2,y)))}function ro(r,t){1&r&&e._UZ(0,"p-message",111)}function io(r,t){if(1&r&&(e.TgZ(0,"div",27),e.TgZ(1,"label",12),e._uU(2,"Tipo de lote"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"p-selectButton",109),e.YNc(5,ro,1,0,"p-message",110),e.qZA(),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.Q6J("options",o.tiposLote),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("tipoLote").touched&&(null==o.modelForm.get("tipoLote").errors?null:o.modelForm.get("tipoLote").errors.required))}}function no(r,t){1&r&&e._UZ(0,"p-message",112)}function ao(r,t){1&r&&(e.TgZ(0,"div",35),e.TgZ(1,"p",36),e._uU(2,"Punto de venta"),e.qZA(),e.qZA())}function lo(r,t){1&r&&e._UZ(0,"p-message",119)}function so(r,t){1&r&&e._UZ(0,"p-message",120)}function co(r,t){1&r&&e._UZ(0,"p-message",121)}function po(r,t){1&r&&e._UZ(0,"p-message",80)}function uo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",113),e.TgZ(1,"div",114),e.TgZ(2,"app-precio-producto",115),e.NdJ("deletePrice",function(a){return e.CHM(o),e.oxw().deleteProductPrice(a)}),e.qZA(),e.YNc(3,lo,1,0,"p-message",116),e.YNc(4,so,1,0,"p-message",117),e.YNc(5,co,1,0,"p-message",118),e.YNc(6,po,1,0,"p-message",14),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit,i=t.index,a=e.oxw();e.Q6J("hidden",a.preciosPorPuntoVenta&&!a.officeAsignProductPrice(o.get("precioVenta").value.puntoVenta)),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("index",i)("valorIgv",a.valorIgv)("precioCompraPorPieza",a.precioCompraPorPieza)("igv",a.igvForm)("preciosPorPuntoVenta",a.preciosPorPuntoVenta),e.xp6(1),e.Q6J("ngIf",o.get("precioVenta").touched&&(null==o.get("precioVenta").errors?null:o.get("precioVenta").errors.precio)),e.xp6(1),e.Q6J("ngIf",o.get("precioVenta").touched&&(null==o.get("precioVenta").errors?null:o.get("precioVenta").errors.tipoPrecio)),e.xp6(1),e.Q6J("ngIf",o.get("precioVenta").touched&&(null==o.get("precioVenta").errors?null:o.get("precioVenta").errors.unidadesMayoreo)),e.xp6(1),e.Q6J("ngIf",o.get("precioVenta").touched&&(null==o.get("precioVenta").errors?null:o.get("precioVenta").errors.nombre))}}function mo(r,t){1&r&&e._UZ(0,"p-message",141)}function go(r,t){1&r&&e._UZ(0,"p-message",142)}function _o(r,t){1&r&&e._UZ(0,"p-message",143)}function fo(r,t){1&r&&e._UZ(0,"p-message",144)}function ho(r,t){1&r&&e._UZ(0,"p-message",145)}function Po(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Alias"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Acciones"),e.qZA(),e.qZA())}function vo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr",114),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",146),e.TgZ(6,"button",147),e.NdJ("click",function(){const p=e.CHM(o).rowIndex;return e.oxw(2).deletePlanCampoForm(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=t.$implicit;e.Q6J("formGroupName",t.rowIndex),e.xp6(2),e.hij(" ",i.get("nombre").value,""),e.xp6(2),e.Oqu(i.get("alias").value)}}function Zo(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Acciones"),e.qZA(),e.qZA())}function Co(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr",114),e.TgZ(1,"td"),e.TgZ(2,"a",148),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",146),e.TgZ(5,"button",147),e.NdJ("click",function(){const p=e.CHM(o).rowIndex;return e.oxw(2).deletePlanContratoForm(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const i=t.$implicit;e.Q6J("formGroupName",t.rowIndex),e.xp6(2),e.Q6J("href",null==i?null:i.value.url,e.LSH),e.xp6(1),e.Oqu(null==i?null:i.value.nombre)}}function To(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",122),e.TgZ(1,"div",1),e.TgZ(2,"div",4),e.TgZ(3,"label",8),e._uU(4,"Duraci\xf3n (minutos)"),e.qZA(),e._UZ(5,"input",123),e.YNc(6,mo,1,0,"p-message",124),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"label",8),e._uU(9,"Duraci\xf3n (horas)"),e.qZA(),e._UZ(10,"input",125),e.YNc(11,go,1,0,"p-message",126),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"label",8),e._uU(14,"Duraci\xf3n (d\xedas)"),e.qZA(),e._UZ(15,"input",127),e.YNc(16,_o,1,0,"p-message",128),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",129),e._uU(19,"Duraci\xf3n (meses)"),e.qZA(),e._UZ(20,"input",130),e.YNc(21,fo,1,0,"p-message",131),e.qZA(),e.TgZ(22,"div",4),e.TgZ(23,"label",8),e._uU(24,"D\xedas cr\xe9dito"),e.qZA(),e._UZ(25,"input",132),e.YNc(26,ho,1,0,"p-message",133),e.qZA(),e.TgZ(27,"div",2),e.TgZ(28,"p-fieldset",134),e.TgZ(29,"div",1),e.TgZ(30,"div",2),e.TgZ(31,"button",135),e.NdJ("click",function(){return e.CHM(o),e.oxw().openModalAddPlanCampo()}),e.qZA(),e.qZA(),e.TgZ(32,"div",2),e.TgZ(33,"p-table",136),e.YNc(34,Po,7,0,"ng-template",137),e.YNc(35,vo,7,3,"ng-template",138),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",2),e.TgZ(37,"p-fieldset",139),e.TgZ(38,"div",1),e.TgZ(39,"div",2),e.TgZ(40,"button",135),e.NdJ("click",function(){return e.CHM(o),e.oxw().openModalAddPlanContrato()}),e.qZA(),e.qZA(),e.TgZ(41,"div",2),e.TgZ(42,"p-table",140),e.YNc(43,Zo,5,0,"ng-template",137),e.YNc(44,Co,6,3,"ng-template",138),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(6),e.Q6J("ngIf",o.modelForm.get("numeroMinutosPlan").touched&&(null==o.modelForm.get("numeroMinutosPlan").errors?null:o.modelForm.get("numeroMinutosPlan").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("numeroHorasPlan").touched&&(null==o.modelForm.get("numeroHorasPlan").errors?null:o.modelForm.get("numeroHorasPlan").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("numeroDiasPlan").touched&&(null==o.modelForm.get("numeroDiasPlan").errors?null:o.modelForm.get("numeroDiasPlan").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("numeroMesesPlan").touched&&(null==o.modelForm.get("numeroMesesPlan").errors?null:o.modelForm.get("numeroMesesPlan").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("diasCreditoPlan").touched&&(null==o.modelForm.get("diasCreditoPlan").errors?null:o.modelForm.get("diasCreditoPlan").errors.required)),e.xp6(7),e.Q6J("value",o.modelFormPlanCampos.controls)("rows",10)("responsive",!0),e.xp6(9),e.Q6J("value",o.modelFormPlanContratos.controls)("rows",10)("responsive",!0)}}function Ao(r,t){1&r&&e._UZ(0,"p-message",149)}function bo(r,t){1&r&&e._UZ(0,"p-message",150)}function xo(r,t){if(1&r&&e._UZ(0,"img",151),2&r){const o=e.oxw();e.Q6J("src",o.modelForm.get("imagenUrl").value,e.LSH)}}function Io(r,t){1&r&&e._UZ(0,"p-message",152)}function Fo(r,t){1&r&&e._UZ(0,"p-message",155)}function qo(r,t){if(1&r&&(e.TgZ(0,"div",50),e.TgZ(1,"label",23),e._uU(2,"Factor de unidad alternativa (*)"),e.qZA(),e._UZ(3,"input",153),e.YNc(4,Fo,1,0,"p-message",154),e.qZA()),2&r){const o=e.oxw();e.xp6(4),e.Q6J("ngIf",o.modelForm.get("factorUnidadAlternativa").touched&&(null==o.modelForm.get("factorUnidadAlternativa").errors?null:o.modelForm.get("factorUnidadAlternativa").errors.required))}}function yo(r,t){1&r&&e._UZ(0,"p-message",156)}function Uo(r,t){1&r&&(e.TgZ(0,"div",50),e.TgZ(1,"label",157),e._uU(2,"% Recargo"),e.qZA(),e._UZ(3,"input",158),e.qZA())}function Mo(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Cantidad"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Porci\xf3n"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Unidad"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Descripci\xf3n insumo"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Precio"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Acciones"),e.qZA(),e.qZA())}function No(r,t){1&r&&e._UZ(0,"input",175)}function Eo(r,t){if(1&r&&(e._uU(0),e._UZ(1,"i",176)),2&r){const o=e.oxw().$implicit;e.hij(" ",o.get("cantidad").value," ")}}function So(r,t){1&r&&e._UZ(0,"p-message",177)}function Jo(r,t){1&r&&e._UZ(0,"input",178)}function Do(r,t){if(1&r&&(e._uU(0),e._UZ(1,"i",176)),2&r){const o=e.oxw().$implicit;e.hij(" ",o.get("porcion").value," ")}}function Oo(r,t){1&r&&e._UZ(0,"p-message",179)}function Yo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr",114),e.TgZ(1,"td",169),e.TgZ(2,"p-cellEditor"),e.YNc(3,No,1,0,"ng-template",170),e.YNc(4,Eo,2,1,"ng-template",171),e.qZA(),e.YNc(5,So,1,0,"p-message",172),e.qZA(),e.TgZ(6,"td",169),e.TgZ(7,"p-cellEditor"),e.YNc(8,Jo,1,0,"ng-template",170),e.YNc(9,Do,2,1,"ng-template",171),e.qZA(),e.YNc(10,Oo,1,0,"p-message",173),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"app-precio-producto-detalle",174),e.qZA(),e.TgZ(17,"td",146),e.TgZ(18,"button",147),e.NdJ("click",function(){const p=e.CHM(o).rowIndex;return e.oxw(2).deleteProductSupplyForm(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.rowIndex,i=t.$implicit,a=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(5),e.Q6J("ngIf",i.get("cantidad").touched&&(null==i.get("cantidad").errors?null:i.get("cantidad").errors.required)),e.xp6(5),e.Q6J("ngIf",i.get("porcion").touched&&(null==i.get("porcion").errors?null:i.get("porcion").errors.required)),e.xp6(2),e.hij(" ",null==i.get("productoInsumo").value||null==i.get("productoInsumo").value.unidad?null:i.get("productoInsumo").value.unidad.descripcion,""),e.xp6(2),e.Oqu(null==i.get("productoInsumo").value?null:i.get("productoInsumo").value.nombre),e.xp6(2),e.Q6J("producto",i.get("productoInsumo").value)("puntoVenta",a.puntoVenta)}}function wo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",180),e.TgZ(1,"p-card"),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e._UZ(4,"app-grupo-item",181),e.qZA(),e.TgZ(5,"div",182),e.TgZ(6,"button",183),e.NdJ("click",function(){const p=e.CHM(o).index;return e.oxw(2).deleteGrupoForm(p)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit;e.xp6(4),e.Q6J("grupo",o)}}function Vo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",159),e.TgZ(1,"p-fieldset",160),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"app-agregar-producto",161),e.NdJ("selectProduct",function(a){return e.CHM(o),e.oxw().addProductSupplyFormByProduct(a)}),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",162),e._UZ(7,"p-message",163),e.qZA(),e.TgZ(8,"p-table",164),e.YNc(9,Mo,13,0,"ng-template",137),e.YNc(10,Yo,19,7,"ng-template",138),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",165),e.TgZ(12,"p-fieldset",166),e.TgZ(13,"div",1),e.TgZ(14,"div",2),e.TgZ(15,"button",167),e.NdJ("click",function(){return e.CHM(o),e.oxw().openModalAddGroup()}),e.qZA(),e.qZA(),e.TgZ(16,"div",2),e.YNc(17,wo,7,1,"div",168),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(4),e.Q6J("autoSearchOnOpenModal",!0)("aditionalParamsGeneralSearch",o.aditionalParamsSearchSupply)("visibleAddItem",!1),e.xp6(4),e.Q6J("value",o.modelFormInsumos.controls)("rows",10)("responsive",!0),e.xp6(9),e.Q6J("ngForOf",o.modelFormGrupos.getRawValue())}}function Qo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",187),e.TgZ(1,"p-card"),e.TgZ(2,"div",188),e.TgZ(3,"div",2),e._UZ(4,"app-preparacion-item",189),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"label",190),e._uU(7,"Requerido (*)"),e.qZA(),e.TgZ(8,"div"),e._UZ(9,"p-toggleButton",191),e.qZA(),e.qZA(),e.TgZ(10,"div",182),e.TgZ(11,"button",192),e.NdJ("click",function(){const p=e.CHM(o).index;return e.oxw(2).deletePreparationForm(p)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit,i=t.index;e.xp6(2),e.Q6J("formGroupName",i),e.xp6(2),e.Q6J("preparacion",o.value.preparacion),e.xp6(5),e.Akn(e.DdM(4,x))}}function Bo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",184),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",185),e.NdJ("click",function(){return e.CHM(o),e.oxw().openModalAddPreparation()}),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,Qo,12,5,"div",186),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.modelFormPreparaciones.controls)}}function Lo(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Unidad"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Descripci\xf3n"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Precio"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Acciones"),e.qZA(),e.qZA())}function Ro(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr",114),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"app-precio-producto-detalle",174),e.qZA(),e.TgZ(7,"td",146),e.TgZ(8,"button",196),e.NdJ("click",function(){const p=e.CHM(o).rowIndex;return e.oxw(2).deleteComboPlatilloForm(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.rowIndex,i=t.$implicit,a=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(2),e.Oqu(null==i.value||null==i.value.unidad?null:i.value.unidad.descripcion),e.xp6(2),e.Oqu(null==i.value?null:i.value.nombre),e.xp6(2),e.Q6J("producto",i.value.producto)("puntoVenta",a.puntoVenta)}}function ko(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",193),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"app-agregar-producto",194),e.NdJ("selectProduct",function(a){return e.CHM(o),e.oxw().addComboPlatilloFormByProduct(a)}),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"p-table",195),e.YNc(6,Lo,9,0,"ng-template",137),e.YNc(7,Ro,9,5,"ng-template",138),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(3),e.Q6J("autoSearchOnOpenModal",!0)("aditionalParamsGeneralSearch",o.aditionalParamsSearchPlatillo),e.xp6(2),e.Q6J("value",o.modelFormComboPlatillos.controls)("rows",10)("responsive",!0)}}function Ho(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",180),e.TgZ(1,"p-card"),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e._UZ(4,"app-grupo-item",181),e.qZA(),e.TgZ(5,"div",182),e.TgZ(6,"button",183),e.NdJ("click",function(){const p=e.CHM(o).index;return e.oxw(2).deleteGrupoForm(p)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.$implicit;e.xp6(4),e.Q6J("grupo",o)}}function Go(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",197),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",198),e.NdJ("click",function(){return e.CHM(o),e.oxw().openModalAddGroup()}),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",1),e.YNc(6,Ho,7,1,"div",168),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(6),e.Q6J("ngForOf",o.modelFormGrupos.getRawValue())}}function zo(r,t){1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Cantidad"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Unidad"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Precio venta"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Acciones"),e.qZA(),e.qZA())}function $o(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"input",202),e.NdJ("input",function(){return e.CHM(o),e.oxw(3).loadPurchasePriceByItemsPackage()}),e.qZA()}}function jo(r,t){if(1&r&&(e._uU(0),e._UZ(1,"i",176)),2&r){const o=e.oxw().$implicit;e.hij(" ",o.get("cantidad").value," ")}}function Ko(r,t){1&r&&e._UZ(0,"p-message",177)}function Wo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"tr",114),e.TgZ(1,"td",169),e.TgZ(2,"p-cellEditor"),e.YNc(3,$o,1,0,"ng-template",170),e.YNc(4,jo,2,1,"ng-template",171),e.qZA(),e.YNc(5,Ko,1,0,"p-message",172),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"app-precio-producto-detalle",174),e.qZA(),e.TgZ(12,"td",146),e.TgZ(13,"button",147),e.NdJ("click",function(){const p=e.CHM(o).rowIndex;return e.oxw(2).deleteItemPackageForm(p)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=t.rowIndex,i=t.$implicit,a=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(5),e.Q6J("ngIf",i.get("cantidad").touched&&(null==i.get("cantidad").errors?null:i.get("cantidad").errors.required)),e.xp6(2),e.Oqu(null==i.get("productoItem").value||null==i.get("productoItem").value.unidad?null:i.get("productoItem").value.unidad.descripcion),e.xp6(2),e.Oqu(null==i.get("productoItem").value?null:i.get("productoItem").value.nombre),e.xp6(2),e.Q6J("producto",i.get("productoItem").value)("puntoVenta",a.puntoVenta)}}function Xo(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"p-tabPanel",199),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"app-agregar-producto",200),e.NdJ("selectProduct",function(a){return e.CHM(o),e.oxw().addItemPackageFormByProduct(a)}),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",162),e._UZ(6,"p-message",163),e.qZA(),e.TgZ(7,"p-table",201),e.YNc(8,zo,11,0,"ng-template",137),e.YNc(9,Wo,14,6,"ng-template",138),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const o=e.oxw();e.xp6(3),e.Q6J("autoSearchOnOpenModal",!0)("aditionalParamsGeneralSearch",o.aditionalParamsSearchProduct)("visibleAddItem",!1),e.xp6(4),e.Q6J("value",o.modelFormPaqueteItems.controls)("rows",10)("responsive",!0)}}function et(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",203),e.NdJ("click",function(){return e.CHM(o),e.oxw().confirmDelete()}),e.qZA()}}function ot(r,t){if(1&r&&e._UZ(0,"button",204),2&r){const o=e.oxw();e.Q6J("routerLink",o.linkVolver)}}function tt(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"app-grupos",205),e.NdJ("selectGroup",function(a){return e.CHM(o),e.oxw().selectGroup(a)}),e.qZA()}2&r&&e.Q6J("isModal",!0)}function rt(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"app-preparaciones",206),e.NdJ("selectPreparation",function(a){return e.CHM(o),e.oxw().selectPreparation(a)}),e.qZA()}2&r&&e.Q6J("isModal",!0)}function it(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"app-plan-campos",207),e.NdJ("selectData",function(a){return e.CHM(o),e.oxw().selectPlanCampo(a)}),e.qZA()}}function nt(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"app-plan-contratos",207),e.NdJ("selectData",function(a){return e.CHM(o),e.oxw().selectPlanContrato(a)}),e.qZA()}}const L=function(){return{width:"80%"}},R=function(){return{width:"100%",height:"70vh"}};class U{constructor(t,o,i,a,p,g,B,at,lt,st,ct,dt,pt,ut,mt){this.route=t,this.router=o,this.productService=i,this.companyService=a,this.brandService=p,this.messageService=g,this.loginService=B,this.confirmationService=at,this.fb=lt,this.userService=st,this.ticketService=ct,this.productPriceService=dt,this.ls=pt,this.breadcrumbService=ut,this.currencyService=mt,this.unsubscribe$=new Z.xQ,this.saveProduct=new e.vpe,this.unidadesModels=[],this.unidadesItems=[],this.monedas=[],this.marcas=[],this.puntosVenta=[],this.configCompany={},this.displayModalSelectGroups=!1,this.displayModalSelectPreparations=!1,this.displayModalSelectPlanCampos=!1,this.displayModalSelectPlanContratos=!1}ngOnInit(){if(!this.isModal){const t=[...(0,h.kn)(this.route)];t[t.length-1].label=`${this.isEdit?"Editar":"Nuevo"} ${this.tipoProducto.toLowerCase().replace("articulo","art\xedculo")}`,this.breadcrumbService.setItems(t)}this.puntosVenta=this.loginService.getPuntosVentaUsuario(),this.aditionalParamsSearchSupply=["tipo=INSUMO","tipo=ARTICULO","tipo=PAQUETE"],this.aditionalParamsSearchPlatillo=["tipo=PLATILLO"],this.aditionalParamsSearchProduct=["tipo=PLATILLO","tipo=ARTICULO","tipo=INSUMO","tipo=PLAN"],this.tiposLote=[{label:"Lote",value:"LOTE"},{label:"Serie",value:"SERIE"}],this.configCompany$.pipe((0,v.R)(this.unsubscribe$)).subscribe(t=>{this.configCompany=t,this.builderForm(),this.changeUnitCode(),this.validarPuntoVenta(),this.loadIdEmpresa().then(()=>{this.companyService.findById(this.idEmpresa).subscribe(o=>{this.empresa=o,this.unidadesModels=o.unidades,this.unidadesItems=o.unidades.map(i=>({label:i.descripcion,value:i.codigo})),this.loadData().then(()=>this.loadModel())})}),this.loadPricesProduct(),this.loadCurrencies()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}builderForm(){this.modelForm=this.fb.group({categoria:[void 0,[]],nombre:[void 0,[s.kI.required]],codigo:[void 0],codigoBarra:[void 0],detalle:[void 0],moneda:[void 0,[s.kI.required]],unidadCompra:["NIU",[s.kI.required]],unidad:["NIU",[s.kI.required]],factor:[1,[s.kI.required]],unidadAlternativa:["NIU",[]],factorUnidadAlternativa:[void 0,[]],inventarioMinimo:[void 0,[]],inventarioMaximo:[void 0,[]],peso:[void 0,[]],igv:[!0,[]],precioCompraTemporal:[void 0,[]],precioCompraIncImp:[!0,[]],precioCompra:[void 0,[]],precioCompraNeto:[{value:void 0,disabled:!0},[]],preciosPorPuntoVenta:[!1,[]],tipoAfectacion:["10",[s.kI.required]],servicio:[!1,[s.kI.required]],marca:[void 0,[]],imagenUrl:[""],preciosVenta:this.fb.array([]),tipoProducto:[this.tipoProducto,[s.kI.required]],mostrarEnRestaurante:[!1,[s.kI.required]],favorito:[!1,[s.kI.required]],insumos:this.fb.array([]),paqueteItems:this.fb.array([]),preparaciones:this.fb.array([]),grupos:this.fb.array([]),comboPlatillos:this.fb.array([]),planCampos:this.fb.array([]),planContratos:this.fb.array([]),numeroMesesPlan:[0,[]],numeroDiasPlan:[0,[]],numeroHorasPlan:[0,[]],numeroMinutosPlan:[0,[]],diasCreditoPlan:[void 0,[]],tieneImpuestoBolsas:[void 0,[]],loteSerie:[void 0,[]],tipoLote:[void 0,[]],recargoConsumo:[void 0,[]]}),this.canBePurchase||this.modelForm.get("precioCompraTemporal").disable(),("PLATILLO"===this.tipoProducto||"COMBO"===this.tipoProducto)&&this.modelForm.patchValue({mostrarEnRestaurante:!0}),this.isPlan&&(this.modelForm.get("numeroMesesPlan").setValidators([s.kI.required]),this.modelForm.get("numeroDiasPlan").setValidators([s.kI.required]),this.modelForm.get("numeroHorasPlan").setValidators([s.kI.required]),this.modelForm.get("numeroMinutosPlan").setValidators([s.kI.required])),this.modelForm.get("loteSerie").valueChanges.pipe((0,v.R)(this.unsubscribe$)).subscribe(t=>{t?this.modelForm.get("tipoLote").setValidators([s.kI.required]):this.modelForm.get("tipoLote").clearValidators()})}loadCurrencies(){const t=o=>{this.modelForm.getRawValue().moneda||this.modelForm.patchValue({moneda:o.find(i=>i.monedaPorDefecto).codigoMoneda})};this.currencyService.findAll().pipe((0,I.b)(o=>t(o)),(0,F.U)(o=>o.map(i=>({label:i.codigoMoneda,value:i.codigoMoneda})))).subscribe(o=>this.monedas=o)}validarPuntoVenta(){this.puntoVenta$.pipe((0,v.R)(this.unsubscribe$)).subscribe(t=>{this.puntoVenta=t,this.preciosPorPuntoVenta&&this.reloadPricesProduct()})}findUnitCodeByCode(t){return this.unidadesModels.find(o=>o.codigo===t)}submitForm(){let t,o;this.formToModel(),this.isEdit?(t=this.productService.update(this.idEmpresa,this.model),o="Producto actualizado correctamente."):(t=this.productService.save(this.idEmpresa,this.model),o="Producto registrado correctamente."),t.subscribe(i=>{this.isModal?this.saveProduct.emit(i):(this.messageService.add({severity:"success",summary:"Mensaje",detail:o}),this.router.navigateByUrl(this.linkVolver))})}formToModel(){this.model||(this.model={}),this.model.nombre=this.modelForm.value.nombre,this.model.codigo=this.modelForm.value.codigo,this.model.codigoBarra=this.modelForm.value.codigoBarra,this.model.detalle=this.modelForm.value.detalle,this.model.moneda=this.modelForm.value.moneda,this.model.unidad=this.findUnitCodeByCode(this.modelForm.value.unidad),this.model.unidadCompra=this.findUnitCodeByCode(this.modelForm.value.unidadCompra),this.model.factor=this.modelForm.value.factor,this.model.unidadAlternativa=this.findUnitCodeByCode(this.modelForm.value.unidadAlternativa),this.model.factorUnidadAlternativa=this.modelForm.value.factorUnidadAlternativa,this.model.inventarioMaximo=this.modelForm.value.inventarioMaximo,this.model.inventarioMinimo=this.modelForm.value.inventarioMinimo,this.model.peso=this.modelForm.value.peso,this.model.igv=this.modelForm.value.igv,this.model.precioCompra=this.modelForm.value.precioCompra,this.model.precioCompraNeto=this.modelForm.getRawValue().precioCompraNeto,this.model.tipoAfectacion=this.modelForm.value.tipoAfectacion,this.model.marca=this.modelForm.value.marca,this.model.imagenUrl=this.modelForm.value.imagenUrl,this.model.empresa={id:this.idEmpresa},this.model.servicio=this.modelForm.value.servicio,this.model.preciosPorPuntoVenta=this.modelForm.value.preciosPorPuntoVenta,this.model.precioCompraIncImp=this.modelForm.value.precioCompraIncImp,this.model.tipoProducto=this.modelForm.value.tipoProducto,this.model.mostrarEnRestaurante=this.modelForm.value.mostrarEnRestaurante,this.model.favorito=this.modelForm.value.favorito,this.model.categoria=this.modelForm.value.categoria,this.model.preciosVenta=[],this.model.tieneImpuestoBolsas=this.modelForm.value.tieneImpuestoBolsas,this.model.loteSerie=this.modelForm.value.loteSerie,this.model.tipoLote=this.modelForm.value.tipoLote,this.model.recargoConsumo=this.modelForm.value.recargoConsumo,this.modelFormItemsProductPrices.getRawValue().forEach(t=>this.model.preciosVenta.push(t.precioVenta)),("PLATILLO"===this.model.tipoProducto||"COMBO"===this.model.tipoProducto)&&(this.model.insumos=this.modelForm.value.insumos,this.model.preparaciones=this.modelForm.value.preparaciones,this.model.comboPlatillos=this.modelForm.value.comboPlatillos,this.model.grupos=this.modelForm.value.grupos),"PAQUETE"===this.model.tipoProducto&&(this.model.paqueteItems=this.modelForm.value.paqueteItems),"PLAN"===this.model.tipoProducto&&(this.model.numeroMesesPlan=this.modelForm.value.numeroMesesPlan,this.model.numeroDiasPlan=this.modelForm.value.numeroDiasPlan,this.model.numeroHorasPlan=this.modelForm.value.numeroHorasPlan,this.model.numeroMinutosPlan=this.modelForm.value.numeroMinutosPlan,this.model.diasCreditoPlan=this.modelForm.value.diasCreditoPlan,this.model.planCampos=this.modelForm.value.planCampos,this.model.planContratos=this.modelForm.value.planContratos)}modelToForm(t){null==t.servicio&&(t.servicio=!1),null==t.mostrarEnRestaurante&&(t.mostrarEnRestaurante=!1),null==t.favorito&&(t.favorito=!1),null==t.tipoProducto&&(t.tipoProducto="ARTICULO");const o=void 0===t.precioCompraIncImp||t.precioCompraIncImp;o&&t.precioCompra&&!t.precioCompraNeto&&(t.precioCompraNeto=t.precioCompra/(1+this.configCompany.igv));const i=this.ls.tiposAfectacionIgv.find(g=>g.value===t.tipoAfectacion)?this.ls.tiposAfectacionIgv.find(g=>g.value===t.tipoAfectacion).value:"NIU",a=null!==t.igv?t.igv:"10"===t.tipoAfectacion,p=o?t.precioCompra:t.precioCompraNeto;this.modelForm.patchValue({categoria:t.categoria,nombre:t.nombre,codigo:t.codigo,codigoBarra:t.codigoBarra?t.codigoBarra:"",detalle:t.detalle?t.detalle:"",moneda:this.monedas.find(g=>g.value===t.moneda).value,unidadCompra:t.unidadCompra?t.unidadCompra.codigo:"NIU",unidad:t.unidad?t.unidad.codigo:"NIU",factor:t.factor?t.factor:1,unidadAlternativa:t.unidadAlternativa?t.unidadAlternativa.codigo:void 0,factorUnidadAlternativa:t.factorUnidadAlternativa?t.factorUnidadAlternativa:void 0,inventarioMinimo:t.inventarioMinimo,inventarioMaximo:t.inventarioMaximo,preciosPorPuntoVenta:null!==t.preciosPorPuntoVenta&&t.preciosPorPuntoVenta,igv:a,peso:t.peso,precioCompraIncImp:o,precioCompraTemporal:p,precioCompra:t.precioCompra,precioCompraNeto:t.precioCompraNeto,tipoAfectacion:i,marca:t.marca,imagenUrl:t.imagenUrl,servicio:t.servicio,tipoProducto:t.tipoProducto,mostrarEnRestaurante:t.mostrarEnRestaurante,favorito:t.favorito,numeroMesesPlan:t.numeroMesesPlan,numeroDiasPlan:t.numeroDiasPlan,numeroHorasPlan:t.numeroHorasPlan,numeroMinutosPlan:t.numeroMinutosPlan,diasCreditoPlan:t.diasCreditoPlan,tieneImpuestoBolsas:t.tieneImpuestoBolsas,loteSerie:t.loteSerie,tipoLote:t.tipoLote,recargoConsumo:t.recargoConsumo}),("PLATILLO"===t.tipoProducto||"COMBO"===t.tipoProducto)&&(t.insumos.forEach(g=>this.addProductSupplyForm(g)),t.preparaciones.forEach(g=>this.addPreparationForm(g)),t.grupos.forEach(g=>this.addGrupoForm(g)),t.comboPlatillos.forEach(g=>this.addComboPlatilloFormByProduct(g))),"PLAN"===t.tipoProducto&&(t.planCampos.forEach(g=>this.addPlanCampoForm(g)),t.planContratos.forEach(g=>this.addPlanContratoForm(g))),"PAQUETE"===t.tipoProducto&&t.paqueteItems.forEach(g=>this.addItemPackageForm(g))}get tipoProducto(){return this.isModal?"ARTICULO":this.route.snapshot.params.tipo.toUpperCase()}get canBePurchase(){return"ARTICULO"===this.tipoProducto||"INSUMO"===this.tipoProducto}get canBeService(){return"ARTICULO"===this.tipoProducto||"PAQUETE"===this.tipoProducto}get isPlan(){return"PLAN"===this.tipoProducto}get textButtonAction(){return this.isEdit?"Actualizar":"Guardar"}get nameModulo(){return this.isModal?"Nuevo producto":this.route.snapshot.data.title}get igvForm(){return this.modelForm.get("igv").value}get isEdit(){return!this.isModal&&this.route.snapshot.data.isEdit}get preciosPorPuntoVenta(){return this.modelForm.get("preciosPorPuntoVenta").value}get mostrarEnRestaurante(){return this.modelForm.get("mostrarEnRestaurante").value}get precioCompraPorPieza(){const{factor:t,precioCompra:o}=this.modelForm.getRawValue();return t&&o?Number(o)/Number(t):0}get precioCompraPorPiezaNeto(){const{factor:t,precioCompraNeto:o}=this.modelForm.getRawValue();return t&&o?Number(o)/Number(t):0}loadModel(){this.isEdit&&this.route.params.subscribe(t=>{this.productService.findById(t.id).subscribe(i=>{i&&(this.model=i,this.modelToForm(i),this.loadPricesProduct(i.preciosVenta))})})}confirmDelete(){this.confirmationService.confirm({message:"Estas seguro de eliminar este registro?",accept:()=>{this.productService.deleteById(this.idEmpresa,this.model.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Registro eliminado correctamente"}),this.router.navigateByUrl(this.linkVolver)})},acceptLabel:"Si",rejectLabel:"No"})}loadData(){return new Promise(t=>{(0,P.D)([this.brandService.findAll("")]).subscribe(o=>{this.marcas=o[0],t(void 0)})})}loadIdEmpresa(){return new Promise(t=>{this.idEmpresa=this.loginService.getUser().empresa.id,t(void 0)})}get linkVolver(){return"/productos"}guardar(){(0,h.c2)(this.modelForm),this.modelForm.valid?this.submitForm():this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}changeFlagIgv(t){this.modelForm.patchValue(t.checked?{tipoAfectacion:"10"}:{tipoAfectacion:"20"}),this.changePurchasePriceTemp()}get equalUnits(){return this.modelForm.getRawValue().unidadCompra===this.modelForm.getRawValue().unidad}changeUnitCode(){this.equalUnits&&this.modelForm.patchValue({factor:1})}changeUnitCodeAlternative(){this.modelForm.value.unidadAlternativa?(this.modelForm.get("factorUnidadAlternativa").setValidators([s.kI.required]),this.modelForm.get("factorUnidadAlternativa").updateValueAndValidity()):(this.modelForm.get("factorUnidadAlternativa").setValue(void 0),this.modelForm.get("factorUnidadAlternativa").clearValidators(),this.modelForm.get("factorUnidadAlternativa").updateValueAndValidity())}getUnitLabelPurchase(){const t=this.unidadesItems.find(o=>o.value===this.modelForm.getRawValue().unidadCompra);if(this.modelForm.getRawValue().unidadCompra&&t)return t.label}getUnitLabelSale(){const t=this.unidadesItems.find(o=>o.value===this.modelForm.getRawValue().unidad);if(this.modelForm.getRawValue().unidad&&t)return t.label}changePurchasePriceTemp(){const{igv:t,precioCompraIncImp:o}=this.modelForm.getRawValue();let i=this.modelForm.getRawValue().precioCompraTemporal;i||(i=0),this.modelForm.patchValue(t?o?{precioCompraNeto:Number(i)/(1+this.configCompany.igv),precioCompra:Number(i)}:{precioCompraNeto:Number(i),precioCompra:Number(i)*(1+this.configCompany.igv)}:{precioCompraNeto:Number(i),precioCompra:Number(i)})}reloadPricesProduct(){this.modelForm.get("preciosVenta").clear(),this.loadPricesProduct()}officeAsignProductPrice(t){return!t||this.puntosVenta.map(o=>o.id).includes(t.id)}loadPricesProduct(t){const o=a=>{this.addProductPrice(Object.assign({tipoPrecio:"POR_DEFECTO"},this.preciosPorPuntoVenta&&{puntoVenta:a||this.puntoVenta}))},i=a=>{(a=a.filter(p=>(0,h.Ak)(p,this.preciosPorPuntoVenta))).forEach(p=>this.addProductPrice(p)),!this.preciosPorPuntoVenta&&!a.find(p=>"POR_DEFECTO"===p.tipoPrecio)&&o(),this.preciosPorPuntoVenta&&this.puntosVenta.forEach(p=>{a.find(g=>"POR_DEFECTO"===g.tipoPrecio&&g.puntoVenta.id===p.id)||o(p)})};this.isEdit&&this.model&&this.model.id?void 0!==t?i(t):this.productPriceService.findAll([`idProduct=${this.model.id}`].join("&")).subscribe(p=>{i(p)}):this.isEdit||i([])}get modelFormItemsProductPrices(){return this.modelForm.get("preciosVenta")}addProductPrice(t){this.modelForm.get("preciosVenta").push(this.createItemFormProductPrice(t||Object.assign({},this.preciosPorPuntoVenta&&{puntoVenta:this.puntoVenta})))}deleteProductPrice(t){const o=this.modelForm.get("preciosVenta");o.length>0&&(o.at(t).value.precioVenta.id?this.productPriceService.deleteById(o.at(t).value.precioVenta.id).subscribe(()=>this.reloadPricesProduct()):o.removeAt(t))}createItemFormProductPrice(t){return this.fb.group({precioVenta:[t,[s.kI.required,h.kt]]})}get modelFormInsumos(){return this.modelForm.get("insumos")}addProductSupplyForm(t){this.modelFormInsumos.push(this.createProductSupplyForm(t))}addProductSupplyFormByProduct(t){this.modelFormInsumos.controls.find(o=>o.get("productoInsumo").value.id===t.id)?this.messageService.add({severity:"warn",summary:"Mensaje",detail:`El insumo ${t.nombre} ya est\xe1 agregado al platillo.`}):this.modelFormInsumos.push(this.createProductSupplyForm({productoInsumo:t}))}deleteProductSupplyForm(t){this.modelFormInsumos.removeAt(t)}createProductSupplyForm(t){return this.fb.group({id:[t.id,[]],productoInsumo:[t.productoInsumo,[]],cantidad:[void 0===t.cantidad?1:t.cantidad,[s.kI.required]],porcion:[void 0===t.porcion?1:t.porcion,[s.kI.required]]})}get modelFormPaqueteItems(){return this.modelForm.get("paqueteItems")}addItemPackageForm(t){this.modelFormPaqueteItems.push(this.createItemPackageForm(t))}addItemPackageFormByProduct(t){this.modelFormPaqueteItems.controls.find(o=>o.get("productoItem").value.id===t.id)?this.messageService.add({severity:"warn",summary:"Mensaje",detail:`El producto ${t.nombre} ya est\xe1 agregado al paquete.`}):this.modelFormPaqueteItems.push(this.createItemPackageForm({productoItem:t})),this.loadPurchasePriceByItemsPackage()}deleteItemPackageForm(t){this.modelFormPaqueteItems.removeAt(t),this.loadPurchasePriceByItemsPackage()}loadPurchasePriceByItemsPackage(){console.log("Preco compro por paquete");const o=this.modelFormPaqueteItems.value.map(i=>(i.productoItem.precioCompra||(i.productoItem.precioCompra=0),i.productoItem.precioCompra/i.productoItem.factor*i.cantidad)).reduce(h.IH,0);this.modelForm.patchValue({precioCompraTemporal:o}),this.changePurchasePriceTemp()}createItemPackageForm(t){return this.fb.group({id:[t.id,[]],productoItem:[t.productoItem,[]],cantidad:[void 0===t.cantidad?1:t.cantidad,[s.kI.required]]})}get modelFormPreparaciones(){return this.modelForm.get("preparaciones")}addPreparationForm(t){const o=this.modelFormPreparaciones.controls.find(i=>i.get("preparacion").value.id===t.preparacion.id);o?o.patchValue({preparacion:t.preparacion}):this.modelFormPreparaciones.push(this.createPreparationForm(t))}deletePreparationForm(t){this.modelFormPreparaciones.removeAt(t)}createPreparationForm(t){return this.fb.group({id:[t.id,[]],preparacion:[t.preparacion,[s.kI.required]],requerido:[void 0!==t.requerido&&t.requerido,[s.kI.required]]})}openModalAddPreparation(){this.displayModalSelectPreparations=!0}selectPreparation(t){this.addPreparationForm({preparacion:t}),this.displayModalSelectPreparations=!1}get modelFormComboPlatillos(){return this.modelForm.get("comboPlatillos")}addComboPlatilloFormByProduct(t){this.modelFormComboPlatillos.controls.find(o=>o.get("id").value===t.id)?this.messageService.add({severity:"warn",summary:"Mensaje",detail:`El platillo ${t.nombre} ya est\xe1 agregado al combo.`}):this.modelFormComboPlatillos.push(this.createComboPlatilloForm(t))}deleteComboPlatilloForm(t){this.modelFormComboPlatillos.removeAt(t)}createComboPlatilloForm(t){return this.fb.group({id:[t.id,[s.kI.required]],nombre:[t.nombre,[]],preciosVenta:[t.preciosVenta,[]],unidad:[t.unidad,[]],producto:[t,[]]})}get modelFormGrupos(){return this.modelForm.get("grupos")}addGrupoForm(t){const o=this.modelFormGrupos.controls.find(i=>i.get("id").value===t.id);o?o.setValue(t):this.modelFormGrupos.push(this.createGrupoForm(t))}deleteGrupoForm(t){this.modelFormGrupos.removeAt(t)}createGrupoForm(t){return this.fb.group({id:[t.id,[s.kI.required]],nombre:[t.nombre,[]],etiqueta:[t.etiqueta,[]],requerido:[t.requerido,[]],forzarMinimo:[t.forzarMinimo,[]],forzarMaximo:[t.forzarMaximo,[]],permitirCantidad:[t.permitirCantidad,[]],tipo:[t.tipo,[]],opciones:[t.opciones,[]]})}openModalAddGroup(){this.displayModalSelectGroups=!0}selectGroup(t){this.addGrupoForm(t),this.displayModalSelectGroups=!1}get modelFormPlanCampos(){return this.modelForm.get("planCampos")}addPlanCampoForm(t){const o=this.modelFormPlanCampos.controls.find(i=>i.get("id").value===t.id);o?o.setValue(t):this.modelFormPlanCampos.push(this.createPlanCampoForm(t))}deletePlanCampoForm(t){this.modelFormPlanCampos.removeAt(t)}createPlanCampoForm(t){return this.fb.group({id:[t.id,[s.kI.required]],nombre:[t.nombre,[]],alias:[t.alias,[]]})}openModalAddPlanCampo(){this.displayModalSelectPlanCampos=!0}selectPlanCampo(t){this.addPlanCampoForm(t),this.displayModalSelectPlanCampos=!1}get modelFormPlanContratos(){return this.modelForm.get("planContratos")}addPlanContratoForm(t){const o=this.modelFormPlanContratos.controls.find(i=>i.get("id").value===t.id);o?o.setValue(t):this.modelFormPlanContratos.push(this.createPlanContratoForm(t))}deletePlanContratoForm(t){this.modelFormPlanContratos.removeAt(t)}createPlanContratoForm(t){return this.fb.group({id:[t.id,[s.kI.required]],nombre:[t.nombre,[]],url:[t.url,[]]})}openModalAddPlanContrato(){this.displayModalSelectPlanContratos=!0}selectPlanContrato(t){this.addPlanContratoForm(t),this.displayModalSelectPlanContratos=!1}}U.\u0275fac=function(t){return new(t||U)(e.Y36(q.gz),e.Y36(q.F0),e.Y36(S.M),e.Y36(w.J),e.Y36(J.c),e.Y36(f.ez),e.Y36(A.r),e.Y36(f.YP),e.Y36(s.qu),e.Y36(u.i),e.Y36(d.w),e.Y36(m.o),e.Y36(c.E),e.Y36(_.p),e.Y36(C.i))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-producto"]],inputs:{isModal:"isModal"},outputs:{saveProduct:"saveProduct"},decls:151,vars:114,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-12"],["header","Datos principales","leftIcon","fa fa-asterisk"],[1,"col-6","md:col-2"],["for","codigoBarra",1,"label-form"],["formControlName","codigoBarra","id","codigoBarra","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese c\xf3digo de barras",4,"ngIf"],["for","codigo",1,"label-form"],["formControlName","codigo","id","codigo","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese c\xf3digo",4,"ngIf"],[1,"col-6","md:col-4"],[1,"label-form"],["formControlName","nombre","rows","3","pInputTextarea","","autoResize","autoResize",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese nombre",4,"ngIf"],["class","col-6 sm:col-4 md:col-2",4,"ngIf"],[1,"col-6","sm:col-4","md:col-3"],["formControlName","categoria"],[1,"col-6","sm:col-6","md:col-2"],["for","moneda",1,"label-form"],["formControlName","moneda","id","moneda","placeholder","Seleccione...",3,"options"],["severity","error","text","Ingrese moneda",4,"ngIf"],["class","col-6 sm:col-6 md:col-2",4,"ngIf"],["for","unidad",1,"label-form"],["id","unidad","formControlName","unidad","placeholder","Seleccione...",3,"options","onChange"],["severity","error","text","Ingrese unidad venta",4,"ngIf"],["class","col-4 md:col-1",4,"ngIf"],[1,"col-4","md:col-2"],["formControlName","igv","onLabel","Si","offLabel","No",3,"onChange"],["severity","error","text","Debe especificar si el producto tiene igv",4,"ngIf"],["class","col-6 md:col-2",4,"appPermission"],["class","col-4 md:col-2",4,"ngIf"],["formControlName","preciosPorPuntoVenta","onLabel","Si","offLabel","No",3,"onChange"],["severity","error","text","Debe especificar preciosPorPuntoVenta",4,"ngIf"],[1,"col-fixed","pricing-block",2,"width","200px"],[1,"pricing-div"],[1,"right"],["class","pricing-div",4,"ngIf"],["formArrayName","preciosVenta","class","col-fixed","style","width:180px",3,"hidden",4,"ngFor","ngForOf"],[1,"center"],["pButton","","icon","pi pi-plus",1,"p-button-success",3,"click"],["header","Datos del plan","leftIcon","fa fa-handshake-o",4,"ngIf"],["header","Datos adicionales","leftIcon","fa fa-info-circle"],[1,"col-6","md:col-3"],["for","marca",1,"label-form"],["dataKey","id","formControlName","marca","id","marca","placeholder","Seleccione...","optionLabel","nombre",3,"options","showClear"],["severity","error","text","Ingrese marca",4,"ngIf"],["for","detalle",1,"label-form"],["formControlName","detalle","id","detalle","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese detalle",4,"ngIf"],[1,"col-12","md:col-4"],[1,"first","label-form"],["accept","image/*","formControlName","imagenUrl"],["style","width: 100%;",3,"src",4,"ngIf"],["id","unidadAlternativa","formControlName","unidadAlternativa","placeholder","Seleccione...",3,"showClear","options","onChange"],["severity","error","text","Ingrese unidad alternativa",4,"ngIf"],["class","col-12 md:col-4",4,"ngIf"],["for","tipoAfectacion",1,"label-form"],["formControlName","tipoAfectacion","id","tipoAfectacion","placeholder","Seleccione...",3,"options","showClear"],["severity","error","text","Ingrese tipo de afectaci\xf3n",4,"ngIf"],["for","impBolsas",1,"label-form"],["id","impBolsas","onLabel","Si","offLabel","No","formControlName","tieneImpuestoBolsas"],["header","Insumos","leftIcon","fa fa-lemon-o",4,"ngIf"],["header","Preparaciones","leftIcon","fa fa-list-alt",4,"ngIf"],["header","Platillos","leftIcon","fa fa-cutlery",4,"ngIf"],["header","Grupos","leftIcon","fa fa-glass",4,"ngIf"],["header","Items paquete","leftIcon","fa fa-archive",4,"ngIf"],[1,"col-12",2,"text-align","center"],["pButton","","type","button",2,"margin-right","0.4rem",3,"label","click"],["style","margin-right: 0.4rem","pButton","","type","button","label","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["style","margin-right: 0.4rem","pButton","","type","button","label","Volver","class","p-button-secondary",3,"routerLink",4,"ngIf"],["appendTo","body","header","Selecciona un grupo",3,"visible","modal","draggable","resizable","visibleChange"],[3,"isModal","selectGroup",4,"ngIf"],["appendTo","body","header","Selecciona una preparaci\xf3n",3,"visible","modal","draggable","resizable","visibleChange"],[3,"isModal","selectPreparation",4,"ngIf"],["appendTo","body","header","Selecciona un campo de plan",3,"visible","modal","draggable","resizable","visibleChange"],[3,"selectData",4,"ngIf"],["appendTo","body","header","Selecciona un contrato",3,"visible","modal","draggable","resizable","visibleChange"],["severity","error","text","Ingrese c\xf3digo de barras"],["severity","error","text","Ingrese c\xf3digo"],["severity","error","text","Ingrese nombre"],[1,"col-6","sm:col-4","md:col-2"],["formControlName","servicio","onLabel","Si","offLabel","No"],["severity","error","text","Defina si es un servicio",4,"ngIf"],["severity","error","text","Defina si es un servicio"],["formControlName","mostrarEnRestaurante","onLabel","Si","offLabel","No"],["severity","error","text","Defina si es un producto para restaurante",4,"ngIf"],["severity","error","text","Defina si es un producto para restaurante"],["formControlName","favorito","onLabel","Si","offLabel","No"],["severity","error","text","Defina si es un producto es favorito",4,"ngIf"],["severity","error","text","Defina si es un producto es favorito"],["severity","error","text","Ingrese moneda"],["for","unidadCompra",1,"label-form"],["id","unidadCompra","formControlName","unidadCompra","placeholder","Seleccione...",3,"options","onChange"],["severity","error","text","Ingrese unidad compra",4,"ngIf"],["severity","error","text","Ingrese unidad compra"],["severity","error","text","Ingrese unidad venta"],[1,"col-4","md:col-1"],["pKeyFilter","money","formControlName","factor","id","factor","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"readOnly"],["severity","error","text","Ingrese factor",4,"ngIf"],["severity","error","text","Ingrese factor"],["severity","error","text","Debe especificar si el producto tiene igv"],["pKeyFilter","money","formControlName","precioCompraTemporal","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em",3,"input"],["severity","error","text","Ingrese precio de compra",4,"ngIf"],["severity","error","text","Ingrese precio de compra"],["formControlName","precioCompraIncImp","onLabel","Si","offLabel","No",3,"onChange"],["pKeyFilter","money","formControlName","precioCompraNeto","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],[4,"ngIf"],["formControlName","loteSerie","onLabel","Si","offLabel","No"],["formControlName","tipoLote",3,"options"],["severity","error","text","Ingrese tipo de lote",4,"ngIf"],["severity","error","text","Ingrese tipo de lote"],["severity","error","text","Debe especificar preciosPorPuntoVenta"],["formArrayName","preciosVenta",1,"col-fixed",2,"width","180px",3,"hidden"],[3,"formGroupName"],["formControlName","precioVenta",3,"index","valorIgv","precioCompraPorPieza","igv","preciosPorPuntoVenta","deletePrice"],["severity","error","text","Ingrese precio",4,"ngIf"],["severity","error","text","Ingrese tipo de precio",4,"ngIf"],["severity","error","text","Ingrese unidades de mayoreo",4,"ngIf"],["severity","error","text","Ingrese precio"],["severity","error","text","Ingrese tipo de precio"],["severity","error","text","Ingrese unidades de mayoreo"],["header","Datos del plan","leftIcon","fa fa-handshake-o"],["formControlName","numeroMinutosPlan","id","numeroMinutosPlan","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero de minutos",4,"ngIf"],["formControlName","numeroHorasPlan","id","numeroHorasPlan","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero de horas",4,"ngIf"],["formControlName","numeroDiasPlan","id","numeroDiasPlan","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero de d\xedas",4,"ngIf"],["for","numeroMesesPlan",1,"label-form"],["formControlName","numeroMesesPlan","id","numeroMesesPlan","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese n\xfamero de meses",4,"ngIf"],["formControlName","diasCreditoPlan","id","diasCreditoPlan","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese d\xedas cr\xe9dito",4,"ngIf"],["legend","Informaci\xf3n a requerir"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar",3,"click"],["formArrayName","planCampos",3,"value","rows","responsive"],["pTemplate","header"],["pTemplate","body"],["legend","Contratos"],["formArrayName","planContratos",3,"value","rows","responsive"],["severity","error","text","Ingrese n\xfamero de minutos"],["severity","error","text","Ingrese n\xfamero de horas"],["severity","error","text","Ingrese n\xfamero de d\xedas"],["severity","error","text","Ingrese n\xfamero de meses"],["severity","error","text","Ingrese d\xedas cr\xe9dito"],[2,"text-align","center"],["pTooltip","Eliminar","pButton","","type","button","icon","pi pi-trash",1,"p-button-danger","lrm-1",3,"click"],[3,"href"],["severity","error","text","Ingrese marca"],["severity","error","text","Ingrese detalle"],[2,"width","100%",3,"src"],["severity","error","text","Ingrese unidad alternativa"],["formControlName","factorUnidadAlternativa","id","factorUnidadAlternativa","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["severity","error","text","Ingrese factor de unidad alternativa",4,"ngIf"],["severity","error","text","Ingrese factor de unidad alternativa"],["severity","error","text","Ingrese tipo de afectaci\xf3n"],["for","recargoConsumo",1,"label-form"],["formControlName","recargoConsumo","id","recargoConsumo","pKeyFilter","num","type","text","pInputText","",2,"width","100%","margin-bottom","0.2em"],["header","Insumos","leftIcon","fa fa-lemon-o"],["legend","Insumos no opcionales"],["titleModalSearch","Buscar insumo",3,"autoSearchOnOpenModal","aditionalParamsGeneralSearch","visibleAddItem","selectProduct"],[1,"mb-2"],["severity","info","text","Click en el lapiz para editar."],["formArrayName","insumos",3,"value","rows","responsive"],[1,"mt-3"],["legend","Insumos opcionales o adicionales"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar insumo opcional/adicional",3,"click"],["class","col-6 md:col-6","formArrayName","grupos",4,"ngFor","ngForOf"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],["severity","error","text","Ingrese cantidad",4,"ngIf"],["severity","error","text","Ingrese porci\xf3n",4,"ngIf"],[3,"producto","puntoVenta"],["type","text","pInputText","","formControlName","cantidad","pKeyFilter","num"],[1,"pi","pi-pencil",2,"font-size","1.5em","float","right"],["severity","error","text","Ingrese cantidad"],["type","text","pInputText","","formControlName","porcion","pKeyFilter","num"],["severity","error","text","Ingrese porci\xf3n"],["formArrayName","grupos",1,"col-6","md:col-6"],[3,"grupo"],[1,"col-12","center"],["pTooltip","Remover grupo","pButton","","type","button","icon","pi pi-times-circle",1,"lrm-1",3,"click"],["header","Preparaciones","leftIcon","fa fa-list-alt"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar preparaci\xf3n",3,"click"],["formArrayName","preparaciones","class","col-6 md:col-4",4,"ngFor","ngForOf"],["formArrayName","preparaciones",1,"col-6","md:col-4"],[1,"grid",3,"formGroupName"],[3,"preparacion"],["for","requerido",1,"label-form"],["id","requerido","formControlName","requerido","onLabel","Si","offLabel","No"],["pTooltip","Remover preparaci\xf3n","pButton","","type","button","icon","pi pi-times-circle",1,"lrm-1",3,"click"],["header","Platillos","leftIcon","fa fa-cutlery"],["titleModalSearch","Buscar platillo",3,"autoSearchOnOpenModal","aditionalParamsGeneralSearch","selectProduct"],["formArrayName","comboPlatillos",3,"value","rows","responsive"],["pTooltip","Remover platillo","pButton","","type","button","icon","pi pi-times-circle",1,"lrm-1",3,"click"],["header","Grupos","leftIcon","fa fa-glass"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Agregar grupo",3,"click"],["header","Items paquete","leftIcon","fa fa-archive"],["titleModalSearch","Buscar producto",3,"autoSearchOnOpenModal","aditionalParamsGeneralSearch","visibleAddItem","selectProduct"],["formArrayName","paqueteItems",3,"value","rows","responsive"],["type","text","pInputText","","formControlName","cantidad","pKeyFilter","num",3,"input"],["pButton","","type","button","label","Eliminar",1,"p-button-danger",2,"margin-right","0.4rem",3,"click"],["pButton","","type","button","label","Volver",1,"p-button-secondary",2,"margin-right","0.4rem",3,"routerLink"],[3,"isModal","selectGroup"],[3,"isModal","selectPreparation"],[3,"selectData"]],template:function(t,o){1&t&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"p-tabView"),e.TgZ(5,"p-tabPanel",3),e.TgZ(6,"div",1),e.TgZ(7,"div",4),e.TgZ(8,"label",5),e._uU(9,"C\xf3digo de barras"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,Me,1,0,"p-message",7),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"label",8),e._uU(14,"C\xf3digo"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,Ne,1,0,"p-message",10),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"label",12),e._uU(19,"Nombre"),e.qZA(),e._UZ(20,"textarea",13),e.YNc(21,Ee,1,0,"p-message",14),e.qZA(),e.YNc(22,Je,6,4,"div",15),e.YNc(23,Oe,6,4,"div",15),e.YNc(24,we,6,4,"div",15),e.TgZ(25,"div",16),e.TgZ(26,"label",12),e._uU(27,"Categor\xeda"),e.qZA(),e._UZ(28,"app-selector-categoria",17),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"label",19),e._uU(31,"Moneda (*)"),e.qZA(),e._UZ(32,"p-dropdown",20),e.YNc(33,Ve,1,0,"p-message",21),e.qZA(),e.YNc(34,Be,5,5,"div",22),e.TgZ(35,"div",18),e.TgZ(36,"label",23),e._uU(37,"Unidad venta (*)"),e.qZA(),e.TgZ(38,"p-dropdown",24),e.NdJ("onChange",function(){return o.changeUnitCode()}),e.qZA(),e.YNc(39,Le,1,0,"p-message",25),e.qZA(),e.YNc(40,ke,5,2,"div",26),e.TgZ(41,"div",27),e.TgZ(42,"label",12),e._uU(43,"Igv "),e.qZA(),e.TgZ(44,"div"),e.TgZ(45,"p-toggleButton",28),e.NdJ("onChange",function(a){return o.changeFlagIgv(a)}),e.qZA(),e.qZA(),e.YNc(46,He,1,0,"p-message",29),e.qZA(),e.YNc(47,ze,7,2,"div",30),e.YNc(48,$e,5,3,"div",31),e.YNc(49,Ke,7,2,"div",30),e.YNc(50,Xe,2,1,"div",30),e.YNc(51,oo,2,1,"div",30),e.YNc(52,to,5,3,"div",31),e.YNc(53,io,6,2,"div",31),e.TgZ(54,"div",2),e.TgZ(55,"label",12),e._uU(56,"Precios por punto de venta "),e.qZA(),e.TgZ(57,"div"),e.TgZ(58,"p-toggleButton",32),e.NdJ("onChange",function(){return o.reloadPricesProduct()}),e.qZA(),e.qZA(),e.YNc(59,no,1,0,"p-message",33),e.qZA(),e.TgZ(60,"div",2),e.TgZ(61,"div",1),e.TgZ(62,"div",34),e._UZ(63,"div",35),e.TgZ(64,"div",35),e.TgZ(65,"p",36),e._uU(66,"Nombre"),e.qZA(),e.qZA(),e.YNc(67,ao,3,0,"div",37),e.TgZ(68,"div",35),e.TgZ(69,"p",36),e._uU(70,"% Utilidad"),e.qZA(),e.qZA(),e.TgZ(71,"div",35),e.TgZ(72,"p",36),e._uU(73,"Precio venta neto"),e.qZA(),e.qZA(),e.TgZ(74,"div",35),e.TgZ(75,"p",36),e._uU(76,"Precio venta"),e.qZA(),e.qZA(),e.TgZ(77,"div",35),e.TgZ(78,"p",36),e._uU(79,"Unidades mayoreo"),e.qZA(),e.qZA(),e.TgZ(80,"div",35),e.TgZ(81,"p",36),e._uU(82,"Tipo precio"),e.qZA(),e.qZA(),e.qZA(),e.YNc(83,uo,7,11,"div",38),e.TgZ(84,"div",34),e._UZ(85,"div",35),e._UZ(86,"div",35),e._UZ(87,"div",35),e.TgZ(88,"div",35),e.TgZ(89,"div",39),e.TgZ(90,"button",40),e.NdJ("click",function(){return o.addProductPrice()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(91,"div",35),e._UZ(92,"div",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(93,To,45,11,"p-tabPanel",41),e.TgZ(94,"p-tabPanel",42),e.TgZ(95,"div",1),e.TgZ(96,"div",43),e.TgZ(97,"label",44),e._uU(98,"Marca"),e.qZA(),e._UZ(99,"p-dropdown",45),e.YNc(100,Ao,1,0,"p-message",46),e.qZA(),e.TgZ(101,"div",11),e.TgZ(102,"label",47),e._uU(103,"Detalle"),e.qZA(),e._UZ(104,"input",48),e.YNc(105,bo,1,0,"p-message",49),e.qZA(),e.TgZ(106,"div",50),e.TgZ(107,"label",51),e._uU(108,"Subir imagen"),e.qZA(),e.TgZ(109,"div",1),e.TgZ(110,"div",2),e._UZ(111,"app-url-field-uploader",52),e.qZA(),e.TgZ(112,"div",2),e.YNc(113,xo,1,1,"img",53),e.qZA(),e.qZA(),e.qZA(),e.TgZ(114,"div",50),e.TgZ(115,"label",23),e._uU(116,"Unidad alternativa"),e.qZA(),e.TgZ(117,"p-dropdown",54),e.NdJ("onChange",function(){return o.changeUnitCodeAlternative()}),e.qZA(),e.YNc(118,Io,1,0,"p-message",55),e.qZA(),e.YNc(119,qo,5,1,"div",56),e.TgZ(120,"div",50),e.TgZ(121,"label",57),e._uU(122,"Tipo de afectaci\xf3n (*)"),e.qZA(),e._UZ(123,"p-dropdown",58),e.YNc(124,yo,1,0,"p-message",59),e.qZA(),e.TgZ(125,"div",50),e.TgZ(126,"label",60),e._uU(127,"Tiene impuesto a las bolsas"),e.qZA(),e._UZ(128,"p-toggleButton",61),e.qZA(),e.YNc(129,Uo,4,0,"div",56),e.qZA(),e.qZA(),e.YNc(130,Vo,18,7,"p-tabPanel",62),e.YNc(131,Bo,6,1,"p-tabPanel",63),e.YNc(132,ko,8,5,"p-tabPanel",64),e.YNc(133,Go,7,1,"p-tabPanel",65),e.YNc(134,Xo,10,6,"p-tabPanel",66),e.qZA(),e.qZA(),e.TgZ(135,"div",67),e.TgZ(136,"button",68),e.NdJ("click",function(){return o.guardar()}),e.qZA(),e.YNc(137,et,1,0,"button",69),e.YNc(138,ot,1,1,"button",70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(139,"p-dialog",71),e.NdJ("visibleChange",function(a){return o.displayModalSelectGroups=a}),e.TgZ(140,"p-scrollPanel"),e.YNc(141,tt,1,1,"app-grupos",72),e.qZA(),e.qZA(),e.TgZ(142,"p-dialog",73),e.NdJ("visibleChange",function(a){return o.displayModalSelectPreparations=a}),e.TgZ(143,"p-scrollPanel"),e.YNc(144,rt,1,1,"app-preparaciones",74),e.qZA(),e.qZA(),e.TgZ(145,"p-dialog",75),e.NdJ("visibleChange",function(a){return o.displayModalSelectPlanCampos=a}),e.TgZ(146,"p-scrollPanel"),e.YNc(147,it,1,0,"app-plan-campos",76),e.qZA(),e.qZA(),e.TgZ(148,"p-dialog",77),e.NdJ("visibleChange",function(a){return o.displayModalSelectPlanContratos=a}),e.TgZ(149,"p-scrollPanel"),e.YNc(150,nt,1,0,"app-plan-contratos",76),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.modelForm),e.xp6(10),e.Q6J("ngIf",o.modelForm.get("codigoBarra").touched&&(null==o.modelForm.get("codigoBarra").errors?null:o.modelForm.get("codigoBarra").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("codigo").touched&&(null==o.modelForm.get("codigo").errors?null:o.modelForm.get("codigo").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("nombre").touched&&(null==o.modelForm.get("nombre").errors?null:o.modelForm.get("nombre").errors.required)),e.xp6(1),e.Q6J("ngIf",o.canBeService),e.xp6(1),e.Q6J("ngIf",o.configCompany.esRestaurante),e.xp6(1),e.Q6J("ngIf",o.configCompany.esRestaurante&&("PLATILLO"===o.tipoProducto||"COMBO"===o.tipoProducto||o.mostrarEnRestaurante)),e.xp6(8),e.Akn(e.DdM(98,x)),e.Q6J("options",o.monedas),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("moneda").touched&&(null==o.modelForm.get("moneda").errors?null:o.modelForm.get("moneda").errors.required)),e.xp6(1),e.Q6J("ngIf",o.canBePurchase),e.xp6(4),e.Akn(e.DdM(99,x)),e.Q6J("options",o.unidadesItems),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("unidad").touched&&(null==o.modelForm.get("unidad").errors?null:o.modelForm.get("unidad").errors.required)),e.xp6(1),e.Q6J("ngIf",o.canBePurchase),e.xp6(5),e.Akn(e.DdM(100,y)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("igv").touched&&(null==o.modelForm.get("igv").errors?null:o.modelForm.get("igv").errors.required)),e.xp6(1),e.Q6J("appPermission","PRODUCTOS_MOSTRAR_PRECIO_COMPRA"),e.xp6(1),e.Q6J("ngIf",o.igvForm&&o.canBePurchase),e.xp6(1),e.Q6J("appPermission","PRODUCTOS_MOSTRAR_PRECIO_COMPRA"),e.xp6(1),e.Q6J("appPermission","PRODUCTOS_MOSTRAR_PRECIO_COMPRA"),e.xp6(1),e.Q6J("appPermission","PRODUCTOS_MOSTRAR_PRECIO_COMPRA"),e.xp6(1),e.Q6J("ngIf","ARTICULO"===o.tipoProducto),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("loteSerie").value&&"ARTICULO"===o.tipoProducto),e.xp6(5),e.Akn(e.DdM(101,y)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("preciosPorPuntoVenta").touched&&(null==o.modelForm.get("igv").errors?null:o.modelForm.get("igv").errors.required)),e.xp6(8),e.Q6J("ngIf",o.preciosPorPuntoVenta),e.xp6(16),e.Q6J("ngForOf",o.modelFormItemsProductPrices.controls),e.xp6(10),e.Q6J("ngIf",o.isPlan),e.xp6(6),e.Akn(e.DdM(102,x)),e.Q6J("options",o.marcas)("showClear",!0),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("marca").touched&&(null==o.modelForm.get("marca").errors?null:o.modelForm.get("marca").errors.required)),e.xp6(5),e.Q6J("ngIf",o.modelForm.get("detalle").touched&&(null==o.modelForm.get("detalle").errors?null:o.modelForm.get("detalle").errors.required)),e.xp6(8),e.Q6J("ngIf",o.modelForm.get("imagenUrl").value),e.xp6(4),e.Akn(e.DdM(103,x)),e.Q6J("showClear",!0)("options",o.unidadesItems),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("unidadAlternativa").touched&&(null==o.modelForm.get("unidadAlternativa").errors?null:o.modelForm.get("unidadAlternativa").errors.required)),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("unidadAlternativa").value),e.xp6(4),e.Akn(e.DdM(104,x)),e.Q6J("options",o.ls.tiposAfectacionIgv)("showClear",!0),e.xp6(1),e.Q6J("ngIf",o.modelForm.get("tipoAfectacion").touched&&(null==o.modelForm.get("tipoAfectacion").errors?null:o.modelForm.get("tipoAfectacion").errors.required)),e.xp6(4),e.Akn(e.DdM(105,x)),e.xp6(1),e.Q6J("ngIf",o.configCompany.recargoPorItem),e.xp6(1),e.Q6J("ngIf","PLATILLO"===o.tipoProducto),e.xp6(1),e.Q6J("ngIf","PLATILLO"===o.tipoProducto||"COMBO"===o.tipoProducto),e.xp6(1),e.Q6J("ngIf","COMBO"===o.tipoProducto),e.xp6(1),e.Q6J("ngIf","COMBO"===o.tipoProducto),e.xp6(1),e.Q6J("ngIf","PAQUETE"===o.tipoProducto),e.xp6(2),e.Q6J("label",o.textButtonAction),e.xp6(1),e.Q6J("ngIf",o.isEdit),e.xp6(1),e.Q6J("ngIf",!o.isModal),e.xp6(1),e.Akn(e.DdM(106,L)),e.Q6J("visible",o.displayModalSelectGroups)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Akn(e.DdM(107,R)),e.xp6(1),e.Q6J("ngIf",o.displayModalSelectGroups),e.xp6(1),e.Akn(e.DdM(108,L)),e.Q6J("visible",o.displayModalSelectPreparations)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Akn(e.DdM(109,R)),e.xp6(1),e.Q6J("ngIf",o.displayModalSelectPreparations),e.xp6(1),e.Akn(e.DdM(110,L)),e.Q6J("visible",o.displayModalSelectPlanCampos)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Akn(e.DdM(111,R)),e.xp6(1),e.Q6J("ngIf",o.displayModalSelectPlanCampos),e.xp6(1),e.Akn(e.DdM(112,L)),e.Q6J("visible",o.displayModalSelectPlanContratos)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Akn(e.DdM(113,R)),e.xp6(1),e.Q6J("ngIf",o.displayModalSelectPlanContratos))},directives:[b.Z,s._Y,s.JL,s.sg,G.xf,G.x4,s.Fj,s.JJ,s.u,D.o,O.O5,k.q,X.g,ee.CO,oe.U,te.Lt,re.Fr,ie.H,ne.l,ae.UN,O.sg,s.CE,s.x0,le.R,V.Hq,se.p,H.u,Q.iA,f.jx,z,me.d,Q.Wq,Q.YL,ge.e,_e.a,fe.A,q.rH,he.V,Pe.P,ve.L,Ze.Q,xe,Ue],styles:[""]}),(0,n.gn)([(0,N.Ph)(E.Z.getOffice)],U.prototype,"puntoVenta$",void 0),(0,n.gn)([(0,N.Ph)(E.Z.getConfig)],U.prototype,"configCompany$",void 0)},93036:(M,T,l)=>{l.d(T,{l:()=>s});var n=l(5e3),e=l(20207);let s=(()=>{class Z{constructor(h,v,I,F){this.element=h,this.templateRef=v,this.viewContainer=I,this.loginService=F}set appPermission(h){this.loginService.hasPermission(h)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}return Z.\u0275fac=function(h){return new(h||Z)(n.Y36(n.SBq),n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(e.r))},Z.\u0275dir=n.lG2({type:Z,selectors:[["","appPermission",""]],inputs:{appPermission:"appPermission"}}),Z})()},65987:(M,T,l)=>{l.d(T,{H:()=>s});var n=l(63191),e=l(5e3);let s=(()=>{class Z{constructor(){this._isReadonly=!1}set appReadonly(h){this._isReadonly=(0,n.Ig)(h)}}return Z.\u0275fac=function(h){return new(h||Z)},Z.\u0275dir=e.lG2({type:Z,selectors:[["","readonly",""],["","readOnly",""]],inputs:{appReadonly:"appReadonly"}}),Z})()},55361:(M,T,l)=>{l.d(T,{l:()=>e});var n=l(5e3);let e=(()=>{class s{transform(P,h){return"POR_DEFECTO"===P?"Por defecto":"MAYOREO"===P?"Mayoreo":"ESPECIAL"===P?"Especial":""}}return s.\u0275fac=function(P){return new(P||s)},s.\u0275pipe=n.Yjl({name:"tipoPrecio",type:s,pure:!0}),s})()},8735:(M,T,l)=>{l.d(T,{o:()=>Z});var n=l(92340),e=l(5e3),s=l(40520);let Z=(()=>{class P{constructor(v){this.http=v,this.baseUrl=n.N.endpointApi}findAll(v){return this.http.get(`${this.baseUrl}/product-prices?${v}`)}findById(v){return this.http.get(`${this.baseUrl}/product-prices/${v}`)}save(v){return this.http.post(`${this.baseUrl}/product-prices`,v)}update(v){return this.http.put(`${this.baseUrl}/product-prices`,v)}deleteById(v){return this.http.delete(`${this.baseUrl}/product-prices/${v}`)}}return P.\u0275fac=function(v){return new(v||P)(e.LFG(s.eN))},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()}}]);