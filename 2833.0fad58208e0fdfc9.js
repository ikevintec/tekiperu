"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[2833],{51420:(M,I,r)=>{r.d(I,{Z:()=>e});var x=r(82817),s=r(5e3),f=r(45330),h=r(96039),c=r(69808),D=r(40845);function q(p,A){if(1&p){const l=s.EpF();s.TgZ(0,"div",3),s.TgZ(1,"div",0),s.TgZ(2,"div",3),s._UZ(3,"a",4),s.TgZ(4,"button",5),s.NdJ("click",function(){const V=s.CHM(l).$implicit;return s.oxw().print(V)}),s.qZA(),s.qZA(),s.TgZ(5,"div",3),s._UZ(6,"iframe",6),s.qZA(),s.qZA(),s.qZA()}if(2&p){const l=A.$implicit,Z=s.oxw();s.xp6(3),s.Q6J("href",null==l.pdfPrint?null:l.pdfPrint.urlSafe,s.LSH),s.xp6(3),s.Q6J("src",Z.isMobileDevice?null==l.pdfPrint?null:l.pdfPrint.urlViewer:null==l.pdfPrint?null:l.pdfPrint.urlSafe,s.uOi)}}function N(p,A){if(1&p){const l=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(l).$implicit.method()}),s.qZA()}if(2&p){const l=A.$implicit;s.Q6J("icon",l.icon)("label",l.name)}}function E(p,A){if(1&p&&(s.TgZ(0,"div",3),s.TgZ(1,"div",7),s.YNc(2,N,1,2,"button",8),s.qZA(),s.qZA()),2&p){const l=s.oxw();s.xp6(2),s.Q6J("ngForOf",l.actions)}}let e=(()=>{class p{constructor(l,Z){this.config=l,this.qzTrayService=Z,this.statusQz=!1}ngOnInit(){this.ordersPrint=this.config.data.ordersPrint,this.actions=this.config.data.actions}get isMobileDevice(){return(0,x.s2)()}ngAfterViewInit(){this.statusQz=this.qzTrayService.getStatus()}print(l){this.statusQz&&l.fnPrintQz?l.fnPrintQz():(0,x.TW)(l.pdfPrint.url)}}return p.\u0275fac=function(l){return new(l||p)(s.Y36(f.S),s.Y36(h.k))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-modal-pdf"]],decls:3,vars:2,consts:[[1,"grid"],["class","col-12",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12"],["target","_blank","pButton","","icon","pi pi-clone","label","Abrir en navegador",1,"p-button-sm","mr-2",3,"href"],["pButton","","icon","pi pi-print","label","Imprimir",1,"p-button-sm","mr-2",3,"click"],["name","PDF.pdf","title","MyPdf","id","pdftoprint","type","application/pdf","width","100%","height","400px",3,"src"],[1,"flex","justify-content-end"],["class","p-button-sm mr-2 p-button-success m-1","pButton","",3,"icon","label","click",4,"ngFor","ngForOf"],["pButton","",1,"p-button-sm","mr-2","p-button-success","m-1",3,"icon","label","click"]],template:function(l,Z){1&l&&(s.TgZ(0,"div",0),s.YNc(1,q,7,2,"div",1),s.YNc(2,E,3,1,"div",2),s.qZA()),2&l&&(s.xp6(1),s.Q6J("ngForOf",Z.ordersPrint),s.xp6(1),s.Q6J("ngIf",Z.actions))},directives:[c.sg,D.Hq,c.O5],styles:[""]}),p})()},89400:(M,I,r)=>{r.d(I,{z:()=>f});var x=r(20958),s=r(5e3);let f=(()=>{class h{}return h.\u0275fac=function(D){return new(D||h)},h.\u0275mod=s.oAB({type:h}),h.\u0275inj=s.cJS({imports:[[x.m]]}),h})()},62833:(M,I,r)=>{r.r(I),r.d(I,{GuiaRemisionModule:()=>Mo});var x=r(33542),s=r(74202),f=r(70655),h=r(61715),c=r(82817),D=r(66239),q=r(85932),N=r(81575),E=r(51420),e=r(5e3),p=r(15552),A=r(96310),l=r(33379),Z=r(20207),g=r(69808),V=r(24876),v=r(59783),L=r(2314),B=r(47745),O=r(45330),k=r(74297),d=r(93075),$=r(17102),j=r(75652),S=r(31424),z=r(14036),U=r(98952),H=r(4119),F=r(40845),X=r(28061);function ee(o,i){if(1&o&&(e.TgZ(0,"div",3),e.TgZ(1,"b"),e._uU(2,"Transportista:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.AsE(" ",t.guia.numeroDocumentoIdentidadTransportista," - ",t.guia.denominacionTransportista," ")}}function te(o,i){if(1&o&&(e.TgZ(0,"div",10),e.TgZ(1,"b"),e._uU(2,"Conductor:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.guia.numeroDocumentoIdentidadConductor," ")}}function oe(o,i){if(1&o&&(e.TgZ(0,"div",10),e.TgZ(1,"b"),e._uU(2,"Placa:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.guia.numeroPlacaVehiculo," ")}}function ie(o,i){if(1&o&&(e.TgZ(0,"div",3),e.TgZ(1,"b"),e._uU(2,"Proveedor:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.AsE(" ",t.guia.numeroDocumentoIdentidadTercero," - ",t.guia.denominacionTercero," ")}}function ne(o,i){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Codigo"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Descripci\xf3n"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Unidad de medida"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Cantidad"),e.qZA(),e.qZA())}function ae(o,i){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.codigoUnidadMedida),e.xp6(2),e.Oqu(t.cantidad)}}let re=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-detalle-guia"]],inputs:{guia:"guia"},decls:20,vars:9,consts:[[1,"grid","p-fluid",2,"padding","5px"],[1,"col-12"],[1,"grid"],[1,"col-12","md:col-6","lg:col-4"],["class","col-12 md:col-6 lg:col-4",4,"ngIf"],["class","col-12 md:col-4 lg:col-2",4,"ngIf"],["header","Bienes"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"col-12","md:col-4","lg:col-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"b"),e._uU(5,"Partida:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"b"),e._uU(9,"Llegada:"),e.qZA(),e._uU(10),e.qZA(),e.YNc(11,ee,4,2,"div",4),e.YNc(12,te,4,1,"div",5),e.YNc(13,oe,4,1,"div",5),e.YNc(14,ie,4,2,"div",4),e.TgZ(15,"div",1),e.TgZ(16,"p-panel",6),e.TgZ(17,"p-table",7),e.YNc(18,ne,9,0,"ng-template",8),e.YNc(19,ae,9,4,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.AsE(" ",n.guia.direccionPuntoPartida,", ",n.guia.ubigeoDetallePuntoPartida," "),e.xp6(4),e.AsE(" ",n.guia.direccionPuntoLlegada,", ",n.guia.ubigeoDetallePuntoLlegada," "),e.xp6(1),e.Q6J("ngIf",n.guia.numeroDocumentoIdentidadTransportista),e.xp6(1),e.Q6J("ngIf",n.guia.numeroDocumentoIdentidadConductor),e.xp6(1),e.Q6J("ngIf",n.guia.numeroPlacaVehiculo),e.xp6(1),e.Q6J("ngIf",n.guia.numeroDocumentoIdentidadTercero),e.xp6(3),e.Q6J("value",n.guia.items))},directives:[g.O5,X.s,U.iA,v.jx],styles:[""]}),o})();var K=r(15315),se=r(48185),m=r(71057);let de=(()=>{class o{transform(t,n){return t===m.fw.VENTA?"Venta":t===m.fw.COMPRA?"Compra":t===m.fw.TRASLADO_ESTABLECIMIENTOS_MISMA_EMPRESA?"Traslado entre establecimientos de la misma empresa":t===m.fw.TRASLADO_ZONA_PRIMARIA?"Traslado en zona primaria":t===m.fw.VENTA_CONFIRMACION_COMPRADOR?"Venta confirmaci\xf3n comprador":t===m.fw.TRASLADO_EMISOR_ITINERANTE_CP?"Traslado emisor itinerante cp":t===m.fw.IMPORTACION?"Importaci\xf3n":t===m.fw.EXPORTACION?"Exportaci\xf3n":t===m.fw.OTROS?"Otros":""}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"motivoTraslado",type:o,pure:!0}),o})(),ue=(()=>{class o{transform(t,n){return t===m.o0.TRANSPORTE_PUBLICO?"P\xfablico":t===m.o0.TRANSPORTE_PRIVADO?"Privado":""}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"tipoTransporte",type:o,pure:!0}),o})();var le=r(23582);const me=["dt"],G=function(){return{width:"100%"}};function ce(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",5),e._uU(2,"Desde"),e.qZA(),e.TgZ(3,"p-calendar",26),e.NdJ("onSelect",function(){return e.CHM(t),e.oxw().resetAndRefreshTable()})("ngModelChange",function(a){return e.CHM(t),e.oxw().filtroDesde=a}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Akn(e.DdM(4,G)),e.Q6J("ngModel",t.filtroDesde)("locale",t.es)}}function pe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",5),e._uU(2,"Hasta"),e.qZA(),e.TgZ(3,"p-calendar",27),e.NdJ("onSelect",function(){return e.CHM(t),e.oxw().resetAndRefreshTable()})("ngModelChange",function(a){return e.CHM(t),e.oxw().filtroHasta=a}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Akn(e.DdM(4,G)),e.Q6J("ngModel",t.filtroHasta)("locale",t.es)}}function ge(o,i){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function _e(o,i){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",28),e.YNc(2,ge,2,1,"th",29),e.qZA()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("ngForOf",t)}}function fe(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"tipoDocumento"),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n[t.field]))}}function he(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Tipo"),e.qZA(),e.YNc(3,fe,3,3,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function Te(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.serie)}}function Ze(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Serie"),e.qZA(),e.YNc(3,Te,2,1,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function ve(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(t.numero)}}function Ae(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"N\xfamero"),e.qZA(),e.YNc(3,ve,2,1,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function Ce(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Emisor"),e.qZA(),e.TgZ(3,"p",39),e._uU(4),e.qZA(),e.TgZ(5,"p",40),e._uU(6),e.qZA(),e.BQk()),2&o){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(4),e.Oqu(t.numeroDocumentoIdentidadRemitente),e.xp6(1),e.Q6J("pTooltip",n.showNameCompany(t)),e.xp6(1),e.Oqu(n.showNameCompany(t))}}function Ie(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"motivoTraslado"),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n[t.field]))}}function xe(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Motivo"),e.qZA(),e.YNc(3,Ie,3,3,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function be(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"tipoTransporte"),e.qZA()),2&o){const t=e.oxw(3).$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n[t.field]))}}function De(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Transporte"),e.qZA(),e.YNc(3,be,3,3,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n[t.field])}}function ye(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Fecha"),e.qZA(),e.TgZ(3,"span",41),e._uU(4),e.ALo(5,"date"),e.qZA(),e.BQk()),2&o){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(3),e.Q6J("pTooltip",n.showToolTipFechaEmisionFormat(t.fechaRegistro)),e.xp6(1),e.Oqu(e.xi3(5,2,t.fechaEmisionDate,"dd-MM-yyyy hh:mm a"))}}function qe(o,i){1&o&&(e.TgZ(0,"span",45),e._uU(1,"Si"),e.qZA())}function Ne(o,i){1&o&&(e.TgZ(0,"span",46),e._uU(1,"No"),e.qZA())}function Pe(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function Ve(o,i){if(1&o&&(e.ynx(0,42),e.TgZ(1,"span",38),e._uU(2,"Anulado"),e.qZA(),e.YNc(3,qe,2,0,"span",43),e.YNc(4,Ne,2,0,"span",44),e.YNc(5,Pe,2,0,"span",23),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf","ANULADO"===n[t.field]),e.xp6(1),e.Q6J("ngIf","ANULADO"!==n[t.field]),e.xp6(1),e.Q6J("ngIf","09"!==n.tipoComprobante)}}const Ue=function(o,i){return{"p-tag-success":o,"p-tag-danger":i}};function Me(o,i){if(1&o&&(e.TgZ(0,"span",48),e._uU(1),e.ALo(2,"estadoSunat"),e.qZA()),2&o){const t=e.oxw(4).$implicit;e.Q6J("pTooltip",t.mensajeRespuesta)("ngClass",e.WLB(5,Ue,"ACEPT"===t.estadoSunat,"ANULA"===t.estadoSunat)),e.xp6(1),e.Oqu(e.lcZ(2,3,t.estadoSunat))}}function Ee(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function Se(o,i){if(1&o&&(e.ynx(0,42),e.TgZ(1,"span",38),e._uU(2,"Est. Sunat"),e.qZA(),e.YNc(3,Me,3,8,"span",47),e.YNc(4,Ee,2,0,"span",23),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(3),e.Q6J("ngIf","09"===t.tipoComprobante),e.xp6(1),e.Q6J("ngIf","09"!==t.tipoComprobante)}}function Fe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"span",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4).$implicit;return e.oxw().showModalSendEmail(a)}),e.qZA()}}function Ge(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"span",38),e._uU(2,"Cliente"),e.qZA(),e.TgZ(3,"p",39),e._uU(4),e.qZA(),e.TgZ(5,"p",49),e.TgZ(6,"span"),e._uU(7),e.YNc(8,Fe,1,0,"span",50),e.qZA(),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(4),e.Oqu(n.numeroDocumentoIdentidadDestinatario),e.xp6(3),e.hij("",n[t.field]," "),e.xp6(1),e.Q6J("ngIf",!1)}}function we(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[t.field]," ")}}function Je(o,i){1&o&&(e.ynx(0),e.YNc(1,he,4,1,"ng-container",35),e.YNc(2,Ze,4,1,"ng-container",35),e.YNc(3,Ae,4,1,"ng-container",35),e.YNc(4,Ce,7,3,"ng-container",35),e.YNc(5,xe,4,1,"ng-container",35),e.YNc(6,De,4,1,"ng-container",35),e.YNc(7,ye,6,5,"ng-container",35),e.YNc(8,Ve,6,3,"ng-container",36),e.YNc(9,Se,5,2,"ng-container",36),e.YNc(10,Ge,9,3,"ng-container",35),e.YNc(11,we,2,1,"ng-container",37),e.BQk()),2&o&&(e.xp6(1),e.Q6J("ngSwitchCase","tipoComprobante"),e.xp6(1),e.Q6J("ngSwitchCase","serie"),e.xp6(1),e.Q6J("ngSwitchCase","numero"),e.xp6(1),e.Q6J("ngSwitchCase","emisor"),e.xp6(1),e.Q6J("ngSwitchCase","motivoTraslado"),e.xp6(1),e.Q6J("ngSwitchCase","tipoTransporte"),e.xp6(1),e.Q6J("ngSwitchCase","fechaEmision"),e.xp6(1),e.Q6J("ngSwitchCase","estado"),e.xp6(1),e.Q6J("ngSwitchCase","estadoSunat"),e.xp6(1),e.Q6J("ngSwitchCase","denominacionDestinatario"))}function Re(o,i){if(1&o){const t=e.EpF();e.ynx(0,42),e.TgZ(1,"span",38),e._uU(2,"Imprimir"),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().openPdf(a)}),e.qZA(),e.BQk()}}function Qe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().sendSunat(a)}),e.qZA()}}function Ye(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().getStatus(a)}),e.qZA()}}function Le(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit;return e.oxw().downloadFile(a.id,"CDR")}),e.qZA()}}function Be(o,i){if(1&o){const t=e.EpF();e.ynx(0,42),e.TgZ(1,"span",38),e._uU(2,"Acciones"),e.qZA(),e.YNc(3,Qe,1,0,"button",53),e.YNc(4,Ye,1,0,"button",54),e.TgZ(5,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().downloadFile(a.id,"XML")}),e.qZA(),e.YNc(6,Le,1,0,"button",56),e.BQk()}if(2&o){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.canSendSunat(t)),e.xp6(1),e.Q6J("ngIf",n.canGetStatus(t)),e.xp6(2),e.Q6J("ngIf","ACEPT"===t.estadoSunat||"ANULA"===t.estadoSunat)}}function Oe(o,i){if(1&o&&(e.TgZ(0,"td",33),e.YNc(1,Je,12,10,"ng-container",23),e.YNc(2,Re,4,0,"ng-container",34),e.YNc(3,Be,7,3,"ng-container",34),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngIf",!t.isActions),e.xp6(1),e.Q6J("ngIf",t.isPrint),e.xp6(1),e.Q6J("ngIf",t.isActions)}}function ke(o,i){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",30),e._UZ(3,"i",31),e.qZA(),e.qZA(),e.YNc(4,Oe,4,4,"td",32),e.qZA()),2&o){const t=i.$implicit,n=i.columns,a=i.expanded;e.xp6(2),e.Q6J("pRowToggler",t),e.xp6(1),e.Q6J("ngClass",a?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(1),e.Q6J("ngForOf",n)}}function $e(o,i){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"app-detalle-guia",60),e.qZA(),e.qZA()),2&o){const t=i.$implicit,n=i.columns;e.xp6(1),e.uIk("colspan",n.length+1),e.xp6(1),e.Q6J("guia",t)}}function je(o,i){if(1&o&&(e.TgZ(0,"div",61),e.TgZ(1,"div",62),e._UZ(2,"button",63),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"b"),e._uU(5,"Num. gu\xedas:"),e.qZA(),e._uU(6),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(6),e.hij(" ",t.totalRecords," ")}}const ze=function(){return{height:"6px"}};function He(o,i){1&o&&e._UZ(0,"p-progressBar",64),2&o&&e.Akn(e.DdM(2,ze))}function Ke(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"h4",65),e._uU(2),e.qZA(),e.TgZ(3,"input",66),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().guiaEmailToSend.email=a}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.guiaEmailToSend.identificadorDocumento),e.xp6(1),e.Q6J("ngModel",t.guiaEmailToSend.email)}}const We=function(){return{label:"Si",value:!0}},Xe=function(){return{label:"No",value:!1}},et=function(o,i){return[o,i]},tt=function(){return{width:"350px",minWidth:"200px"}};class y{constructor(i,t,n,a,u,_,b,P,w,J,R,Q,Y){this.route=i,this.router=t,this.despatchAdviceService=n,this.companyService=a,this.userService=u,this.loginService=_,this.datePipe=b,this.storageService=P,this.messageService=w,this.tdPipe=J,this.confirmationService=R,this.breadcrumbService=Q,this.dialogService=Y,this.guias=[],this.perPage=10,this.modoFiltroRangoFechas=!0,this.hideLoader=!1,this.puntosVenta=[],this.visibleSendemail=!1,this.loadingSendemail=!1}ngOnInit(){this.breadcrumbService.setItems((0,c.kn)(this.route));const i=new Date;this.filtroDesde=new Date(i.getFullYear(),i.getMonth(),1),this.filtroHasta=new Date(i.getFullYear(),i.getMonth()+1,0),this.es={firstDayOfWeek:1,dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],dayNamesMin:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],today:"Hoy",clear:"Borrar"},this.cols=[{field:"fechaEmision",header:"Fecha"},{field:"tipoComprobante",header:"Tipo"},{field:"serie",header:"Serie"},{field:"numero",header:"N\xfamero"},{field:"emisor",header:"Emisor"},{field:"denominacionDestinatario",header:"Cliente"},{field:"motivoTraslado",header:"Motivo"},{field:"tipoTransporte",header:"Transporte"},{field:"carga",header:"Carga"},{field:"fechaInicioTraslado",header:"Fecha traslado"},{field:"estado",header:"Anulado"},{field:"estadoSunat",header:"Est. Sunat"},{header:"Imprimir",isPrint:!0},{header:"Acciones",isActions:!0}],this.loadData(),this.updateTableHideLoader(),this.validarPuntoVenta(),this.imprimirTicket(),this.changeModoFiltroRangoFechas()}ngOnDestroy(){this.intervalUpdateTableHideLoader.unsubscribe()}imprimirTicket(){const i=this.despatchAdviceService.impresionComprobante;i&&(this.openPdf(i),this.despatchAdviceService.impresionComprobante=void 0)}resetAndRefreshTable(){this.tabla.reset(),this.refreshTable()}refreshTable(){this.lastLazyLoadEvent&&this.loadLazy(this.lastLazyLoadEvent)}changeModoFiltroRangoFechas(){if(this.modoFiltroRangoFechas){const i=new Date;this.filtroDesde=new Date(i.getFullYear(),i.getMonth(),1),this.filtroHasta=new Date(i.getFullYear(),i.getMonth()+1,0)}else this.filtroDesde=null,this.filtroHasta=null;this.resetAndRefreshTable()}validarPuntoVenta(){this.puntoVenta$.subscribe(i=>{this.filtroPuntoVenta=i,this.resetAndRefreshTable()})}loadLazy(i){this.lastLazyLoadEvent=i;const n=["pageNumber="+i.first/this.perPage,`perPage=${i.rows}`];this.filtroDesde&&n.push(`filtroDesde=${this.datePipe.transform(this.filtroDesde,"dd-MM-yyyy")}`),this.filtroHasta&&n.push(`filtroHasta=${this.datePipe.transform(this.filtroHasta,"dd-MM-yyyy")}`),this.filtroRuc&&n.push(`filtroRuc=${this.filtroRuc}`),this.filtroSerie&&n.push(`filtroSerie=${this.filtroSerie}`),this.filtroNumero&&n.push(`filtroNumero=${this.filtroNumero}`),this.filtroPuntoVenta&&n.push(`idPuntoVenta=${this.filtroPuntoVenta.id}`),i.sortOrder&&n.push(`sortOrder=${i.sortOrder}`),i.sortField&&n.push(`sortField=${i.sortField}`),this.despatchAdviceService.findAllPage(n.join("&")).subscribe(a=>{this.totalRecords=a.totalElements,this.guias=a.content})}updateTableHideLoader(){const i=(0,h.F)(1e3);this.intervalUpdateTableHideLoader=i.subscribe(t=>{const n=this.guias.filter(a=>"01"===a.estado||"07"===a.estado||"09"===a.estado);if(n.length>0){this.hideLoader=!0;const a=n.map(u=>u.id).join(",");this.despatchAdviceService.findByIds(a,this.hideLoader).pipe((0,D.UI)(u=>u)).subscribe(u=>{u.forEach(_=>{const b=this.guias.findIndex(P=>P.id===_.id);this.guias[b]=_})},u=>this.hideLoader=!1,()=>this.hideLoader=!1)}})}showToolTipFechaEmisionFormat(i){const t=new Date(i);return`Registrado el d\xeda ${this.datePipe.transform(t,"dd-MM-yyyy")} a las ${this.datePipe.transform(t," h:mm:ss a")}`}canSendSunat(i){return"N_ENV"===i.estadoSunat&&"MANUAL"!==i.tipoGuia}canGetStatus(i){return"ACEPT"!==i.estadoSunat&&"MANUAL"!==i.tipoGuia}loadData(){this.puntosVenta=this.loginService.getPuntosVentaUsuario()}downloadFile(i,t){this.despatchAdviceService.findFileStorageByIdAndTipoArchivo(i,t).subscribe(n=>{this.storageService.downloadFile(n)})}openPdf(i){this.despatchAdviceService.openPdf(i.id).then(t=>{this.dialogService.open(E.Z,{data:{ordersPrint:[{pdfPrint:t}]},header:"Comprobante de traslado",width:"800px"})})}showModalSendEmail(i){this.guiaEmailToSend={id:i.id,identificadorDocumento:i.identificadorDocumento},this.visibleSendemail=!0}goSendEmail(){this.despatchAdviceService.sendEmail({id:this.guiaEmailToSend.id,email:this.guiaEmailToSend.email}).subscribe(()=>this.messageService.add({severity:"success",summary:"Mensaje",detail:`Comprobante enviado a ${this.guiaEmailToSend.email}`})),this.visibleSendemail=!1}sendSunat(i){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de enviar la gu\xeda ${i.serie}-${i.numero}?`,accept:()=>{this.despatchAdviceService.enviarSunat({tipo:i.tipoComprobante,serie:i.serie,numero:i.numero}).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Comprobante enviado correctamente"}),this.tabla._filter()})},acceptLabel:"Si",rejectLabel:"No"})}getStatus(i){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de consultar el estado de la gu\xeda ${i.serie}-${i.numero}?`,accept:()=>{this.despatchAdviceService.getStatus(i.id).subscribe(()=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:"Consulta realizada correctamente."}),this.tabla._filter()})},acceptLabel:"Si",rejectLabel:"No"})}showNameCompany(i){return this.loginService.getUser().empresa.ruc===i.numeroDocumentoIdentidadRemitente?this.loginService.getUser().empresa.razonSocial:this.loginService.getUser().empresasAdjuntas.find(t=>t.ruc===i.numeroDocumentoIdentidadRemitente).razonSocial}}y.\u0275fac=function(i){return new(i||y)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(p.X),e.Y36(A.J),e.Y36(l.i),e.Y36(Z.r),e.Y36(g.uU),e.Y36(V.V),e.Y36(v.ez),e.Y36(L.B),e.Y36(v.YP),e.Y36(B.p),e.Y36(O.xA))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-ver-guias"]],viewQuery:function(i,t){if(1&i&&e.Gf(me,7),2&i){let n;e.iGM(n=e.CRH())&&(t.tabla=n.first)}},decls:41,vars:36,consts:[[1,"grid"],[1,"col-12"],[3,"submit"],[1,"grid","p-fluid"],[1,"col-4","md:col-3","lg:col-1"],[1,"label-form"],["name","filtroModoFecha",3,"options","ngModel","ngModelChange","onChange"],["class","col-6 md:col-3 lg:col-2",4,"ngIf"],[1,"col-6","md:col-3","lg:col-2"],["name","numeroDocumento","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],[1,"col-6","md:col-2","lg:col-1"],["name","serie","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["name","numero","type","text","pInputText","",2,"width","100%",3,"ngModel","input","ngModelChange"],["dataKey","id","placeholder","Seleccione...","optionLabel","nombre","name","puntoVenta",3,"ngModel","options","showClear","onChange","ngModelChange"],[1,"col-12",2,"padding-top","1.5rem"],["dataKey","id",3,"columns","value","lazy","paginator","rows","totalRecords","responsive","autoLayout","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","summary"],["header","Enviar por correo",3,"visible","modal","responsive","minY","baseZIndex","visibleChange"],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Enviar",1,"p-button-primary",3,"click"],["name","fechaInicio","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],["name","fechaFin","dateFormat","dd/mm/yy",3,"ngModel","locale","onSelect","ngModelChange"],[2,"width","3em"],[4,"ngFor","ngForOf"],["href","#",3,"pRowToggler"],[3,"ngClass"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["style","text-align: center",4,"ngIf"],[4,"ngSwitchCase"],["style","text-align: center",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-column-title"],[1,"m-0","text-xs","font-bold"],[1,"m-0","text-sm","txtOverflow",2,"max-width","130px",3,"pTooltip"],[1,"text-xs","m-0",2,"text-transform","uppercase",3,"pTooltip"],[2,"text-align","center"],["class","p-tag p-tag-rounded p-tag-danger",4,"ngIf"],["class","p-tag p-tag-rounded",4,"ngIf"],[1,"p-tag","p-tag-rounded","p-tag-danger"],[1,"p-tag","p-tag-rounded"],["class","p-tag p-tag-rounded",3,"pTooltip","ngClass",4,"ngIf"],[1,"p-tag","p-tag-rounded",3,"pTooltip","ngClass"],[1,"m-0","text-sm"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;","pTooltip","ENVIAR POR CORREO","class","fa fa-envelope",3,"click",4,"ngIf"],["pTooltip","ENVIAR POR CORREO",1,"fa","fa-envelope",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["pTooltip","Imprimir A4","type","button","pButton","","icon","fa fa-file-pdf-o",1,"p-button-secondary",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer",3,"click"],["style","margin-right: 0.2rem; margin-left: 0.2rem; margin-bottom: 4px;","type","button","pButton","","icon","fa fa-paper-plane-o","pTooltip","Enviar a Sunat",3,"click",4,"ngIf"],["style","margin-right: 0.2rem; margin-left: 0.2rem; margin-bottom: 4px;","type","button","pButton","","icon","fa fa-external-link","pTooltip","Consultar estado en sunat",3,"click",4,"ngIf"],["type","button","pButton","","icon","fa fa-code","pTooltip","XML",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],["style","margin-right: 0.2em; margin-left: 0.2em; cursor: pointer;margin-bottom: 4px;","pButton","","icon","pi pi-check","class","p-button-success","pTooltip","CDR",3,"click",4,"ngIf"],["type","button","pButton","","icon","fa fa-paper-plane-o","pTooltip","Enviar a Sunat",2,"margin-right","0.2rem","margin-left","0.2rem","margin-bottom","4px",3,"click"],["type","button","pButton","","icon","fa fa-external-link","pTooltip","Consultar estado en sunat",2,"margin-right","0.2rem","margin-left","0.2rem","margin-bottom","4px",3,"click"],["pButton","","icon","pi pi-check","pTooltip","CDR",1,"p-button-success",2,"margin-right","0.2em","margin-left","0.2em","cursor","pointer","margin-bottom","4px",3,"click"],[3,"guia"],[1,"flex","justify-content-between"],[1,"m-1"],["type","button","pButton","","icon","fa fa-plus","routerLink","/guia-remision/emitir-guia","label","Nueva gu\xeda"],["mode","indeterminate"],[2,"font-weight","normal"],["placeholder","Email","type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange"]],template:function(i,t){1&i&&(e.TgZ(0,"p-card"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.NdJ("submit",function(){return t.resetAndRefreshTable()}),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"por Fecha"),e.qZA(),e.TgZ(8,"p-selectButton",6),e.NdJ("ngModelChange",function(a){return t.modoFiltroRangoFechas=a})("onChange",function(){return t.changeModoFiltroRangoFechas()}),e.qZA(),e.qZA(),e.YNc(9,ce,4,5,"div",7),e.YNc(10,pe,4,5,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"label",5),e._uU(13,"Cliente"),e.qZA(),e.TgZ(14,"input",9),e.NdJ("input",function(){return t.resetAndRefreshTable()})("ngModelChange",function(a){return t.filtroRuc=a}),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"label",5),e._uU(17,"Serie"),e.qZA(),e.TgZ(18,"input",11),e.NdJ("input",function(){return t.resetAndRefreshTable()})("ngModelChange",function(a){return t.filtroSerie=a}),e.qZA(),e.qZA(),e.TgZ(19,"div",10),e.TgZ(20,"label",5),e._uU(21,"N\xfamero"),e.qZA(),e.TgZ(22,"input",12),e.NdJ("input",function(){return t.resetAndRefreshTable()})("ngModelChange",function(a){return t.filtroNumero=a}),e.qZA(),e.qZA(),e.TgZ(23,"div",8),e.TgZ(24,"label",5),e._uU(25,"Punto de venta"),e.qZA(),e.TgZ(26,"p-dropdown",13),e.NdJ("onChange",function(){return t.resetAndRefreshTable()})("ngModelChange",function(a){return t.filtroPuntoVenta=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",0),e.TgZ(28,"div",14),e.TgZ(29,"p-table",15,16),e.NdJ("onLazyLoad",function(a){return t.loadLazy(a)}),e.YNc(31,_e,3,1,"ng-template",17),e.YNc(32,ke,5,3,"ng-template",18),e.YNc(33,$e,3,2,"ng-template",19),e.YNc(34,je,7,1,"ng-template",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"p-dialog",21),e.NdJ("visibleChange",function(a){return t.visibleSendemail=a}),e.YNc(36,He,1,3,"p-progressBar",22),e.YNc(37,Ke,4,2,"div",23),e.TgZ(38,"p-footer"),e.TgZ(39,"button",24),e.NdJ("click",function(){return t.visibleSendemail=!1}),e.qZA(),e.TgZ(40,"button",25),e.NdJ("click",function(){return t.goSendEmail()}),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(8),e.Q6J("options",e.WLB(31,et,e.DdM(29,We),e.DdM(30,Xe)))("ngModel",t.modoFiltroRangoFechas),e.xp6(1),e.Q6J("ngIf",t.modoFiltroRangoFechas),e.xp6(1),e.Q6J("ngIf",t.modoFiltroRangoFechas),e.xp6(4),e.Q6J("ngModel",t.filtroRuc),e.xp6(4),e.Q6J("ngModel",t.filtroSerie),e.xp6(4),e.Q6J("ngModel",t.filtroNumero),e.xp6(4),e.Akn(e.DdM(34,G)),e.Q6J("ngModel",t.filtroPuntoVenta)("options",t.puntosVenta)("showClear",!0),e.xp6(3),e.Q6J("columns",t.cols)("value",t.guias)("lazy",!0)("paginator",!0)("rows",t.perPage)("totalRecords",t.totalRecords)("responsive",!0)("autoLayout",!0),e.xp6(6),e.Akn(e.DdM(35,tt)),e.Q6J("visible",t.visibleSendemail)("modal",!0)("responsive",!0)("minY",70)("baseZIndex",1e4),e.xp6(1),e.Q6J("ngIf",t.loadingSendemail),e.xp6(1),e.Q6J("ngIf",t.guiaEmailToSend))},directives:[k.Z,d._Y,d.JL,d.F,$.UN,d.JJ,d.On,g.O5,j.f,d.Fj,S.o,z.Lt,U.iA,v.jx,g.sg,U.jB,g.mk,g.RF,g.n9,H.u,g.ED,F.Hq,re,s.rH,K.V,se.k,v.$_],pipes:[L.B,de,ue,g.uU,le.U],styles:[""]}),(0,f.gn)([(0,q.Ph)(N.Z.getOffice)],y.prototype,"puntoVenta$",void 0);var ot=r(8929),W=r(7625),it=r(24394),nt=r(2385),at=r(1203),rt=r(12216),st=r(37590),dt=r(23763),ut=r(32579),lt=r(80422),mt=r(43724),ct=r(42841),pt=r(12145),gt=r(20657),_t=r(18872),ft=r(73407);const ht=["inputCodeScan"];function Tt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._uU(3),e.qZA(),e.TgZ(4,"div",19),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().deleteCodeScan(u)}),e._UZ(5,"i",20),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.Oqu(t)}}const Zt=function(){return{width:"50vw"}},vt=function(){return{width:"100%",height:"70vh"}};let At=(()=>{class o{constructor(t){this.messageService=t,this.text="",this.codesScan=[],this.displayModal=!1,this.onChange=n=>{},this.onTouched=n=>{}}get codesScanString(){return this.codesScan.length>0?`[${this.codesScan.join(", ")}]`:""}ngOnInit(){}openModal(){this.displayModal=!0,this.clearCodeScan()}clearCodeScan(){this.codeScan="",setTimeout(()=>{this.inputCodeScan.nativeElement.focus()},30)}keyPressInput(t){"Enter"===t.code&&(t.preventDefault(),this.addCodeScan(this.codeScan))}addCodeScan(t){t&&(this.codesScan.find(n=>n===t)?this.messageService.add({severity:"warn",summary:"Error",detail:`La serie ${t}, ya esta registrada`}):(this.codesScan.push(t.trim()),this.propagateChange()),this.clearCodeScan())}deleteCodeScan(t){const n=this.codesScan.findIndex(a=>a===t);this.codesScan.splice(n,1),this.propagateChange()}propagateChange(){const t=`${this.text} ${this.codesScanString}`;this.onChange(t),this.onTouched(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}writeValue(t){t&&(this.text=t,this.propagateChange())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-detalle-item-textbox"]],viewQuery:function(t,n){if(1&t&&e.Gf(ht,5),2&t){let a;e.iGM(a=e.CRH())&&(n.inputCodeScan=a.first)}},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:23,vars:14,consts:[[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Detalle",3,"ngModel","input","ngModelChange"],["pButton","","type","button","icon","pi pi-window-maximize",3,"click"],["appendTo","body","header","Detalle de item",3,"modal","visible","baseZIndex","visibleChange"],[2,"padding","10px"],[1,"grid","p-fluid"],[1,"col-12"],["for","detalle",1,"label-form"],["id","detalle","rows","2","pInputTextarea","",2,"width","100%",3,"ngModel","ngModelChange"],["for","series",1,"label-form"],["type","text","pInputText","","placeholder","Escaner c\xf3digo",3,"ngModel","ngModelChange","keypress"],["inputCodeScan",""],["id","series",1,"mt-2"],[1,"grid"],["class","col-4",4,"ngFor","ngForOf"],["type","button","pButton","","label","Cerrar",1,"p-button-secondary",3,"click"],[1,"col-4"],[1,"serie","flex-container"],[1,"flex-item"],[1,"flex-item",3,"click"],[1,"pi","pi-times","cursor-pointer"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"input",1),e.NdJ("input",function(){return n.propagateChange()})("ngModelChange",function(u){return n.text=u}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.openModal()}),e.qZA(),e.qZA(),e.TgZ(3,"p-dialog",3),e.NdJ("visibleChange",function(u){return n.displayModal=u}),e.TgZ(4,"p-scrollPanel"),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"label",7),e._uU(9,"Detalle"),e.qZA(),e.TgZ(10,"textarea",8),e.NdJ("ngModelChange",function(u){return n.text=u}),e.qZA(),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"label",9),e._uU(13,"Series"),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"input",10,11),e.NdJ("ngModelChange",function(u){return n.codeScan=u})("keypress",function(u){return n.keyPressInput(u)}),e.qZA(),e._uU(17),e.TgZ(18,"div",12),e.TgZ(19,"div",13),e.YNc(20,Tt,6,1,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"p-footer"),e.TgZ(22,"button",15),e.NdJ("click",function(){return n.displayModal=!1}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngModel",n.text),e.xp6(2),e.Akn(e.DdM(12,Zt)),e.Q6J("modal",!0)("visible",n.displayModal)("baseZIndex",2e4),e.xp6(1),e.Akn(e.DdM(13,vt)),e.xp6(6),e.Q6J("ngModel",n.text),e.xp6(5),e.Q6J("ngModel",n.codeScan),e.xp6(2),e.hij(" Nro. de series: ",n.codesScan.length," "),e.xp6(3),e.Q6J("ngForOf",n.codesScan))},directives:[d.Fj,S.o,d.JJ,d.On,F.Hq,K.V,_t.P,ft.g,g.sg,v.$_],styles:[".serie[_ngcontent-%COMP%]{padding:2px;border:1px solid #e2e2e2}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-content:stretch;align-items:flex-start}.flex-item[_ngcontent-%COMP%]{order:0;flex:0 1 auto;align-self:auto}"]}),o})();function Ct(o,i){1&o&&e._UZ(0,"p-message",82)}function It(o,i){1&o&&e._UZ(0,"p-message",83)}function xt(o,i){1&o&&e._UZ(0,"p-message",84)}function bt(o,i){1&o&&e._UZ(0,"p-message",85)}function Dt(o,i){1&o&&e._UZ(0,"p-message",86)}function yt(o,i){1&o&&e._UZ(0,"p-message",89)}function qt(o,i){if(1&o&&(e.TgZ(0,"div",5),e.TgZ(1,"label",6),e._uU(2,"Descripci\xf3n motivo traslado (*)"),e.qZA(),e._UZ(3,"input",87),e.YNc(4,yt,1,0,"p-message",88),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("descripcionMotivoTraslado").touched&&(null==t.mf.get("descripcionMotivoTraslado").errors?null:t.mf.get("descripcionMotivoTraslado").errors.required))}}function Nt(o,i){1&o&&e._UZ(0,"p-message",92)}function Pt(o,i){if(1&o&&(e.TgZ(0,"div",5),e.TgZ(1,"label",6),e._uU(2,"Numeraci\xf3n DAM"),e.qZA(),e._UZ(3,"input",90),e.YNc(4,Nt,1,0,"p-message",91),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("numeracionDAM").touched&&(null==t.mf.get("numeracionDAM").errors?null:t.mf.get("numeracionDAM").errors.required))}}function Vt(o,i){1&o&&e._UZ(0,"p-message",93)}function Ut(o,i){1&o&&e._UZ(0,"p-message",96)}function Mt(o,i){if(1&o&&(e.TgZ(0,"div",5),e.TgZ(1,"label",6),e._uU(2,"Serie a anular (*)"),e.qZA(),e._UZ(3,"input",94),e.YNc(4,Ut,1,0,"p-message",95),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("serieBaja").touched&&(null==t.mf.get("serieBaja").errors?null:t.mf.get("serieBaja").errors.required))}}function Et(o,i){1&o&&e._UZ(0,"p-message",84)}function St(o,i){if(1&o&&(e.TgZ(0,"div",5),e.TgZ(1,"label",6),e._uU(2,"N\xfamero a anular (*)"),e.qZA(),e._UZ(3,"input",97),e.YNc(4,Et,1,0,"p-message",12),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("numeroBaja").touched&&(null==t.mf.get("numeroBaja").errors?null:t.mf.get("numeroBaja").errors.required))}}function Ft(o,i){1&o&&e._UZ(0,"p-message",98)}function Gt(o,i){if(1&o&&e._uU(0),2&o){const t=i.$implicit;e.AsE(" ",t.numeroDocumento," - ",t.razonSocial," ")}}function wt(o,i){1&o&&e._UZ(0,"p-message",99)}function Jt(o,i){1&o&&e._UZ(0,"p-message",100)}function Rt(o,i){1&o&&e._UZ(0,"p-message",108)}function Qt(o,i){1&o&&e._UZ(0,"p-message",109)}function Yt(o,i){1&o&&e._UZ(0,"p-message",110)}const T=function(){return{width:"100%"}};function Lt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"p-fieldset",101),e.TgZ(1,"div",4),e.TgZ(2,"div",24),e.TgZ(3,"label",6),e._uU(4,"Tipo doc. proveedor"),e.TgZ(5,"span"),e._uU(6,"(*)"),e.qZA(),e.qZA(),e._UZ(7,"p-dropdown",102),e.YNc(8,Rt,1,0,"p-message",103),e.qZA(),e.TgZ(9,"div",24),e.TgZ(10,"label",6),e._uU(11,"Num. doc. proveedor (*)"),e.qZA(),e.TgZ(12,"input",104),e.NdJ("input",function(){e.CHM(t);const a=e.oxw();return a.changeNumeroDocumento(a.mf.get("numeroDocumentoIdentidadTercero").value,a.mf.get("tipoDocumentoIdentidadTercero").value,a.mf.get("denominacionTercero"))}),e.qZA(),e.YNc(13,Qt,1,0,"p-message",105),e.qZA(),e.TgZ(14,"div",24),e.TgZ(15,"label",6),e._uU(16,"Nombre proveedor (*)"),e.qZA(),e._UZ(17,"input",106),e.YNc(18,Yt,1,0,"p-message",107),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(7),e.Akn(e.DdM(6,T)),e.Q6J("options",t.listas.tiposDocumentoIdentidad),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoDocumentoIdentidadTercero").touched&&(null==t.mf.get("tipoDocumentoIdentidadTercero").errors?null:t.mf.get("tipoDocumentoIdentidadTercero").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("numeroDocumentoIdentidadTercero").touched&&(null==t.mf.get("numeroDocumentoIdentidadTercero").errors?null:t.mf.get("numeroDocumentoIdentidadTercero").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("denominacionTercero").touched&&(null==t.mf.get("denominacionTercero").errors?null:t.mf.get("denominacionTercero").errors.required))}}function Bt(o,i){if(1&o&&e._uU(0),2&o){const t=i.$implicit;e.AsE(" ",t.codigoCiudad," - ",t.ciudad," ")}}function Ot(o,i){1&o&&e._UZ(0,"p-message",111)}function kt(o,i){1&o&&e._UZ(0,"p-message",112)}function $t(o,i){1&o&&e._UZ(0,"p-message",113)}function jt(o,i){if(1&o&&e._uU(0),2&o){const t=i.$implicit;e.AsE(" ",t.codigoCiudad," - ",t.ciudad," ")}}function zt(o,i){1&o&&e._UZ(0,"p-message",114)}function Ht(o,i){1&o&&e._UZ(0,"p-message",112)}function Kt(o,i){1&o&&e._UZ(0,"p-message",115)}function Wt(o,i){1&o&&e._UZ(0,"p-message",118)}function Xt(o,i){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"label",6),e._uU(2,"C\xf3digo puerto (*)"),e.qZA(),e._UZ(3,"input",116),e.YNc(4,Wt,1,0,"p-message",117),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("codigoPuerto").touched&&(null==t.mf.get("codigoPuerto").errors?null:t.mf.get("codigoPuerto").errors.required))}}function eo(o,i){1&o&&e._UZ(0,"p-message",121)}function to(o,i){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"label",6),e._uU(2,"N\xfamero contenedor (*)"),e.qZA(),e._UZ(3,"input",119),e.YNc(4,eo,1,0,"p-message",120),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("numeroContenedor").touched&&(null==t.mf.get("numeroContenedor").errors?null:t.mf.get("numeroContenedor").errors.required))}}function oo(o,i){1&o&&e._UZ(0,"p-message",124)}function io(o,i){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"label",6),e._uU(2,"N\xfamero bultos (*)"),e.qZA(),e._UZ(3,"input",122),e.YNc(4,oo,1,0,"p-message",123),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.mf.get("numeroBultos").touched&&(null==t.mf.get("numeroBultos").errors?null:t.mf.get("numeroBultos").errors.required))}}function no(o,i){1&o&&e._UZ(0,"p-message",125)}function ao(o,i){1&o&&e._UZ(0,"p-message",126)}function ro(o,i){1&o&&e._UZ(0,"p-message",127)}function so(o,i){1&o&&e._UZ(0,"p-message",85)}function uo(o,i){1&o&&e._UZ(0,"p-message",128)}function lo(o,i){1&o&&e._UZ(0,"p-message",129)}function mo(o,i){1&o&&e._UZ(0,"p-message",130)}function co(o,i){1&o&&e._UZ(0,"p-message",131)}function po(o,i){1&o&&e._UZ(0,"p-message",132)}function go(o,i){1&o&&e._UZ(0,"p-message",133)}function _o(o,i){1&o&&e._UZ(0,"p-message",134)}function fo(o,i){1&o&&e._UZ(0,"p-message",135)}function ho(o,i){1&o&&e._UZ(0,"p-message",85)}function To(o,i){1&o&&e._UZ(0,"p-message",136)}function Zo(o,i){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"C\xf3digo"),e.qZA(),e.TgZ(3,"th",137),e._uU(4,"Art\xedculo"),e.qZA(),e.TgZ(5,"th",138),e._uU(6,"Detalle"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Unidad"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Cantidad"),e.qZA(),e.TgZ(11,"th",80),e._uU(12,"Acciones"),e.qZA(),e.qZA())}function vo(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.codigo," - ")}}function Ao(o,i){if(1&o&&(e.YNc(0,vo,2,1,"span",152),e._uU(1)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.codigo),e.xp6(1),e.hij("",t.nombre," ")}}function Co(o,i){1&o&&e._UZ(0,"p-message",153)}function Io(o,i){1&o&&e._UZ(0,"p-message",154)}function xo(o,i){1&o&&e._UZ(0,"p-message",155)}function bo(o,i){1&o&&e._UZ(0,"p-message",156)}function Do(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr",139),e.TgZ(1,"td"),e.TgZ(2,"span",140),e._uU(3,"C\xf3digo"),e.qZA(),e._UZ(4,"input",141),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"span",140),e._uU(7,"Art\xedculo"),e.qZA(),e.TgZ(8,"p-autoComplete",142),e.NdJ("onSelect",function(a){const _=e.CHM(t).rowIndex;return e.oxw().onSelectProducto(a,_)})("completeMethod",function(a){return e.CHM(t),e.oxw().filterProductByCodigoAndNombre(a)}),e.YNc(9,Ao,2,2,"ng-template",28),e.qZA(),e.YNc(10,Co,1,0,"p-message",143),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",140),e._uU(13,"Detalle"),e.qZA(),e._UZ(14,"app-detalle-item-textbox",144),e.qZA(),e.TgZ(15,"td"),e.TgZ(16,"span",140),e._uU(17,"Unidad"),e.qZA(),e._UZ(18,"p-dropdown",145),e.YNc(19,Io,1,0,"p-message",146),e.qZA(),e.TgZ(20,"td"),e.TgZ(21,"span",140),e._uU(22,"Cantidad"),e.qZA(),e._UZ(23,"input",147),e.YNc(24,xo,1,0,"p-message",148),e.YNc(25,bo,1,0,"p-message",149),e.qZA(),e.TgZ(26,"td",80),e.TgZ(27,"span",140),e._uU(28,"Acciones"),e.qZA(),e.TgZ(29,"div",150),e.TgZ(30,"button",151),e.NdJ("click",function(){const u=e.CHM(t).rowIndex;return e.oxw().deleteItem(u)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.rowIndex,n=i.$implicit,a=e.oxw();e.Q6J("formGroupName",t),e.xp6(8),e.Q6J("suggestions",a.filteredProducts)("size",30)("minLength",1),e.xp6(2),e.Q6J("ngIf",n.get("descripcion").touched&&(null==n.get("descripcion").errors?null:n.get("descripcion").errors.required)),e.xp6(8),e.Akn(e.DdM(11,T)),e.Q6J("options",a.unidades),e.xp6(1),e.Q6J("ngIf",n.get("codigoUnidadMedida").touched&&(null==n.get("codigoUnidadMedida").errors?null:n.get("codigoUnidadMedida").errors.required)),e.xp6(5),e.Q6J("ngIf",n.get("cantidad").touched&&(null==n.get("cantidad").errors?null:n.get("cantidad").errors.required)),e.xp6(1),e.Q6J("ngIf",n.get("cantidad").touched&&(null==n.get("cantidad").errors?null:n.get("cantidad").errors.min))}}function yo(o,i){1&o&&e._UZ(0,"p-message",157)}const qo=function(){return{width:"150px"}};class C{constructor(i,t,n,a,u,_,b,P,w,J,R,Q,Y,Eo,So){this.listas=i,this.fb=t,this.consultaDocumentosService=n,this.ticketService=a,this.productService=u,this.customerService=_,this.despatchAdviceService=b,this.datePipe=P,this.router=w,this.loginService=J,this.messageService=R,this.serieService=Q,this.route=Y,this.breadcrumbService=Eo,this.inventoryTransferService=So,this.unsubscribe$=new ot.xQ,this.guiaRemision={items:[]},this.configCompany={},this.series=[],this.filteredProducts=[],this.filteredCustomers=[],this.filteredCities=[]}ngOnInit(){this.breadcrumbService.setItems((0,c.kn)(this.route)),this.configCompany$.pipe((0,W.R)(this.unsubscribe$)).subscribe(i=>{this.configCompany=i,this.unidades=i.unidades.map(t=>({label:t.descripcion,value:t.codigo})),this.builderForm(),this.validarPuntoVenta(),this.loadComprobanteFromGuia(),this.loadTransfer()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}get tipoComprobante(){return this.mf.value.tipoComprobante}builderForm(){this.mf=this.fb.group({serie:[void 0,[d.kI.required]],numero:[void 0,[d.kI.required]],fechaEmision:[new Date,[d.kI.required]],motivoTraslado:[m.fw.VENTA,[d.kI.required]],descripcionMotivoTraslado:["",[]],numeracionDAM:["",[]],tipoDocumentoIdentidadDestinatario:["6",[d.kI.required]],numeroDocumentoIdentidadDestinatario:["",[d.kI.required]],denominacionDestinatario:[void 0,[d.kI.required]],tipoDocumentoIdentidadTercero:["6",[]],numeroDocumentoIdentidadTercero:["",[]],denominacionTercero:[void 0,[]],tipoTransporte:[m.o0.TRANSPORTE_PUBLICO,[d.kI.required]],tipoComprobante:[this.configCompany.tipoGuiaPorDefecto,[d.kI.required]],tipoDocumentoIdentidadTransportista:["",[]],numeroDocumentoIdentidadTransportista:["",[]],denominacionTransportista:["",[]],numeroPlacaVehiculo:["",[]],tipoDocumentoIdentidadConductor:["",[]],numeroLicencia:["",[]],numeroDocumentoIdentidadConductor:["",[]],fechaInicioTraslado:[new Date,[d.kI.required]],pesoTotalBrutoBienes:["",[d.kI.required]],ubigeoPuntoPartida:[null,[d.kI.required,c.de]],direccionPuntoPartida:["",[d.kI.required]],ubigeoPuntoLlegada:[null,[d.kI.required,c.de]],direccionPuntoLlegada:["",[d.kI.required]],codigoPuerto:["",[]],numeroContenedor:["",[]],numeroBultos:["",[]],items:this.fb.array([],(0,c.eK)(1)),anularGuia:[!1,[]],serieBaja:["",[]],numeroBaja:["",[]],tipoComprobanteBaja:["",[]],identificadorDocumentoRelacionado:[void 0,[]],codigoTipoDocumentoRelacionado:["01",[]],descripcionDocumentoRelacionado:[void 0,[]],rucDocumentoRelacionado:[void 0,[]],observaciones:["",[]]}),this.loadAditionalsTransporteFormValidate(),this.loadAditionalsImportacionFormValidate()}loadAditionalsTransporteFormValidate(){this.mf.controls.tipoDocumentoIdentidadTransportista.clearValidators(),this.mf.controls.numeroDocumentoIdentidadTransportista.clearValidators(),this.mf.controls.denominacionTransportista.clearValidators(),this.mf.controls.numeroPlacaVehiculo.clearValidators(),this.mf.controls.tipoDocumentoIdentidadConductor.clearValidators(),this.mf.controls.numeroDocumentoIdentidadConductor.clearValidators(),this.mf.controls.numeroLicencia.clearValidators(),this.mf.controls.tipoDocumentoIdentidadTransportista.updateValueAndValidity(),this.mf.controls.numeroDocumentoIdentidadTransportista.updateValueAndValidity(),this.mf.controls.denominacionTransportista.updateValueAndValidity(),this.mf.controls.numeroPlacaVehiculo.updateValueAndValidity(),this.mf.controls.tipoDocumentoIdentidadConductor.updateValueAndValidity(),this.mf.controls.numeroDocumentoIdentidadConductor.updateValueAndValidity(),this.mf.controls.numeroLicencia.updateValueAndValidity(),this.mf.controls.tipoDocumentoIdentidadTransportista.setValue(""),this.mf.controls.numeroDocumentoIdentidadTransportista.setValue(""),this.mf.controls.denominacionTransportista.setValue(""),this.mf.controls.numeroPlacaVehiculo.setValue(""),this.mf.controls.tipoDocumentoIdentidadConductor.setValue(""),this.mf.controls.numeroDocumentoIdentidadConductor.setValue(""),this.mf.controls.numeroLicencia.setValue(""),this.getValueForm("tipoTransporte")===m.o0.TRANSPORTE_PUBLICO?(this.mf.controls.tipoDocumentoIdentidadTransportista.setValidators([d.kI.required]),this.mf.controls.tipoDocumentoIdentidadTransportista.updateValueAndValidity(),this.mf.controls.tipoDocumentoIdentidadTransportista.setValue("6"),this.mf.controls.numeroDocumentoIdentidadTransportista.setValidators([d.kI.required]),this.mf.controls.numeroDocumentoIdentidadTransportista.updateValueAndValidity(),this.mf.controls.denominacionTransportista.setValidators([d.kI.required]),this.mf.controls.denominacionTransportista.updateValueAndValidity()):(this.mf.controls.tipoDocumentoIdentidadConductor.setValidators([d.kI.required]),this.mf.controls.tipoDocumentoIdentidadConductor.updateValueAndValidity(),this.mf.controls.tipoDocumentoIdentidadConductor.setValue("1"),this.mf.controls.numeroLicencia.setValidators([d.kI.required,d.kI.minLength(9),d.kI.maxLength(10)]),this.mf.controls.numeroLicencia.updateValueAndValidity(),this.mf.controls.numeroPlacaVehiculo.setValidators([d.kI.required,d.kI.minLength(6),d.kI.maxLength(8)]),this.mf.controls.numeroPlacaVehiculo.updateValueAndValidity(),this.mf.controls.numeroDocumentoIdentidadConductor.setValidators([d.kI.required]),this.mf.controls.numeroDocumentoIdentidadConductor.updateValueAndValidity())}changeMotivoTraslado(){const i=this.mf.get("motivoTraslado").value;["02","04"].includes(i)?this.mf.patchValue({tipoDocumentoIdentidadDestinatario:"6",numeroDocumentoIdentidadDestinatario:{numeroDocumento:this.loginService.getUser().empresa.ruc},denominacionDestinatario:this.loginService.getUser().empresa.razonSocial}):this.mf.patchValue({tipoDocumentoIdentidadDestinatario:"6",numeroDocumentoIdentidadDestinatario:"",denominacionDestinatario:""}),this.loadAditionalsImportacionFormValidate()}loadAditionalsImportacionFormValidate(){this.mf.controls.tipoDocumentoIdentidadTercero.clearValidators(),this.mf.controls.numeroDocumentoIdentidadTercero.clearValidators(),this.mf.controls.denominacionTercero.clearValidators(),this.mf.controls.codigoPuerto.clearValidators(),this.mf.controls.numeroContenedor.clearValidators(),this.mf.controls.numeroBultos.clearValidators(),this.mf.controls.tipoDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.numeroDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.denominacionTercero.updateValueAndValidity(),this.mf.controls.codigoPuerto.updateValueAndValidity(),this.mf.controls.numeroContenedor.updateValueAndValidity(),this.mf.controls.numeroBultos.updateValueAndValidity(),this.mf.patchValue({tipoDocumentoIdentidadTercero:null,numeroDocumentoIdentidadTercero:null,denominacionTercero:null,codigoPuerto:null,numeroContenedor:null,numeroBultos:null});const i=this.getValueForm("motivoTraslado");i===m.fw.IMPORTACION||i===m.fw.COMPRA||i===m.fw.TRASLADO_ESTABLECIMIENTOS_MISMA_EMPRESA?(this.mf.controls.tipoDocumentoIdentidadTercero.setValidators([d.kI.required]),this.mf.controls.tipoDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.tipoDocumentoIdentidadTercero.setValue("6"),this.mf.controls.numeroDocumentoIdentidadTercero.setValidators([d.kI.required]),this.mf.controls.numeroDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.denominacionTercero.setValidators([d.kI.required]),this.mf.controls.denominacionTercero.updateValueAndValidity(),i===m.fw.IMPORTACION&&(this.mf.controls.codigoPuerto.setValidators([d.kI.required]),this.mf.controls.codigoPuerto.updateValueAndValidity(),this.mf.controls.numeroContenedor.setValidators([d.kI.required]),this.mf.controls.numeroContenedor.updateValueAndValidity(),this.mf.controls.numeroBultos.setValidators([d.kI.required]),this.mf.controls.numeroBultos.updateValueAndValidity())):(this.mf.controls.tipoDocumentoIdentidadTercero.setValidators([]),this.mf.controls.tipoDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.numeroDocumentoIdentidadTercero.setValidators([]),this.mf.controls.numeroDocumentoIdentidadTercero.updateValueAndValidity(),this.mf.controls.denominacionTercero.setValidators([]),this.mf.controls.denominacionTercero.updateValueAndValidity(),this.mf.controls.codigoPuerto.setValidators([]),this.mf.controls.codigoPuerto.updateValueAndValidity(),this.mf.controls.numeroContenedor.setValidators([]),this.mf.controls.numeroContenedor.updateValueAndValidity(),this.mf.controls.numeroBultos.setValidators([]),this.mf.controls.numeroBultos.updateValueAndValidity())}formToModel(){let i,t;"object"==typeof this.mf.value.numeroDocumentoIdentidadDestinatario?(i=this.mf.value.numeroDocumentoIdentidadDestinatario,t=i.numeroDocumento):t=this.mf.value.numeroDocumentoIdentidadDestinatario,this.guiaRemision.tipoComprobante=this.mf.value.tipoComprobante,this.guiaRemision.identificadorDocumentoRelacionado=this.mf.value.identificadorDocumentoRelacionado,this.guiaRemision.codigoTipoDocumentoRelacionado=this.mf.value.codigoTipoDocumentoRelacionado,this.guiaRemision.descripcionDocumentoRelacionado=this.mf.value.descripcionDocumentoRelacionado,this.guiaRemision.rucDocumentoRelacionado=this.mf.value.rucDocumentoRelacionado,this.guiaRemision.serie=this.mf.value.serie,this.guiaRemision.numero=this.mf.value.numero,this.guiaRemision.fechaEmision=this.datePipe.transform(this.mf.value.fechaEmision,"yyyy-MM-dd"),this.guiaRemision.motivoTraslado=this.mf.value.motivoTraslado,this.guiaRemision.motivoTraslado===m.fw.OTROS&&(this.guiaRemision.descripcionMotivoTraslado=this.mf.value.descripcionMotivoTraslado),this.guiaRemision.numeracionDAM=this.mf.value.numeracionDAM,this.guiaRemision.tipoDocumentoIdentidadTercero=this.mf.value.tipoDocumentoIdentidadTercero,this.guiaRemision.numeroDocumentoIdentidadTercero=this.mf.value.numeroDocumentoIdentidadTercero,this.guiaRemision.denominacionTercero=this.mf.value.denominacionTercero,this.guiaRemision.codigoPuerto=this.mf.value.codigoPuerto,this.guiaRemision.numeroContenedor=this.mf.value.numeroContenedor,this.guiaRemision.numeroBultos=this.mf.value.numeroBultos,this.guiaRemision.tipoDocumentoIdentidadDestinatario=this.mf.value.tipoDocumentoIdentidadDestinatario,this.guiaRemision.numeroDocumentoIdentidadDestinatario=t,this.guiaRemision.denominacionDestinatario=this.mf.value.denominacionDestinatario,this.guiaRemision.tipoTransporte=this.mf.value.tipoTransporte,this.guiaRemision.tipoTransporte===m.o0.TRANSPORTE_PUBLICO?(this.guiaRemision.tipoDocumentoIdentidadTransportista=this.mf.value.tipoDocumentoIdentidadTransportista,this.guiaRemision.numeroDocumentoIdentidadTransportista=this.mf.value.numeroDocumentoIdentidadTransportista,this.guiaRemision.denominacionTransportista=this.mf.value.denominacionTransportista):(this.guiaRemision.numeroPlacaVehiculo=this.mf.value.numeroPlacaVehiculo,this.guiaRemision.numeroLicencia=this.mf.value.numeroLicencia,this.guiaRemision.tipoDocumentoIdentidadConductor=this.mf.value.tipoDocumentoIdentidadConductor,this.guiaRemision.numeroDocumentoIdentidadConductor=this.mf.value.numeroDocumentoIdentidadConductor),this.guiaRemision.indicadorTransbordoProgramado=!1,this.guiaRemision.fechaInicioTraslado=this.datePipe.transform(this.mf.value.fechaInicioTraslado,"yyyy-MM-dd"),this.guiaRemision.pesoTotalBrutoBienes=this.mf.value.pesoTotalBrutoBienes,this.guiaRemision.unidadMedidaPesoBruto="KGM",this.guiaRemision.ubigeoPuntoPartida=this.mf.value.ubigeoPuntoPartida.codigoCiudad,this.guiaRemision.ubigeoDetallePuntoPartida=this.mf.value.ubigeoPuntoPartida.ciudad,this.guiaRemision.direccionPuntoPartida=this.mf.value.direccionPuntoPartida,this.guiaRemision.ubigeoPuntoLlegada=this.mf.value.ubigeoPuntoLlegada.codigoCiudad,this.guiaRemision.ubigeoDetallePuntoLlegada=this.mf.value.ubigeoPuntoLlegada.ciudad,this.guiaRemision.direccionPuntoLlegada=this.mf.value.direccionPuntoLlegada,this.guiaRemision.departamentoPuntoPartida=this.mf.value.ubigeoPuntoPartida.nombreDepartamento,this.guiaRemision.provinciaPuntoPartida=this.mf.value.ubigeoPuntoPartida.nombreProvincia,this.guiaRemision.distritoPuntoPartida=this.mf.value.ubigeoPuntoPartida.nombreDistrito,this.guiaRemision.departamentoPuntoLlegada=this.mf.value.ubigeoPuntoLlegada.nombreDepartamento,this.guiaRemision.provinciaPuntoLlegada=this.mf.value.ubigeoPuntoLlegada.nombreProvincia,this.guiaRemision.distritoPuntoLlegada=this.mf.value.ubigeoPuntoLlegada.nombreDistrito,this.guiaRemision.tipoGuia=this.mf.value.tipoGuia,this.guiaRemision.observaciones=this.mf.value.observaciones,this.mf.value.anularGuia&&(this.guiaRemision.serieBaja=this.mf.value.serieBaja,this.guiaRemision.numeroBaja=this.mf.value.numeroBaja,this.guiaRemision.tipoComprobanteBaja="09"),this.guiaRemision.items=[],this.mf.get("items").controls.forEach(a=>{let u,_;"object"==typeof a.value.descripcion?(u=a.value.descripcion,_=u.nombre):_=a.value.descripcion,this.guiaRemision.items.push({codigoUnidadMedida:a.value.codigoUnidadMedida,cantidad:a.value.cantidad,descripcion:_,detalle:a.value.detalle,producto:u,codigo:a.value.codigo})})}changeNumeroDocumento(i,t,n){"6"!==t||11!==i.length?"1"!==t||8!==i.length?n.setValue(""):this.consultaDocumentosService.findDocument(i,!0).subscribe(a=>{n.setValue(a.nombre_completo)}):this.consultaDocumentosService.findDocument(i,!1).subscribe(a=>{n.setValue(a.nombre_o_razon_social)})}addItem(i){this.mf.get("items").push(i?this.createItemForm(i):this.createItemForm())}get existItems(){return 0!==this.mf.get("items").controls.length}deleteItem(i){const t=this.mf.get("items");t.length>0&&t.removeAt(i)}get modelFormItems(){return this.mf.get("items")}createItemForm(i){let t="",n="",a="NIU",u=1;return i&&(t=i.codigoProducto,n=i.descripcion,a=i.codigoUnidadMedida,u=i.cantidad),this.fb.group({codigo:[t,[]],descripcion:[n,[d.kI.required]],detalle:["",[]],codigoUnidadMedida:[a,[d.kI.required]],cantidad:[u,[d.kI.required,d.kI.min(.01)]]})}filterCustomerByNumeroDocumento(i){const t=this.getValueForm("tipoDocumentoIdentidadDestinatario");t&&this.customerService.findAllC(["paginacion=false",`tipoDocumento=${t}`,`filtro=${i.query}`].join("&")).subscribe(u=>{this.filteredCustomers=u})}filterCitiesByNombre(i){this.consultaDocumentosService.findCity(i.query).subscribe(n=>{this.filteredCities=n})}onSelectCiudadPuntoPartida(i){this.mf.patchValue({ubigeoPuntoPartida:i})}onSelectCiudadPuntoLlegada(i){this.mf.patchValue({ubigeoPuntoLlegada:i})}keyUpNumeroDocumentoDestinatario(i){const t=this.getValueForm("tipoDocumentoIdentidadDestinatario"),n=this.getValueForm("numeroDocumentoIdentidadDestinatario");this.keyUpNumeroDocumento(i,t,n)}onSelectDestinatario(i){this.mf.patchValue({denominacionDestinatario:i.razonSocial})}keyUpNumeroDocumento(i,t,n){if(t)switch(t){case"6":13!==i.keyCode&&(11===n.length?(0===this.filteredCustomers.length||!this.filteredCustomers.filter(a=>a.numeroDocumento=n))&&this.buscarRucODni("6",n):this.mf.patchValue({denominacionDestinatario:""}));break;case"1":13!==i.keyCode&&(8===n.length?(0===this.filteredCustomers.length||!this.filteredCustomers.filter(a=>a.numeroDocumento=n))&&this.buscarRucODni("1",n):this.mf.patchValue({denominacionDestinatario:""}))}}buscarRucODni(i,t){"6"===i?this.consultaDocumentosService.findDocument(t,!1).subscribe(n=>{this.patchValueForm("denominacionDestinatario",n.nombre_o_razon_social)}):this.consultaDocumentosService.findDocument(t,!0).subscribe(n=>{this.patchValueForm("denominacionDestinatario",n.nombre_completo)})}getValueForm(i){return this.mf.get(i).value}patchValueForm(i,t){const n={};n[i]=t,this.mf.patchValue(n)}filterProductByCodigoAndNombre(i){const t=[`filterGlobal=${i.query.replace("&","%26")}`,"paginacion=false","limit=10"];this.productService.findAllList(t.join("&")).subscribe(n=>{this.filteredProducts=n})}onSelectProducto(i,t){const n=this.mf.get("items");i.codigo&&n.at(t).patchValue({codigo:i.codigo}),i.unidad&&n.at(t).patchValue({codigoUnidadMedida:i.unidad.codigo})}registrarGuia(){(0,c.c2)(this.mf),this.mf.valid&&(this.formToModel(),this.despatchAdviceService.save(this.guiaRemision).subscribe(i=>{this.messageService.add({severity:"success",summary:"Mensaje",detail:i.mensaje}),this.despatchAdviceService.impresionComprobante=i.comprobante,this.router.navigateByUrl("/guia-remision/ver-guias")}))}validarPuntoVenta(){this.puntoVenta$.pipe((0,W.R)(this.unsubscribe$)).subscribe(i=>{this.puntoVenta=i,this.guiaRemision.puntoVenta=this.puntoVenta,this.getSeries()})}onSelectSerie(){this.getNextNumber(this.getValueForm("serie"))}getSeries(){this.serieService.findAllByPuntoVentaAndTipoComprobante(this.puntoVenta.id,this.tipoComprobante).subscribe(t=>{if(this.series=[],t.forEach(n=>{this.series.push({label:n.numero,value:n.numero})}),this.series.length>0){const n=this.series[0].value;this.patchValueForm("serie",n),this.getNextNumber(n)}})}getNextNumber(i){this.despatchAdviceService.getNextNumber(i).subscribe(t=>{this.patchValueForm("numero",t)})}loadTransfer(){const i=this.route.snapshot.params.idTransfer;i&&this.inventoryTransferService.findById(i).subscribe(t=>{this.mf.patchValue({motivoTraslado:m.fw.TRASLADO_ESTABLECIMIENTOS_MISMA_EMPRESA}),t.items.forEach(n=>{this.addItem({codigoProducto:n.producto.codigo,descripcion:{nombre:n.producto.nombre},codigoUnidadMedida:n.producto.unidad.codigo,cantidad:n.cantidadSolicitud})})})}loadComprobanteFromGuia(){const i=this.route.snapshot.params.idTicket;i&&this.ticketService.findById(i).subscribe(t=>{this.mf.patchValue({tipoDocumentoIdentidadDestinatario:t.tipoDocumentoReceptor,numeroDocumentoIdentidadDestinatario:{numeroDocumento:t.numeroDocumentoReceptor},direccionPuntoPartida:t.puntoVenta?t.puntoVenta.direccion:"",direccionPuntoLlegada:t.cliente&&t.cliente.direccionCompleta?t.cliente.direccionCompleta:"",denominacionDestinatario:t.denominacionReceptor,identificadorDocumentoRelacionado:`${t.serie}-${t.numero}`,rucDocumentoRelacionado:t.rucEmisor,descripcionDocumentoRelacionado:"Comprobante de venta",codigoTipoDocumentoRelacionado:t.tipoComprobante}),t.items.forEach(n=>{this.addItem({codigoProducto:n.codigoProducto,descripcion:{nombre:n.descripcion},codigoUnidadMedida:n.codigoUnidadMedida,cantidad:n.cantidad})})})}changeAnularGuia(){this.mf.get("anularGuia").value?(this.mf.get("serieBaja").setValidators([d.kI.required]),this.mf.get("numeroBaja").setValidators([d.kI.required])):(this.mf.get("serieBaja").clearValidators(),this.mf.get("numeroBaja").clearValidators())}}C.\u0275fac=function(i){return new(i||C)(e.Y36(it.E),e.Y36(d.qu),e.Y36(nt.W),e.Y36(at.w),e.Y36(rt.M),e.Y36(st.v),e.Y36(p.X),e.Y36(g.uU),e.Y36(s.F0),e.Y36(Z.r),e.Y36(v.ez),e.Y36(dt.E),e.Y36(s.gz),e.Y36(B.p),e.Y36(ut.m))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-emitir-guia"]],decls:201,vars:97,consts:[["novalidate","",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["legend","Datos generales"],[1,"grid"],[1,"col-12","md:col-3"],[1,"label-form"],["formControlName","tipoComprobante",3,"options","onChange"],["severity","error","text","Ingrese tipo de Emis\xedon",4,"ngIf"],["formControlName","serie",3,"options","onChange"],["severity","error","text","Ingrese Serie",4,"ngIf"],["placeholder","N\xfamero","formControlName","numero","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese n\xfamero",4,"ngIf"],["placeholder","Fecha de emisi\xf3n","formControlName","fechaEmision","dateFormat","dd/mm/yy",3,"locale"],["severity","error","text","Ingrese fecha",4,"ngIf"],["formControlName","tipoTransporte",3,"options","onChange"],["severity","error","text","Ingrese tipo de transporte",4,"ngIf"],["formControlName","motivoTraslado",3,"options","onChange"],["class","col-12 md:col-3",4,"ngIf"],["onLabel","Si","offLabel","No","formControlName","anularGuia",3,"onChange"],["severity","error","text","Ingrese valor",4,"ngIf"],[1,"col-12"],["formControlName","observaciones","type","text","placeholder","Observaci\xf3n","pInputText","",2,"width","100%"],["legend","Destinatario"],[1,"col-12","md:col-4"],["formControlName","tipoDocumentoIdentidadDestinatario",3,"options"],["severity","error","text","Ingrese tipo de documento del destinatario",4,"ngIf"],["field","numeroDocumento","formControlName","numeroDocumentoIdentidadDestinatario","placeholder","N\xfamero de documento",3,"suggestions","size","minLength","onKeyUp","onSelect","completeMethod"],["pTemplate","item"],["severity","error","text","Ingrese n\xfamero de documento del destinatario",4,"ngIf"],["formControlName","denominacionDestinatario","type","text","placeholder","Denominaci\xf3n del destinatario","pInputText","",2,"width","100%"],["severity","error","text","Ingrese denominaci\xf3n del destinatario",4,"ngIf"],["legend","Proveedor","class","m-4",4,"ngIf"],["legend","Documento relacionado",1,"m-4"],["placeholder","Seleccine tipo","formControlName","codigoTipoDocumentoRelacionado",3,"options"],["formControlName","identificadorDocumentoRelacionado","type","text","placeholder","Serie/N\xfamero","pInputText","",2,"width","100%"],["formControlName","descripcionDocumentoRelacionado","type","text","placeholder","Descripci\xf3n","pInputText","",2,"width","100%"],["formControlName","rucDocumentoRelacionado","type","text","placeholder","Ruc de documento relacionado","pInputText","",2,"width","100%"],["legend","Punto de partida y punto de llegada"],["field","descripcion","formControlName","ubigeoPuntoPartida","placeholder","Ubigeo punto de partida",3,"suggestions","size","minLength","onSelect","completeMethod"],["severity","error","text","Ingrese ubigeo punto partida",4,"ngIf"],["severity","error","text","Ciudad de ubigeo inv\xe1lido",4,"ngIf"],["placeholder","Direcci\xf3n punto de partida","formControlName","direccionPuntoPartida","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese direcci\xf3n punto partida",4,"ngIf"],["field","descripcion","formControlName","ubigeoPuntoLlegada","placeholder","Ubigeo punto de llegada",3,"suggestions","size","minLength","onSelect","completeMethod"],["severity","error","text","Ingrese ubigeo punto llegada",4,"ngIf"],["placeholder","Direcci\xf3n punto de llegada","formControlName","direccionPuntoLlegada","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese direcci\xf3n punto llegada",4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],[1,"col-12","md:col-6",3,"hidden"],["legend","Datos de transporte p\xfablico"],["formControlName","tipoDocumentoIdentidadTransportista",3,"options"],["severity","error","text","Ingrese tipo de documento del transportista",4,"ngIf"],["formControlName","numeroDocumentoIdentidadTransportista","type","text","placeholder","N\xfamero de documento","pInputText","",2,"width","100%",3,"input"],["severity","error","text","Ingrese n\xfamero de documento del transportista",4,"ngIf"],["formControlName","denominacionTransportista","type","text","placeholder","Denominaci\xf3n del destinatario","pInputText","",2,"width","100%"],["severity","error","text","Ingrese denominaci\xf3n del transportista",4,"ngIf"],["placeholder","Fecha de emisi\xf3n","formControlName","fechaInicioTraslado","dateFormat","dd/mm/yy",3,"locale"],["legend","Datos de transporte privado"],["formControlName","numeroPlacaVehiculo","type","text","placeholder","N\xfamero de placa veh\xedculo","pInputText","",2,"width","100%"],["severity","error","text","Ingrese n\xfamero de placa veh\xedculo",4,"ngIf"],["severity","error","text","M\xednimo 6 caracteres",4,"ngIf"],["severity","error","text","M\xe1ximo 8 caracteres",4,"ngIf"],["formControlName","tipoDocumentoIdentidadConductor",3,"options"],["severity","error","text","Ingrese tipo de documento del conductor",4,"ngIf"],["formControlName","numeroDocumentoIdentidadConductor","type","text","placeholder","N\xfamero de documento","pInputText","",2,"width","100%"],["severity","error","text","Ingrese n\xfamero de documento del conductor",4,"ngIf"],["formControlName","numeroLicencia","type","text","placeholder","N\xfamero de licencia de conducir","pInputText","",2,"width","100%"],["severity","error","text","Ingrese n\xfamero de licencia del conductor",4,"ngIf"],["severity","error","text","M\xednimo 9 caracteres",4,"ngIf"],["severity","error","text","M\xe1ximo 10 caracteres",4,"ngIf"],["legend","Bienes"],["pKeyFilter","num","placeholder","Peso bruto total","formControlName","pesoTotalBrutoBienes","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese peso bruto total",4,"ngIf"],[2,"margin-bottom","0.5rem","margin-top","0"],["type","button","pButton","","icon","fa fa-plus",1,"p-button-rounded",3,"click"],["formArrayName","items","styleClass","p-datatable-sm",3,"value","rows","responsive"],["pTemplate","header"],["pTemplate","body"],["severity","error","text","Agregue productos",4,"ngIf"],[1,"center"],["pButton","","type","button","label","Registrar gu\xeda",1,"p-button-rounded","p-button-success",2,"width","auto","margin-top","1.2rem","padding","8px 15px","font-size","20px",3,"click"],["severity","error","text","Ingrese tipo de Emis\xedon"],["severity","error","text","Ingrese Serie"],["severity","error","text","Ingrese n\xfamero"],["severity","error","text","Ingrese fecha"],["severity","error","text","Ingrese tipo de transporte"],["placeholder","Descripci\xf3n motivo traslado","formControlName","descripcionMotivoTraslado","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese descripci\xf3n motivo traslado",4,"ngIf"],["severity","error","text","Ingrese descripci\xf3n motivo traslado"],["placeholder","N\xfamero","formControlName","numeracionDAM","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese Numeraci\xf3n DAM",4,"ngIf"],["severity","error","text","Ingrese Numeraci\xf3n DAM"],["severity","error","text","Ingrese valor"],["formControlName","serieBaja","type","text","placeholder","Serie de gu\xeda a anular","pInputText","",2,"width","100%"],["severity","error","text","Ingrese serie",4,"ngIf"],["severity","error","text","Ingrese serie"],["formControlName","numeroBaja","type","text","placeholder","N\xfamero de gu\xeda a anular","pInputText","",2,"width","100%"],["severity","error","text","Ingrese tipo de documento del destinatario"],["severity","error","text","Ingrese n\xfamero de documento del destinatario"],["severity","error","text","Ingrese denominaci\xf3n del destinatario"],["legend","Proveedor",1,"m-4"],["formControlName","tipoDocumentoIdentidadTercero",3,"options"],["severity","error","text","Ingrese tipo de documento del proveedor",4,"ngIf"],["formControlName","numeroDocumentoIdentidadTercero","type","text","placeholder","N\xfamero documento proveedor","pInputText","",2,"width","100%",3,"input"],["severity","error","text","Ingrese n\xfamero de documento del proveedor",4,"ngIf"],["formControlName","denominacionTercero","type","text","placeholder","Denominaci\xf3n del proveedor","pInputText","",2,"width","100%"],["severity","error","text","Ingrese denominaci\xf3n del proveedor",4,"ngIf"],["severity","error","text","Ingrese tipo de documento del proveedor"],["severity","error","text","Ingrese n\xfamero de documento del proveedor"],["severity","error","text","Ingrese denominaci\xf3n del proveedor"],["severity","error","text","Ingrese ubigeo punto partida"],["severity","error","text","Ciudad de ubigeo inv\xe1lido"],["severity","error","text","Ingrese direcci\xf3n punto partida"],["severity","error","text","Ingrese ubigeo punto llegada"],["severity","error","text","Ingrese direcci\xf3n punto llegada"],["placeholder","C\xf3digo puerto","formControlName","codigoPuerto","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese el c\xf3digo de puerto",4,"ngIf"],["severity","error","text","Ingrese el c\xf3digo de puerto"],["placeholder","N\xfamero contenedor","formControlName","numeroContenedor","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese el n\xfamero contenedor",4,"ngIf"],["severity","error","text","Ingrese el n\xfamero contenedor"],["placeholder","N\xfamero bultos","formControlName","numeroBultos","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese el n\xfamero de bultos",4,"ngIf"],["severity","error","text","Ingrese el n\xfamero de bultos"],["severity","error","text","Ingrese tipo de documento del transportista"],["severity","error","text","Ingrese n\xfamero de documento del transportista"],["severity","error","text","Ingrese denominaci\xf3n del transportista"],["severity","error","text","Ingrese n\xfamero de placa veh\xedculo"],["severity","error","text","M\xednimo 6 caracteres"],["severity","error","text","M\xe1ximo 8 caracteres"],["severity","error","text","Ingrese tipo de documento del conductor"],["severity","error","text","Ingrese n\xfamero de documento del conductor"],["severity","error","text","Ingrese n\xfamero de licencia del conductor"],["severity","error","text","M\xednimo 9 caracteres"],["severity","error","text","M\xe1ximo 10 caracteres"],["severity","error","text","Ingrese peso bruto total"],[2,"width","30%"],[2,"width","20%"],[3,"formGroupName"],[1,"p-column-title"],["placeholder","C\xf3digo","formControlName","codigo","type","text","pInputText","",2,"width","100%"],["field","nombre","formControlName","descripcion","placeholder","Art\xedculo",3,"suggestions","size","minLength","onSelect","completeMethod"],["severity","error","text","Ingrese descripci\xf3n",4,"ngIf"],["formControlName","detalle"],["formControlName","codigoUnidadMedida",3,"options"],["severity","error","text","Ingrese unidad de medida",4,"ngIf"],["placeholder","Cantidad","formControlName","cantidad","type","text","pKeyFilter","num","pInputText","",2,"width","100%"],["severity","error","text","Ingrese cantidad",4,"ngIf"],["severity","error","text","M\xednimo inv\xe1lido",4,"ngIf"],[1,"space-buttons"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Eliminar","tooltipPosition","top",1,"p-button-danger",2,"margin-left","0.1em","margin-right","0.1em",3,"click"],[4,"ngIf"],["severity","error","text","Ingrese descripci\xf3n"],["severity","error","text","Ingrese unidad de medida"],["severity","error","text","Ingrese cantidad"],["severity","error","text","M\xednimo inv\xe1lido"],["severity","error","text","Agregue productos"]],template:function(i,t){1&i&&(e.TgZ(0,"p-card"),e.TgZ(1,"form",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"p-fieldset",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"label",6),e._uU(8,"Tipo"),e.qZA(),e.TgZ(9,"p-dropdown",7),e.NdJ("onChange",function(){return t.getSeries()}),e.qZA(),e.YNc(10,Ct,1,0,"p-message",8),e.qZA(),e.TgZ(11,"div",5),e.TgZ(12,"label",6),e._uU(13,"Serie (*)"),e.qZA(),e.TgZ(14,"p-dropdown",9),e.NdJ("onChange",function(){return t.onSelectSerie()}),e.qZA(),e.YNc(15,It,1,0,"p-message",10),e.qZA(),e.TgZ(16,"div",5),e.TgZ(17,"label",6),e._uU(18,"Numero (*)"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,xt,1,0,"p-message",12),e.qZA(),e.TgZ(21,"div",5),e.TgZ(22,"label",6),e._uU(23,"Fecha (*)"),e.qZA(),e._UZ(24,"p-calendar",13),e.YNc(25,bt,1,0,"p-message",14),e.qZA(),e.TgZ(26,"div",5),e.TgZ(27,"label",6),e._uU(28,"Tipo de transporte (*)"),e.qZA(),e.TgZ(29,"p-selectButton",15),e.NdJ("onChange",function(){return t.loadAditionalsTransporteFormValidate()}),e.qZA(),e.YNc(30,Dt,1,0,"p-message",16),e.qZA(),e.TgZ(31,"div",5),e.TgZ(32,"label",6),e._uU(33,"Motivo del traslado (*)"),e.qZA(),e.TgZ(34,"p-dropdown",17),e.NdJ("onChange",function(){return t.changeMotivoTraslado()}),e.qZA(),e.qZA(),e.YNc(35,qt,5,1,"div",18),e.YNc(36,Pt,5,1,"div",18),e.TgZ(37,"div",5),e.TgZ(38,"label",6),e._uU(39,"Anular una gu\xeda?"),e.qZA(),e.TgZ(40,"div"),e.TgZ(41,"p-toggleButton",19),e.NdJ("onChange",function(){return t.changeAnularGuia()}),e.qZA(),e.YNc(42,Vt,1,0,"p-message",20),e.qZA(),e.qZA(),e.YNc(43,Mt,5,1,"div",18),e.YNc(44,St,5,1,"div",18),e.TgZ(45,"div",21),e.TgZ(46,"label",6),e._uU(47,"Observaci\xf3n"),e.qZA(),e._UZ(48,"input",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",2),e.TgZ(50,"p-fieldset",23),e.TgZ(51,"div",4),e.TgZ(52,"div",24),e.TgZ(53,"label",6),e._uU(54,"Tipo doc."),e.TgZ(55,"span"),e._uU(56,"(*)"),e.qZA(),e.qZA(),e._UZ(57,"p-dropdown",25),e.YNc(58,Ft,1,0,"p-message",26),e.qZA(),e.TgZ(59,"div",24),e.TgZ(60,"label",6),e._uU(61,"Num. doc. (*)"),e.qZA(),e.TgZ(62,"div"),e.TgZ(63,"p-autoComplete",27),e.NdJ("onKeyUp",function(a){return t.keyUpNumeroDocumentoDestinatario(a)})("onSelect",function(a){return t.onSelectDestinatario(a)})("completeMethod",function(a){return t.filterCustomerByNumeroDocumento(a)}),e.YNc(64,Gt,1,2,"ng-template",28),e.qZA(),e.qZA(),e.YNc(65,wt,1,0,"p-message",29),e.qZA(),e.TgZ(66,"div",24),e.TgZ(67,"label",6),e._uU(68,"Nombre (*)"),e.qZA(),e._UZ(69,"input",30),e.YNc(70,Jt,1,0,"p-message",31),e.qZA(),e.qZA(),e.qZA(),e.YNc(71,Lt,19,7,"p-fieldset",32),e.TgZ(72,"p-fieldset",33),e.TgZ(73,"div",4),e.TgZ(74,"div",24),e.TgZ(75,"label",6),e._uU(76,"Tipo"),e.qZA(),e._UZ(77,"p-dropdown",34),e.qZA(),e.TgZ(78,"div",24),e.TgZ(79,"label",6),e._uU(80,"Serie/N\xfamero"),e.qZA(),e._UZ(81,"input",35),e.qZA(),e.TgZ(82,"div",24),e.TgZ(83,"label",6),e._uU(84,"Descripci\xf3n"),e.qZA(),e._UZ(85,"input",36),e.qZA(),e.TgZ(86,"div",24),e.TgZ(87,"label",6),e._uU(88,"Ruc doc. rel."),e.qZA(),e._UZ(89,"input",37),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(90,"div",2),e.TgZ(91,"p-fieldset",38),e.TgZ(92,"div",4),e.TgZ(93,"div",2),e.TgZ(94,"label",6),e._uU(95,"Ciudad punto partida (*)"),e.qZA(),e.TgZ(96,"div"),e.TgZ(97,"p-autoComplete",39),e.NdJ("onSelect",function(a){return t.onSelectCiudadPuntoPartida(a)})("completeMethod",function(a){return t.filterCitiesByNombre(a)}),e.YNc(98,Bt,1,2,"ng-template",28),e.qZA(),e.qZA(),e.YNc(99,Ot,1,0,"p-message",40),e.YNc(100,kt,1,0,"p-message",41),e.qZA(),e.TgZ(101,"div",2),e.TgZ(102,"label",6),e._uU(103,"Direcci\xf3n punto partida (*)"),e.qZA(),e._UZ(104,"input",42),e.YNc(105,$t,1,0,"p-message",43),e.qZA(),e.TgZ(106,"div",2),e.TgZ(107,"label",6),e._uU(108,"Ciudad punto llegada (*)"),e.qZA(),e.TgZ(109,"div"),e.TgZ(110,"p-autoComplete",44),e.NdJ("onSelect",function(a){return t.onSelectCiudadPuntoLlegada(a)})("completeMethod",function(a){return t.filterCitiesByNombre(a)}),e.YNc(111,jt,1,2,"ng-template",28),e.qZA(),e.qZA(),e.YNc(112,zt,1,0,"p-message",45),e.YNc(113,Ht,1,0,"p-message",41),e.qZA(),e.TgZ(114,"div",2),e.TgZ(115,"label",6),e._uU(116,"Direcci\xf3n punto llegada (*)"),e.qZA(),e._UZ(117,"input",46),e.YNc(118,Kt,1,0,"p-message",47),e.qZA(),e.YNc(119,Xt,5,1,"div",48),e.YNc(120,to,5,1,"div",48),e.YNc(121,io,5,1,"div",48),e.qZA(),e.qZA(),e.qZA(),e.TgZ(122,"div",49),e.TgZ(123,"p-fieldset",50),e.TgZ(124,"div",1),e.TgZ(125,"div",2),e.TgZ(126,"label",6),e._uU(127,"Tip. doc. transportista"),e.TgZ(128,"span"),e._uU(129,"(*)"),e.qZA(),e.qZA(),e._UZ(130,"p-dropdown",51),e.YNc(131,no,1,0,"p-message",52),e.qZA(),e.TgZ(132,"div",2),e.TgZ(133,"label",6),e._uU(134,"Num. doc. transportista (*)"),e.qZA(),e.TgZ(135,"input",53),e.NdJ("input",function(){return t.changeNumeroDocumento(t.mf.get("numeroDocumentoIdentidadTransportista").value,t.mf.get("tipoDocumentoIdentidadTransportista").value,t.mf.get("denominacionTransportista"))}),e.qZA(),e.YNc(136,ao,1,0,"p-message",54),e.qZA(),e.TgZ(137,"div",2),e.TgZ(138,"label",6),e._uU(139,"Nombre transportista (*)"),e.qZA(),e._UZ(140,"input",55),e.YNc(141,ro,1,0,"p-message",56),e.qZA(),e.TgZ(142,"div",2),e.TgZ(143,"label",6),e._uU(144,"Fecha inicio de traslado (*)"),e.qZA(),e._UZ(145,"p-calendar",57),e.YNc(146,so,1,0,"p-message",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(147,"div",49),e.TgZ(148,"p-fieldset",58),e.TgZ(149,"div",1),e.TgZ(150,"div",2),e.TgZ(151,"label",6),e._uU(152,"Veh\xedculo"),e.TgZ(153,"span"),e._uU(154,"(*)"),e.qZA(),e.qZA(),e._UZ(155,"input",59),e.YNc(156,uo,1,0,"p-message",60),e.YNc(157,lo,1,0,"p-message",61),e.YNc(158,mo,1,0,"p-message",62),e.qZA(),e.TgZ(159,"div",2),e.TgZ(160,"label",6),e._uU(161,"Tip. doc. conductor"),e.TgZ(162,"span"),e._uU(163,"(*)"),e.qZA(),e.qZA(),e._UZ(164,"p-dropdown",63),e.YNc(165,co,1,0,"p-message",64),e.qZA(),e.TgZ(166,"div",2),e.TgZ(167,"label",6),e._uU(168,"Num. doc. conductor (*)"),e.qZA(),e._UZ(169,"input",65),e.YNc(170,po,1,0,"p-message",66),e.qZA(),e.TgZ(171,"div",2),e.TgZ(172,"label",6),e._uU(173,"Num. Licencia (*)"),e.qZA(),e._UZ(174,"input",67),e.YNc(175,go,1,0,"p-message",68),e.YNc(176,_o,1,0,"p-message",69),e.YNc(177,fo,1,0,"p-message",70),e.qZA(),e.TgZ(178,"div",2),e.TgZ(179,"label",6),e._uU(180,"Fecha inicio de traslado (*)"),e.qZA(),e._UZ(181,"p-calendar",57),e.YNc(182,ho,1,0,"p-message",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(183,"div",21),e.TgZ(184,"p-fieldset",71),e.TgZ(185,"div",4),e.TgZ(186,"div",21),e.TgZ(187,"label",6),e._uU(188,"Peso bruto total (Kilogramos) (*)"),e.qZA(),e._UZ(189,"input",72),e.YNc(190,To,1,0,"p-message",73),e.qZA(),e.TgZ(191,"div",21),e.TgZ(192,"div",74),e.TgZ(193,"button",75),e.NdJ("click",function(){return t.addItem()}),e.qZA(),e.qZA(),e.TgZ(194,"p-table",76),e.YNc(195,Zo,13,0,"ng-template",77),e.YNc(196,Do,31,12,"ng-template",78),e.qZA(),e.YNc(197,yo,1,0,"p-message",79),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(198,"div",21),e.TgZ(199,"div",80),e.TgZ(200,"button",81),e.NdJ("click",function(){return t.registrarGuia()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("formGroup",t.mf),e.xp6(8),e.Akn(e.DdM(86,T)),e.Q6J("options",t.listas.tipoGuia),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoComprobante").touched&&(null==t.mf.get("tipoComprobante").errors?null:t.mf.get("tipoComprobante").errors.required)),e.xp6(4),e.Akn(e.DdM(87,T)),e.Q6J("options",t.series),e.xp6(1),e.Q6J("ngIf",t.mf.get("serie").touched&&(null==t.mf.get("serie").errors?null:t.mf.get("serie").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("numero").touched&&(null==t.mf.get("numero").errors?null:t.mf.get("numero").errors.required)),e.xp6(4),e.Akn(e.DdM(88,T)),e.Q6J("locale",t.listas.calendarEs),e.xp6(1),e.Q6J("ngIf",t.mf.get("fechaEmision").touched&&(null==t.mf.get("fechaEmision").errors?null:t.mf.get("fechaEmision").errors.required)),e.xp6(4),e.Q6J("options",t.listas.tiposTransporte),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoTransporte").touched&&(null==t.mf.get("tipoTransporte").errors?null:t.mf.get("tipoTransporte").errors.required)),e.xp6(4),e.Akn(e.DdM(89,T)),e.Q6J("options",t.listas.motivosTraslado),e.xp6(1),e.Q6J("ngIf","13"==t.mf.get("motivoTraslado").value),e.xp6(1),e.Q6J("ngIf","08"==t.mf.get("motivoTraslado").value),e.xp6(5),e.Akn(e.DdM(90,qo)),e.xp6(1),e.Q6J("ngIf",t.mf.get("anularGuia").touched&&(null==t.mf.get("anularGuia").errors?null:t.mf.get("anularGuia").errors.required)),e.xp6(1),e.Q6J("ngIf",t.mf.get("anularGuia").value),e.xp6(1),e.Q6J("ngIf",t.mf.get("anularGuia").value),e.xp6(13),e.Akn(e.DdM(91,T)),e.Q6J("options",t.listas.tiposDocumentoIdentidad),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoDocumentoIdentidadDestinatario").touched&&(null==t.mf.get("tipoDocumentoIdentidadDestinatario").errors?null:t.mf.get("tipoDocumentoIdentidadDestinatario").errors.required)),e.xp6(5),e.Q6J("suggestions",t.filteredCustomers)("size",30)("minLength",1),e.xp6(2),e.Q6J("ngIf",t.mf.get("numeroDocumentoIdentidadDestinatario").touched&&(null==t.mf.get("numeroDocumentoIdentidadDestinatario").errors?null:t.mf.get("numeroDocumentoIdentidadDestinatario").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("denominacionDestinatario").touched&&(null==t.mf.get("denominacionDestinatario").errors?null:t.mf.get("denominacionDestinatario").errors.required)),e.xp6(1),e.Q6J("ngIf","08"===t.mf.get("motivoTraslado").value||"02"===t.mf.get("motivoTraslado").value||"04"===t.mf.get("motivoTraslado").value),e.xp6(6),e.Akn(e.DdM(92,T)),e.Q6J("options",t.listas.tipoComprobantesRelacionadosGuia),e.xp6(20),e.Q6J("suggestions",t.filteredCities)("size",30)("minLength",1),e.xp6(2),e.Q6J("ngIf",t.mf.get("ubigeoPuntoPartida").touched&&(null==t.mf.get("ubigeoPuntoPartida").errors?null:t.mf.get("ubigeoPuntoPartida").errors.required)),e.xp6(1),e.Q6J("ngIf",t.mf.get("ubigeoPuntoPartida").touched&&(null==t.mf.get("ubigeoPuntoPartida").errors?null:t.mf.get("ubigeoPuntoPartida").errors.ubigeo)),e.xp6(5),e.Q6J("ngIf",t.mf.get("direccionPuntoPartida").touched&&(null==t.mf.get("direccionPuntoPartida").errors?null:t.mf.get("direccionPuntoPartida").errors.required)),e.xp6(5),e.Q6J("suggestions",t.filteredCities)("size",30)("minLength",1),e.xp6(2),e.Q6J("ngIf",t.mf.get("ubigeoPuntoLlegada").touched&&(null==t.mf.get("ubigeoPuntoLlegada").errors?null:t.mf.get("ubigeoPuntoLlegada").errors.required)),e.xp6(1),e.Q6J("ngIf",t.mf.get("ubigeoPuntoLlegada").touched&&(null==t.mf.get("ubigeoPuntoLlegada").errors?null:t.mf.get("ubigeoPuntoLlegada").errors.ubigeo)),e.xp6(5),e.Q6J("ngIf",t.mf.get("direccionPuntoLlegada").touched&&(null==t.mf.get("direccionPuntoLlegada").errors?null:t.mf.get("direccionPuntoLlegada").errors.required)),e.xp6(1),e.Q6J("ngIf","08"===t.mf.get("motivoTraslado").value||"09"===t.mf.get("motivoTraslado").value),e.xp6(1),e.Q6J("ngIf","08"===t.mf.get("motivoTraslado").value||"09"===t.mf.get("motivoTraslado").value),e.xp6(1),e.Q6J("ngIf","08"===t.mf.get("motivoTraslado").value||"09"===t.mf.get("motivoTraslado").value),e.xp6(1),e.Q6J("hidden","02"==t.mf.get("tipoTransporte").value),e.xp6(8),e.Akn(e.DdM(93,T)),e.Q6J("options",t.listas.tiposDocumentoIdentidad),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoDocumentoIdentidadTransportista").touched&&(null==t.mf.get("tipoDocumentoIdentidadTransportista").errors?null:t.mf.get("tipoDocumentoIdentidadTransportista").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("numeroDocumentoIdentidadTransportista").touched&&(null==t.mf.get("numeroDocumentoIdentidadTransportista").errors?null:t.mf.get("numeroDocumentoIdentidadTransportista").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("denominacionTransportista").touched&&(null==t.mf.get("denominacionTransportista").errors?null:t.mf.get("denominacionTransportista").errors.required)),e.xp6(4),e.Akn(e.DdM(94,T)),e.Q6J("locale",t.listas.calendarEs),e.xp6(1),e.Q6J("ngIf",t.mf.get("fechaInicioTraslado").touched&&(null==t.mf.get("fechaInicioTraslado").errors?null:t.mf.get("fechaInicioTraslado").errors.required)),e.xp6(1),e.Q6J("hidden","01"==t.mf.get("tipoTransporte").value),e.xp6(9),e.Q6J("ngIf",t.mf.get("numeroPlacaVehiculo").touched&&(null==t.mf.get("numeroPlacaVehiculo").errors?null:t.mf.get("numeroPlacaVehiculo").errors.required)),e.xp6(1),e.Q6J("ngIf",t.mf.get("numeroPlacaVehiculo").touched&&(null==t.mf.get("numeroPlacaVehiculo").errors?null:t.mf.get("numeroPlacaVehiculo").errors.minLength)),e.xp6(1),e.Q6J("ngIf",t.mf.get("numeroPlacaVehiculo").touched&&(null==t.mf.get("numeroPlacaVehiculo").errors?null:t.mf.get("numeroPlacaVehiculo").errors.maxLength)),e.xp6(6),e.Akn(e.DdM(95,T)),e.Q6J("options",t.listas.tiposDocumentoIdentidad),e.xp6(1),e.Q6J("ngIf",t.mf.get("tipoDocumentoIdentidadConductor").touched&&(null==t.mf.get("tipoDocumentoIdentidadConductor").errors?null:t.mf.get("tipoDocumentoIdentidadConductor").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("numeroDocumentoIdentidadConductor").touched&&(null==t.mf.get("numeroDocumentoIdentidadConductor").errors?null:t.mf.get("numeroDocumentoIdentidadConductor").errors.required)),e.xp6(5),e.Q6J("ngIf",t.mf.get("numeroLicencia").touched&&(null==t.mf.get("numeroLicencia").errors?null:t.mf.get("numeroLicencia").errors.required)),e.xp6(1),e.Q6J("ngIf",t.mf.get("numeroLicencia").touched&&(null==t.mf.get("numeroLicencia").errors?null:t.mf.get("numeroLicencia").errors.minLength)),e.xp6(1),e.Q6J("ngIf",t.mf.get("numeroLicencia").touched&&(null==t.mf.get("numeroLicencia").errors?null:t.mf.get("numeroLicencia").errors.maxLength)),e.xp6(4),e.Akn(e.DdM(96,T)),e.Q6J("locale",t.listas.calendarEs),e.xp6(1),e.Q6J("ngIf",t.mf.get("fechaInicioTraslado").touched&&(null==t.mf.get("fechaInicioTraslado").errors?null:t.mf.get("fechaInicioTraslado").errors.required)),e.xp6(8),e.Q6J("ngIf",t.mf.get("pesoTotalBrutoBienes").touched&&(null==t.mf.get("pesoTotalBrutoBienes").errors?null:t.mf.get("pesoTotalBrutoBienes").errors.required)),e.xp6(4),e.Q6J("value",t.modelFormItems.controls)("rows",10)("responsive",!0),e.xp6(3),e.Q6J("ngIf",t.mf.get("items").touched&&(null==t.mf.get("items").errors?null:t.mf.get("items").errors.minLengthArray)))},directives:[k.Z,d._Y,d.JL,d.sg,lt.p,z.Lt,d.JJ,d.u,g.O5,mt.q,d.Fj,S.o,j.f,$.UN,ct.CO,pt.Qc,v.jx,gt.Fr,F.Hq,U.iA,d.CE,d.x0,At,H.u],styles:[""]}),(0,f.gn)([(0,q.Ph)(N.Z.getConfig)],C.prototype,"configCompany$",void 0),(0,f.gn)([(0,q.Ph)(N.Z.getOffice)],C.prototype,"puntoVenta$",void 0);const No=[{path:"",pathMatch:"full",redirectTo:"ver-guias"},{path:"ver-guias",component:y,data:{breadcrumb:[{label:"Ventas"},{label:"Gu\xeda de remisi\xf3n"},{label:"Ver gu\xedas"}]}},{path:"emitir-guia",component:C,data:{breadcrumb:[{label:"Ventas"},{label:"Gu\xeda de remisi\xf3n"},{label:"Emitir gu\xeda"}]}},{path:"emitir-guia/venta/:idTicket",component:C,data:{breadcrumb:[{label:"Ventas"},{label:"Gu\xeda de remisi\xf3n"},{label:"Emitir gu\xeda"}]}},{path:"emitir-guia/traslado/:idTransfer",component:C,data:{breadcrumb:[{label:"Ventas"},{label:"Gu\xeda de remisi\xf3n"},{label:"Emitir gu\xeda"}]}}];let Po=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.Bz.forChild(No)],s.Bz]}),o})();var Vo=r(20958),Uo=r(89400);let Mo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[O.xA],imports:[[Vo.m,Po,x.i,Uo.z]]}),o})()},23582:(M,I,r)=>{r.d(I,{U:()=>s});var x=r(5e3);let s=(()=>{class f{transform(c,D){return"ACEPT"==c?"Aceptado":"RECHA"==c?"Rechazado":"ANULA"==c?"Anulado":"N_ENV"==c?"No enviado":""}}return f.\u0275fac=function(c){return new(c||f)},f.\u0275pipe=x.Yjl({name:"estadoSunat",type:f,pure:!0}),f})()}}]);