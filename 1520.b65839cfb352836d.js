"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[1520],{93008:(y,f,i)=>{i.d(f,{$:()=>d});var o=i(5e3),s=i(98952),p=i(59783);function u(l,g){1&l&&(o.TgZ(0,"tr"),o.TgZ(1,"th"),o._uU(2,"Dia"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Hora de apertura"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Hora de cierre"),o.qZA(),o.qZA())}function v(l,g){if(1&l&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.qZA()),2&l){const m=g.$implicit;o.xp6(2),o.Oqu(m.dia),o.xp6(2),o.Oqu(m.horaInicio),o.xp6(2),o.Oqu(m.horaFin)}}let d=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-horario-view"]],inputs:{horario:"horario"},decls:7,vars:2,consts:[[2,"margin-top","0"],[1,"first"],[3,"value"],["pTemplate","header"],["pTemplate","body"]],template:function(m,Z){1&m&&(o.TgZ(0,"h1",0),o._uU(1),o.qZA(),o.TgZ(2,"h3",1),o._uU(3,"D\xedas de atenci\xf3n"),o.qZA(),o.TgZ(4,"p-table",2),o.YNc(5,u,7,0,"ng-template",3),o.YNc(6,v,7,3,"ng-template",4),o.qZA()),2&m&&(o.xp6(1),o.hij(" ",Z.horario.nombre,""),o.xp6(3),o.Q6J("value",Z.horario.items))},directives:[s.iA,p.jx],styles:[""]}),l})()},43453:(y,f,i)=>{i.d(f,{W:()=>w});var o=i(5e3),s=i(93075),p=i(82817),u=i(59783),v=i(42638),d=i(45330),l=i(74297),g=i(31424),m=i(69808),Z=i(43724),c=i(14036),T=i(40845),_=i(98952),I=i(75652),A=i(4119);function F(r,a){1&r&&o._UZ(0,"p-message",15)}function C(r,a){1&r&&(o.TgZ(0,"tr"),o.TgZ(1,"th"),o._uU(2,"D\xeda"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Hora de apertura"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Hora de cierre"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Acciones"),o.qZA(),o.qZA())}function E(r,a){1&r&&o._UZ(0,"p-message",25)}function M(r,a){1&r&&o._UZ(0,"p-message",26)}function N(r,a){if(1&r){const e=o.EpF();o.TgZ(0,"tr",17),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td",18),o._UZ(4,"p-calendar",19),o.YNc(5,E,1,0,"p-message",20),o.qZA(),o.TgZ(6,"td",18),o._UZ(7,"p-calendar",21),o.YNc(8,M,1,0,"p-message",22),o.qZA(),o.TgZ(9,"td",23),o.TgZ(10,"button",24),o.NdJ("click",function(){o.CHM(e);const n=o.oxw().rowIndex;return o.oxw().deleteItemDayForm(n)}),o.qZA(),o.qZA(),o.qZA()}if(2&r){const e=o.oxw(),n=e.$implicit;o.Q6J("formGroupName",e.rowIndex),o.xp6(2),o.hij(" ",n.value.dia," "),o.xp6(2),o.Q6J("timeOnly",!0),o.xp6(1),o.Q6J("ngIf",n.get("horaInicio").touched&&(null==n.get("horaInicio").errors?null:n.get("horaInicio").errors.required)),o.xp6(2),o.Q6J("timeOnly",!0),o.xp6(1),o.Q6J("ngIf",n.get("horaFin").touched&&(null==n.get("horaFin").errors?null:n.get("horaFin").errors.required))}}function S(r,a){1&r&&o.YNc(0,N,11,6,"tr",16),2&r&&o.Q6J("ngIf",!a.$implicit.value.eliminado)}let x=(()=>{class r{constructor(e,t,n,h,b,H){this.fb=e,this.messageService=t,this.openingHourService=n,this.confirmationService=h,this.ref=b,this.config=H}ngOnInit(){this.builderForm(),this.loadModelForEdit(),this.days=[{label:"Domingo",value:"DOMINGO"},{label:"Lunes",value:"LUNES"},{label:"Martes",value:"MARTES"},{label:"Miercoles",value:"MIERCOLES"},{label:"Jueves",value:"JUEVES"},{label:"Viernes",value:"VIERNES"},{label:"Sabado",value:"SABADO"}]}builderForm(){this.modelForm=this.fb.group({nombre:[void 0,[s.kI.required]],dia:["LUNES"],items:this.fb.array([])})}registrar(){(0,p.c2)(this.modelForm),this.modelForm.valid?this.confirmationService.confirm({message:`\xbfEst\xe1 seguro de ${this.isEdit?"actualizar":"registrar"} el horario actual?`,accept:()=>{this.formToModel(),(this.isEdit?this.openingHourService.update(this.model.id,this.model):this.openingHourService.save(this.model)).subscribe(e=>{this.ref.close(e)})},acceptLabel:"Si",rejectLabel:"No"}):this.messageService.add({severity:"error",summary:"Error",detail:"Complete campos obligatorios (*)"})}cancel(){this.ref.close()}get isEdit(){return this.config.data.isEdit}get titleButtonAction(){return this.isEdit?"Actualizar horario":"Registrar horario"}get modelFormDays(){return this.modelForm.get("items")}addDay(){const e=this.modelForm.get("dia").value;this.addItemDayForm({eliminado:!1,dia:e})}addItemDayForm(e){this.modelFormDays.controls.find(t=>t.get("dia").value===e.dia)?this.messageService.add({severity:"warn",summary:"Mensaje",detail:`El dia ${e.dia} ya est\xe1 agregado al horario.`}):this.modelFormDays.push(this.createItemDayForm(e))}deleteItemDayForm(e){this.modelFormDays.at(e)&&this.modelFormDays.at(e).value.id?this.modelFormDays.at(e).patchValue({eliminado:!0}):this.modelFormDays.removeAt(e)}createItemDayForm(e){return this.fb.group({id:[e.id,[]],dia:[e.dia,[s.kI.required]],horaInicio:[e.horaInicio,[s.kI.required]],horaFin:[e.horaFin,[s.kI.required]],eliminado:[!1,[]]})}formToModel(){const e=this.modelForm.getRawValue();this.model||(this.model={}),this.model.nombre=e.nombre,this.model.items=[],e.items.forEach(t=>{t.horaInicio=(0,p.J6)(t.horaInicio),t.horaFin=(0,p.J6)(t.horaFin),this.model.items.push(t)})}modelToForm(e){this.model=e,this.modelForm.patchValue({nombre:e.nombre});const t=this.modelFormDays;e.items.forEach(n=>{n.horaInicio=(0,p.lV)(n.horaInicio),n.horaFin=(0,p.lV)(n.horaFin),t.push(this.createItemDayForm(n))})}loadModelForEdit(){const e=this.config.data.id;e&&setTimeout(()=>this.openingHourService.findById(e).subscribe(t=>{this.model=t,this.modelToForm(t)}))}}return r.\u0275fac=function(e){return new(e||r)(o.Y36(s.qu),o.Y36(u.ez),o.Y36(v.T),o.Y36(u.YP),o.Y36(d.E7),o.Y36(d.S))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-horario"]],decls:19,vars:7,consts:[["novalidate","",3,"formGroup"],[1,"grid"],[1,"col-12"],[1,"label-form"],["formControlName","nombre","type","text","pInputText","",2,"width","100%"],["severity","error","text","Ingrese el nombre del horario",4,"ngIf"],[1,"col-6"],["formControlName","dia","placeholder","Seleccionar un d\xeda",3,"options"],["icon","pi pi-plus","pButton","","type","button","label","Agregar d\xeda",3,"click"],["formArrayName","items",3,"value","rows","responsive"],["pTemplate","header"],["pTemplate","body"],[1,"col-12","space-buttons",2,"text-align","center"],["pButton","","type","button","label","Cancelar",1,"p-button-secondary","lrm-1",2,"margin-right","0.4rem",3,"click"],["pButton","","type","button",1,"lrm-1",3,"label","click"],["severity","error","text","Ingrese el nombre del horario"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["pEditableColumn",""],["formControlName","horaInicio",3,"timeOnly"],["severity","error","text","Ingrese hora de apertura",4,"ngIf"],["formControlName","horaFin",3,"timeOnly"],["severity","error","text","Ingrese hora de cierre",4,"ngIf"],[2,"text-align","center"],["pTooltip","Eliminar","pButton","","type","button","icon","pi pi-trash",1,"p-button-danger","lrm-1",3,"click"],["severity","error","text","Ingrese hora de apertura"],["severity","error","text","Ingrese hora de cierre"]],template:function(e,t){1&e&&(o.TgZ(0,"p-card"),o.TgZ(1,"form",0),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"label",3),o._uU(5,"Nombre (*)"),o.qZA(),o._UZ(6,"input",4),o.YNc(7,F,1,0,"p-message",5),o.qZA(),o.TgZ(8,"div",6),o._UZ(9,"p-dropdown",7),o.qZA(),o.TgZ(10,"div",6),o.TgZ(11,"button",8),o.NdJ("click",function(){return t.addDay()}),o.qZA(),o.qZA(),o.TgZ(12,"div",2),o.TgZ(13,"p-table",9),o.YNc(14,C,9,0,"ng-template",10),o.YNc(15,S,1,1,"ng-template",11),o.qZA(),o.qZA(),o.TgZ(16,"div",12),o.TgZ(17,"button",13),o.NdJ("click",function(){return t.cancel()}),o.qZA(),o.TgZ(18,"button",14),o.NdJ("click",function(){return t.registrar()}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("formGroup",t.modelForm),o.xp6(6),o.Q6J("ngIf",t.modelForm.get("nombre").touched&&(null==t.modelForm.get("nombre").errors?null:t.modelForm.get("nombre").errors.required)),o.xp6(2),o.Q6J("options",t.days),o.xp6(4),o.Q6J("value",t.modelFormDays.controls)("rows",10)("responsive",!0),o.xp6(5),o.Q6J("label",t.titleButtonAction))},directives:[l.Z,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,g.o,m.O5,Z.q,c.Lt,T.Hq,_.iA,s.CE,u.jx,s.x0,_.Wq,I.f,A.u],styles:[""]}),r})();var D=i(47745),q=i(74202),J=i(93008);function O(r,a){if(1&r){const e=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"button",4),o.NdJ("click",function(){return o.CHM(e),o.oxw().openModalNewOpeningHour()}),o.qZA(),o.qZA()}}function U(r,a){if(1&r){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const n=o.oxw().$implicit;return o.oxw().selectOpeningHour(n)}),o.qZA()}}function Y(r,a){if(1&r){const e=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(e);const n=o.oxw().$implicit;return o.oxw().openModalEditOpeningHour(n)}),o.qZA()}}function B(r,a){if(1&r){const e=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){o.CHM(e);const n=o.oxw().$implicit;return o.oxw().confirmDelete(n)}),o.qZA()}}function Q(r,a){if(1&r&&(o.TgZ(0,"div",5),o.TgZ(1,"p-card"),o.TgZ(2,"div",0),o.TgZ(3,"div",2),o._UZ(4,"app-horario-view",6),o.qZA(),o.TgZ(5,"div",7),o.YNc(6,U,1,0,"button",8),o.YNc(7,Y,1,0,"button",9),o.YNc(8,B,1,0,"button",10),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r){const e=a.$implicit,t=o.oxw();o.xp6(4),o.Q6J("horario",e),o.xp6(2),o.Q6J("ngIf",t.isModal),o.xp6(1),o.Q6J("ngIf",!t.isModal),o.xp6(1),o.Q6J("ngIf",!t.isModal)}}let w=(()=>{class r{constructor(e,t,n,h,b,H){this.confirmationService=e,this.openingHourService=t,this.dialogService=n,this.messageService=h,this.breadcrumbService=b,this.route=H,this.selectHorario=new o.vpe}ngOnInit(){this.isModal||this.breadcrumbService.setItems((0,p.kn)(this.route)),this.loadOpeningHours()}loadOpeningHours(e){const t=[];e&&t.push(`nombre=${e}`),setTimeout(()=>this.openingHourService.findAll(t.join("&")).subscribe(n=>this.openingHours=n))}openModalNewOpeningHour(){this.dialogService.open(x,{data:{isEdit:!1},header:"Nuevo horario",width:"80%"}).onClose.subscribe(t=>{t&&(this.messageService.add({severity:"success",summary:"Registro de horario",detail:"Horario registrado correctamente."}),this.loadOpeningHours())})}openModalEditOpeningHour(e){this.dialogService.open(x,{data:{isEdit:!0,id:e.id},header:"Editar horario",width:"80%"}).onClose.subscribe(n=>{n&&(this.messageService.add({severity:"success",summary:"Registro de horario",detail:"Horario actualizado correctamente."}),this.loadOpeningHours())})}confirmDelete(e){this.confirmationService.confirm({message:"\xbfEst\xe1 seguro de eliminar este horario?",accept:()=>{this.openingHourService.delete(e.id).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Mensaje",detail:"Horario eliminado correctamente"}),this.loadOpeningHours()})},acceptLabel:"Si",rejectLabel:"No"})}selectOpeningHour(e){this.selectHorario.emit(e)}}return r.\u0275fac=function(e){return new(e||r)(o.Y36(u.YP),o.Y36(v.T),o.Y36(d.xA),o.Y36(u.ez),o.Y36(D.p),o.Y36(q.gz))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-horarios"]],inputs:{isModal:"isModal"},outputs:{selectHorario:"selectHorario"},decls:6,vars:2,consts:[[1,"grid"],["class","col-12",4,"ngIf"],[1,"col-12"],["class","col-6 md:col-4",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-plus","label","Nuevo horario",1,"lrm-1",3,"click"],[1,"col-6","md:col-4"],[3,"horario"],[1,"col-12","space-buttons"],["pButton","","type","button","class","lrm-1","icon","pi pi-check","pTooltip","Seleccionar horario",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-pencil","class","lrm-1","pTooltip","Editar",3,"click",4,"ngIf"],["pTooltip","Eliminar","class","p-button-danger lrm-1","pButton","","type","button","icon","pi pi-trash",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-check","pTooltip","Seleccionar horario",1,"lrm-1",3,"click"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Editar",1,"lrm-1",3,"click"],["pTooltip","Eliminar","pButton","","type","button","icon","pi pi-trash",1,"p-button-danger","lrm-1",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"p-card"),o.TgZ(1,"div",0),o.YNc(2,O,2,0,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"div",0),o.YNc(5,Q,9,4,"div",3),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngIf",!t.isModal),o.xp6(3),o.Q6J("ngForOf",t.openingHours))},directives:[l.Z,m.O5,T.Hq,m.sg,J.$,A.u],styles:[""]}),r})()},91520:(y,f,i)=>{i.r(f),i.d(f,{HorariosModule:()=>Z});var o=i(69808),s=i(20958),p=i(74202),u=i(54578),v=i(43453),d=i(5e3);const l=[{path:"",component:v.W,data:{breadcrumb:[{label:"Administraci\xf3n"},{label:"Horarios"}]},canActivate:[u.P]}];let g=(()=>{class c{}return c.\u0275fac=function(_){return new(_||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[[p.Bz.forChild(l)],p.Bz]}),c})();var m=i(45330);let Z=(()=>{class c{}return c.\u0275fac=function(_){return new(_||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({providers:[m.xA],imports:[[o.ez,s.m,g]]}),c})()}}]);